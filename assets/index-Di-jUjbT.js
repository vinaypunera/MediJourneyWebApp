const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Settings-B5oJsGFt.js","assets/save-yvd7DDQW.js","assets/download-FVtbD58L.js","assets/ReportDetail-kPk34xAJ.js","assets/PrintReportModal-C54Mscp6.js"])))=>i.map(i=>d[i]);
var eT=t=>{throw TypeError(t)};var Nv=(t,e,n)=>e.has(t)||eT("Cannot "+n);var Et=(t,e,n)=>(Nv(t,e,"read from private field"),n?n.call(t):e.get(t)),Sr=(t,e,n)=>e.has(t)?eT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ri=(t,e,n,i)=>(Nv(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),wr=(t,e,n)=>(Nv(t,e,"access private method"),n);var tT=(t,e,n,i)=>({set _(r){ri(t,e,r,n)},get _(){return Et(t,e,i)}});function e3(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var qoe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Iv={exports:{}},Hu={};var nT;function t3(){if(nT)return Hu;nT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return Hu.Fragment=e,Hu.jsx=n,Hu.jsxs=n,Hu}var iT;function n3(){return iT||(iT=1,Iv.exports=t3()),Iv.exports}var k=n3(),Dv={exports:{}},Oe={};var rT;function i3(){if(rT)return Oe;rT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function x(L,K,ie){this.props=L,this.context=K,this.refs=E,this.updater=ie||S}x.prototype.isReactComponent={},x.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=x.prototype;function T(L,K,ie){this.props=L,this.context=K,this.refs=E,this.updater=ie||S}var N=T.prototype=new C;N.constructor=T,w(N,x.prototype),N.isPureReactComponent=!0;var R=Array.isArray;function I(){}var O={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function z(L,K,ie){var ce=ie.ref;return{$$typeof:t,type:L,key:K,ref:ce!==void 0?ce:null,props:ie}}function $(L,K){return z(L.type,K,L.props)}function G(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function X(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return K[ie]})}var le=/\/+/g;function oe(L,K){return typeof L=="object"&&L!==null&&L.key!=null?X(""+L.key):K.toString(36)}function pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(I,I):(L.status="pending",L.then(function(K){L.status==="pending"&&(L.status="fulfilled",L.value=K)},function(K){L.status==="pending"&&(L.status="rejected",L.reason=K)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,K,ie,ce,Ae){var xe=typeof L;(xe==="undefined"||xe==="boolean")&&(L=null);var me=!1;if(L===null)me=!0;else switch(xe){case"bigint":case"string":case"number":me=!0;break;case"object":switch(L.$$typeof){case t:case e:me=!0;break;case f:return me=L._init,B(me(L._payload),K,ie,ce,Ae)}}if(me)return Ae=Ae(L),me=ce===""?"."+oe(L,0):ce,R(Ae)?(ie="",me!=null&&(ie=me.replace(le,"$&/")+"/"),B(Ae,K,ie,"",function(Re){return Re})):Ae!=null&&(G(Ae)&&(Ae=$(Ae,ie+(Ae.key==null||L&&L.key===Ae.key?"":(""+Ae.key).replace(le,"$&/")+"/")+me)),K.push(Ae)),1;me=0;var lt=ce===""?".":ce+":";if(R(L))for(var Z=0;Z<L.length;Z++)ce=L[Z],xe=lt+oe(ce,Z),me+=B(ce,K,ie,xe,Ae);else if(Z=y(L),typeof Z=="function")for(L=Z.call(L),Z=0;!(ce=L.next()).done;)ce=ce.value,xe=lt+oe(ce,Z++),me+=B(ce,K,ie,xe,Ae);else if(xe==="object"){if(typeof L.then=="function")return B(pe(L),K,ie,ce,Ae);throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return me}function V(L,K,ie){if(L==null)return L;var ce=[],Ae=0;return B(L,ce,"","",function(xe){return K.call(ie,xe,Ae++)}),ce}function re(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var ue=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Me={map:V,forEach:function(L,K,ie){V(L,function(){K.apply(this,arguments)},ie)},count:function(L){var K=0;return V(L,function(){K++}),K},toArray:function(L){return V(L,function(K){return K})||[]},only:function(L){if(!G(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Oe.Activity=p,Oe.Children=Me,Oe.Component=x,Oe.Fragment=n,Oe.Profiler=r,Oe.PureComponent=T,Oe.StrictMode=i,Oe.Suspense=c,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return O.H.useMemoCache(L)}},Oe.cache=function(L){return function(){return L.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(L,K,ie){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ce=w({},L.props),Ae=L.key;if(K!=null)for(xe in K.key!==void 0&&(Ae=""+K.key),K)!F.call(K,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&K.ref===void 0||(ce[xe]=K[xe]);var xe=arguments.length-2;if(xe===1)ce.children=ie;else if(1<xe){for(var me=Array(xe),lt=0;lt<xe;lt++)me[lt]=arguments[lt+2];ce.children=me}return z(L.type,Ae,ce)},Oe.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},Oe.createElement=function(L,K,ie){var ce,Ae={},xe=null;if(K!=null)for(ce in K.key!==void 0&&(xe=""+K.key),K)F.call(K,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ae[ce]=K[ce]);var me=arguments.length-2;if(me===1)Ae.children=ie;else if(1<me){for(var lt=Array(me),Z=0;Z<me;Z++)lt[Z]=arguments[Z+2];Ae.children=lt}if(L&&L.defaultProps)for(ce in me=L.defaultProps,me)Ae[ce]===void 0&&(Ae[ce]=me[ce]);return z(L,xe,Ae)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:l,render:L}},Oe.isValidElement=G,Oe.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:re}},Oe.memo=function(L,K){return{$$typeof:d,type:L,compare:K===void 0?null:K}},Oe.startTransition=function(L){var K=O.T,ie={};O.T=ie;try{var ce=L(),Ae=O.S;Ae!==null&&Ae(ie,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(I,ue)}catch(xe){ue(xe)}finally{K!==null&&ie.types!==null&&(K.types=ie.types),O.T=K}},Oe.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Oe.use=function(L){return O.H.use(L)},Oe.useActionState=function(L,K,ie){return O.H.useActionState(L,K,ie)},Oe.useCallback=function(L,K){return O.H.useCallback(L,K)},Oe.useContext=function(L){return O.H.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L,K){return O.H.useDeferredValue(L,K)},Oe.useEffect=function(L,K){return O.H.useEffect(L,K)},Oe.useEffectEvent=function(L){return O.H.useEffectEvent(L)},Oe.useId=function(){return O.H.useId()},Oe.useImperativeHandle=function(L,K,ie){return O.H.useImperativeHandle(L,K,ie)},Oe.useInsertionEffect=function(L,K){return O.H.useInsertionEffect(L,K)},Oe.useLayoutEffect=function(L,K){return O.H.useLayoutEffect(L,K)},Oe.useMemo=function(L,K){return O.H.useMemo(L,K)},Oe.useOptimistic=function(L,K){return O.H.useOptimistic(L,K)},Oe.useReducer=function(L,K,ie){return O.H.useReducer(L,K,ie)},Oe.useRef=function(L){return O.H.useRef(L)},Oe.useState=function(L){return O.H.useState(L)},Oe.useSyncExternalStore=function(L,K,ie){return O.H.useSyncExternalStore(L,K,ie)},Oe.useTransition=function(){return O.H.useTransition()},Oe.version="19.2.3",Oe}var sT;function Ll(){return sT||(sT=1,Dv.exports=i3()),Dv.exports}var P=Ll();const Rr=Br(P),r3=e3({__proto__:null,default:Rr},[P]);var Ov={exports:{}},Gu={},kv={exports:{}},Lv={};var aT;function s3(){return aT||(aT=1,(function(t){function e(B,V){var re=B.length;B.push(V);e:for(;0<re;){var ue=re-1>>>1,Me=B[ue];if(0<r(Me,V))B[ue]=V,B[re]=Me,re=ue;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var V=B[0],re=B.pop();if(re!==V){B[0]=re;e:for(var ue=0,Me=B.length,L=Me>>>1;ue<L;){var K=2*(ue+1)-1,ie=B[K],ce=K+1,Ae=B[ce];if(0>r(ie,re))ce<Me&&0>r(Ae,ie)?(B[ue]=Ae,B[ce]=re,ue=ce):(B[ue]=ie,B[K]=re,ue=K);else if(ce<Me&&0>r(Ae,re))B[ue]=Ae,B[ce]=re,ue=ce;else break e}}return V}function r(B,V){var re=B.sortIndex-V.sortIndex;return re!==0?re:B.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,p=null,g=3,y=!1,S=!1,w=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(B){for(var V=n(d);V!==null;){if(V.callback===null)i(d);else if(V.startTime<=B)i(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(d)}}function R(B){if(w=!1,N(B),!S)if(n(c)!==null)S=!0,I||(I=!0,X());else{var V=n(d);V!==null&&pe(R,V.startTime-B)}}var I=!1,O=-1,F=5,z=-1;function $(){return E?!0:!(t.unstable_now()-z<F)}function G(){if(E=!1,I){var B=t.unstable_now();z=B;var V=!0;try{e:{S=!1,w&&(w=!1,C(O),O=-1),y=!0;var re=g;try{t:{for(N(B),p=n(c);p!==null&&!(p.expirationTime>B&&$());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,g=p.priorityLevel;var Me=ue(p.expirationTime<=B);if(B=t.unstable_now(),typeof Me=="function"){p.callback=Me,N(B),V=!0;break t}p===n(c)&&i(c),N(B)}else i(c);p=n(c)}if(p!==null)V=!0;else{var L=n(d);L!==null&&pe(R,L.startTime-B),V=!1}}break e}finally{p=null,g=re,y=!1}V=void 0}}finally{V?X():I=!1}}}var X;if(typeof T=="function")X=function(){T(G)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,oe=le.port2;le.port1.onmessage=G,X=function(){oe.postMessage(null)}}else X=function(){x(G,0)};function pe(B,V){O=x(function(){B(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var re=g;g=V;try{return B()}finally{g=re}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=g;g=B;try{return V()}finally{g=re}},t.unstable_scheduleCallback=function(B,V,re){var ue=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ue+re:ue):re=ue,B){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=re+Me,B={id:f++,callback:V,priorityLevel:B,startTime:re,expirationTime:Me,sortIndex:-1},re>ue?(B.sortIndex=re,e(d,B),n(c)===null&&B===n(d)&&(w?(C(O),O=-1):w=!0,pe(R,re-ue))):(B.sortIndex=Me,e(c,B),S||y||(S=!0,I||(I=!0,X()))),B},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(B){var V=g;return function(){var re=g;g=V;try{return B.apply(this,arguments)}finally{g=re}}}})(Lv)),Lv}var oT;function a3(){return oT||(oT=1,kv.exports=s3()),kv.exports}var Uv={exports:{}},Nn={};var lT;function o3(){if(lT)return Nn;lT=1;var t=Ll();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},Nn.flushSync=function(c){var d=a.T,f=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=d,i.p=f,i.d.f()}},Nn.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},Nn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Nn.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):f==="script"&&i.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Nn.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},Nn.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);i.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Nn.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},Nn.requestFormReset=function(c){i.d.r(c)},Nn.unstable_batchedUpdates=function(c,d){return c(d)},Nn.useFormState=function(c,d,f){return a.H.useFormState(c,d,f)},Nn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Nn.version="19.2.3",Nn}var uT;function lI(){if(uT)return Uv.exports;uT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uv.exports=o3(),Uv.exports}var cT;function l3(){if(cT)return Gu;cT=1;var t=a3(),e=Ll(),n=lI();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(i(188))}function d(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var h=o,m=u;;){var A=h.return;if(A===null)break;var _=A.alternate;if(_===null){if(m=A.return,m!==null){h=m;continue}break}if(A.child===_.child){for(_=A.child;_;){if(_===h)return c(A),o;if(_===m)return c(A),u;_=_.sibling}throw Error(i(188))}if(h.return!==m.return)h=A,m=_;else{for(var M=!1,D=A.child;D;){if(D===h){M=!0,h=A,m=_;break}if(D===m){M=!0,m=A,h=_;break}D=D.sibling}if(!M){for(D=_.child;D;){if(D===h){M=!0,h=_,m=A;break}if(D===m){M=!0,m=_,h=A;break}D=D.sibling}if(!M)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var le=Symbol.for("react.client.reference");function oe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===le?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList";case z:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case T:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case N:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case O:return u=o.displayName||null,u!==null?u:oe(o.type)||"Memo";case F:u=o._payload,o=o._init;try{return oe(o(u))}catch{}}return null}var pe=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ue=[],Me=-1;function L(o){return{current:o}}function K(o){0>Me||(o.current=ue[Me],ue[Me]=null,Me--)}function ie(o,u){Me++,ue[Me]=o.current,o.current=u}var ce=L(null),Ae=L(null),xe=L(null),me=L(null);function lt(o,u){switch(ie(xe,u),ie(Ae,o),ie(ce,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?_x(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=_x(u),o=Ex(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}K(ce),ie(ce,o)}function Z(){K(ce),K(Ae),K(xe)}function Re(o){o.memoizedState!==null&&ie(me,o);var u=ce.current,h=Ex(u,o.type);u!==h&&(ie(Ae,o),ie(ce,h))}function Ie(o){Ae.current===o&&(K(ce),K(Ae)),me.current===o&&(K(me),Uu._currentValue=re)}var ae,ht;function ze(o){if(ae===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);ae=u&&u[1]||"",ht=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+o+ht}var kt=!1;function Lt(o,u){if(!o||kt)return"";kt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(J){var W=J}Reflect.construct(o,[],ne)}else{try{ne.call()}catch(J){W=J}o.call(ne.prototype)}}else{try{throw Error()}catch(J){W=J}(ne=o())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),M=_[0],D=_[1];if(M&&D){var U=M.split(`
`),Y=D.split(`
`);for(A=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;A<Y.length&&!Y[A].includes("DetermineComponentFrameRoot");)A++;if(m===U.length||A===Y.length)for(m=U.length-1,A=Y.length-1;1<=m&&0<=A&&U[m]!==Y[A];)A--;for(;1<=m&&0<=A;m--,A--)if(U[m]!==Y[A]){if(m!==1||A!==1)do if(m--,A--,0>A||U[m]!==Y[A]){var ee=`
`+U[m].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=m&&0<=A);break}}}finally{kt=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?ze(h):""}function Ji(o,u){switch(o.tag){case 26:case 27:case 5:return ze(o.type);case 16:return ze("Lazy");case 13:return o.child!==u&&u!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return Lt(o.type,!1);case 11:return Lt(o.type.render,!1);case 1:return Lt(o.type,!0);case 31:return ze("Activity");default:return""}}function hr(o){try{var u="",h=null;do u+=Ji(o,h),h=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Kl=Object.prototype.hasOwnProperty,Wl=t.unstable_scheduleCallback,vo=t.unstable_cancelCallback,Xn=t.unstable_shouldYield,mm=t.unstable_requestPaint,Bn=t.unstable_now,Qi=t.unstable_getCurrentPriorityLevel,Xl=t.unstable_ImmediatePriority,ld=t.unstable_UserBlockingPriority,yo=t.unstable_NormalPriority,gm=t.unstable_LowPriority,ud=t.unstable_IdlePriority,vm=t.log,ym=t.unstable_setDisableYieldValue,Sa=null,Fn=null;function pr(o){if(typeof vm=="function"&&ym(o),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(Sa,o)}catch{}}var zn=Math.clz32?Math.clz32:Sm,bm=Math.log,Am=Math.LN2;function Sm(o){return o>>>=0,o===0?32:31-(bm(o)/Am|0)|0}var bo=256,Ps=262144,Ao=4194304;function mr(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function gr(o,u,h){var m=o.pendingLanes;if(m===0)return 0;var A=0,_=o.suspendedLanes,M=o.pingedLanes;o=o.warmLanes;var D=m&134217727;return D!==0?(m=D&~_,m!==0?A=mr(m):(M&=D,M!==0?A=mr(M):h||(h=D&~o,h!==0&&(A=mr(h))))):(D=m&~_,D!==0?A=mr(D):M!==0?A=mr(M):h||(h=m&~o,h!==0&&(A=mr(h)))),A===0?0:u!==0&&u!==A&&(u&_)===0&&(_=A&-A,h=u&-u,_>=h||_===32&&(h&4194048)!==0)?u:A}function Rs(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Jl(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cd(){var o=Ao;return Ao<<=1,(Ao&62914560)===0&&(Ao=4194304),o}function Ns(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function wa(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function se(o,u,h,m,A,_){var M=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var D=o.entanglements,U=o.expirationTimes,Y=o.hiddenUpdates;for(h=M&~h;0<h;){var ee=31-zn(h),ne=1<<ee;D[ee]=0,U[ee]=-1;var W=Y[ee];if(W!==null)for(Y[ee]=null,ee=0;ee<W.length;ee++){var J=W[ee];J!==null&&(J.lane&=-536870913)}h&=~ne}m!==0&&de(o,m,0),_!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=_&~(M&~u))}function de(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-zn(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function we(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var m=31-zn(h),A=1<<m;A&u|o[m]&u&&(o[m]|=u),h&=~A}}function ye(o,u){var h=u&-u;return h=(h&42)!==0?1:Ne(h),(h&(o.suspendedLanes|u))!==0?0:h}function Ne(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function je(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function wt(){var o=V.p;return o!==0?o:(o=window.event,o===void 0?32:Yx(o.type))}function an(o,u){var h=V.p;try{return V.p=o,u()}finally{V.p=h}}var ci=Math.random().toString(36).slice(2),vn="__reactFiber$"+ci,Jn="__reactProps$"+ci,So="__reactContainer$"+ci,wm="__reactEvents$"+ci,qU="__reactListeners$"+ci,VU="__reactHandles$"+ci,cw="__reactResources$"+ci,Ql="__reactMarker$"+ci;function _m(o){delete o[vn],delete o[Jn],delete o[wm],delete o[qU],delete o[VU]}function wo(o){var u=o[vn];if(u)return u;for(var h=o.parentNode;h;){if(u=h[So]||h[vn]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=Nx(o);o!==null;){if(h=o[vn])return h;o=Nx(o)}return u}o=h,h=o.parentNode}return null}function _o(o){if(o=o[vn]||o[So]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Zl(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Eo(o){var u=o[cw];return u||(u=o[cw]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function on(o){o[Ql]=!0}var dw=new Set,fw={};function _a(o,u){xo(o,u),xo(o+"Capture",u)}function xo(o,u){for(fw[o]=u,o=0;o<u.length;o++)dw.add(u[o])}var $U=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hw={},pw={};function jU(o){return Kl.call(pw,o)?!0:Kl.call(hw,o)?!1:$U.test(o)?pw[o]=!0:(hw[o]=!0,!1)}function dd(o,u,h){if(jU(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function fd(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function Hr(o,u,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+m)}}function Ti(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function mw(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function YU(o,u,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,_=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return A.call(this)},set:function(M){h=""+M,_.call(this,M)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(M){h=""+M},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Em(o){if(!o._valueTracker){var u=mw(o)?"checked":"value";o._valueTracker=YU(o,u,""+o[u])}}function gw(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return o&&(m=mw(o)?o.checked?"true":"false":o.value),o=m,o!==h?(u.setValue(o),!0):!1}function hd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var KU=/[\n"\\]/g;function Ci(o){return o.replace(KU,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function xm(o,u,h,m,A,_,M,D){o.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?o.type=M:o.removeAttribute("type"),u!=null?M==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Ti(u)):o.value!==""+Ti(u)&&(o.value=""+Ti(u)):M!=="submit"&&M!=="reset"||o.removeAttribute("value"),u!=null?Tm(o,M,Ti(u)):h!=null?Tm(o,M,Ti(h)):m!=null&&o.removeAttribute("value"),A==null&&_!=null&&(o.defaultChecked=!!_),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.name=""+Ti(D):o.removeAttribute("name")}function vw(o,u,h,m,A,_,M,D){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),u!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Em(o);return}h=h!=null?""+Ti(h):"",u=u!=null?""+Ti(u):h,D||u===o.value||(o.value=u),o.defaultValue=u}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=D?o.checked:!!m,o.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(o.name=M),Em(o)}function Tm(o,u,h){u==="number"&&hd(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function To(o,u,h,m){if(o=o.options,u){u={};for(var A=0;A<h.length;A++)u["$"+h[A]]=!0;for(h=0;h<o.length;h++)A=u.hasOwnProperty("$"+o[h].value),o[h].selected!==A&&(o[h].selected=A),A&&m&&(o[h].defaultSelected=!0)}else{for(h=""+Ti(h),u=null,A=0;A<o.length;A++){if(o[A].value===h){o[A].selected=!0,m&&(o[A].defaultSelected=!0);return}u!==null||o[A].disabled||(u=o[A])}u!==null&&(u.selected=!0)}}function yw(o,u,h){if(u!=null&&(u=""+Ti(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+Ti(h):""}function bw(o,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(i(92));if(pe(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=Ti(u),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),Em(o)}function Co(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var WU=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Aw(o,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,h):typeof h!="number"||h===0||WU.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function Sw(o,u,h){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var A in u)m=u[A],u.hasOwnProperty(A)&&h[A]!==m&&Aw(o,A,m)}else for(var _ in u)u.hasOwnProperty(_)&&Aw(o,_,u[_])}function Cm(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XU=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JU=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pd(o){return JU.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Gr(){}var Mm=null;function Pm(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Mo=null,Po=null;function ww(o){var u=_o(o);if(u&&(o=u.stateNode)){var h=o[Jn]||null;e:switch(o=u.stateNode,u.type){case"input":if(xm(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ci(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==o&&m.form===o.form){var A=m[Jn]||null;if(!A)throw Error(i(90));xm(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===o.form&&gw(m)}break e;case"textarea":yw(o,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&To(o,!!h.multiple,u,!1)}}}var Rm=!1;function _w(o,u,h){if(Rm)return o(u,h);Rm=!0;try{var m=o(u);return m}finally{if(Rm=!1,(Mo!==null||Po!==null)&&(tf(),Mo&&(u=Mo,o=Po,Po=Mo=null,ww(u),o)))for(u=0;u<o.length;u++)ww(o[u])}}function eu(o,u){var h=o.stateNode;if(h===null)return null;var m=h[Jn]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,u,typeof h));return h}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nm=!1;if(qr)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){Nm=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{Nm=!1}var Is=null,Im=null,md=null;function Ew(){if(md)return md;var o,u=Im,h=u.length,m,A="value"in Is?Is.value:Is.textContent,_=A.length;for(o=0;o<h&&u[o]===A[o];o++);var M=h-o;for(m=1;m<=M&&u[h-m]===A[_-m];m++);return md=A.slice(o,1<m?1-m:void 0)}function gd(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function vd(){return!0}function xw(){return!1}function Qn(o){function u(h,m,A,_,M){this._reactName=h,this._targetInst=A,this.type=m,this.nativeEvent=_,this.target=M,this.currentTarget=null;for(var D in o)o.hasOwnProperty(D)&&(h=o[D],this[D]=h?h(_):_[D]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?vd:xw,this.isPropagationStopped=xw,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),u}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=Qn(Ea),nu=p({},Ea,{view:0,detail:0}),QU=Qn(nu),Dm,Om,iu,bd=p({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lm,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==iu&&(iu&&o.type==="mousemove"?(Dm=o.screenX-iu.screenX,Om=o.screenY-iu.screenY):Om=Dm=0,iu=o),Dm)},movementY:function(o){return"movementY"in o?o.movementY:Om}}),Tw=Qn(bd),ZU=p({},bd,{dataTransfer:0}),eB=Qn(ZU),tB=p({},nu,{relatedTarget:0}),km=Qn(tB),nB=p({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),iB=Qn(nB),rB=p({},Ea,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),sB=Qn(rB),aB=p({},Ea,{data:0}),Cw=Qn(aB),oB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cB(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=uB[o])?!!u[o]:!1}function Lm(){return cB}var dB=p({},nu,{key:function(o){if(o.key){var u=oB[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=gd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?lB[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lm,charCode:function(o){return o.type==="keypress"?gd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?gd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),fB=Qn(dB),hB=p({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mw=Qn(hB),pB=p({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lm}),mB=Qn(pB),gB=p({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),vB=Qn(gB),yB=p({},bd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),bB=Qn(yB),AB=p({},Ea,{newState:0,oldState:0}),SB=Qn(AB),wB=[9,13,27,32],Um=qr&&"CompositionEvent"in window,ru=null;qr&&"documentMode"in document&&(ru=document.documentMode);var _B=qr&&"TextEvent"in window&&!ru,Pw=qr&&(!Um||ru&&8<ru&&11>=ru),Rw=" ",Nw=!1;function Iw(o,u){switch(o){case"keyup":return wB.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ro=!1;function EB(o,u){switch(o){case"compositionend":return Dw(u);case"keypress":return u.which!==32?null:(Nw=!0,Rw);case"textInput":return o=u.data,o===Rw&&Nw?null:o;default:return null}}function xB(o,u){if(Ro)return o==="compositionend"||!Um&&Iw(o,u)?(o=Ew(),md=Im=Is=null,Ro=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Pw&&u.locale!=="ko"?null:u.data;default:return null}}var TB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ow(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!TB[o.type]:u==="textarea"}function kw(o,u,h,m){Mo?Po?Po.push(m):Po=[m]:Mo=m,u=uf(u,"onChange"),0<u.length&&(h=new yd("onChange","change",null,h,m),o.push({event:h,listeners:u}))}var su=null,au=null;function CB(o){vx(o,0)}function Ad(o){var u=Zl(o);if(gw(u))return o}function Lw(o,u){if(o==="change")return u}var Uw=!1;if(qr){var Bm;if(qr){var Fm="oninput"in document;if(!Fm){var Bw=document.createElement("div");Bw.setAttribute("oninput","return;"),Fm=typeof Bw.oninput=="function"}Bm=Fm}else Bm=!1;Uw=Bm&&(!document.documentMode||9<document.documentMode)}function Fw(){su&&(su.detachEvent("onpropertychange",zw),au=su=null)}function zw(o){if(o.propertyName==="value"&&Ad(au)){var u=[];kw(u,au,o,Pm(o)),_w(CB,u)}}function MB(o,u,h){o==="focusin"?(Fw(),su=u,au=h,su.attachEvent("onpropertychange",zw)):o==="focusout"&&Fw()}function PB(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ad(au)}function RB(o,u){if(o==="click")return Ad(u)}function NB(o,u){if(o==="input"||o==="change")return Ad(u)}function IB(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var di=typeof Object.is=="function"?Object.is:IB;function ou(o,u){if(di(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var A=h[m];if(!Kl.call(u,A)||!di(o[A],u[A]))return!1}return!0}function Hw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Gw(o,u){var h=Hw(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=u&&m>=u)return{node:h,offset:u-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Hw(h)}}function qw(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?qw(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Vw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=hd(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=hd(o.document)}return u}function zm(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var DB=qr&&"documentMode"in document&&11>=document.documentMode,No=null,Hm=null,lu=null,Gm=!1;function $w(o,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Gm||No==null||No!==hd(m)||(m=No,"selectionStart"in m&&zm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),lu&&ou(lu,m)||(lu=m,m=uf(Hm,"onSelect"),0<m.length&&(u=new yd("onSelect","select",null,u,h),o.push({event:u,listeners:m}),u.target=No)))}function xa(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var Io={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},qm={},jw={};qr&&(jw=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Ta(o){if(qm[o])return qm[o];if(!Io[o])return o;var u=Io[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in jw)return qm[o]=u[h];return o}var Yw=Ta("animationend"),Kw=Ta("animationiteration"),Ww=Ta("animationstart"),OB=Ta("transitionrun"),kB=Ta("transitionstart"),LB=Ta("transitioncancel"),Xw=Ta("transitionend"),Jw=new Map,Vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vm.push("scrollEnd");function Zi(o,u){Jw.set(o,u),_a(u,[o])}var Sd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Mi=[],Do=0,$m=0;function wd(){for(var o=Do,u=$m=Do=0;u<o;){var h=Mi[u];Mi[u++]=null;var m=Mi[u];Mi[u++]=null;var A=Mi[u];Mi[u++]=null;var _=Mi[u];if(Mi[u++]=null,m!==null&&A!==null){var M=m.pending;M===null?A.next=A:(A.next=M.next,M.next=A),m.pending=A}_!==0&&Qw(h,A,_)}}function _d(o,u,h,m){Mi[Do++]=o,Mi[Do++]=u,Mi[Do++]=h,Mi[Do++]=m,$m|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function jm(o,u,h,m){return _d(o,u,h,m),Ed(o)}function Ca(o,u){return _d(o,null,null,u),Ed(o)}function Qw(o,u,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var A=!1,_=o.return;_!==null;)_.childLanes|=h,m=_.alternate,m!==null&&(m.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(A=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,A&&u!==null&&(A=31-zn(h),o=_.hiddenUpdates,m=o[A],m===null?o[A]=[u]:m.push(u),u.lane=h|536870912),_):null}function Ed(o){if(50<Ru)throw Ru=0,tv=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Oo={};function UB(o,u,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(o,u,h,m){return new UB(o,u,h,m)}function Ym(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Vr(o,u){var h=o.alternate;return h===null?(h=fi(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function Zw(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function xd(o,u,h,m,A,_){var M=0;if(m=o,typeof o=="function")Ym(o)&&(M=1);else if(typeof o=="string")M=GF(o,h,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case z:return o=fi(31,h,u,A),o.elementType=z,o.lanes=_,o;case w:return Ma(h.children,A,_,u);case E:M=8,A|=24;break;case x:return o=fi(12,h,u,A|2),o.elementType=x,o.lanes=_,o;case R:return o=fi(13,h,u,A),o.elementType=R,o.lanes=_,o;case I:return o=fi(19,h,u,A),o.elementType=I,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:M=10;break e;case C:M=9;break e;case N:M=11;break e;case O:M=14;break e;case F:M=16,m=null;break e}M=29,h=Error(i(130,o===null?"null":typeof o,"")),m=null}return u=fi(M,h,u,A),u.elementType=o,u.type=m,u.lanes=_,u}function Ma(o,u,h,m){return o=fi(7,o,m,u),o.lanes=h,o}function Km(o,u,h){return o=fi(6,o,null,u),o.lanes=h,o}function e_(o){var u=fi(18,null,null,0);return u.stateNode=o,u}function Wm(o,u,h){return u=fi(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var t_=new WeakMap;function Pi(o,u){if(typeof o=="object"&&o!==null){var h=t_.get(o);return h!==void 0?h:(u={value:o,source:u,stack:hr(u)},t_.set(o,u),u)}return{value:o,source:u,stack:hr(u)}}var ko=[],Lo=0,Td=null,uu=0,Ri=[],Ni=0,Ds=null,vr=1,yr="";function $r(o,u){ko[Lo++]=uu,ko[Lo++]=Td,Td=o,uu=u}function n_(o,u,h){Ri[Ni++]=vr,Ri[Ni++]=yr,Ri[Ni++]=Ds,Ds=o;var m=vr;o=yr;var A=32-zn(m)-1;m&=~(1<<A),h+=1;var _=32-zn(u)+A;if(30<_){var M=A-A%5;_=(m&(1<<M)-1).toString(32),m>>=M,A-=M,vr=1<<32-zn(u)+A|h<<A|m,yr=_+o}else vr=1<<_|h<<A|m,yr=o}function Xm(o){o.return!==null&&($r(o,1),n_(o,1,0))}function Jm(o){for(;o===Td;)Td=ko[--Lo],ko[Lo]=null,uu=ko[--Lo],ko[Lo]=null;for(;o===Ds;)Ds=Ri[--Ni],Ri[Ni]=null,yr=Ri[--Ni],Ri[Ni]=null,vr=Ri[--Ni],Ri[Ni]=null}function i_(o,u){Ri[Ni++]=vr,Ri[Ni++]=yr,Ri[Ni++]=Ds,vr=u.id,yr=u.overflow,Ds=o}var yn=null,yt=null,Ye=!1,Os=null,Ii=!1,Qm=Error(i(519));function ks(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(Pi(u,o)),Qm}function r_(o){var u=o.stateNode,h=o.type,m=o.memoizedProps;switch(u[vn]=o,u[Jn]=m,h){case"dialog":qe("cancel",u),qe("close",u);break;case"iframe":case"object":case"embed":qe("load",u);break;case"video":case"audio":for(h=0;h<Iu.length;h++)qe(Iu[h],u);break;case"source":qe("error",u);break;case"img":case"image":case"link":qe("error",u),qe("load",u);break;case"details":qe("toggle",u);break;case"input":qe("invalid",u),vw(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":qe("invalid",u);break;case"textarea":qe("invalid",u),bw(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||Sx(u.textContent,h)?(m.popover!=null&&(qe("beforetoggle",u),qe("toggle",u)),m.onScroll!=null&&qe("scroll",u),m.onScrollEnd!=null&&qe("scrollend",u),m.onClick!=null&&(u.onclick=Gr),u=!0):u=!1,u||ks(o,!0)}function s_(o){for(yn=o.return;yn;)switch(yn.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:yn=yn.return}}function Uo(o){if(o!==yn)return!1;if(!Ye)return s_(o),Ye=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||gv(o.type,o.memoizedProps)),h=!h),h&&yt&&ks(o),s_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));yt=Rx(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));yt=Rx(o)}else u===27?(u=yt,Ws(o.type)?(o=Sv,Sv=null,yt=o):yt=u):yt=yn?Oi(o.stateNode.nextSibling):null;return!0}function Pa(){yt=yn=null,Ye=!1}function Zm(){var o=Os;return o!==null&&(ni===null?ni=o:ni.push.apply(ni,o),Os=null),o}function cu(o){Os===null?Os=[o]:Os.push(o)}var eg=L(null),Ra=null,jr=null;function Ls(o,u,h){ie(eg,u._currentValue),u._currentValue=h}function Yr(o){o._currentValue=eg.current,K(eg)}function tg(o,u,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===h)break;o=o.return}}function ng(o,u,h,m){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var _=A.dependencies;if(_!==null){var M=A.child;_=_.firstContext;e:for(;_!==null;){var D=_;_=A;for(var U=0;U<u.length;U++)if(D.context===u[U]){_.lanes|=h,D=_.alternate,D!==null&&(D.lanes|=h),tg(_.return,h,o),m||(M=null);break e}_=D.next}}else if(A.tag===18){if(M=A.return,M===null)throw Error(i(341));M.lanes|=h,_=M.alternate,_!==null&&(_.lanes|=h),tg(M,h,o),M=null}else M=A.child;if(M!==null)M.return=A;else for(M=A;M!==null;){if(M===o){M=null;break}if(A=M.sibling,A!==null){A.return=M.return,M=A;break}M=M.return}A=M}}function Bo(o,u,h,m){o=null;for(var A=u,_=!1;A!==null;){if(!_){if((A.flags&524288)!==0)_=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var M=A.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var D=A.type;di(A.pendingProps.value,M.value)||(o!==null?o.push(D):o=[D])}}else if(A===me.current){if(M=A.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(Uu):o=[Uu])}A=A.return}o!==null&&ng(u,o,h,m),u.flags|=262144}function Cd(o){for(o=o.firstContext;o!==null;){if(!di(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Na(o){Ra=o,jr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function bn(o){return a_(Ra,o)}function Md(o,u){return Ra===null&&Na(o),a_(o,u)}function a_(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},jr===null){if(o===null)throw Error(i(308));jr=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else jr=jr.next=u;return h}var BB=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},FB=t.unstable_scheduleCallback,zB=t.unstable_NormalPriority,Ht={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ig(){return{controller:new BB,data:new Map,refCount:0}}function du(o){o.refCount--,o.refCount===0&&FB(zB,function(){o.controller.abort()})}var fu=null,rg=0,Fo=0,zo=null;function HB(o,u){if(fu===null){var h=fu=[];rg=0,Fo=ov(),zo={status:"pending",value:void 0,then:function(m){h.push(m)}}}return rg++,u.then(o_,o_),u}function o_(){if(--rg===0&&fu!==null){zo!==null&&(zo.status="fulfilled");var o=fu;fu=null,Fo=0,zo=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function GB(o,u){var h=[],m={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var A=0;A<h.length;A++)(0,h[A])(u)},function(A){for(m.status="rejected",m.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),m}var l_=B.S;B.S=function(o,u){$E=Bn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&HB(o,u),l_!==null&&l_(o,u)};var Ia=L(null);function sg(){var o=Ia.current;return o!==null?o:pt.pooledCache}function Pd(o,u){u===null?ie(Ia,Ia.current):ie(Ia,u.pool)}function u_(){var o=sg();return o===null?null:{parent:Ht._currentValue,pool:o}}var Ho=Error(i(460)),ag=Error(i(474)),Rd=Error(i(542)),Nd={then:function(){}};function c_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function d_(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(Gr,Gr),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,h_(o),o;default:if(typeof u.status=="string")u.then(Gr,Gr);else{if(o=pt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=m}},function(m){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,h_(o),o}throw Oa=u,Ho}}function Da(o){try{var u=o._init;return u(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Oa=h,Ho):h}}var Oa=null;function f_(){if(Oa===null)throw Error(i(459));var o=Oa;return Oa=null,o}function h_(o){if(o===Ho||o===Rd)throw Error(i(483))}var Go=null,hu=0;function Id(o){var u=hu;return hu+=1,Go===null&&(Go=[]),d_(Go,o,u)}function pu(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Dd(o,u){throw u.$$typeof===g?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function p_(o){function u(q,H){if(o){var j=q.deletions;j===null?(q.deletions=[H],q.flags|=16):j.push(H)}}function h(q,H){if(!o)return null;for(;H!==null;)u(q,H),H=H.sibling;return null}function m(q){for(var H=new Map;q!==null;)q.key!==null?H.set(q.key,q):H.set(q.index,q),q=q.sibling;return H}function A(q,H){return q=Vr(q,H),q.index=0,q.sibling=null,q}function _(q,H,j){return q.index=j,o?(j=q.alternate,j!==null?(j=j.index,j<H?(q.flags|=67108866,H):j):(q.flags|=67108866,H)):(q.flags|=1048576,H)}function M(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function D(q,H,j,te){return H===null||H.tag!==6?(H=Km(j,q.mode,te),H.return=q,H):(H=A(H,j),H.return=q,H)}function U(q,H,j,te){var Te=j.type;return Te===w?ee(q,H,j.props.children,te,j.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===F&&Da(Te)===H.type)?(H=A(H,j.props),pu(H,j),H.return=q,H):(H=xd(j.type,j.key,j.props,null,q.mode,te),pu(H,j),H.return=q,H)}function Y(q,H,j,te){return H===null||H.tag!==4||H.stateNode.containerInfo!==j.containerInfo||H.stateNode.implementation!==j.implementation?(H=Wm(j,q.mode,te),H.return=q,H):(H=A(H,j.children||[]),H.return=q,H)}function ee(q,H,j,te,Te){return H===null||H.tag!==7?(H=Ma(j,q.mode,te,Te),H.return=q,H):(H=A(H,j),H.return=q,H)}function ne(q,H,j){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Km(""+H,q.mode,j),H.return=q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return j=xd(H.type,H.key,H.props,null,q.mode,j),pu(j,H),j.return=q,j;case S:return H=Wm(H,q.mode,j),H.return=q,H;case F:return H=Da(H),ne(q,H,j)}if(pe(H)||X(H))return H=Ma(H,q.mode,j,null),H.return=q,H;if(typeof H.then=="function")return ne(q,Id(H),j);if(H.$$typeof===T)return ne(q,Md(q,H),j);Dd(q,H)}return null}function W(q,H,j,te){var Te=H!==null?H.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return Te!==null?null:D(q,H,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case y:return j.key===Te?U(q,H,j,te):null;case S:return j.key===Te?Y(q,H,j,te):null;case F:return j=Da(j),W(q,H,j,te)}if(pe(j)||X(j))return Te!==null?null:ee(q,H,j,te,null);if(typeof j.then=="function")return W(q,H,Id(j),te);if(j.$$typeof===T)return W(q,H,Md(q,j),te);Dd(q,j)}return null}function J(q,H,j,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get(j)||null,D(H,q,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return q=q.get(te.key===null?j:te.key)||null,U(H,q,te,Te);case S:return q=q.get(te.key===null?j:te.key)||null,Y(H,q,te,Te);case F:return te=Da(te),J(q,H,j,te,Te)}if(pe(te)||X(te))return q=q.get(j)||null,ee(H,q,te,Te,null);if(typeof te.then=="function")return J(q,H,j,Id(te),Te);if(te.$$typeof===T)return J(q,H,j,Md(H,te),Te);Dd(H,te)}return null}function be(q,H,j,te){for(var Te=null,Xe=null,Se=H,Fe=H=0,$e=null;Se!==null&&Fe<j.length;Fe++){Se.index>Fe?($e=Se,Se=null):$e=Se.sibling;var Je=W(q,Se,j[Fe],te);if(Je===null){Se===null&&(Se=$e);break}o&&Se&&Je.alternate===null&&u(q,Se),H=_(Je,H,Fe),Xe===null?Te=Je:Xe.sibling=Je,Xe=Je,Se=$e}if(Fe===j.length)return h(q,Se),Ye&&$r(q,Fe),Te;if(Se===null){for(;Fe<j.length;Fe++)Se=ne(q,j[Fe],te),Se!==null&&(H=_(Se,H,Fe),Xe===null?Te=Se:Xe.sibling=Se,Xe=Se);return Ye&&$r(q,Fe),Te}for(Se=m(Se);Fe<j.length;Fe++)$e=J(Se,q,Fe,j[Fe],te),$e!==null&&(o&&$e.alternate!==null&&Se.delete($e.key===null?Fe:$e.key),H=_($e,H,Fe),Xe===null?Te=$e:Xe.sibling=$e,Xe=$e);return o&&Se.forEach(function(ea){return u(q,ea)}),Ye&&$r(q,Fe),Te}function Pe(q,H,j,te){if(j==null)throw Error(i(151));for(var Te=null,Xe=null,Se=H,Fe=H=0,$e=null,Je=j.next();Se!==null&&!Je.done;Fe++,Je=j.next()){Se.index>Fe?($e=Se,Se=null):$e=Se.sibling;var ea=W(q,Se,Je.value,te);if(ea===null){Se===null&&(Se=$e);break}o&&Se&&ea.alternate===null&&u(q,Se),H=_(ea,H,Fe),Xe===null?Te=ea:Xe.sibling=ea,Xe=ea,Se=$e}if(Je.done)return h(q,Se),Ye&&$r(q,Fe),Te;if(Se===null){for(;!Je.done;Fe++,Je=j.next())Je=ne(q,Je.value,te),Je!==null&&(H=_(Je,H,Fe),Xe===null?Te=Je:Xe.sibling=Je,Xe=Je);return Ye&&$r(q,Fe),Te}for(Se=m(Se);!Je.done;Fe++,Je=j.next())Je=J(Se,q,Fe,Je.value,te),Je!==null&&(o&&Je.alternate!==null&&Se.delete(Je.key===null?Fe:Je.key),H=_(Je,H,Fe),Xe===null?Te=Je:Xe.sibling=Je,Xe=Je);return o&&Se.forEach(function(ZF){return u(q,ZF)}),Ye&&$r(q,Fe),Te}function dt(q,H,j,te){if(typeof j=="object"&&j!==null&&j.type===w&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case y:e:{for(var Te=j.key;H!==null;){if(H.key===Te){if(Te=j.type,Te===w){if(H.tag===7){h(q,H.sibling),te=A(H,j.props.children),te.return=q,q=te;break e}}else if(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===F&&Da(Te)===H.type){h(q,H.sibling),te=A(H,j.props),pu(te,j),te.return=q,q=te;break e}h(q,H);break}else u(q,H);H=H.sibling}j.type===w?(te=Ma(j.props.children,q.mode,te,j.key),te.return=q,q=te):(te=xd(j.type,j.key,j.props,null,q.mode,te),pu(te,j),te.return=q,q=te)}return M(q);case S:e:{for(Te=j.key;H!==null;){if(H.key===Te)if(H.tag===4&&H.stateNode.containerInfo===j.containerInfo&&H.stateNode.implementation===j.implementation){h(q,H.sibling),te=A(H,j.children||[]),te.return=q,q=te;break e}else{h(q,H);break}else u(q,H);H=H.sibling}te=Wm(j,q.mode,te),te.return=q,q=te}return M(q);case F:return j=Da(j),dt(q,H,j,te)}if(pe(j))return be(q,H,j,te);if(X(j)){if(Te=X(j),typeof Te!="function")throw Error(i(150));return j=Te.call(j),Pe(q,H,j,te)}if(typeof j.then=="function")return dt(q,H,Id(j),te);if(j.$$typeof===T)return dt(q,H,Md(q,j),te);Dd(q,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,H!==null&&H.tag===6?(h(q,H.sibling),te=A(H,j),te.return=q,q=te):(h(q,H),te=Km(j,q.mode,te),te.return=q,q=te),M(q)):h(q,H)}return function(q,H,j,te){try{hu=0;var Te=dt(q,H,j,te);return Go=null,Te}catch(Se){if(Se===Ho||Se===Rd)throw Se;var Xe=fi(29,Se,null,q.mode);return Xe.lanes=te,Xe.return=q,Xe}}}var ka=p_(!0),m_=p_(!1),Us=!1;function og(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lg(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Bs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Fs(o,u,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(et&2)!==0){var A=m.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),m.pending=u,u=Ed(o),Qw(o,null,h),u}return _d(o,m,u,h),Ed(o)}function mu(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,we(o,h)}}function ug(o,u){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var A=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var M={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?A=_=M:_=_.next=M,h=h.next}while(h!==null);_===null?A=_=u:_=_.next=u}else A=_=u;h={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var cg=!1;function gu(){if(cg){var o=zo;if(o!==null)throw o}}function vu(o,u,h,m){cg=!1;var A=o.updateQueue;Us=!1;var _=A.firstBaseUpdate,M=A.lastBaseUpdate,D=A.shared.pending;if(D!==null){A.shared.pending=null;var U=D,Y=U.next;U.next=null,M===null?_=Y:M.next=Y,M=U;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,D=ee.lastBaseUpdate,D!==M&&(D===null?ee.firstBaseUpdate=Y:D.next=Y,ee.lastBaseUpdate=U))}if(_!==null){var ne=A.baseState;M=0,ee=Y=U=null,D=_;do{var W=D.lane&-536870913,J=W!==D.lane;if(J?(Ve&W)===W:(m&W)===W){W!==0&&W===Fo&&(cg=!0),ee!==null&&(ee=ee.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var be=o,Pe=D;W=u;var dt=h;switch(Pe.tag){case 1:if(be=Pe.payload,typeof be=="function"){ne=be.call(dt,ne,W);break e}ne=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Pe.payload,W=typeof be=="function"?be.call(dt,ne,W):be,W==null)break e;ne=p({},ne,W);break e;case 2:Us=!0}}W=D.callback,W!==null&&(o.flags|=64,J&&(o.flags|=8192),J=A.callbacks,J===null?A.callbacks=[W]:J.push(W))}else J={lane:W,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ee===null?(Y=ee=J,U=ne):ee=ee.next=J,M|=W;if(D=D.next,D===null){if(D=A.shared.pending,D===null)break;J=D,D=J.next,J.next=null,A.lastBaseUpdate=J,A.shared.pending=null}}while(!0);ee===null&&(U=ne),A.baseState=U,A.firstBaseUpdate=Y,A.lastBaseUpdate=ee,_===null&&(A.shared.lanes=0),Vs|=M,o.lanes=M,o.memoizedState=ne}}function g_(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function v_(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)g_(h[o],u)}var qo=L(null),Od=L(0);function y_(o,u){o=ns,ie(Od,o),ie(qo,u),ns=o|u.baseLanes}function dg(){ie(Od,ns),ie(qo,qo.current)}function fg(){ns=Od.current,K(qo),K(Od)}var hi=L(null),Di=null;function zs(o){var u=o.alternate;ie(Ut,Ut.current&1),ie(hi,o),Di===null&&(u===null||qo.current!==null||u.memoizedState!==null)&&(Di=o)}function hg(o){ie(Ut,Ut.current),ie(hi,o),Di===null&&(Di=o)}function b_(o){o.tag===22?(ie(Ut,Ut.current),ie(hi,o),Di===null&&(Di=o)):Hs()}function Hs(){ie(Ut,Ut.current),ie(hi,hi.current)}function pi(o){K(hi),Di===o&&(Di=null),K(Ut)}var Ut=L(0);function kd(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||bv(h)||Av(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Kr=0,Be=null,ut=null,Gt=null,Ld=!1,Vo=!1,La=!1,Ud=0,yu=0,$o=null,qB=0;function Nt(){throw Error(i(321))}function pg(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!di(o[h],u[h]))return!1;return!0}function mg(o,u,h,m,A,_){return Kr=_,Be=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,B.H=o===null||o.memoizedState===null?nE:Rg,La=!1,_=h(m,A),La=!1,Vo&&(_=S_(u,h,m,A)),A_(o),_}function A_(o){B.H=Su;var u=ut!==null&&ut.next!==null;if(Kr=0,Gt=ut=Be=null,Ld=!1,yu=0,$o=null,u)throw Error(i(300));o===null||qt||(o=o.dependencies,o!==null&&Cd(o)&&(qt=!0))}function S_(o,u,h,m){Be=o;var A=0;do{if(Vo&&($o=null),yu=0,Vo=!1,25<=A)throw Error(i(301));if(A+=1,Gt=ut=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}B.H=iE,_=u(h,m)}while(Vo);return _}function VB(){var o=B.H,u=o.useState()[0];return u=typeof u.then=="function"?bu(u):u,o=o.useState()[0],(ut!==null?ut.memoizedState:null)!==o&&(Be.flags|=1024),u}function gg(){var o=Ud!==0;return Ud=0,o}function vg(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function yg(o){if(Ld){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Ld=!1}Kr=0,Gt=ut=Be=null,Vo=!1,yu=Ud=0,$o=null}function Hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Be.memoizedState=Gt=o:Gt=Gt.next=o,Gt}function Bt(){if(ut===null){var o=Be.alternate;o=o!==null?o.memoizedState:null}else o=ut.next;var u=Gt===null?Be.memoizedState:Gt.next;if(u!==null)Gt=u,ut=o;else{if(o===null)throw Be.alternate===null?Error(i(467)):Error(i(310));ut=o,o={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Be.memoizedState=Gt=o:Gt=Gt.next=o}return Gt}function Bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(o){var u=yu;return yu+=1,$o===null&&($o=[]),o=d_($o,o,u),u=Be,(Gt===null?u.memoizedState:Gt.next)===null&&(u=u.alternate,B.H=u===null||u.memoizedState===null?nE:Rg),o}function Fd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return bu(o);if(o.$$typeof===T)return bn(o)}throw Error(i(438,String(o)))}function bg(o){var u=null,h=Be.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=Be.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Bd(),Be.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),m=0;m<o;m++)h[m]=$;return u.index++,h}function Wr(o,u){return typeof u=="function"?u(o):u}function zd(o){var u=Bt();return Ag(u,ut,o)}function Ag(o,u,h){var m=o.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var A=o.baseQueue,_=m.pending;if(_!==null){if(A!==null){var M=A.next;A.next=_.next,_.next=M}u.baseQueue=A=_,m.pending=null}if(_=o.baseState,A===null)o.memoizedState=_;else{u=A.next;var D=M=null,U=null,Y=u,ee=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ve&ne)===ne:(Kr&ne)===ne){var W=Y.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Fo&&(ee=!0);else if((Kr&W)===W){Y=Y.next,W===Fo&&(ee=!0);continue}else ne={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(D=U=ne,M=_):U=U.next=ne,Be.lanes|=W,Vs|=W;ne=Y.action,La&&h(_,ne),_=Y.hasEagerState?Y.eagerState:h(_,ne)}else W={lane:ne,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(D=U=W,M=_):U=U.next=W,Be.lanes|=ne,Vs|=ne;Y=Y.next}while(Y!==null&&Y!==u);if(U===null?M=_:U.next=D,!di(_,o.memoizedState)&&(qt=!0,ee&&(h=zo,h!==null)))throw h;o.memoizedState=_,o.baseState=M,o.baseQueue=U,m.lastRenderedState=_}return A===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Sg(o){var u=Bt(),h=u.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,A=h.pending,_=u.memoizedState;if(A!==null){h.pending=null;var M=A=A.next;do _=o(_,M.action),M=M.next;while(M!==A);di(_,u.memoizedState)||(qt=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),h.lastRenderedState=_}return[_,m]}function w_(o,u,h){var m=Be,A=Bt(),_=Ye;if(_){if(h===void 0)throw Error(i(407));h=h()}else h=u();var M=!di((ut||A).memoizedState,h);if(M&&(A.memoizedState=h,qt=!0),A=A.queue,Eg(x_.bind(null,m,A,o),[o]),A.getSnapshot!==u||M||Gt!==null&&Gt.memoizedState.tag&1){if(m.flags|=2048,jo(9,{destroy:void 0},E_.bind(null,m,A,h,u),null),pt===null)throw Error(i(349));_||(Kr&127)!==0||__(m,u,h)}return h}function __(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=Be.updateQueue,u===null?(u=Bd(),Be.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function E_(o,u,h,m){u.value=h,u.getSnapshot=m,T_(u)&&C_(o)}function x_(o,u,h){return h(function(){T_(u)&&C_(o)})}function T_(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!di(o,h)}catch{return!0}}function C_(o){var u=Ca(o,2);u!==null&&ii(u,o,2)}function wg(o){var u=Hn();if(typeof o=="function"){var h=o;if(o=h(),La){pr(!0);try{h()}finally{pr(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:o},u}function M_(o,u,h,m){return o.baseState=h,Ag(o,ut,typeof m=="function"?m:Wr)}function $B(o,u,h,m,A){if(qd(o))throw Error(i(485));if(o=u.action,o!==null){var _={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){_.listeners.push(M)}};B.T!==null?h(!0):_.isTransition=!1,m(_),h=u.pending,h===null?(_.next=u.pending=_,P_(u,_)):(_.next=h.next,u.pending=h.next=_)}}function P_(o,u){var h=u.action,m=u.payload,A=o.state;if(u.isTransition){var _=B.T,M={};B.T=M;try{var D=h(A,m),U=B.S;U!==null&&U(M,D),R_(o,u,D)}catch(Y){_g(o,u,Y)}finally{_!==null&&M.types!==null&&(_.types=M.types),B.T=_}}else try{_=h(A,m),R_(o,u,_)}catch(Y){_g(o,u,Y)}}function R_(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){N_(o,u,m)},function(m){return _g(o,u,m)}):N_(o,u,h)}function N_(o,u,h){u.status="fulfilled",u.value=h,I_(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,P_(o,h)))}function _g(o,u,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,I_(u),u=u.next;while(u!==m)}o.action=null}function I_(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function D_(o,u){return u}function O_(o,u){if(Ye){var h=pt.formState;if(h!==null){e:{var m=Be;if(Ye){if(yt){t:{for(var A=yt,_=Ii;A.nodeType!==8;){if(!_){A=null;break t}if(A=Oi(A.nextSibling),A===null){A=null;break t}}_=A.data,A=_==="F!"||_==="F"?A:null}if(A){yt=Oi(A.nextSibling),m=A.data==="F!";break e}}ks(m)}m=!1}m&&(u=h[0])}}return h=Hn(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D_,lastRenderedState:u},h.queue=m,h=Z_.bind(null,Be,m),m.dispatch=h,m=wg(!1),_=Pg.bind(null,Be,!1,m.queue),m=Hn(),A={state:u,dispatch:null,action:o,pending:null},m.queue=A,h=$B.bind(null,Be,A,_,h),A.dispatch=h,m.memoizedState=o,[u,h,!1]}function k_(o){var u=Bt();return L_(u,ut,o)}function L_(o,u,h){if(u=Ag(o,u,D_)[0],o=zd(Wr)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=bu(u)}catch(M){throw M===Ho?Rd:M}else m=u;u=Bt();var A=u.queue,_=A.dispatch;return h!==u.memoizedState&&(Be.flags|=2048,jo(9,{destroy:void 0},jB.bind(null,A,h),null)),[m,_,o]}function jB(o,u){o.action=u}function U_(o){var u=Bt(),h=ut;if(h!==null)return L_(u,h,o);Bt(),u=u.memoizedState,h=Bt();var m=h.queue.dispatch;return h.memoizedState=o,[u,m,!1]}function jo(o,u,h,m){return o={tag:o,create:h,deps:m,inst:u,next:null},u=Be.updateQueue,u===null&&(u=Bd(),Be.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,u.lastEffect=o),o}function B_(){return Bt().memoizedState}function Hd(o,u,h,m){var A=Hn();Be.flags|=o,A.memoizedState=jo(1|u,{destroy:void 0},h,m===void 0?null:m)}function Gd(o,u,h,m){var A=Bt();m=m===void 0?null:m;var _=A.memoizedState.inst;ut!==null&&m!==null&&pg(m,ut.memoizedState.deps)?A.memoizedState=jo(u,_,h,m):(Be.flags|=o,A.memoizedState=jo(1|u,_,h,m))}function F_(o,u){Hd(8390656,8,o,u)}function Eg(o,u){Gd(2048,8,o,u)}function YB(o){Be.flags|=4;var u=Be.updateQueue;if(u===null)u=Bd(),Be.updateQueue=u,u.events=[o];else{var h=u.events;h===null?u.events=[o]:h.push(o)}}function z_(o){var u=Bt().memoizedState;return YB({ref:u,nextImpl:o}),function(){if((et&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function H_(o,u){return Gd(4,2,o,u)}function G_(o,u){return Gd(4,4,o,u)}function q_(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function V_(o,u,h){h=h!=null?h.concat([o]):null,Gd(4,4,q_.bind(null,u,o),h)}function xg(){}function $_(o,u){var h=Bt();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&pg(u,m[1])?m[0]:(h.memoizedState=[o,u],o)}function j_(o,u){var h=Bt();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&pg(u,m[1]))return m[0];if(m=o(),La){pr(!0);try{o()}finally{pr(!1)}}return h.memoizedState=[m,u],m}function Tg(o,u,h){return h===void 0||(Kr&1073741824)!==0&&(Ve&261930)===0?o.memoizedState=u:(o.memoizedState=h,o=YE(),Be.lanes|=o,Vs|=o,h)}function Y_(o,u,h,m){return di(h,u)?h:qo.current!==null?(o=Tg(o,h,m),di(o,u)||(qt=!0),o):(Kr&42)===0||(Kr&1073741824)!==0&&(Ve&261930)===0?(qt=!0,o.memoizedState=h):(o=YE(),Be.lanes|=o,Vs|=o,u)}function K_(o,u,h,m,A){var _=V.p;V.p=_!==0&&8>_?_:8;var M=B.T,D={};B.T=D,Pg(o,!1,u,h);try{var U=A(),Y=B.S;if(Y!==null&&Y(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=GB(U,m);Au(o,u,ee,vi(o))}else Au(o,u,m,vi(o))}catch(ne){Au(o,u,{then:function(){},status:"rejected",reason:ne},vi())}finally{V.p=_,M!==null&&D.types!==null&&(M.types=D.types),B.T=M}}function KB(){}function Cg(o,u,h,m){if(o.tag!==5)throw Error(i(476));var A=W_(o).queue;K_(o,A,u,re,h===null?KB:function(){return X_(o),h(m)})}function W_(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:re},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function X_(o){var u=W_(o);u.next===null&&(u=o.alternate.memoizedState),Au(o,u.next.queue,{},vi())}function Mg(){return bn(Uu)}function J_(){return Bt().memoizedState}function Q_(){return Bt().memoizedState}function WB(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=vi();o=Bs(h);var m=Fs(u,o,h);m!==null&&(ii(m,u,h),mu(m,u,h)),u={cache:ig()},o.payload=u;return}u=u.return}}function XB(o,u,h){var m=vi();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},qd(o)?eE(u,h):(h=jm(o,u,h,m),h!==null&&(ii(h,o,m),tE(h,u,m)))}function Z_(o,u,h){var m=vi();Au(o,u,h,m)}function Au(o,u,h,m){var A={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(qd(o))eE(u,A);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var M=u.lastRenderedState,D=_(M,h);if(A.hasEagerState=!0,A.eagerState=D,di(D,M))return _d(o,u,A,0),pt===null&&wd(),!1}catch{}if(h=jm(o,u,A,m),h!==null)return ii(h,o,m),tE(h,u,m),!0}return!1}function Pg(o,u,h,m){if(m={lane:2,revertLane:ov(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},qd(o)){if(u)throw Error(i(479))}else u=jm(o,h,m,2),u!==null&&ii(u,o,2)}function qd(o){var u=o.alternate;return o===Be||u!==null&&u===Be}function eE(o,u){Vo=Ld=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function tE(o,u,h){if((h&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,we(o,h)}}var Su={readContext:bn,use:Fd,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Su.useEffectEvent=Nt;var nE={readContext:bn,use:Fd,useCallback:function(o,u){return Hn().memoizedState=[o,u===void 0?null:u],o},useContext:bn,useEffect:F_,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,Hd(4194308,4,q_.bind(null,u,o),h)},useLayoutEffect:function(o,u){return Hd(4194308,4,o,u)},useInsertionEffect:function(o,u){Hd(4,2,o,u)},useMemo:function(o,u){var h=Hn();u=u===void 0?null:u;var m=o();if(La){pr(!0);try{o()}finally{pr(!1)}}return h.memoizedState=[m,u],m},useReducer:function(o,u,h){var m=Hn();if(h!==void 0){var A=h(u);if(La){pr(!0);try{h(u)}finally{pr(!1)}}}else A=u;return m.memoizedState=m.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},m.queue=o,o=o.dispatch=XB.bind(null,Be,o),[m.memoizedState,o]},useRef:function(o){var u=Hn();return o={current:o},u.memoizedState=o},useState:function(o){o=wg(o);var u=o.queue,h=Z_.bind(null,Be,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:xg,useDeferredValue:function(o,u){var h=Hn();return Tg(h,o,u)},useTransition:function(){var o=wg(!1);return o=K_.bind(null,Be,o.queue,!0,!1),Hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var m=Be,A=Hn();if(Ye){if(h===void 0)throw Error(i(407));h=h()}else{if(h=u(),pt===null)throw Error(i(349));(Ve&127)!==0||__(m,u,h)}A.memoizedState=h;var _={value:h,getSnapshot:u};return A.queue=_,F_(x_.bind(null,m,_,o),[o]),m.flags|=2048,jo(9,{destroy:void 0},E_.bind(null,m,_,h,u),null),h},useId:function(){var o=Hn(),u=pt.identifierPrefix;if(Ye){var h=yr,m=vr;h=(m&~(1<<32-zn(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=Ud++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=qB++,u="_"+u+"r_"+h.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Mg,useFormState:O_,useActionState:O_,useOptimistic:function(o){var u=Hn();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Pg.bind(null,Be,!0,h),h.dispatch=u,[o,u]},useMemoCache:bg,useCacheRefresh:function(){return Hn().memoizedState=WB.bind(null,Be)},useEffectEvent:function(o){var u=Hn(),h={impl:o};return u.memoizedState=h,function(){if((et&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Rg={readContext:bn,use:Fd,useCallback:$_,useContext:bn,useEffect:Eg,useImperativeHandle:V_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:j_,useReducer:zd,useRef:B_,useState:function(){return zd(Wr)},useDebugValue:xg,useDeferredValue:function(o,u){var h=Bt();return Y_(h,ut.memoizedState,o,u)},useTransition:function(){var o=zd(Wr)[0],u=Bt().memoizedState;return[typeof o=="boolean"?o:bu(o),u]},useSyncExternalStore:w_,useId:J_,useHostTransitionStatus:Mg,useFormState:k_,useActionState:k_,useOptimistic:function(o,u){var h=Bt();return M_(h,ut,o,u)},useMemoCache:bg,useCacheRefresh:Q_};Rg.useEffectEvent=z_;var iE={readContext:bn,use:Fd,useCallback:$_,useContext:bn,useEffect:Eg,useImperativeHandle:V_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:j_,useReducer:Sg,useRef:B_,useState:function(){return Sg(Wr)},useDebugValue:xg,useDeferredValue:function(o,u){var h=Bt();return ut===null?Tg(h,o,u):Y_(h,ut.memoizedState,o,u)},useTransition:function(){var o=Sg(Wr)[0],u=Bt().memoizedState;return[typeof o=="boolean"?o:bu(o),u]},useSyncExternalStore:w_,useId:J_,useHostTransitionStatus:Mg,useFormState:U_,useActionState:U_,useOptimistic:function(o,u){var h=Bt();return ut!==null?M_(h,ut,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:bg,useCacheRefresh:Q_};iE.useEffectEvent=z_;function Ng(o,u,h,m){u=o.memoizedState,h=h(m,u),h=h==null?u:p({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ig={enqueueSetState:function(o,u,h){o=o._reactInternals;var m=vi(),A=Bs(m);A.payload=u,h!=null&&(A.callback=h),u=Fs(o,A,m),u!==null&&(ii(u,o,m),mu(u,o,m))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var m=vi(),A=Bs(m);A.tag=1,A.payload=u,h!=null&&(A.callback=h),u=Fs(o,A,m),u!==null&&(ii(u,o,m),mu(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=vi(),m=Bs(h);m.tag=2,u!=null&&(m.callback=u),u=Fs(o,m,h),u!==null&&(ii(u,o,h),mu(u,o,h))}};function rE(o,u,h,m,A,_,M){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,_,M):u.prototype&&u.prototype.isPureReactComponent?!ou(h,m)||!ou(A,_):!0}function sE(o,u,h,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==o&&Ig.enqueueReplaceState(u,u.state,null)}function Ua(o,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(o=o.defaultProps){h===u&&(h=p({},h));for(var A in o)h[A]===void 0&&(h[A]=o[A])}return h}function aE(o){Sd(o)}function oE(o){console.error(o)}function lE(o){Sd(o)}function Vd(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function uE(o,u,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Dg(o,u,h){return h=Bs(h),h.tag=3,h.payload={element:null},h.callback=function(){Vd(o,u)},h}function cE(o){return o=Bs(o),o.tag=3,o}function dE(o,u,h,m){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var _=m.value;o.payload=function(){return A(_)},o.callback=function(){uE(u,h,m)}}var M=h.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(o.callback=function(){uE(u,h,m),typeof A!="function"&&($s===null?$s=new Set([this]):$s.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function JB(o,u,h,m,A){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Bo(u,h,A,!0),h=hi.current,h!==null){switch(h.tag){case 31:case 13:return Di===null?nf():h.alternate===null&&It===0&&(It=3),h.flags&=-257,h.flags|=65536,h.lanes=A,m===Nd?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),rv(o,m,A)),!1;case 22:return h.flags|=65536,m===Nd?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),rv(o,m,A)),!1}throw Error(i(435,h.tag))}return rv(o,m,A),nf(),!1}if(Ye)return u=hi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,m!==Qm&&(o=Error(i(422),{cause:m}),cu(Pi(o,h)))):(m!==Qm&&(u=Error(i(423),{cause:m}),cu(Pi(u,h))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,m=Pi(m,h),A=Dg(o.stateNode,m,A),ug(o,A),It!==4&&(It=2)),!1;var _=Error(i(520),{cause:m});if(_=Pi(_,h),Pu===null?Pu=[_]:Pu.push(_),It!==4&&(It=2),u===null)return!0;m=Pi(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=A&-A,h.lanes|=o,o=Dg(h.stateNode,m,o),ug(h,o),!1;case 1:if(u=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_))))return h.flags|=65536,A&=-A,h.lanes|=A,A=cE(A),dE(A,o,h,m),ug(h,A),!1}h=h.return}while(h!==null);return!1}var Og=Error(i(461)),qt=!1;function An(o,u,h,m){u.child=o===null?m_(u,null,h,m):ka(u,o.child,h,m)}function fE(o,u,h,m,A){h=h.render;var _=u.ref;if("ref"in m){var M={};for(var D in m)D!=="ref"&&(M[D]=m[D])}else M=m;return Na(u),m=mg(o,u,h,M,_,A),D=gg(),o!==null&&!qt?(vg(o,u,A),Xr(o,u,A)):(Ye&&D&&Xm(u),u.flags|=1,An(o,u,m,A),u.child)}function hE(o,u,h,m,A){if(o===null){var _=h.type;return typeof _=="function"&&!Ym(_)&&_.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=_,pE(o,u,_,m,A)):(o=xd(h.type,null,m,u,u.mode,A),o.ref=u.ref,o.return=u,u.child=o)}if(_=o.child,!Gg(o,A)){var M=_.memoizedProps;if(h=h.compare,h=h!==null?h:ou,h(M,m)&&o.ref===u.ref)return Xr(o,u,A)}return u.flags|=1,o=Vr(_,m),o.ref=u.ref,o.return=u,u.child=o}function pE(o,u,h,m,A){if(o!==null){var _=o.memoizedProps;if(ou(_,m)&&o.ref===u.ref)if(qt=!1,u.pendingProps=m=_,Gg(o,A))(o.flags&131072)!==0&&(qt=!0);else return u.lanes=o.lanes,Xr(o,u,A)}return kg(o,u,h,m,A)}function mE(o,u,h,m){var A=m.children,_=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,o!==null){for(m=u.child=o.child,A=0;m!==null;)A=A|m.lanes|m.childLanes,m=m.sibling;m=A&~_}else m=0,u.child=null;return gE(o,u,_,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Pd(u,_!==null?_.cachePool:null),_!==null?y_(u,_):dg(),b_(u);else return m=u.lanes=536870912,gE(o,u,_!==null?_.baseLanes|h:h,h,m)}else _!==null?(Pd(u,_.cachePool),y_(u,_),Hs(),u.memoizedState=null):(o!==null&&Pd(u,null),dg(),Hs());return An(o,u,A,h),u.child}function wu(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function gE(o,u,h,m,A){var _=sg();return _=_===null?null:{parent:Ht._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},o!==null&&Pd(u,null),dg(),b_(u),o!==null&&Bo(o,u,m,!0),u.childLanes=A,null}function $d(o,u){return u=Yd({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function vE(o,u,h){return ka(u,o.child,null,h),o=$d(u,u.pendingProps),o.flags|=2,pi(u),u.memoizedState=null,o}function QB(o,u,h){var m=u.pendingProps,A=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ye){if(m.mode==="hidden")return o=$d(u,m),u.lanes=536870912,wu(null,o);if(hg(u),(o=yt)?(o=Px(o,Ii),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ds!==null?{id:vr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},h=e_(o),h.return=u,u.child=h,yn=u,yt=null)):o=null,o===null)throw ks(u);return u.lanes=536870912,null}return $d(u,m)}var _=o.memoizedState;if(_!==null){var M=_.dehydrated;if(hg(u),A)if(u.flags&256)u.flags&=-257,u=vE(o,u,h);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(qt||Bo(o,u,h,!1),A=(h&o.childLanes)!==0,qt||A){if(m=pt,m!==null&&(M=ye(m,h),M!==0&&M!==_.retryLane))throw _.retryLane=M,Ca(o,M),ii(m,o,M),Og;nf(),u=vE(o,u,h)}else o=_.treeContext,yt=Oi(M.nextSibling),yn=u,Ye=!0,Os=null,Ii=!1,o!==null&&i_(u,o),u=$d(u,m),u.flags|=4096;return u}return o=Vr(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function jd(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function kg(o,u,h,m,A){return Na(u),h=mg(o,u,h,m,void 0,A),m=gg(),o!==null&&!qt?(vg(o,u,A),Xr(o,u,A)):(Ye&&m&&Xm(u),u.flags|=1,An(o,u,h,A),u.child)}function yE(o,u,h,m,A,_){return Na(u),u.updateQueue=null,h=S_(u,m,h,A),A_(o),m=gg(),o!==null&&!qt?(vg(o,u,_),Xr(o,u,_)):(Ye&&m&&Xm(u),u.flags|=1,An(o,u,h,_),u.child)}function bE(o,u,h,m,A){if(Na(u),u.stateNode===null){var _=Oo,M=h.contextType;typeof M=="object"&&M!==null&&(_=bn(M)),_=new h(m,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ig,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=m,_.state=u.memoizedState,_.refs={},og(u),M=h.contextType,_.context=typeof M=="object"&&M!==null?bn(M):Oo,_.state=u.memoizedState,M=h.getDerivedStateFromProps,typeof M=="function"&&(Ng(u,h,M,m),_.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(M=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),M!==_.state&&Ig.enqueueReplaceState(_,_.state,null),vu(u,m,_,A),gu(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){_=u.stateNode;var D=u.memoizedProps,U=Ua(h,D);_.props=U;var Y=_.context,ee=h.contextType;M=Oo,typeof ee=="object"&&ee!==null&&(M=bn(ee));var ne=h.getDerivedStateFromProps;ee=typeof ne=="function"||typeof _.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(D||Y!==M)&&sE(u,_,m,M),Us=!1;var W=u.memoizedState;_.state=W,vu(u,m,_,A),gu(),Y=u.memoizedState,D||W!==Y||Us?(typeof ne=="function"&&(Ng(u,h,ne,m),Y=u.memoizedState),(U=Us||rE(u,h,U,m,W,Y,M))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=Y),_.props=m,_.state=Y,_.context=M,m=U):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{_=u.stateNode,lg(o,u),M=u.memoizedProps,ee=Ua(h,M),_.props=ee,ne=u.pendingProps,W=_.context,Y=h.contextType,U=Oo,typeof Y=="object"&&Y!==null&&(U=bn(Y)),D=h.getDerivedStateFromProps,(Y=typeof D=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M!==ne||W!==U)&&sE(u,_,m,U),Us=!1,W=u.memoizedState,_.state=W,vu(u,m,_,A),gu();var J=u.memoizedState;M!==ne||W!==J||Us||o!==null&&o.dependencies!==null&&Cd(o.dependencies)?(typeof D=="function"&&(Ng(u,h,D,m),J=u.memoizedState),(ee=Us||rE(u,h,ee,m,W,J,U)||o!==null&&o.dependencies!==null&&Cd(o.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,J,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,J,U)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||M===o.memoizedProps&&W===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&W===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=J),_.props=m,_.state=J,_.context=U,m=ee):(typeof _.componentDidUpdate!="function"||M===o.memoizedProps&&W===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&W===o.memoizedState||(u.flags|=1024),m=!1)}return _=m,jd(o,u),m=(u.flags&128)!==0,_||m?(_=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,o!==null&&m?(u.child=ka(u,o.child,null,A),u.child=ka(u,null,h,A)):An(o,u,h,A),u.memoizedState=_.state,o=u.child):o=Xr(o,u,A),o}function AE(o,u,h,m){return Pa(),u.flags|=256,An(o,u,h,m),u.child}var Lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ug(o){return{baseLanes:o,cachePool:u_()}}function Bg(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=gi),o}function SE(o,u,h){var m=u.pendingProps,A=!1,_=(u.flags&128)!==0,M;if((M=_)||(M=o!==null&&o.memoizedState===null?!1:(Ut.current&2)!==0),M&&(A=!0,u.flags&=-129),M=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ye){if(A?zs(u):Hs(),(o=yt)?(o=Px(o,Ii),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ds!==null?{id:vr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},h=e_(o),h.return=u,u.child=h,yn=u,yt=null)):o=null,o===null)throw ks(u);return Av(o)?u.lanes=32:u.lanes=536870912,null}var D=m.children;return m=m.fallback,A?(Hs(),A=u.mode,D=Yd({mode:"hidden",children:D},A),m=Ma(m,A,h,null),D.return=u,m.return=u,D.sibling=m,u.child=D,m=u.child,m.memoizedState=Ug(h),m.childLanes=Bg(o,M,h),u.memoizedState=Lg,wu(null,m)):(zs(u),Fg(u,D))}var U=o.memoizedState;if(U!==null&&(D=U.dehydrated,D!==null)){if(_)u.flags&256?(zs(u),u.flags&=-257,u=zg(o,u,h)):u.memoizedState!==null?(Hs(),u.child=o.child,u.flags|=128,u=null):(Hs(),D=m.fallback,A=u.mode,m=Yd({mode:"visible",children:m.children},A),D=Ma(D,A,h,null),D.flags|=2,m.return=u,D.return=u,m.sibling=D,u.child=m,ka(u,o.child,null,h),m=u.child,m.memoizedState=Ug(h),m.childLanes=Bg(o,M,h),u.memoizedState=Lg,u=wu(null,m));else if(zs(u),Av(D)){if(M=D.nextSibling&&D.nextSibling.dataset,M)var Y=M.dgst;M=Y,m=Error(i(419)),m.stack="",m.digest=M,cu({value:m,source:null,stack:null}),u=zg(o,u,h)}else if(qt||Bo(o,u,h,!1),M=(h&o.childLanes)!==0,qt||M){if(M=pt,M!==null&&(m=ye(M,h),m!==0&&m!==U.retryLane))throw U.retryLane=m,Ca(o,m),ii(M,o,m),Og;bv(D)||nf(),u=zg(o,u,h)}else bv(D)?(u.flags|=192,u.child=o.child,u=null):(o=U.treeContext,yt=Oi(D.nextSibling),yn=u,Ye=!0,Os=null,Ii=!1,o!==null&&i_(u,o),u=Fg(u,m.children),u.flags|=4096);return u}return A?(Hs(),D=m.fallback,A=u.mode,U=o.child,Y=U.sibling,m=Vr(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,Y!==null?D=Vr(Y,D):(D=Ma(D,A,h,null),D.flags|=2),D.return=u,m.return=u,m.sibling=D,u.child=m,wu(null,m),m=u.child,D=o.child.memoizedState,D===null?D=Ug(h):(A=D.cachePool,A!==null?(U=Ht._currentValue,A=A.parent!==U?{parent:U,pool:U}:A):A=u_(),D={baseLanes:D.baseLanes|h,cachePool:A}),m.memoizedState=D,m.childLanes=Bg(o,M,h),u.memoizedState=Lg,wu(o.child,m)):(zs(u),h=o.child,o=h.sibling,h=Vr(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,o!==null&&(M=u.deletions,M===null?(u.deletions=[o],u.flags|=16):M.push(o)),u.child=h,u.memoizedState=null,h)}function Fg(o,u){return u=Yd({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Yd(o,u){return o=fi(22,o,null,u),o.lanes=0,o}function zg(o,u,h){return ka(u,o.child,null,h),o=Fg(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function wE(o,u,h){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),tg(o.return,u,h)}function Hg(o,u,h,m,A,_){var M=o.memoizedState;M===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:A,treeForkCount:_}:(M.isBackwards=u,M.rendering=null,M.renderingStartTime=0,M.last=m,M.tail=h,M.tailMode=A,M.treeForkCount=_)}function _E(o,u,h){var m=u.pendingProps,A=m.revealOrder,_=m.tail;m=m.children;var M=Ut.current,D=(M&2)!==0;if(D?(M=M&1|2,u.flags|=128):M&=1,ie(Ut,M),An(o,u,m,h),m=Ye?uu:0,!D&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wE(o,h,u);else if(o.tag===19)wE(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(A){case"forwards":for(h=u.child,A=null;h!==null;)o=h.alternate,o!==null&&kd(o)===null&&(A=h),h=h.sibling;h=A,h===null?(A=u.child,u.child=null):(A=h.sibling,h.sibling=null),Hg(u,!1,A,h,_,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,A=u.child,u.child=null;A!==null;){if(o=A.alternate,o!==null&&kd(o)===null){u.child=A;break}o=A.sibling,A.sibling=h,h=A,A=o}Hg(u,!0,h,null,_,m);break;case"together":Hg(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function Xr(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),Vs|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(Bo(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,h=Vr(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=Vr(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function Gg(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Cd(o)))}function ZB(o,u,h){switch(u.tag){case 3:lt(u,u.stateNode.containerInfo),Ls(u,Ht,o.memoizedState.cache),Pa();break;case 27:case 5:Re(u);break;case 4:lt(u,u.stateNode.containerInfo);break;case 10:Ls(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,hg(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(zs(u),u.flags|=128,null):(h&u.child.childLanes)!==0?SE(o,u,h):(zs(u),o=Xr(o,u,h),o!==null?o.sibling:null);zs(u);break;case 19:var A=(o.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Bo(o,u,h,!1),m=(h&u.childLanes)!==0),A){if(m)return _E(o,u,h);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ie(Ut,Ut.current),m)break;return null;case 22:return u.lanes=0,mE(o,u,h,u.pendingProps);case 24:Ls(u,Ht,o.memoizedState.cache)}return Xr(o,u,h)}function EE(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)qt=!0;else{if(!Gg(o,h)&&(u.flags&128)===0)return qt=!1,ZB(o,u,h);qt=(o.flags&131072)!==0}else qt=!1,Ye&&(u.flags&1048576)!==0&&n_(u,uu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=Da(u.elementType),u.type=o,typeof o=="function")Ym(o)?(m=Ua(o,m),u.tag=1,u=bE(null,u,o,m,h)):(u.tag=0,u=kg(null,u,o,m,h));else{if(o!=null){var A=o.$$typeof;if(A===N){u.tag=11,u=fE(null,u,o,m,h);break e}else if(A===O){u.tag=14,u=hE(null,u,o,m,h);break e}}throw u=oe(o)||o,Error(i(306,u,""))}}return u;case 0:return kg(o,u,u.type,u.pendingProps,h);case 1:return m=u.type,A=Ua(m,u.pendingProps),bE(o,u,m,A,h);case 3:e:{if(lt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));m=u.pendingProps;var _=u.memoizedState;A=_.element,lg(o,u),vu(u,m,null,h);var M=u.memoizedState;if(m=M.cache,Ls(u,Ht,m),m!==_.cache&&ng(u,[Ht],h,!0),gu(),m=M.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:M.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=AE(o,u,m,h);break e}else if(m!==A){A=Pi(Error(i(424)),u),cu(A),u=AE(o,u,m,h);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,yt=Oi(o.firstChild),yn=u,Ye=!0,Os=null,Ii=!0,h=m_(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Pa(),m===A){u=Xr(o,u,h);break e}An(o,u,m,h)}u=u.child}return u;case 26:return jd(o,u),o===null?(h=kx(u.type,null,u.pendingProps,null))?u.memoizedState=h:Ye||(h=u.type,o=u.pendingProps,m=cf(xe.current).createElement(h),m[vn]=u,m[Jn]=o,Sn(m,h,o),on(m),u.stateNode=m):u.memoizedState=kx(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Re(u),o===null&&Ye&&(m=u.stateNode=Ix(u.type,u.pendingProps,xe.current),yn=u,Ii=!0,A=yt,Ws(u.type)?(Sv=A,yt=Oi(m.firstChild)):yt=A),An(o,u,u.pendingProps.children,h),jd(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ye&&((A=m=yt)&&(m=PF(m,u.type,u.pendingProps,Ii),m!==null?(u.stateNode=m,yn=u,yt=Oi(m.firstChild),Ii=!1,A=!0):A=!1),A||ks(u)),Re(u),A=u.type,_=u.pendingProps,M=o!==null?o.memoizedProps:null,m=_.children,gv(A,_)?m=null:M!==null&&gv(A,M)&&(u.flags|=32),u.memoizedState!==null&&(A=mg(o,u,VB,null,null,h),Uu._currentValue=A),jd(o,u),An(o,u,m,h),u.child;case 6:return o===null&&Ye&&((o=h=yt)&&(h=RF(h,u.pendingProps,Ii),h!==null?(u.stateNode=h,yn=u,yt=null,o=!0):o=!1),o||ks(u)),null;case 13:return SE(o,u,h);case 4:return lt(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=ka(u,null,m,h):An(o,u,m,h),u.child;case 11:return fE(o,u,u.type,u.pendingProps,h);case 7:return An(o,u,u.pendingProps,h),u.child;case 8:return An(o,u,u.pendingProps.children,h),u.child;case 12:return An(o,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,Ls(u,u.type,m.value),An(o,u,m.children,h),u.child;case 9:return A=u.type._context,m=u.pendingProps.children,Na(u),A=bn(A),m=m(A),u.flags|=1,An(o,u,m,h),u.child;case 14:return hE(o,u,u.type,u.pendingProps,h);case 15:return pE(o,u,u.type,u.pendingProps,h);case 19:return _E(o,u,h);case 31:return QB(o,u,h);case 22:return mE(o,u,h,u.pendingProps);case 24:return Na(u),m=bn(Ht),o===null?(A=sg(),A===null&&(A=pt,_=ig(),A.pooledCache=_,_.refCount++,_!==null&&(A.pooledCacheLanes|=h),A=_),u.memoizedState={parent:m,cache:A},og(u),Ls(u,Ht,A)):((o.lanes&h)!==0&&(lg(o,u),vu(u,null,null,h),gu()),A=o.memoizedState,_=u.memoizedState,A.parent!==m?(A={parent:m,cache:m},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),Ls(u,Ht,m)):(m=_.cache,Ls(u,Ht,m),m!==A.cache&&ng(u,[Ht],h,!0))),An(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Jr(o){o.flags|=4}function qg(o,u,h,m,A){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(A&335544128)===A)if(o.stateNode.complete)o.flags|=8192;else if(JE())o.flags|=8192;else throw Oa=Nd,ag}else o.flags&=-16777217}function xE(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!zx(u))if(JE())o.flags|=8192;else throw Oa=Nd,ag}function Kd(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?cd():536870912,o.lanes|=u,Xo|=u)}function _u(o,u){if(!Ye)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function bt(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(u)for(var A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags&65011712,m|=A.flags&65011712,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=m,o.childLanes=h,u}function eF(o,u,h){var m=u.pendingProps;switch(Jm(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(u),null;case 1:return bt(u),null;case 3:return h=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Yr(Ht),Z(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Uo(u)?Jr(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Zm())),bt(u),null;case 26:var A=u.type,_=u.memoizedState;return o===null?(Jr(u),_!==null?(bt(u),xE(u,_)):(bt(u),qg(u,A,null,m,h))):_?_!==o.memoizedState?(Jr(u),bt(u),xE(u,_)):(bt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&Jr(u),bt(u),qg(u,A,o,m,h)),null;case 27:if(Ie(u),h=xe.current,A=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Jr(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return bt(u),null}o=ce.current,Uo(u)?r_(u):(o=Ix(A,m,h),u.stateNode=o,Jr(u))}return bt(u),null;case 5:if(Ie(u),A=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Jr(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return bt(u),null}if(_=ce.current,Uo(u))r_(u);else{var M=cf(xe.current);switch(_){case 1:_=M.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:_=M.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":_=M.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":_=M.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":_=M.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?M.createElement("select",{is:m.is}):M.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?M.createElement(A,{is:m.is}):M.createElement(A)}}_[vn]=u,_[Jn]=m;e:for(M=u.child;M!==null;){if(M.tag===5||M.tag===6)_.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===u)break e;for(;M.sibling===null;){if(M.return===null||M.return===u)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}u.stateNode=_;e:switch(Sn(_,A,m),A){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Jr(u)}}return bt(u),qg(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,h),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&Jr(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(i(166));if(o=xe.current,Uo(u)){if(o=u.stateNode,h=u.memoizedProps,m=null,A=yn,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}o[vn]=u,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||Sx(o.nodeValue,h)),o||ks(u,!0)}else o=cf(o).createTextNode(m),o[vn]=u,u.stateNode=o}return bt(u),null;case 31:if(h=u.memoizedState,o===null||o.memoizedState!==null){if(m=Uo(u),h!==null){if(o===null){if(!m)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[vn]=u}else Pa(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;bt(u),o=!1}else h=Zm(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return u.flags&256?(pi(u),u):(pi(u),null);if((u.flags&128)!==0)throw Error(i(558))}return bt(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=Uo(u),m!==null&&m.dehydrated!==null){if(o===null){if(!A)throw Error(i(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[vn]=u}else Pa(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;bt(u),A=!1}else A=Zm(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(pi(u),u):(pi(u),null)}return pi(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=u.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==A&&(m.flags|=2048)),h!==o&&h&&(u.child.flags|=8192),Kd(u,u.updateQueue),bt(u),null);case 4:return Z(),o===null&&dv(u.stateNode.containerInfo),bt(u),null;case 10:return Yr(u.type),bt(u),null;case 19:if(K(Ut),m=u.memoizedState,m===null)return bt(u),null;if(A=(u.flags&128)!==0,_=m.rendering,_===null)if(A)_u(m,!1);else{if(It!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(_=kd(o),_!==null){for(u.flags|=128,_u(m,!1),o=_.updateQueue,u.updateQueue=o,Kd(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)Zw(h,o),h=h.sibling;return ie(Ut,Ut.current&1|2),Ye&&$r(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Bn()>Zd&&(u.flags|=128,A=!0,_u(m,!1),u.lanes=4194304)}else{if(!A)if(o=kd(_),o!==null){if(u.flags|=128,A=!0,o=o.updateQueue,u.updateQueue=o,Kd(u,o),_u(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ye)return bt(u),null}else 2*Bn()-m.renderingStartTime>Zd&&h!==536870912&&(u.flags|=128,A=!0,_u(m,!1),u.lanes=4194304);m.isBackwards?(_.sibling=u.child,u.child=_):(o=m.last,o!==null?o.sibling=_:u.child=_,m.last=_)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Bn(),o.sibling=null,h=Ut.current,ie(Ut,A?h&1|2:h&1),Ye&&$r(u,m.treeForkCount),o):(bt(u),null);case 22:case 23:return pi(u),fg(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(bt(u),u.subtreeFlags&6&&(u.flags|=8192)):bt(u),h=u.updateQueue,h!==null&&Kd(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),o!==null&&K(Ia),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Yr(Ht),bt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function tF(o,u){switch(Jm(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Yr(Ht),Z(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ie(u),null;case 31:if(u.memoizedState!==null){if(pi(u),u.alternate===null)throw Error(i(340));Pa()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(pi(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Pa()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return K(Ut),null;case 4:return Z(),null;case 10:return Yr(u.type),null;case 22:case 23:return pi(u),fg(),o!==null&&K(Ia),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Yr(Ht),null;case 25:return null;default:return null}}function TE(o,u){switch(Jm(u),u.tag){case 3:Yr(Ht),Z();break;case 26:case 27:case 5:Ie(u);break;case 4:Z();break;case 31:u.memoizedState!==null&&pi(u);break;case 13:pi(u);break;case 19:K(Ut);break;case 10:Yr(u.type);break;case 22:case 23:pi(u),fg(),o!==null&&K(Ia);break;case 24:Yr(Ht)}}function Eu(o,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var A=m.next;h=A;do{if((h.tag&o)===o){m=void 0;var _=h.create,M=h.inst;m=_(),M.destroy=m}h=h.next}while(h!==A)}}catch(D){st(u,u.return,D)}}function Gs(o,u,h){try{var m=u.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var _=A.next;m=_;do{if((m.tag&o)===o){var M=m.inst,D=M.destroy;if(D!==void 0){M.destroy=void 0,A=u;var U=h,Y=D;try{Y()}catch(ee){st(A,U,ee)}}}m=m.next}while(m!==_)}}catch(ee){st(u,u.return,ee)}}function CE(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{v_(u,h)}catch(m){st(o,o.return,m)}}}function ME(o,u,h){h.props=Ua(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){st(o,u,m)}}function xu(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(A){st(o,u,A)}}function br(o,u){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(A){st(o,u,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){st(o,u,A)}else h.current=null}function PE(o){var u=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(A){st(o,o.return,A)}}function Vg(o,u,h){try{var m=o.stateNode;_F(m,o.type,h,u),m[Jn]=u}catch(A){st(o,o.return,A)}}function RE(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ws(o.type)||o.tag===4}function $g(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||RE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ws(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function jg(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Gr));else if(m!==4&&(m===27&&Ws(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(jg(o,u,h),o=o.sibling;o!==null;)jg(o,u,h),o=o.sibling}function Wd(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(m!==4&&(m===27&&Ws(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Wd(o,u,h),o=o.sibling;o!==null;)Wd(o,u,h),o=o.sibling}function NE(o){var u=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,A=u.attributes;A.length;)u.removeAttributeNode(A[0]);Sn(u,m,h),u[vn]=o,u[Jn]=h}catch(_){st(o,o.return,_)}}var Qr=!1,Vt=!1,Yg=!1,IE=typeof WeakSet=="function"?WeakSet:Set,ln=null;function nF(o,u){if(o=o.containerInfo,pv=vf,o=Vw(o),zm(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var A=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var M=0,D=-1,U=-1,Y=0,ee=0,ne=o,W=null;t:for(;;){for(var J;ne!==h||A!==0&&ne.nodeType!==3||(D=M+A),ne!==_||m!==0&&ne.nodeType!==3||(U=M+m),ne.nodeType===3&&(M+=ne.nodeValue.length),(J=ne.firstChild)!==null;)W=ne,ne=J;for(;;){if(ne===o)break t;if(W===h&&++Y===A&&(D=M),W===_&&++ee===m&&(U=M),(J=ne.nextSibling)!==null)break;ne=W,W=ne.parentNode}ne=J}h=D===-1||U===-1?null:{start:D,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(mv={focusedElem:o,selectionRange:h},vf=!1,ln=u;ln!==null;)if(u=ln,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,ln=o;else for(;ln!==null;){switch(u=ln,_=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)A=o[h],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=u,A=_.memoizedProps,_=_.memoizedState,m=h.stateNode;try{var be=Ua(h.type,A);o=m.getSnapshotBeforeUpdate(be,_),m.__reactInternalSnapshotBeforeUpdate=o}catch(Pe){st(h,h.return,Pe)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)yv(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":yv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,ln=o;break}ln=u.return}}function DE(o,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:es(o,h),m&4&&Eu(5,h);break;case 1:if(es(o,h),m&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(M){st(h,h.return,M)}else{var A=Ua(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(A,u,o.__reactInternalSnapshotBeforeUpdate)}catch(M){st(h,h.return,M)}}m&64&&CE(h),m&512&&xu(h,h.return);break;case 3:if(es(o,h),m&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{v_(o,u)}catch(M){st(h,h.return,M)}}break;case 27:u===null&&m&4&&NE(h);case 26:case 5:es(o,h),u===null&&m&4&&PE(h),m&512&&xu(h,h.return);break;case 12:es(o,h);break;case 31:es(o,h),m&4&&LE(o,h);break;case 13:es(o,h),m&4&&UE(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=dF.bind(null,h),NF(o,h))));break;case 22:if(m=h.memoizedState!==null||Qr,!m){u=u!==null&&u.memoizedState!==null||Vt,A=Qr;var _=Vt;Qr=m,(Vt=u)&&!_?ts(o,h,(h.subtreeFlags&8772)!==0):es(o,h),Qr=A,Vt=_}break;case 30:break;default:es(o,h)}}function OE(o){var u=o.alternate;u!==null&&(o.alternate=null,OE(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&_m(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var _t=null,Zn=!1;function Zr(o,u,h){for(h=h.child;h!==null;)kE(o,u,h),h=h.sibling}function kE(o,u,h){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Sa,h)}catch{}switch(h.tag){case 26:Vt||br(h,u),Zr(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Vt||br(h,u);var m=_t,A=Zn;Ws(h.type)&&(_t=h.stateNode,Zn=!1),Zr(o,u,h),Ou(h.stateNode),_t=m,Zn=A;break;case 5:Vt||br(h,u);case 6:if(m=_t,A=Zn,_t=null,Zr(o,u,h),_t=m,Zn=A,_t!==null)if(Zn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(h.stateNode)}catch(_){st(h,u,_)}else try{_t.removeChild(h.stateNode)}catch(_){st(h,u,_)}break;case 18:_t!==null&&(Zn?(o=_t,Cx(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),rl(o)):Cx(_t,h.stateNode));break;case 4:m=_t,A=Zn,_t=h.stateNode.containerInfo,Zn=!0,Zr(o,u,h),_t=m,Zn=A;break;case 0:case 11:case 14:case 15:Gs(2,h,u),Vt||Gs(4,h,u),Zr(o,u,h);break;case 1:Vt||(br(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&ME(h,u,m)),Zr(o,u,h);break;case 21:Zr(o,u,h);break;case 22:Vt=(m=Vt)||h.memoizedState!==null,Zr(o,u,h),Vt=m;break;default:Zr(o,u,h)}}function LE(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{rl(o)}catch(h){st(u,u.return,h)}}}function UE(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{rl(o)}catch(h){st(u,u.return,h)}}function iF(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new IE),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new IE),u;default:throw Error(i(435,o.tag))}}function Xd(o,u){var h=iF(o);u.forEach(function(m){if(!h.has(m)){h.add(m);var A=fF.bind(null,o,m);m.then(A,A)}})}function ei(o,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var A=h[m],_=o,M=u,D=M;e:for(;D!==null;){switch(D.tag){case 27:if(Ws(D.type)){_t=D.stateNode,Zn=!1;break e}break;case 5:_t=D.stateNode,Zn=!1;break e;case 3:case 4:_t=D.stateNode.containerInfo,Zn=!0;break e}D=D.return}if(_t===null)throw Error(i(160));kE(_,M,A),_t=null,Zn=!1,_=A.alternate,_!==null&&(_.return=null),A.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)BE(u,o),u=u.sibling}var er=null;function BE(o,u){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ei(u,o),ti(o),m&4&&(Gs(3,o,o.return),Eu(3,o),Gs(5,o,o.return));break;case 1:ei(u,o),ti(o),m&512&&(Vt||h===null||br(h,h.return)),m&64&&Qr&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var A=er;if(ei(u,o),ti(o),m&512&&(Vt||h===null||br(h,h.return)),m&4){var _=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,A=A.ownerDocument||A;t:switch(m){case"title":_=A.getElementsByTagName("title")[0],(!_||_[Ql]||_[vn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=A.createElement(m),A.head.insertBefore(_,A.querySelector("head > title"))),Sn(_,m,h),_[vn]=o,on(_),m=_;break e;case"link":var M=Bx("link","href",A).get(m+(h.href||""));if(M){for(var D=0;D<M.length;D++)if(_=M[D],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){M.splice(D,1);break t}}_=A.createElement(m),Sn(_,m,h),A.head.appendChild(_);break;case"meta":if(M=Bx("meta","content",A).get(m+(h.content||""))){for(D=0;D<M.length;D++)if(_=M[D],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){M.splice(D,1);break t}}_=A.createElement(m),Sn(_,m,h),A.head.appendChild(_);break;default:throw Error(i(468,m))}_[vn]=o,on(_),m=_}o.stateNode=m}else Fx(A,o.type,o.stateNode);else o.stateNode=Ux(A,m,o.memoizedProps);else _!==m?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,m===null?Fx(A,o.type,o.stateNode):Ux(A,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Vg(o,o.memoizedProps,h.memoizedProps)}break;case 27:ei(u,o),ti(o),m&512&&(Vt||h===null||br(h,h.return)),h!==null&&m&4&&Vg(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ei(u,o),ti(o),m&512&&(Vt||h===null||br(h,h.return)),o.flags&32){A=o.stateNode;try{Co(A,"")}catch(be){st(o,o.return,be)}}m&4&&o.stateNode!=null&&(A=o.memoizedProps,Vg(o,A,h!==null?h.memoizedProps:A)),m&1024&&(Yg=!0);break;case 6:if(ei(u,o),ti(o),m&4){if(o.stateNode===null)throw Error(i(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(be){st(o,o.return,be)}}break;case 3:if(hf=null,A=er,er=df(u.containerInfo),ei(u,o),er=A,ti(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{rl(u.containerInfo)}catch(be){st(o,o.return,be)}Yg&&(Yg=!1,FE(o));break;case 4:m=er,er=df(o.stateNode.containerInfo),ei(u,o),ti(o),er=m;break;case 12:ei(u,o),ti(o);break;case 31:ei(u,o),ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Xd(o,m)));break;case 13:ei(u,o),ti(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Qd=Bn()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Xd(o,m)));break;case 22:A=o.memoizedState!==null;var U=h!==null&&h.memoizedState!==null,Y=Qr,ee=Vt;if(Qr=Y||A,Vt=ee||U,ei(u,o),Vt=ee,Qr=Y,ti(o),m&8192)e:for(u=o.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(h===null||U||Qr||Vt||Ba(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){U=h=u;try{if(_=U.stateNode,A)M=_.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{D=U.stateNode;var ne=U.memoizedProps.style,W=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;D.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(be){st(U,U.return,be)}}}else if(u.tag===6){if(h===null){U=u;try{U.stateNode.nodeValue=A?"":U.memoizedProps}catch(be){st(U,U.return,be)}}}else if(u.tag===18){if(h===null){U=u;try{var J=U.stateNode;A?Mx(J,!0):Mx(U.stateNode,!1)}catch(be){st(U,U.return,be)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Xd(o,h))));break;case 19:ei(u,o),ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Xd(o,m)));break;case 30:break;case 21:break;default:ei(u,o),ti(o)}}function ti(o){var u=o.flags;if(u&2){try{for(var h,m=o.return;m!==null;){if(RE(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var A=h.stateNode,_=$g(o);Wd(o,_,A);break;case 5:var M=h.stateNode;h.flags&32&&(Co(M,""),h.flags&=-33);var D=$g(o);Wd(o,D,M);break;case 3:case 4:var U=h.stateNode.containerInfo,Y=$g(o);jg(o,Y,U);break;default:throw Error(i(161))}}catch(ee){st(o,o.return,ee)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function FE(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;FE(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function es(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)DE(o,u.alternate,u),u=u.sibling}function Ba(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Gs(4,u,u.return),Ba(u);break;case 1:br(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&ME(u,u.return,h),Ba(u);break;case 27:Ou(u.stateNode);case 26:case 5:br(u,u.return),Ba(u);break;case 22:u.memoizedState===null&&Ba(u);break;case 30:Ba(u);break;default:Ba(u)}o=o.sibling}}function ts(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,A=o,_=u,M=_.flags;switch(_.tag){case 0:case 11:case 15:ts(A,_,h),Eu(4,_);break;case 1:if(ts(A,_,h),m=_,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Y){st(m,m.return,Y)}if(m=_,A=m.updateQueue,A!==null){var D=m.stateNode;try{var U=A.shared.hiddenCallbacks;if(U!==null)for(A.shared.hiddenCallbacks=null,A=0;A<U.length;A++)g_(U[A],D)}catch(Y){st(m,m.return,Y)}}h&&M&64&&CE(_),xu(_,_.return);break;case 27:NE(_);case 26:case 5:ts(A,_,h),h&&m===null&&M&4&&PE(_),xu(_,_.return);break;case 12:ts(A,_,h);break;case 31:ts(A,_,h),h&&M&4&&LE(A,_);break;case 13:ts(A,_,h),h&&M&4&&UE(A,_);break;case 22:_.memoizedState===null&&ts(A,_,h),xu(_,_.return);break;case 30:break;default:ts(A,_,h)}u=u.sibling}}function Kg(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&du(h))}function Wg(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&du(o))}function tr(o,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)zE(o,u,h,m),u=u.sibling}function zE(o,u,h,m){var A=u.flags;switch(u.tag){case 0:case 11:case 15:tr(o,u,h,m),A&2048&&Eu(9,u);break;case 1:tr(o,u,h,m);break;case 3:tr(o,u,h,m),A&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&du(o)));break;case 12:if(A&2048){tr(o,u,h,m),o=u.stateNode;try{var _=u.memoizedProps,M=_.id,D=_.onPostCommit;typeof D=="function"&&D(M,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){st(u,u.return,U)}}else tr(o,u,h,m);break;case 31:tr(o,u,h,m);break;case 13:tr(o,u,h,m);break;case 23:break;case 22:_=u.stateNode,M=u.alternate,u.memoizedState!==null?_._visibility&2?tr(o,u,h,m):Tu(o,u):_._visibility&2?tr(o,u,h,m):(_._visibility|=2,Yo(o,u,h,m,(u.subtreeFlags&10256)!==0||!1)),A&2048&&Kg(M,u);break;case 24:tr(o,u,h,m),A&2048&&Wg(u.alternate,u);break;default:tr(o,u,h,m)}}function Yo(o,u,h,m,A){for(A=A&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=o,M=u,D=h,U=m,Y=M.flags;switch(M.tag){case 0:case 11:case 15:Yo(_,M,D,U,A),Eu(8,M);break;case 23:break;case 22:var ee=M.stateNode;M.memoizedState!==null?ee._visibility&2?Yo(_,M,D,U,A):Tu(_,M):(ee._visibility|=2,Yo(_,M,D,U,A)),A&&Y&2048&&Kg(M.alternate,M);break;case 24:Yo(_,M,D,U,A),A&&Y&2048&&Wg(M.alternate,M);break;default:Yo(_,M,D,U,A)}u=u.sibling}}function Tu(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,m=u,A=m.flags;switch(m.tag){case 22:Tu(h,m),A&2048&&Kg(m.alternate,m);break;case 24:Tu(h,m),A&2048&&Wg(m.alternate,m);break;default:Tu(h,m)}u=u.sibling}}var Cu=8192;function Ko(o,u,h){if(o.subtreeFlags&Cu)for(o=o.child;o!==null;)HE(o,u,h),o=o.sibling}function HE(o,u,h){switch(o.tag){case 26:Ko(o,u,h),o.flags&Cu&&o.memoizedState!==null&&qF(h,er,o.memoizedState,o.memoizedProps);break;case 5:Ko(o,u,h);break;case 3:case 4:var m=er;er=df(o.stateNode.containerInfo),Ko(o,u,h),er=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Cu,Cu=16777216,Ko(o,u,h),Cu=m):Ko(o,u,h));break;default:Ko(o,u,h)}}function GE(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Mu(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];ln=m,VE(m,o)}GE(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)qE(o),o=o.sibling}function qE(o){switch(o.tag){case 0:case 11:case 15:Mu(o),o.flags&2048&&Gs(9,o,o.return);break;case 3:Mu(o);break;case 12:Mu(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Jd(o)):Mu(o);break;default:Mu(o)}}function Jd(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];ln=m,VE(m,o)}GE(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Gs(8,u,u.return),Jd(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Jd(u));break;default:Jd(u)}o=o.sibling}}function VE(o,u){for(;ln!==null;){var h=ln;switch(h.tag){case 0:case 11:case 15:Gs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:du(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,ln=m;else e:for(h=o;ln!==null;){m=ln;var A=m.sibling,_=m.return;if(OE(m),m===h){ln=null;break e}if(A!==null){A.return=_,ln=A;break e}ln=_}}}var rF={getCacheForType:function(o){var u=bn(Ht),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h},cacheSignal:function(){return bn(Ht).controller.signal}},sF=typeof WeakMap=="function"?WeakMap:Map,et=0,pt=null,Ge=null,Ve=0,rt=0,mi=null,qs=!1,Wo=!1,Xg=!1,ns=0,It=0,Vs=0,Fa=0,Jg=0,gi=0,Xo=0,Pu=null,ni=null,Qg=!1,Qd=0,$E=0,Zd=1/0,ef=null,$s=null,Jt=0,js=null,Jo=null,is=0,Zg=0,ev=null,jE=null,Ru=0,tv=null;function vi(){return(et&2)!==0&&Ve!==0?Ve&-Ve:B.T!==null?ov():wt()}function YE(){if(gi===0)if((Ve&536870912)===0||Ye){var o=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),gi=o}else gi=536870912;return o=hi.current,o!==null&&(o.flags|=32),gi}function ii(o,u,h){(o===pt&&(rt===2||rt===9)||o.cancelPendingCommit!==null)&&(Qo(o,0),Ys(o,Ve,gi,!1)),wa(o,h),((et&2)===0||o!==pt)&&(o===pt&&((et&2)===0&&(Fa|=h),It===4&&Ys(o,Ve,gi,!1)),Ar(o))}function KE(o,u,h){if((et&6)!==0)throw Error(i(327));var m=!h&&(u&127)===0&&(u&o.expiredLanes)===0||Rs(o,u),A=m?lF(o,u):iv(o,u,!0),_=m;do{if(A===0){Wo&&!m&&Ys(o,u,0,!1);break}else{if(h=o.current.alternate,_&&!aF(h)){A=iv(o,u,!1),_=!1;continue}if(A===2){if(_=u,o.errorRecoveryDisabledLanes&_)var M=0;else M=o.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){u=M;e:{var D=o;A=Pu;var U=D.current.memoizedState.isDehydrated;if(U&&(Qo(D,M).flags|=256),M=iv(D,M,!1),M!==2){if(Xg&&!U){D.errorRecoveryDisabledLanes|=_,Fa|=_,A=4;break e}_=ni,ni=A,_!==null&&(ni===null?ni=_:ni.push.apply(ni,_))}A=M}if(_=!1,A!==2)continue}}if(A===1){Qo(o,0),Ys(o,u,0,!0);break}e:{switch(m=o,_=A,_){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Ys(m,u,gi,!qs);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(A=Qd+300-Bn(),10<A)){if(Ys(m,u,gi,!qs),gr(m,0,!0)!==0)break e;is=u,m.timeoutHandle=xx(WE.bind(null,m,h,ni,ef,Qg,u,gi,Fa,Xo,qs,_,"Throttled",-0,0),A);break e}WE(m,h,ni,ef,Qg,u,gi,Fa,Xo,qs,_,null,-0,0)}}break}while(!0);Ar(o)}function WE(o,u,h,m,A,_,M,D,U,Y,ee,ne,W,J){if(o.timeoutHandle=-1,ne=u.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gr},HE(u,_,ne);var be=(_&62914560)===_?Qd-Bn():(_&4194048)===_?$E-Bn():0;if(be=VF(ne,be),be!==null){is=_,o.cancelPendingCommit=be(ix.bind(null,o,u,_,h,m,A,M,D,U,ee,ne,null,W,J)),Ys(o,_,M,!Y);return}}ix(o,u,_,h,m,A,M,D,U)}function aF(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var A=h[m],_=A.getSnapshot;A=A.value;try{if(!di(_(),A))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ys(o,u,h,m){u&=~Jg,u&=~Fa,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var A=u;0<A;){var _=31-zn(A),M=1<<_;m[_]=-1,A&=~M}h!==0&&de(o,h,u)}function tf(){return(et&6)===0?(Nu(0),!1):!0}function nv(){if(Ge!==null){if(rt===0)var o=Ge.return;else o=Ge,jr=Ra=null,yg(o),Go=null,hu=0,o=Ge;for(;o!==null;)TE(o.alternate,o),o=o.return;Ge=null}}function Qo(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,TF(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),is=0,nv(),pt=o,Ge=h=Vr(o.current,null),Ve=u,rt=0,mi=null,qs=!1,Wo=Rs(o,u),Xg=!1,Xo=gi=Jg=Fa=Vs=It=0,ni=Pu=null,Qg=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var A=31-zn(m),_=1<<A;u|=o[A],m&=~_}return ns=u,wd(),h}function XE(o,u){Be=null,B.H=Su,u===Ho||u===Rd?(u=f_(),rt=3):u===ag?(u=f_(),rt=4):rt=u===Og?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,mi=u,Ge===null&&(It=1,Vd(o,Pi(u,o.current)))}function JE(){var o=hi.current;return o===null?!0:(Ve&4194048)===Ve?Di===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?o===Di:!1}function QE(){var o=B.H;return B.H=Su,o===null?Su:o}function ZE(){var o=B.A;return B.A=rF,o}function nf(){It=4,qs||(Ve&4194048)!==Ve&&hi.current!==null||(Wo=!0),(Vs&134217727)===0&&(Fa&134217727)===0||pt===null||Ys(pt,Ve,gi,!1)}function iv(o,u,h){var m=et;et|=2;var A=QE(),_=ZE();(pt!==o||Ve!==u)&&(ef=null,Qo(o,u)),u=!1;var M=It;e:do try{if(rt!==0&&Ge!==null){var D=Ge,U=mi;switch(rt){case 8:nv(),M=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(u=!0);var Y=rt;if(rt=0,mi=null,Zo(o,D,U,Y),h&&Wo){M=0;break e}break;default:Y=rt,rt=0,mi=null,Zo(o,D,U,Y)}}oF(),M=It;break}catch(ee){XE(o,ee)}while(!0);return u&&o.shellSuspendCounter++,jr=Ra=null,et=m,B.H=A,B.A=_,Ge===null&&(pt=null,Ve=0,wd()),M}function oF(){for(;Ge!==null;)ex(Ge)}function lF(o,u){var h=et;et|=2;var m=QE(),A=ZE();pt!==o||Ve!==u?(ef=null,Zd=Bn()+500,Qo(o,u)):Wo=Rs(o,u);e:do try{if(rt!==0&&Ge!==null){u=Ge;var _=mi;t:switch(rt){case 1:rt=0,mi=null,Zo(o,u,_,1);break;case 2:case 9:if(c_(_)){rt=0,mi=null,tx(u);break}u=function(){rt!==2&&rt!==9||pt!==o||(rt=7),Ar(o)},_.then(u,u);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:c_(_)?(rt=0,mi=null,tx(u)):(rt=0,mi=null,Zo(o,u,_,7));break;case 5:var M=null;switch(Ge.tag){case 26:M=Ge.memoizedState;case 5:case 27:var D=Ge;if(M?zx(M):D.stateNode.complete){rt=0,mi=null;var U=D.sibling;if(U!==null)Ge=U;else{var Y=D.return;Y!==null?(Ge=Y,rf(Y)):Ge=null}break t}}rt=0,mi=null,Zo(o,u,_,5);break;case 6:rt=0,mi=null,Zo(o,u,_,6);break;case 8:nv(),It=6;break e;default:throw Error(i(462))}}uF();break}catch(ee){XE(o,ee)}while(!0);return jr=Ra=null,B.H=m,B.A=A,et=h,Ge!==null?0:(pt=null,Ve=0,wd(),It)}function uF(){for(;Ge!==null&&!Xn();)ex(Ge)}function ex(o){var u=EE(o.alternate,o,ns);o.memoizedProps=o.pendingProps,u===null?rf(o):Ge=u}function tx(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=yE(h,u,u.pendingProps,u.type,void 0,Ve);break;case 11:u=yE(h,u,u.pendingProps,u.type.render,u.ref,Ve);break;case 5:yg(u);default:TE(h,u),u=Ge=Zw(u,ns),u=EE(h,u,ns)}o.memoizedProps=o.pendingProps,u===null?rf(o):Ge=u}function Zo(o,u,h,m){jr=Ra=null,yg(u),Go=null,hu=0;var A=u.return;try{if(JB(o,A,u,h,Ve)){It=1,Vd(o,Pi(h,o.current)),Ge=null;return}}catch(_){if(A!==null)throw Ge=A,_;It=1,Vd(o,Pi(h,o.current)),Ge=null;return}u.flags&32768?(Ye||m===1?o=!0:Wo||(Ve&536870912)!==0?o=!1:(qs=o=!0,(m===2||m===9||m===3||m===6)&&(m=hi.current,m!==null&&m.tag===13&&(m.flags|=16384))),nx(u,o)):rf(u)}function rf(o){var u=o;do{if((u.flags&32768)!==0){nx(u,qs);return}o=u.return;var h=eF(u.alternate,u,ns);if(h!==null){Ge=h;return}if(u=u.sibling,u!==null){Ge=u;return}Ge=u=o}while(u!==null);It===0&&(It=5)}function nx(o,u){do{var h=tF(o.alternate,o);if(h!==null){h.flags&=32767,Ge=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Ge=o;return}Ge=o=h}while(o!==null);It=6,Ge=null}function ix(o,u,h,m,A,_,M,D,U){o.cancelPendingCommit=null;do sf();while(Jt!==0);if((et&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(_=u.lanes|u.childLanes,_|=$m,se(o,h,_,M,D,U),o===pt&&(Ge=pt=null,Ve=0),Jo=u,js=o,is=h,Zg=_,ev=A,jE=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,hF(yo,function(){return lx(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=B.T,B.T=null,A=V.p,V.p=2,M=et,et|=4;try{nF(o,u,h)}finally{et=M,V.p=A,B.T=m}}Jt=1,rx(),sx(),ax()}}function rx(){if(Jt===1){Jt=0;var o=js,u=Jo,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=B.T,B.T=null;var m=V.p;V.p=2;var A=et;et|=4;try{BE(u,o);var _=mv,M=Vw(o.containerInfo),D=_.focusedElem,U=_.selectionRange;if(M!==D&&D&&D.ownerDocument&&qw(D.ownerDocument.documentElement,D)){if(U!==null&&zm(D)){var Y=U.start,ee=U.end;if(ee===void 0&&(ee=Y),"selectionStart"in D)D.selectionStart=Y,D.selectionEnd=Math.min(ee,D.value.length);else{var ne=D.ownerDocument||document,W=ne&&ne.defaultView||window;if(W.getSelection){var J=W.getSelection(),be=D.textContent.length,Pe=Math.min(U.start,be),dt=U.end===void 0?Pe:Math.min(U.end,be);!J.extend&&Pe>dt&&(M=dt,dt=Pe,Pe=M);var q=Gw(D,Pe),H=Gw(D,dt);if(q&&H&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==H.node||J.focusOffset!==H.offset)){var j=ne.createRange();j.setStart(q.node,q.offset),J.removeAllRanges(),Pe>dt?(J.addRange(j),J.extend(H.node,H.offset)):(j.setEnd(H.node,H.offset),J.addRange(j))}}}}for(ne=[],J=D;J=J.parentNode;)J.nodeType===1&&ne.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ne.length;D++){var te=ne[D];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}vf=!!pv,mv=pv=null}finally{et=A,V.p=m,B.T=h}}o.current=u,Jt=2}}function sx(){if(Jt===2){Jt=0;var o=js,u=Jo,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=B.T,B.T=null;var m=V.p;V.p=2;var A=et;et|=4;try{DE(o,u.alternate,u)}finally{et=A,V.p=m,B.T=h}}Jt=3}}function ax(){if(Jt===4||Jt===3){Jt=0,mm();var o=js,u=Jo,h=is,m=jE;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Jt=5:(Jt=0,Jo=js=null,ox(o,o.pendingLanes));var A=o.pendingLanes;if(A===0&&($s=null),je(h),u=u.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Sa,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=B.T,A=V.p,V.p=2,B.T=null;try{for(var _=o.onRecoverableError,M=0;M<m.length;M++){var D=m[M];_(D.value,{componentStack:D.stack})}}finally{B.T=u,V.p=A}}(is&3)!==0&&sf(),Ar(o),A=o.pendingLanes,(h&261930)!==0&&(A&42)!==0?o===tv?Ru++:(Ru=0,tv=o):Ru=0,Nu(0)}}function ox(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,du(u)))}function sf(){return rx(),sx(),ax(),lx()}function lx(){if(Jt!==5)return!1;var o=js,u=Zg;Zg=0;var h=je(is),m=B.T,A=V.p;try{V.p=32>h?32:h,B.T=null,h=ev,ev=null;var _=js,M=is;if(Jt=0,Jo=js=null,is=0,(et&6)!==0)throw Error(i(331));var D=et;if(et|=4,qE(_.current),zE(_,_.current,M,h),et=D,Nu(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Sa,_)}catch{}return!0}finally{V.p=A,B.T=m,ox(o,u)}}function ux(o,u,h){u=Pi(h,u),u=Dg(o.stateNode,u,2),o=Fs(o,u,2),o!==null&&(wa(o,2),Ar(o))}function st(o,u,h){if(o.tag===3)ux(o,o,h);else for(;u!==null;){if(u.tag===3){ux(u,o,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&($s===null||!$s.has(m))){o=Pi(h,o),h=cE(2),m=Fs(u,h,2),m!==null&&(dE(h,m,u,o),wa(m,2),Ar(m));break}}u=u.return}}function rv(o,u,h){var m=o.pingCache;if(m===null){m=o.pingCache=new sF;var A=new Set;m.set(u,A)}else A=m.get(u),A===void 0&&(A=new Set,m.set(u,A));A.has(h)||(Xg=!0,A.add(h),o=cF.bind(null,o,u,h),u.then(o,o))}function cF(o,u,h){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,pt===o&&(Ve&h)===h&&(It===4||It===3&&(Ve&62914560)===Ve&&300>Bn()-Qd?(et&2)===0&&Qo(o,0):Jg|=h,Xo===Ve&&(Xo=0)),Ar(o)}function cx(o,u){u===0&&(u=cd()),o=Ca(o,u),o!==null&&(wa(o,u),Ar(o))}function dF(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),cx(o,h)}function fF(o,u){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,A=o.memoizedState;A!==null&&(h=A.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(u),cx(o,h)}function hF(o,u){return Wl(o,u)}var af=null,el=null,sv=!1,of=!1,av=!1,Ks=0;function Ar(o){o!==el&&o.next===null&&(el===null?af=el=o:el=el.next=o),of=!0,sv||(sv=!0,mF())}function Nu(o,u){if(!av&&of){av=!0;do for(var h=!1,m=af;m!==null;){if(o!==0){var A=m.pendingLanes;if(A===0)var _=0;else{var M=m.suspendedLanes,D=m.pingedLanes;_=(1<<31-zn(42|o)+1)-1,_&=A&~(M&~D),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,px(m,_))}else _=Ve,_=gr(m,m===pt?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||Rs(m,_)||(h=!0,px(m,_));m=m.next}while(h);av=!1}}function pF(){dx()}function dx(){of=sv=!1;var o=0;Ks!==0&&xF()&&(o=Ks);for(var u=Bn(),h=null,m=af;m!==null;){var A=m.next,_=fx(m,u);_===0?(m.next=null,h===null?af=A:h.next=A,A===null&&(el=h)):(h=m,(o!==0||(_&3)!==0)&&(of=!0)),m=A}Jt!==0&&Jt!==5||Nu(o),Ks!==0&&(Ks=0)}function fx(o,u){for(var h=o.suspendedLanes,m=o.pingedLanes,A=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var M=31-zn(_),D=1<<M,U=A[M];U===-1?((D&h)===0||(D&m)!==0)&&(A[M]=Jl(D,u)):U<=u&&(o.expiredLanes|=D),_&=~D}if(u=pt,h=Ve,h=gr(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===u&&(rt===2||rt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&vo(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Rs(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(m!==null&&vo(m),je(h)){case 2:case 8:h=ld;break;case 32:h=yo;break;case 268435456:h=ud;break;default:h=yo}return m=hx.bind(null,o),h=Wl(h,m),o.callbackPriority=u,o.callbackNode=h,u}return m!==null&&m!==null&&vo(m),o.callbackPriority=2,o.callbackNode=null,2}function hx(o,u){if(Jt!==0&&Jt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(sf()&&o.callbackNode!==h)return null;var m=Ve;return m=gr(o,o===pt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(KE(o,m,u),fx(o,Bn()),o.callbackNode!=null&&o.callbackNode===h?hx.bind(null,o):null)}function px(o,u){if(sf())return null;KE(o,u,!0)}function mF(){CF(function(){(et&6)!==0?Wl(Xl,pF):dx()})}function ov(){if(Ks===0){var o=Fo;o===0&&(o=bo,bo<<=1,(bo&261888)===0&&(bo=256)),Ks=o}return Ks}function mx(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:pd(""+o)}function gx(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function gF(o,u,h,m,A){if(u==="submit"&&h&&h.stateNode===A){var _=mx((A[Jn]||null).action),M=m.submitter;M&&(u=(u=M[Jn]||null)?mx(u.formAction):M.getAttribute("formAction"),u!==null&&(_=u,M=null));var D=new yd("action","action",null,m,A);o.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ks!==0){var U=M?gx(A,M):new FormData(A);Cg(h,{pending:!0,data:U,method:A.method,action:_},null,U)}}else typeof _=="function"&&(D.preventDefault(),U=M?gx(A,M):new FormData(A),Cg(h,{pending:!0,data:U,method:A.method,action:_},_,U))},currentTarget:A}]})}}for(var lv=0;lv<Vm.length;lv++){var uv=Vm[lv],vF=uv.toLowerCase(),yF=uv[0].toUpperCase()+uv.slice(1);Zi(vF,"on"+yF)}Zi(Yw,"onAnimationEnd"),Zi(Kw,"onAnimationIteration"),Zi(Ww,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(OB,"onTransitionRun"),Zi(kB,"onTransitionStart"),Zi(LB,"onTransitionCancel"),Zi(Xw,"onTransitionEnd"),xo("onMouseEnter",["mouseout","mouseover"]),xo("onMouseLeave",["mouseout","mouseover"]),xo("onPointerEnter",["pointerout","pointerover"]),xo("onPointerLeave",["pointerout","pointerover"]),_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_a("onBeforeInput",["compositionend","keypress","textInput","paste"]),_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function vx(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],A=m.event;m=m.listeners;e:{var _=void 0;if(u)for(var M=m.length-1;0<=M;M--){var D=m[M],U=D.instance,Y=D.currentTarget;if(D=D.listener,U!==_&&A.isPropagationStopped())break e;_=D,A.currentTarget=Y;try{_(A)}catch(ee){Sd(ee)}A.currentTarget=null,_=U}else for(M=0;M<m.length;M++){if(D=m[M],U=D.instance,Y=D.currentTarget,D=D.listener,U!==_&&A.isPropagationStopped())break e;_=D,A.currentTarget=Y;try{_(A)}catch(ee){Sd(ee)}A.currentTarget=null,_=U}}}}function qe(o,u){var h=u[wm];h===void 0&&(h=u[wm]=new Set);var m=o+"__bubble";h.has(m)||(yx(u,o,2,!1),h.add(m))}function cv(o,u,h){var m=0;u&&(m|=4),yx(h,o,m,u)}var lf="_reactListening"+Math.random().toString(36).slice(2);function dv(o){if(!o[lf]){o[lf]=!0,dw.forEach(function(h){h!=="selectionchange"&&(bF.has(h)||cv(h,!1,o),cv(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[lf]||(u[lf]=!0,cv("selectionchange",!1,u))}}function yx(o,u,h,m){switch(Yx(u)){case 2:var A=YF;break;case 8:A=KF;break;default:A=Tv}h=A.bind(null,u,h,o),A=void 0,!Nm||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),m?A!==void 0?o.addEventListener(u,h,{capture:!0,passive:A}):o.addEventListener(u,h,!0):A!==void 0?o.addEventListener(u,h,{passive:A}):o.addEventListener(u,h,!1)}function fv(o,u,h,m,A){var _=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var D=m.stateNode.containerInfo;if(D===A)break;if(M===4)for(M=m.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===A)return;M=M.return}for(;D!==null;){if(M=wo(D),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){m=_=M;continue e}D=D.parentNode}}m=m.return}_w(function(){var Y=_,ee=Pm(h),ne=[];e:{var W=Jw.get(o);if(W!==void 0){var J=yd,be=o;switch(o){case"keypress":if(gd(h)===0)break e;case"keydown":case"keyup":J=fB;break;case"focusin":be="focus",J=km;break;case"focusout":be="blur",J=km;break;case"beforeblur":case"afterblur":J=km;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=eB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=mB;break;case Yw:case Kw:case Ww:J=iB;break;case Xw:J=vB;break;case"scroll":case"scrollend":J=QU;break;case"wheel":J=bB;break;case"copy":case"cut":case"paste":J=sB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Mw;break;case"toggle":case"beforetoggle":J=SB}var Pe=(u&4)!==0,dt=!Pe&&(o==="scroll"||o==="scrollend"),q=Pe?W!==null?W+"Capture":null:W;Pe=[];for(var H=Y,j;H!==null;){var te=H;if(j=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||j===null||q===null||(te=eu(H,q),te!=null&&Pe.push(Du(H,te,j))),dt)break;H=H.return}0<Pe.length&&(W=new J(W,be,null,h,ee),ne.push({event:W,listeners:Pe}))}}if((u&7)===0){e:{if(W=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",W&&h!==Mm&&(be=h.relatedTarget||h.fromElement)&&(wo(be)||be[So]))break e;if((J||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,J?(be=h.relatedTarget||h.toElement,J=Y,be=be?wo(be):null,be!==null&&(dt=s(be),Pe=be.tag,be!==dt||Pe!==5&&Pe!==27&&Pe!==6)&&(be=null)):(J=null,be=Y),J!==be)){if(Pe=Tw,te="onMouseLeave",q="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Pe=Mw,te="onPointerLeave",q="onPointerEnter",H="pointer"),dt=J==null?W:Zl(J),j=be==null?W:Zl(be),W=new Pe(te,H+"leave",J,h,ee),W.target=dt,W.relatedTarget=j,te=null,wo(ee)===Y&&(Pe=new Pe(q,H+"enter",be,h,ee),Pe.target=j,Pe.relatedTarget=dt,te=Pe),dt=te,J&&be)t:{for(Pe=AF,q=J,H=be,j=0,te=q;te;te=Pe(te))j++;te=0;for(var Te=H;Te;Te=Pe(Te))te++;for(;0<j-te;)q=Pe(q),j--;for(;0<te-j;)H=Pe(H),te--;for(;j--;){if(q===H||H!==null&&q===H.alternate){Pe=q;break t}q=Pe(q),H=Pe(H)}Pe=null}else Pe=null;J!==null&&bx(ne,W,J,Pe,!1),be!==null&&dt!==null&&bx(ne,dt,be,Pe,!0)}}e:{if(W=Y?Zl(Y):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var Xe=Lw;else if(Ow(W))if(Uw)Xe=NB;else{Xe=PB;var Se=MB}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Cm(Y.elementType)&&(Xe=Lw):Xe=RB;if(Xe&&(Xe=Xe(o,Y))){kw(ne,Xe,h,ee);break e}Se&&Se(o,W,Y),o==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Tm(W,"number",W.value)}switch(Se=Y?Zl(Y):window,o){case"focusin":(Ow(Se)||Se.contentEditable==="true")&&(No=Se,Hm=Y,lu=null);break;case"focusout":lu=Hm=No=null;break;case"mousedown":Gm=!0;break;case"contextmenu":case"mouseup":case"dragend":Gm=!1,$w(ne,h,ee);break;case"selectionchange":if(DB)break;case"keydown":case"keyup":$w(ne,h,ee)}var Fe;if(Um)e:{switch(o){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Ro?Iw(o,h)&&($e="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&($e="onCompositionStart");$e&&(Pw&&h.locale!=="ko"&&(Ro||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Ro&&(Fe=Ew()):(Is=ee,Im="value"in Is?Is.value:Is.textContent,Ro=!0)),Se=uf(Y,$e),0<Se.length&&($e=new Cw($e,o,null,h,ee),ne.push({event:$e,listeners:Se}),Fe?$e.data=Fe:(Fe=Dw(h),Fe!==null&&($e.data=Fe)))),(Fe=_B?EB(o,h):xB(o,h))&&($e=uf(Y,"onBeforeInput"),0<$e.length&&(Se=new Cw("onBeforeInput","beforeinput",null,h,ee),ne.push({event:Se,listeners:$e}),Se.data=Fe)),gF(ne,o,Y,h,ee)}vx(ne,u)})}function Du(o,u,h){return{instance:o,listener:u,currentTarget:h}}function uf(o,u){for(var h=u+"Capture",m=[];o!==null;){var A=o,_=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||_===null||(A=eu(o,h),A!=null&&m.unshift(Du(o,A,_)),A=eu(o,u),A!=null&&m.push(Du(o,A,_))),o.tag===3)return m;o=o.return}return[]}function AF(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function bx(o,u,h,m,A){for(var _=u._reactName,M=[];h!==null&&h!==m;){var D=h,U=D.alternate,Y=D.stateNode;if(D=D.tag,U!==null&&U===m)break;D!==5&&D!==26&&D!==27||Y===null||(U=Y,A?(Y=eu(h,_),Y!=null&&M.unshift(Du(h,Y,U))):A||(Y=eu(h,_),Y!=null&&M.push(Du(h,Y,U)))),h=h.return}M.length!==0&&o.push({event:u,listeners:M})}var SF=/\r\n?/g,wF=/\u0000|\uFFFD/g;function Ax(o){return(typeof o=="string"?o:""+o).replace(SF,`
`).replace(wF,"")}function Sx(o,u){return u=Ax(u),Ax(o)===u}function ct(o,u,h,m,A,_){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Co(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Co(o,""+m);break;case"className":fd(o,"class",m);break;case"tabIndex":fd(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":fd(o,h,m);break;case"style":Sw(o,m,_);break;case"data":if(u!=="object"){fd(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=pd(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(u!=="input"&&ct(o,u,"name",A.name,A,null),ct(o,u,"formEncType",A.formEncType,A,null),ct(o,u,"formMethod",A.formMethod,A,null),ct(o,u,"formTarget",A.formTarget,A,null)):(ct(o,u,"encType",A.encType,A,null),ct(o,u,"method",A.method,A,null),ct(o,u,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=pd(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=Gr);break;case"onScroll":m!=null&&qe("scroll",o);break;case"onScrollEnd":m!=null&&qe("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=pd(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":qe("beforetoggle",o),qe("toggle",o),dd(o,"popover",m);break;case"xlinkActuate":Hr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Hr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Hr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Hr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Hr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Hr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Hr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":dd(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=XU.get(h)||h,dd(o,h,m))}}function hv(o,u,h,m,A,_){switch(h){case"style":Sw(o,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof m=="string"?Co(o,m):(typeof m=="number"||typeof m=="bigint")&&Co(o,""+m);break;case"onScroll":m!=null&&qe("scroll",o);break;case"onScrollEnd":m!=null&&qe("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fw.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),u=h.slice(2,A?h.length-7:void 0),_=o[Jn]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(u,_,A),typeof m=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,m,A);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):dd(o,h,m)}}}function Sn(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",o),qe("load",o);var m=!1,A=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var M=h[_];if(M!=null)switch(_){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:ct(o,u,_,M,h,null)}}A&&ct(o,u,"srcSet",h.srcSet,h,null),m&&ct(o,u,"src",h.src,h,null);return;case"input":qe("invalid",o);var D=_=M=A=null,U=null,Y=null;for(m in h)if(h.hasOwnProperty(m)){var ee=h[m];if(ee!=null)switch(m){case"name":A=ee;break;case"type":M=ee;break;case"checked":U=ee;break;case"defaultChecked":Y=ee;break;case"value":_=ee;break;case"defaultValue":D=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,u));break;default:ct(o,u,m,ee,h,null)}}vw(o,_,D,U,Y,M,A,!1);return;case"select":qe("invalid",o),m=M=_=null;for(A in h)if(h.hasOwnProperty(A)&&(D=h[A],D!=null))switch(A){case"value":_=D;break;case"defaultValue":M=D;break;case"multiple":m=D;default:ct(o,u,A,D,h,null)}u=_,h=M,o.multiple=!!m,u!=null?To(o,!!m,u,!1):h!=null&&To(o,!!m,h,!0);return;case"textarea":qe("invalid",o),_=A=m=null;for(M in h)if(h.hasOwnProperty(M)&&(D=h[M],D!=null))switch(M){case"value":m=D;break;case"defaultValue":A=D;break;case"children":_=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:ct(o,u,M,D,h,null)}bw(o,m,A,_);return;case"option":for(U in h)h.hasOwnProperty(U)&&(m=h[U],m!=null)&&(U==="selected"?o.selected=m&&typeof m!="function"&&typeof m!="symbol":ct(o,u,U,m,h,null));return;case"dialog":qe("beforetoggle",o),qe("toggle",o),qe("cancel",o),qe("close",o);break;case"iframe":case"object":qe("load",o);break;case"video":case"audio":for(m=0;m<Iu.length;m++)qe(Iu[m],o);break;case"image":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"embed":case"source":case"link":qe("error",o),qe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in h)if(h.hasOwnProperty(Y)&&(m=h[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:ct(o,u,Y,m,h,null)}return;default:if(Cm(u)){for(ee in h)h.hasOwnProperty(ee)&&(m=h[ee],m!==void 0&&hv(o,u,ee,m,h,void 0));return}}for(D in h)h.hasOwnProperty(D)&&(m=h[D],m!=null&&ct(o,u,D,m,h,null))}function _F(o,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,_=null,M=null,D=null,U=null,Y=null,ee=null;for(J in h){var ne=h[J];if(h.hasOwnProperty(J)&&ne!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":U=ne;default:m.hasOwnProperty(J)||ct(o,u,J,null,m,ne)}}for(var W in m){var J=m[W];if(ne=h[W],m.hasOwnProperty(W)&&(J!=null||ne!=null))switch(W){case"type":_=J;break;case"name":A=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":M=J;break;case"defaultValue":D=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,u));break;default:J!==ne&&ct(o,u,W,J,m,ne)}}xm(o,M,D,U,Y,ee,_,A);return;case"select":J=M=D=W=null;for(_ in h)if(U=h[_],h.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":J=U;default:m.hasOwnProperty(_)||ct(o,u,_,null,m,U)}for(A in m)if(_=m[A],U=h[A],m.hasOwnProperty(A)&&(_!=null||U!=null))switch(A){case"value":W=_;break;case"defaultValue":D=_;break;case"multiple":M=_;default:_!==U&&ct(o,u,A,_,m,U)}u=D,h=M,m=J,W!=null?To(o,!!h,W,!1):!!m!=!!h&&(u!=null?To(o,!!h,u,!0):To(o,!!h,h?[]:"",!1));return;case"textarea":J=W=null;for(D in h)if(A=h[D],h.hasOwnProperty(D)&&A!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ct(o,u,D,null,m,A)}for(M in m)if(A=m[M],_=h[M],m.hasOwnProperty(M)&&(A!=null||_!=null))switch(M){case"value":W=A;break;case"defaultValue":J=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==_&&ct(o,u,M,A,m,_)}yw(o,W,J);return;case"option":for(var be in h)W=h[be],h.hasOwnProperty(be)&&W!=null&&!m.hasOwnProperty(be)&&(be==="selected"?o.selected=!1:ct(o,u,be,null,m,W));for(U in m)W=m[U],J=h[U],m.hasOwnProperty(U)&&W!==J&&(W!=null||J!=null)&&(U==="selected"?o.selected=W&&typeof W!="function"&&typeof W!="symbol":ct(o,u,U,W,m,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in h)W=h[Pe],h.hasOwnProperty(Pe)&&W!=null&&!m.hasOwnProperty(Pe)&&ct(o,u,Pe,null,m,W);for(Y in m)if(W=m[Y],J=h[Y],m.hasOwnProperty(Y)&&W!==J&&(W!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,u));break;default:ct(o,u,Y,W,m,J)}return;default:if(Cm(u)){for(var dt in h)W=h[dt],h.hasOwnProperty(dt)&&W!==void 0&&!m.hasOwnProperty(dt)&&hv(o,u,dt,void 0,m,W);for(ee in m)W=m[ee],J=h[ee],!m.hasOwnProperty(ee)||W===J||W===void 0&&J===void 0||hv(o,u,ee,W,m,J);return}}for(var q in h)W=h[q],h.hasOwnProperty(q)&&W!=null&&!m.hasOwnProperty(q)&&ct(o,u,q,null,m,W);for(ne in m)W=m[ne],J=h[ne],!m.hasOwnProperty(ne)||W===J||W==null&&J==null||ct(o,u,ne,W,m,J)}function wx(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EF(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var A=h[m],_=A.transferSize,M=A.initiatorType,D=A.duration;if(_&&D&&wx(M)){for(M=0,D=A.responseEnd,m+=1;m<h.length;m++){var U=h[m],Y=U.startTime;if(Y>D)break;var ee=U.transferSize,ne=U.initiatorType;ee&&wx(ne)&&(U=U.responseEnd,M+=ee*(U<D?1:(D-Y)/(U-Y)))}if(--m,u+=8*(_+M)/(A.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var pv=null,mv=null;function cf(o){return o.nodeType===9?o:o.ownerDocument}function _x(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ex(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function gv(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var vv=null;function xF(){var o=window.event;return o&&o.type==="popstate"?o===vv?!1:(vv=o,!0):(vv=null,!1)}var xx=typeof setTimeout=="function"?setTimeout:void 0,TF=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,CF=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(o){return Tx.resolve(null).then(o).catch(MF)}:xx;function MF(o){setTimeout(function(){throw o})}function Ws(o){return o==="head"}function Cx(o,u){var h=u,m=0;do{var A=h.nextSibling;if(o.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(A),rl(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Ou(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Ou(h);for(var _=h.firstChild;_;){var M=_.nextSibling,D=_.nodeName;_[Ql]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=M}}else h==="body"&&Ou(o.ownerDocument.body);h=A}while(h);rl(u)}function Mx(o,u){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function yv(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":yv(h),_m(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function PF(o,u,h,m){for(;o.nodeType===1;){var A=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Ql])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==A.rel||o.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var _=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Oi(o.nextSibling),o===null)break}return null}function RF(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Oi(o.nextSibling),o===null))return null;return o}function Px(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Oi(o.nextSibling),o===null))return null;return o}function bv(o){return o.data==="$?"||o.data==="$~"}function Av(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function NF(o,u){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Oi(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Sv=null;function Rx(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(u===0)return Oi(o.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}o=o.nextSibling}return null}function Nx(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return o;u--}else h!=="/$"&&h!=="/&"||u++}o=o.previousSibling}return null}function Ix(o,u,h){switch(u=cf(h),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Ou(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);_m(o)}var ki=new Map,Dx=new Set;function df(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var rs=V.d;V.d={f:IF,r:DF,D:OF,C:kF,L:LF,m:UF,X:FF,S:BF,M:zF};function IF(){var o=rs.f(),u=tf();return o||u}function DF(o){var u=_o(o);u!==null&&u.tag===5&&u.type==="form"?X_(u):rs.r(o)}var tl=typeof document>"u"?null:document;function Ox(o,u,h){var m=tl;if(m&&typeof u=="string"&&u){var A=Ci(u);A='link[rel="'+o+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),Dx.has(A)||(Dx.add(A),o={rel:o,crossOrigin:h,href:u},m.querySelector(A)===null&&(u=m.createElement("link"),Sn(u,"link",o),on(u),m.head.appendChild(u)))}}function OF(o){rs.D(o),Ox("dns-prefetch",o,null)}function kF(o,u){rs.C(o,u),Ox("preconnect",o,u)}function LF(o,u,h){rs.L(o,u,h);var m=tl;if(m&&o&&u){var A='link[rel="preload"][as="'+Ci(u)+'"]';u==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+Ci(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+Ci(h.imageSizes)+'"]')):A+='[href="'+Ci(o)+'"]';var _=A;switch(u){case"style":_=nl(o);break;case"script":_=il(o)}ki.has(_)||(o=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),ki.set(_,o),m.querySelector(A)!==null||u==="style"&&m.querySelector(ku(_))||u==="script"&&m.querySelector(Lu(_))||(u=m.createElement("link"),Sn(u,"link",o),on(u),m.head.appendChild(u)))}}function UF(o,u){rs.m(o,u);var h=tl;if(h&&o){var m=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+Ci(m)+'"][href="'+Ci(o)+'"]',_=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=il(o)}if(!ki.has(_)&&(o=p({rel:"modulepreload",href:o},u),ki.set(_,o),h.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Lu(_)))return}m=h.createElement("link"),Sn(m,"link",o),on(m),h.head.appendChild(m)}}}function BF(o,u,h){rs.S(o,u,h);var m=tl;if(m&&o){var A=Eo(m).hoistableStyles,_=nl(o);u=u||"default";var M=A.get(_);if(!M){var D={loading:0,preload:null};if(M=m.querySelector(ku(_)))D.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},h),(h=ki.get(_))&&wv(o,h);var U=M=m.createElement("link");on(U),Sn(U,"link",o),U._p=new Promise(function(Y,ee){U.onload=Y,U.onerror=ee}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,ff(M,u,m)}M={type:"stylesheet",instance:M,count:1,state:D},A.set(_,M)}}}function FF(o,u){rs.X(o,u);var h=tl;if(h&&o){var m=Eo(h).hoistableScripts,A=il(o),_=m.get(A);_||(_=h.querySelector(Lu(A)),_||(o=p({src:o,async:!0},u),(u=ki.get(A))&&_v(o,u),_=h.createElement("script"),on(_),Sn(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(A,_))}}function zF(o,u){rs.M(o,u);var h=tl;if(h&&o){var m=Eo(h).hoistableScripts,A=il(o),_=m.get(A);_||(_=h.querySelector(Lu(A)),_||(o=p({src:o,async:!0,type:"module"},u),(u=ki.get(A))&&_v(o,u),_=h.createElement("script"),on(_),Sn(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(A,_))}}function kx(o,u,h,m){var A=(A=xe.current)?df(A):null;if(!A)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=nl(h.href),h=Eo(A).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=nl(h.href);var _=Eo(A).hoistableStyles,M=_.get(o);if(M||(A=A.ownerDocument||A,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,M),(_=A.querySelector(ku(o)))&&!_._p&&(M.instance=_,M.state.loading=5),ki.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ki.set(o,h),_||HF(A,o,h,M.state))),u&&m===null)throw Error(i(528,""));return M}if(u&&m!==null)throw Error(i(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=il(h),h=Eo(A).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function nl(o){return'href="'+Ci(o)+'"'}function ku(o){return'link[rel="stylesheet"]['+o+"]"}function Lx(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function HF(o,u,h,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),Sn(u,"link",h),on(u),o.head.appendChild(u))}function il(o){return'[src="'+Ci(o)+'"]'}function Lu(o){return"script[async]"+o}function Ux(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+Ci(h.href)+'"]');if(m)return u.instance=m,on(m),m;var A=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),on(m),Sn(m,"style",A),ff(m,h.precedence,o),u.instance=m;case"stylesheet":A=nl(h.href);var _=o.querySelector(ku(A));if(_)return u.state.loading|=4,u.instance=_,on(_),_;m=Lx(h),(A=ki.get(A))&&wv(m,A),_=(o.ownerDocument||o).createElement("link"),on(_);var M=_;return M._p=new Promise(function(D,U){M.onload=D,M.onerror=U}),Sn(_,"link",m),u.state.loading|=4,ff(_,h.precedence,o),u.instance=_;case"script":return _=il(h.src),(A=o.querySelector(Lu(_)))?(u.instance=A,on(A),A):(m=h,(A=ki.get(_))&&(m=p({},h),_v(m,A)),o=o.ownerDocument||o,A=o.createElement("script"),on(A),Sn(A,"link",m),o.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,ff(m,h.precedence,o));return u.instance}function ff(o,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,_=A,M=0;M<m.length;M++){var D=m[M];if(D.dataset.precedence===u)_=D;else if(_!==A)break}_?_.parentNode.insertBefore(o,_.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function wv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function _v(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var hf=null;function Bx(o,u,h){if(hf===null){var m=new Map,A=hf=new Map;A.set(h,m)}else A=hf,m=A.get(h),m||(m=new Map,A.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),A=0;A<h.length;A++){var _=h[A];if(!(_[Ql]||_[vn]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var M=_.getAttribute(u)||"";M=o+M;var D=m.get(M);D?D.push(_):m.set(M,[_])}}return m}function Fx(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function GF(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function zx(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function qF(o,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=nl(m.href),_=u.querySelector(ku(A));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=pf.bind(o),u.then(o,o)),h.state.loading|=4,h.instance=_,on(_);return}_=u.ownerDocument||u,m=Lx(m),(A=ki.get(A))&&wv(m,A),_=_.createElement("link"),on(_);var M=_;M._p=new Promise(function(D,U){M.onload=D,M.onerror=U}),Sn(_,"link",m),h.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=pf.bind(o),u.addEventListener("load",h),u.addEventListener("error",h))}}var Ev=0;function VF(o,u){return o.stylesheets&&o.count===0&&gf(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&gf(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+u);0<o.imgBytes&&Ev===0&&(Ev=62500*EF());var A=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&gf(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>Ev?50:800)+u);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(A)}}:null}function pf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var mf=null;function gf(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,mf=new Map,u.forEach($F,o),mf=null,pf.call(o))}function $F(o,u){if(!(u.state.loading&4)){var h=mf.get(o);if(h)var m=h.get(null);else{h=new Map,mf.set(o,h);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<A.length;_++){var M=A[_];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(h.set(M.dataset.precedence,M),m=M)}m&&h.set(null,m)}A=u.instance,M=A.getAttribute("data-precedence"),_=h.get(M)||m,_===m&&h.set(null,A),h.set(M,A),this.count++,m=pf.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),_?_.parentNode.insertBefore(A,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),u.state.loading|=4}}var Uu={$$typeof:T,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function jF(o,u,h,m,A,_,M,D,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ns(0),this.hiddenUpdates=Ns(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=_,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Hx(o,u,h,m,A,_,M,D,U,Y,ee,ne){return o=new jF(o,u,h,M,U,Y,ee,ne,D),u=1,_===!0&&(u|=24),_=fi(3,null,null,u),o.current=_,_.stateNode=o,u=ig(),u.refCount++,o.pooledCache=u,u.refCount++,_.memoizedState={element:m,isDehydrated:h,cache:u},og(_),o}function Gx(o){return o?(o=Oo,o):Oo}function qx(o,u,h,m,A,_){A=Gx(A),m.context===null?m.context=A:m.pendingContext=A,m=Bs(u),m.payload={element:h},_=_===void 0?null:_,_!==null&&(m.callback=_),h=Fs(o,m,u),h!==null&&(ii(h,o,u),mu(h,o,u))}function Vx(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function xv(o,u){Vx(o,u),(o=o.alternate)&&Vx(o,u)}function $x(o){if(o.tag===13||o.tag===31){var u=Ca(o,67108864);u!==null&&ii(u,o,67108864),xv(o,67108864)}}function jx(o){if(o.tag===13||o.tag===31){var u=vi();u=Ne(u);var h=Ca(o,u);h!==null&&ii(h,o,u),xv(o,u)}}var vf=!0;function YF(o,u,h,m){var A=B.T;B.T=null;var _=V.p;try{V.p=2,Tv(o,u,h,m)}finally{V.p=_,B.T=A}}function KF(o,u,h,m){var A=B.T;B.T=null;var _=V.p;try{V.p=8,Tv(o,u,h,m)}finally{V.p=_,B.T=A}}function Tv(o,u,h,m){if(vf){var A=Cv(m);if(A===null)fv(o,u,m,yf,h),Kx(o,m);else if(XF(A,o,u,h,m))m.stopPropagation();else if(Kx(o,m),u&4&&-1<WF.indexOf(o)){for(;A!==null;){var _=_o(A);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var M=mr(_.pendingLanes);if(M!==0){var D=_;for(D.pendingLanes|=2,D.entangledLanes|=2;M;){var U=1<<31-zn(M);D.entanglements[1]|=U,M&=~U}Ar(_),(et&6)===0&&(Zd=Bn()+500,Nu(0))}}break;case 31:case 13:D=Ca(_,2),D!==null&&ii(D,_,2),tf(),xv(_,2)}if(_=Cv(m),_===null&&fv(o,u,m,yf,h),_===A)break;A=_}A!==null&&m.stopPropagation()}else fv(o,u,m,null,h)}}function Cv(o){return o=Pm(o),Mv(o)}var yf=null;function Mv(o){if(yf=null,o=wo(o),o!==null){var u=s(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=a(u),o!==null)return o;o=null}else if(h===31){if(o=l(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return yf=o,null}function Yx(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qi()){case Xl:return 2;case ld:return 8;case yo:case gm:return 32;case ud:return 268435456;default:return 32}default:return 32}}var Pv=!1,Xs=null,Js=null,Qs=null,Bu=new Map,Fu=new Map,Zs=[],WF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(o,u){switch(o){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Bu.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fu.delete(u.pointerId)}}function zu(o,u,h,m,A,_){return o===null||o.nativeEvent!==_?(o={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:_,targetContainers:[A]},u!==null&&(u=_o(u),u!==null&&$x(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),o)}function XF(o,u,h,m,A){switch(u){case"focusin":return Xs=zu(Xs,o,u,h,m,A),!0;case"dragenter":return Js=zu(Js,o,u,h,m,A),!0;case"mouseover":return Qs=zu(Qs,o,u,h,m,A),!0;case"pointerover":var _=A.pointerId;return Bu.set(_,zu(Bu.get(_)||null,o,u,h,m,A)),!0;case"gotpointercapture":return _=A.pointerId,Fu.set(_,zu(Fu.get(_)||null,o,u,h,m,A)),!0}return!1}function Wx(o){var u=wo(o.target);if(u!==null){var h=s(u);if(h!==null){if(u=h.tag,u===13){if(u=a(h),u!==null){o.blockedOn=u,an(o.priority,function(){jx(h)});return}}else if(u===31){if(u=l(h),u!==null){o.blockedOn=u,an(o.priority,function(){jx(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bf(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=Cv(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);Mm=m,h.target.dispatchEvent(m),Mm=null}else return u=_o(h),u!==null&&$x(u),o.blockedOn=h,!1;u.shift()}return!0}function Xx(o,u,h){bf(o)&&h.delete(u)}function JF(){Pv=!1,Xs!==null&&bf(Xs)&&(Xs=null),Js!==null&&bf(Js)&&(Js=null),Qs!==null&&bf(Qs)&&(Qs=null),Bu.forEach(Xx),Fu.forEach(Xx)}function Af(o,u){o.blockedOn===u&&(o.blockedOn=null,Pv||(Pv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,JF)))}var Sf=null;function Jx(o){Sf!==o&&(Sf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sf===o&&(Sf=null);for(var u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],A=o[u+2];if(typeof m!="function"){if(Mv(m||h)===null)continue;break}var _=_o(h);_!==null&&(o.splice(u,3),u-=3,Cg(_,{pending:!0,data:A,method:h.method,action:m},m,A))}}))}function rl(o){function u(U){return Af(U,o)}Xs!==null&&Af(Xs,o),Js!==null&&Af(Js,o),Qs!==null&&Af(Qs,o),Bu.forEach(u),Fu.forEach(u);for(var h=0;h<Zs.length;h++){var m=Zs[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<Zs.length&&(h=Zs[0],h.blockedOn===null);)Wx(h),h.blockedOn===null&&Zs.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var A=h[m],_=h[m+1],M=A[Jn]||null;if(typeof _=="function")M||Jx(h);else if(M){var D=null;if(_&&_.hasAttribute("formAction")){if(A=_,M=_[Jn]||null)D=M.formAction;else if(Mv(A)!==null)continue}else D=M.action;typeof D=="function"?h[m+1]=D:(h.splice(m,3),m-=3),Jx(h)}}}function Qx(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(M){return A=M})},focusReset:"manual",scroll:"manual"})}function u(){A!==null&&(A(),A=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,A=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),A!==null&&(A(),A=null)}}}function Rv(o){this._internalRoot=o}wf.prototype.render=Rv.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var h=u.current,m=vi();qx(h,m,o,u,null,null)},wf.prototype.unmount=Rv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;qx(o.current,2,null,o,null,null),tf(),u[So]=null}};function wf(o){this._internalRoot=o}wf.prototype.unstable_scheduleHydration=function(o){if(o){var u=wt();o={blockedOn:null,target:o,priority:u};for(var h=0;h<Zs.length&&u!==0&&u<Zs[h].priority;h++);Zs.splice(h,0,o),h===0&&Wx(o)}};var Zx=e.version;if(Zx!=="19.2.3")throw Error(i(527,Zx,"19.2.3"));V.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var QF={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Sa=_f.inject(QF),Fn=_f}catch{}}return Gu.createRoot=function(o,u){if(!r(o))throw Error(i(299));var h=!1,m="",A=aE,_=oE,M=lE;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError)),u=Hx(o,1,!1,null,null,h,m,null,A,_,M,Qx),o[So]=u.current,dv(o),new Rv(u)},Gu.hydrateRoot=function(o,u,h){if(!r(o))throw Error(i(299));var m=!1,A="",_=aE,M=oE,D=lE,U=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(M=h.onCaughtError),h.onRecoverableError!==void 0&&(D=h.onRecoverableError),h.formState!==void 0&&(U=h.formState)),u=Hx(o,1,!0,u,h??null,m,A,U,_,M,D,Qx),u.context=Gx(null),h=u.current,m=vi(),m=Ne(m),A=Bs(m),A.callback=null,Fs(h,A,m),h=m,u.current.lanes=h,wa(u,h),Ar(u),o[So]=u.current,dv(o),new wf(u)},Gu.version="19.2.3",Gu}var dT;function u3(){if(dT)return Ov.exports;dT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ov.exports=l3(),Ov.exports}var c3=u3();const d3=Br(c3),f3="modulepreload",h3=function(t){return"/"+t},fT={},Oc=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let c=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=c(n.map(d=>{if(d=h3(d),d in fT)return;fT[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":f3,f||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((y,S)=>{g.addEventListener("load",y),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};const p3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),hT=t=>{const e=m3(t);return e.charAt(0).toUpperCase()+e.slice(1)},uI=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),g3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var v3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const y3=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...l},c)=>P.createElement("svg",{ref:c,...v3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:uI("lucide",r),...!s&&!g3(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,f])=>P.createElement(d,f)),...Array.isArray(s)?s:[s]]));const He=(t,e)=>{const n=P.forwardRef(({className:i,...r},s)=>P.createElement(y3,{ref:s,iconNode:e,className:uI(`lucide-${p3(hT(t))}`,`lucide-${t}`,i),...r}));return n.displayName=hT(t),n};const b3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Bv=He("activity",b3);const A3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],S3=He("arrow-right",A3);const w3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_3=He("calendar",w3);const E3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cI=He("check",E3);const x3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],T3=He("chevron-left",x3);const C3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],M3=He("chevron-right",C3);const P3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],R3=He("circle-alert",P3);const N3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],I3=He("circle-check-big",N3);const D3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pT=He("circle-x",D3);const O3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k3=He("clock",O3);const L3=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],mT=He("cpu",L3);const U3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],B3=He("file-image",U3);const F3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],P0=He("file-text",F3);const z3=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Fv=He("folder-open",z3);const H3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],G3=He("funnel",H3);const q3=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],V3=He("hourglass",q3);const $3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],j3=He("image",$3);const Y3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],K3=He("info",Y3);const W3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],gT=He("layout-dashboard",W3);const X3=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],vT=He("lightbulb",X3);const J3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],dI=He("loader-circle",J3);const Q3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Z3=He("menu",Q3);const ez=[["path",{d:"M5 12h14",key:"1ays0h"}]],tz=He("minus",ez);const nz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],yT=He("panel-left",nz);const iz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rz=He("plus",iz);const sz=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],az=He("printer",sz);const oz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],lz=He("rotate-ccw",oz);const uz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cz=He("search",uz);const dz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fz=He("settings",dz);const hz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pz=He("shield-check",hz);const mz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],th=He("sparkles",mz);const gz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fI=He("tag",gz);const vz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yz=He("trash-2",vz);const bz=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Az=He("trending-down",bz);const Sz=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wz=He("trending-up",Sz);const _z=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bT=He("triangle-alert",_z);const Ez=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xz=He("upload",Ez);const Tz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Cz=He("users",Tz);const Mz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rA=He("x",Mz);var Yt=(t=>(t.IDLE="IDLE",t.QUEUED="QUEUED",t.PROCESSING="PROCESSING",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t))(Yt||{}),Pz={};let Rz,Nz;function Iz(){return{geminiUrl:Rz,vertexUrl:Nz}}function Dz(t,e,n,i){var r,s;if(!t?.baseUrl){const a=Iz();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}class _s{}function fe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function b(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];b(f,e.slice(s+1),n[d])}else for(const d of c)b(d,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];b(c[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function v(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(l=>v(l,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Oz(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),a=new Set;let l=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){l=c;break}if(l!==-1&&s.length>l)for(let c=l;c<s.length;c++){const d=s[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}R0(t,r,s,0,a)}}function R0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2),l=t;if(a in l&&Array.isArray(l[a]))for(const c of l[a])R0(c,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,l=Object.keys(a).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of l)c[d]=a[d];for(const[d,f]of Object.entries(c)){const p=[];for(const g of n.slice(i))g==="*"?p.push(d):p.push(g);b(a,p,f)}for(const d of l)delete a[d]}}else{const a=t;s in a&&R0(a[s],e,n,i+1,r)}}function sA(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function kz(t){const e={},n=v(t,["operationName"]);n!=null&&b(e,["operationName"],n);const i=v(t,["resourceName"]);return i!=null&&b(e,["_url","resourceName"],i),e}function Lz(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response","generateVideoResponse"]);return a!=null&&b(e,["response"],Bz(a)),e}function Uz(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],Fz(a)),e}function Bz(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>zz(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function Fz(t){const e={},n=v(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Hz(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function zz(t){const e={},n=v(t,["video"]);return n!=null&&b(e,["video"],Yz(n)),e}function Hz(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],Kz(n)),e}function Gz(t){const e={},n=v(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function qz(t){const e={},n=v(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function Vz(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],$z(a)),e}function $z(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function hI(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],jz(a)),e}function jz(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function Yz(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],sA(i));const r=v(t,["encoding"]);return r!=null&&b(e,["mimeType"],r),e}function Kz(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],sA(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}var AT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(AT||(AT={}));var ST;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ST||(ST={}));var wT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(wT||(wT={}));var nt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nt||(nt={}));var _T;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(_T||(_T={}));var ET;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ET||(ET={}));var xT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(xT||(xT={}));var TT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(TT||(TT={}));var CT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(CT||(CT={}));var MT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(MT||(MT={}));var PT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(PT||(PT={}));var RT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(RT||(RT={}));var NT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(NT||(NT={}));var IT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(IT||(IT={}));var DT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(DT||(DT={}));var OT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(OT||(OT={}));var kT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kT||(kT={}));var LT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(LT||(LT={}));var UT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(UT||(UT={}));var fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(fh||(fh={}));var BT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(BT||(BT={}));var FT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(FT||(FT={}));var zT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zT||(zT={}));var N0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(N0||(N0={}));var HT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(HT||(HT={}));var GT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(GT||(GT={}));var qT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(qT||(qT={}));var VT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(VT||(VT={}));var $T;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($T||($T={}));var jT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(jT||(jT={}));var YT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(YT||(YT={}));var KT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(KT||(KT={}));var WT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(WT||(WT={}));var XT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(XT||(XT={}));var JT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(JT||(JT={}));var QT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(QT||(QT={}));var ZT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ZT||(ZT={}));var eC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(eC||(eC={}));var tC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(tC||(tC={}));var nC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(nC||(nC={}));var iC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(iC||(iC={}));var rC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(rC||(rC={}));var sC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(sC||(sC={}));var aC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(aC||(aC={}));var oC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(oC||(oC={}));var lC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(lC||(lC={}));var uC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uC||(uC={}));var cC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(cC||(cC={}));var dC;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(dC||(dC={}));var fC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fC||(fC={}));var hC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hC||(hC={}));var pC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(pC||(pC={}));var mC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mC||(mC={}));var gC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(gC||(gC={}));var vC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(vC||(vC={}));var pl;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(pl||(pl={}));class I0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class qu{get text(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,S]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(S!==null||S!==void 0)&&p.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(p))g!=="inlineData"&&(y!==null||y!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,s,a,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,s,a,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class yC{}class bC{}class Wz{}class Xz{}class Jz{}class Qz{}class AC{}class SC{}class wC{}class Zz{}class hh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new hh;let r;const s=e;return n?r=Uz(s):r=Lz(s),Object.assign(i,r),i}}class _C{}class EC{}class xC{}class TC{}class eH{}class tH{}class nH{}class aA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new aA,s=Vz(e);return Object.assign(i,s),i}}class iH{}class rH{}class sH{}class CC{}class aH{get text(){var e,n,i;let r="",s=!1;const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,r+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="inlineData"&&c!==null&&s.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class oH{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class oA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new oA,s=hI(e);return Object.assign(i,s),i}}function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function pI(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function mI(t){return Array.isArray(t)?t.map(e=>ph(e)):[ph(t)]}function ph(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function gI(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function vI(t){const e=ph(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function MC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function yI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>MC(e)):[MC(t)]}function D0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function PC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function RC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function On(t){if(t==null)throw new Error("ContentUnion is required");return D0(t)?t:{role:"user",parts:yI(t)}}function lA(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=On(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=On(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>On(n)):[On(e)]}function Vi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(PC(t)||RC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[On(t)]}const e=[],n=[],i=D0(t[0]);for(const r of t){const s=D0(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(PC(r)||RC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:yI(n)}),e}function lH(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(nt).includes(n[0].toUpperCase())?n[0].toUpperCase():nt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(nt).includes(i.toUpperCase())?i.toUpperCase():nt.TYPE_UNSPECIFIED})}}function Sl(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&lH(t.type,e);for(const[a,l]of Object.entries(t))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(nt).includes(l.toUpperCase())?l.toUpperCase():nt.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Sl(l);else if(i.includes(a)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(Sl(d))}e[a]=c}else if(r.includes(a)){const c={};for(const[d,f]of Object.entries(l))c[d]=Sl(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=l}return e}function uA(t){return Sl(t)}function cA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function dA(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ul(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sl(e.response));return t}function Bl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function uH(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Es(t,e){if(typeof e!="string")throw new Error("name must be a string");return uH(t,e,"cachedContents")}function bI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ma(t){return sA(t)}function cH(t){return t!=null&&typeof t=="object"&&"name"in t}function dH(t){return t!=null&&typeof t=="object"&&"video"in t}function fH(t){return t!=null&&typeof t=="object"&&"uri"in t}function AI(t){var e;let n;if(cH(t)&&(n=t.name),!(fH(t)&&(n=t.uri,n===void 0))&&!(dH(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function SI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function wI(t){for(const e of["models","tunedModels","publisherModels"])if(hH(t,e))return t[e];return[]}function hH(t,e){return t!==null&&typeof t=="object"&&e in t}function pH(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function mH(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=pH(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function _I(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function gH(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function EI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function vH(t){const e={},n=v(t,["responsesFile"]);n!=null&&b(e,["fileName"],n);const i=v(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>JH(a))),b(e,["inlinedResponses"],s)}const r=v(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["inlinedEmbedContentResponses"],s)}return e}function yH(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&b(e,["format"],n);const i=v(t,["gcsDestination","outputUriPrefix"]);i!=null&&b(e,["gcsUri"],i);const r=v(t,["bigqueryDestination","outputUri"]);return r!=null&&b(e,["bigqueryUri"],r),e}function bH(t){const e={},n=v(t,["format"]);n!=null&&b(e,["predictionsFormat"],n);const i=v(t,["gcsUri"]);i!=null&&b(e,["gcsDestination","outputUriPrefix"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&b(e,["bigqueryDestination","outputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(v(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function nh(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata","displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["metadata","state"]);r!=null&&b(e,["state"],xI(r));const s=v(t,["metadata","createTime"]);s!=null&&b(e,["createTime"],s);const a=v(t,["metadata","endTime"]);a!=null&&b(e,["endTime"],a);const l=v(t,["metadata","updateTime"]);l!=null&&b(e,["updateTime"],l);const c=v(t,["metadata","model"]);c!=null&&b(e,["model"],c);const d=v(t,["metadata","output"]);return d!=null&&b(e,["dest"],vH(EI(d))),e}function O0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["state"]);r!=null&&b(e,["state"],xI(r));const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const l=v(t,["startTime"]);l!=null&&b(e,["startTime"],l);const c=v(t,["endTime"]);c!=null&&b(e,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(e,["updateTime"],d);const f=v(t,["model"]);f!=null&&b(e,["model"],f);const p=v(t,["inputConfig"]);p!=null&&b(e,["src"],AH(p));const g=v(t,["outputConfig"]);g!=null&&b(e,["dest"],yH(EI(g)));const y=v(t,["completionStats"]);return y!=null&&b(e,["completionStats"],y),e}function AH(t){const e={},n=v(t,["instancesFormat"]);n!=null&&b(e,["format"],n);const i=v(t,["gcsSource","uris"]);i!=null&&b(e,["gcsUri"],i);const r=v(t,["bigquerySource","inputUri"]);return r!=null&&b(e,["bigqueryUri"],r),e}function SH(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=v(e,["fileName"]);i!=null&&b(n,["fileName"],i);const r=v(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>XH(t,a))),b(n,["requests","requests"],s)}return n}function wH(t){const e={},n=v(t,["format"]);n!=null&&b(e,["instancesFormat"],n);const i=v(t,["gcsUri"]);i!=null&&b(e,["gcsSource","uris"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&b(e,["bigquerySource","inputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _H(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function EH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function xH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function TH(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],n);const i=v(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],CH(i));const r=v(t,["tokenCount"]);r!=null&&b(e,["tokenCount"],r);const s=v(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);const a=v(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&b(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const f=v(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),b(e,["safetyRatings"],g)}const p=v(t,["urlContextMetadata"]);return p!=null&&b(e,["urlContextMetadata"],p),e}function CH(t){const e={},n=v(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["citations"],i)}return e}function TI(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>r4(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function MH(t,e){const n={},i=v(t,["displayName"]);if(e!==void 0&&i!=null&&b(e,["batch","displayName"],i),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function PH(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["dest"]);return e!==void 0&&r!=null&&b(e,["outputConfig"],bH(gH(r))),n}function NC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["batch","inputConfig"],SH(t,_I(t,r)));const s=v(e,["config"]);return s!=null&&MH(s,n),n}function RH(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["inputConfig"],wH(_I(t,r)));const s=v(e,["config"]);return s!=null&&PH(s,n),n}function NH(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["batch","displayName"],i),n}function IH(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["batch","inputConfig"],FH(t,r));const s=v(e,["config"]);return s!=null&&NH(s,n),n}function DH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function OH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function kH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],s),e}function LH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],s),e}function UH(t,e){const n={},i=v(e,["contents"]);if(i!=null){let s=lA(t,i);Array.isArray(s)&&(s=s.map(a=>a)),b(n,["requests[]","request","content"],s)}const r=v(e,["config"]);return r!=null&&(b(n,["_self"],BH(r,n)),Oz(n,{"requests[].*":"requests[].request.*"})),n}function BH(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["requests[]","title"],r);const s=v(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function FH(t,e){const n={},i=v(e,["fileName"]);i!=null&&b(n,["file_name"],i);const r=v(e,["inlinedRequests"]);return r!=null&&b(n,["requests"],UH(t,r)),n}function zH(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function HH(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GH(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qH(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],TI(On(r)));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const E=v(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const x=v(e,["responseSchema"]);x!=null&&b(i,["responseSchema"],uA(x));const C=v(e,["responseJsonSchema"]);if(C!=null&&b(i,["responseJsonSchema"],C),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=v(e,["safetySettings"]);if(n!==void 0&&T!=null){let le=T;Array.isArray(le)&&(le=le.map(oe=>s4(oe))),b(n,["safetySettings"],le)}const N=v(e,["tools"]);if(n!==void 0&&N!=null){let le=Bl(N);Array.isArray(le)&&(le=le.map(oe=>o4(Ul(oe)))),b(n,["tools"],le)}const R=v(e,["toolConfig"]);if(n!==void 0&&R!=null&&b(n,["toolConfig"],a4(R)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=v(e,["cachedContent"]);n!==void 0&&I!=null&&b(n,["cachedContent"],Es(t,I));const O=v(e,["responseModalities"]);O!=null&&b(i,["responseModalities"],O);const F=v(e,["mediaResolution"]);F!=null&&b(i,["mediaResolution"],F);const z=v(e,["speechConfig"]);if(z!=null&&b(i,["speechConfig"],cA(z)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=v(e,["thinkingConfig"]);$!=null&&b(i,["thinkingConfig"],$);const G=v(e,["imageConfig"]);G!=null&&b(i,["imageConfig"],WH(G));const X=v(e,["enableEnhancedCivicAnswers"]);return X!=null&&b(i,["enableEnhancedCivicAnswers"],X),i}function VH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>TH(d))),b(e,["candidates"],c)}const r=v(t,["modelVersion"]);r!=null&&b(e,["modelVersion"],r);const s=v(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);const a=v(t,["responseId"]);a!=null&&b(e,["responseId"],a);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function $H(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function jH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Fl(t,i)),n}function YH(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function KH(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function WH(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XH(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["request","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let l=Vi(r);Array.isArray(l)&&(l=l.map(c=>TI(c))),b(n,["request","contents"],l)}const s=v(e,["metadata"]);s!=null&&b(n,["metadata"],s);const a=v(e,["config"]);return a!=null&&b(n,["request","generationConfig"],qH(t,a,v(n,["request"],{}))),n}function JH(t){const e={},n=v(t,["response"]);n!=null&&b(e,["response"],VH(n));const i=v(t,["error"]);return i!=null&&b(e,["error"],i),e}function QH(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);if(e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function ZH(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);e!==void 0&&r!=null&&b(e,["_query","pageToken"],r);const s=v(t,["filter"]);return e!==void 0&&s!=null&&b(e,["_query","filter"],s),n}function e4(t){const e={},n=v(t,["config"]);return n!=null&&QH(n,e),e}function t4(t){const e={},n=v(t,["config"]);return n!=null&&ZH(n,e),e}function n4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>nh(a))),b(e,["batchJobs"],s)}return e}function i4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>O0(a))),b(e,["batchJobs"],s)}return e}function r4(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],zH(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],HH(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],_H(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function s4(t){const e={},n=v(t,["category"]);if(n!=null&&b(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=v(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function a4(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],GH(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function o4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],YH(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],KH(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}var gs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(gs||(gs={}));class fo{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class l4 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(gs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=NC(this.apiClient,e),i=n._url,r=fe("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=g,p.request=y}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=RH(this.apiClient,e);return l=fe("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>O0(f))}else{const d=NC(this.apiClient,e);return l=fe("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>nh(f))}}async createEmbeddingsInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=IH(this.apiClient,e);return s=fe("{model}:asyncBatchEmbedContent",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>nh(c))}}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=jH(this.apiClient,e);return l=fe("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>O0(f))}else{const d=$H(this.apiClient,e);return l=fe("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>nh(f))}}async cancel(e){var n,i,r,s;let a="",l={};if(this.apiClient.isVertexAI()){const c=xH(this.apiClient,e);a=fe("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=EH(this.apiClient,e);a=fe("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=t4(e);return l=fe("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=i4(f),g=new CC;return Object.assign(g,p),g})}else{const d=e4(e);return l=fe("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=n4(f),g=new CC;return Object.assign(g,p),g})}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=OH(this.apiClient,e);return l=fe("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>LH(f))}else{const d=DH(this.apiClient,e);return l=fe("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>kH(f))}}}function u4(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function IC(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>I4(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function c4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&b(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let f=Vi(a);Array.isArray(f)&&(f=f.map(p=>IC(p))),b(e,["contents"],f)}const l=v(t,["systemInstruction"]);e!==void 0&&l!=null&&b(e,["systemInstruction"],IC(On(l)));const c=v(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>O4(p))),b(e,["tools"],f)}const d=v(t,["toolConfig"]);if(e!==void 0&&d!=null&&b(e,["toolConfig"],D4(d)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function d4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&b(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let p=Vi(a);Array.isArray(p)&&(p=p.map(g=>g)),b(e,["contents"],p)}const l=v(t,["systemInstruction"]);e!==void 0&&l!=null&&b(e,["systemInstruction"],On(l));const c=v(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>k4(g))),b(e,["tools"],p)}const d=v(t,["toolConfig"]);e!==void 0&&d!=null&&b(e,["toolConfig"],d);const f=v(t,["kmsKeyName"]);return e!==void 0&&f!=null&&b(e,["encryption_spec","kmsKeyName"],f),n}function f4(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],pI(t,i));const r=v(e,["config"]);return r!=null&&c4(r,n),n}function h4(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],pI(t,i));const r=v(e,["config"]);return r!=null&&d4(r,n),n}function p4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Es(t,i)),n}function m4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Es(t,i)),n}function g4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function v4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function y4(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function b4(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function A4(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S4(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function w4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Es(t,i)),n}function _4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Es(t,i)),n}function E4(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function x4(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function T4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function C4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function M4(t){const e={},n=v(t,["config"]);return n!=null&&T4(n,e),e}function P4(t){const e={},n=v(t,["config"]);return n!=null&&C4(n,e),e}function R4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["cachedContents"],s)}return e}function N4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["cachedContents"],s)}return e}function I4(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],y4(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],b4(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],u4(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function D4(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],A4(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function O4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],E4(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],x4(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function k4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>S4(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function L4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&b(e,["expireTime"],r),n}function U4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&b(e,["expireTime"],r),n}function B4(t,e){const n={},i=v(e,["name"]);i!=null&&b(n,["_url","name"],Es(t,i));const r=v(e,["config"]);return r!=null&&L4(r,n),n}function F4(t,e){const n={},i=v(e,["name"]);i!=null&&b(n,["_url","name"],Es(t,i));const r=v(e,["config"]);return r!=null&&U4(r,n),n}class z4 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(gs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=h4(this.apiClient,e);return l=fe("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=f4(this.apiClient,e);return l=fe("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=_4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=w4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=m4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=v4(f),g=new xC;return Object.assign(g,p),g})}else{const d=p4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=g4(f),g=new xC;return Object.assign(g,p),g})}}async update(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=F4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=B4(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=P4(e);return l=fe("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=N4(f),g=new TC;return Object.assign(g,p),g})}else{const d=M4(e);return l=fe("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=R4(f),g=new TC;return Object.assign(g,p),g})}}}function mh(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function DC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(t){return this instanceof De?(this.v=t,this):new De(t)}function ar(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(S){return Promise.resolve(S).then(y,p)}}function l(y,S){i[y]&&(r[y]=function(w){return new Promise(function(E,x){s.push([y,w,E,x])>1||c(y,w)})},S&&(r[y]=S(r[y])))}function c(y,S){try{d(i[y](S))}catch(w){g(s[0][3],w)}}function d(y){y.value instanceof De?Promise.resolve(y.value.v).then(f,p):g(s[0][2],y)}function f(y){c("next",y)}function p(y){c("throw",y)}function g(y,S){y(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function or(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof DC=="function"?DC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(l,c){a=t[s](a),r(l,c,a.done,a.value)})}}function r(s,a,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},a)}}function H4(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:CI(n)}function CI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function G4(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function OC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!CI(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class q4{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new V4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class V4{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),G4(s)}async sendMessage(e){var n;await this.sendPromise;const i=On(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,l;const c=await r,d=(a=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];f!=null&&(g=(l=f.slice(p))!==null&&l!==void 0?l:[]);const y=d?[d]:[];this.recordHistory(i,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=On(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?OC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ar(this,arguments,function*(){var r,s,a,l,c,d;const f=[];try{for(var p=!0,g=or(e),y;y=yield De(g.next()),r=y.done,!r;p=!0){l=y.value,p=!1;const S=l;if(H4(S)){const w=(d=(c=S.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;w!==void 0&&f.push(w)}yield yield De(S)}}catch(S){s={error:S}}finally{try{!p&&!r&&(a=g.return)&&(yield De(a.call(g)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...OC(i)):this.history.push(e),this.history.push(...r)}}class mp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,mp.prototype)}}function $4(t){const e={},n=v(t,["file"]);return n!=null&&b(e,["file"],n),e}function j4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function Y4(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","file"],AI(n)),e}function K4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function W4(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","file"],AI(n)),e}function X4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function J4(t){const e={},n=v(t,["config"]);return n!=null&&X4(n,e),e}function Q4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["files"],s)}return e}class Z4 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(gs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=J4(e);return s=fe("files",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Q4(c),f=new iH;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$4(e);return s=fe("upload/v1beta/files",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=j4(c),f=new rH;return Object.assign(f,d),f})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=W4(e);return s=fe("files/{file}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Y4(e);return s=fe("files/{file}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=K4(c),f=new sH;return Object.assign(f,d),f})}}}function ih(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function eG(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>gG(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function tG(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function nG(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iG(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function rG(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=v(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const r=v(t,["audioTimestamp"]);r!=null&&b(e,["audioTimestamp"],r);const s=v(t,["candidateCount"]);s!=null&&b(e,["candidateCount"],s);const a=v(t,["enableAffectiveDialog"]);a!=null&&b(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&b(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&b(e,["logprobs"],c);const d=v(t,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const f=v(t,["mediaResolution"]);f!=null&&b(e,["mediaResolution"],f);const p=v(t,["presencePenalty"]);p!=null&&b(e,["presencePenalty"],p);const g=v(t,["responseLogprobs"]);g!=null&&b(e,["responseLogprobs"],g);const y=v(t,["responseMimeType"]);y!=null&&b(e,["responseMimeType"],y);const S=v(t,["responseModalities"]);S!=null&&b(e,["responseModalities"],S);const w=v(t,["responseSchema"]);w!=null&&b(e,["responseSchema"],w);const E=v(t,["routingConfig"]);E!=null&&b(e,["routingConfig"],E);const x=v(t,["seed"]);x!=null&&b(e,["seed"],x);const C=v(t,["speechConfig"]);C!=null&&b(e,["speechConfig"],C);const T=v(t,["stopSequences"]);T!=null&&b(e,["stopSequences"],T);const N=v(t,["temperature"]);N!=null&&b(e,["temperature"],N);const R=v(t,["thinkingConfig"]);R!=null&&b(e,["thinkingConfig"],R);const I=v(t,["topK"]);I!=null&&b(e,["topK"],I);const O=v(t,["topP"]);if(O!=null&&b(e,["topP"],O),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sG(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function aG(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function oG(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],dA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],eG(On(S)));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let I=Bl(w);Array.isArray(I)&&(I=I.map(O=>yG(Ul(O)))),b(e,["setup","tools"],I)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],vG(E));const x=v(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&b(e,["setup","inputAudioTranscription"],x);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);if(e!==void 0&&R!=null&&b(e,["setup","proactivity"],R),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lG(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],rG(i));const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],dA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],On(S));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let O=Bl(w);Array.isArray(O)&&(O=O.map(F=>bG(Ul(F)))),b(e,["setup","tools"],O)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],E);const x=v(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&b(e,["setup","inputAudioTranscription"],x);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);e!==void 0&&R!=null&&b(e,["setup","proactivity"],R);const I=v(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&b(e,["setup","explicitVadSignal"],I),n}function uG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],oG(r,n)),n}function cG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],lG(r,n)),n}function dG(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&b(e,["musicGenerationConfig"],n),e}function fG(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["weightedPrompts"],i)}return e}function hG(t){const e={},n=v(t,["media"]);if(n!=null){let d=mI(n);Array.isArray(d)&&(d=d.map(f=>ih(f))),b(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&b(e,["audio"],ih(vI(i)));const r=v(t,["audioStreamEnd"]);r!=null&&b(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&b(e,["video"],ih(gI(s)));const a=v(t,["text"]);a!=null&&b(e,["text"],a);const l=v(t,["activityStart"]);l!=null&&b(e,["activityStart"],l);const c=v(t,["activityEnd"]);return c!=null&&b(e,["activityEnd"],c),e}function pG(t){const e={},n=v(t,["media"]);if(n!=null){let d=mI(n);Array.isArray(d)&&(d=d.map(f=>f)),b(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&b(e,["audio"],vI(i));const r=v(t,["audioStreamEnd"]);r!=null&&b(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&b(e,["video"],gI(s));const a=v(t,["text"]);a!=null&&b(e,["text"],a);const l=v(t,["activityStart"]);l!=null&&b(e,["activityStart"],l);const c=v(t,["activityEnd"]);return c!=null&&b(e,["activityEnd"],c),e}function mG(t){const e={},n=v(t,["setupComplete"]);n!=null&&b(e,["setupComplete"],n);const i=v(t,["serverContent"]);i!=null&&b(e,["serverContent"],i);const r=v(t,["toolCall"]);r!=null&&b(e,["toolCall"],r);const s=v(t,["toolCallCancellation"]);s!=null&&b(e,["toolCallCancellation"],s);const a=v(t,["usageMetadata"]);a!=null&&b(e,["usageMetadata"],AG(a));const l=v(t,["goAway"]);l!=null&&b(e,["goAway"],l);const c=v(t,["sessionResumptionUpdate"]);c!=null&&b(e,["sessionResumptionUpdate"],c);const d=v(t,["voiceActivityDetectionSignal"]);return d!=null&&b(e,["voiceActivityDetectionSignal"],d),e}function gG(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],tG(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],nG(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],ih(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function vG(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yG(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],sG(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],aG(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function bG(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>iG(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function AG(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&b(e,["promptTokenCount"],n);const i=v(t,["cachedContentTokenCount"]);i!=null&&b(e,["cachedContentTokenCount"],i);const r=v(t,["candidatesTokenCount"]);r!=null&&b(e,["responseTokenCount"],r);const s=v(t,["toolUsePromptTokenCount"]);s!=null&&b(e,["toolUsePromptTokenCount"],s);const a=v(t,["thoughtsTokenCount"]);a!=null&&b(e,["thoughtsTokenCount"],a);const l=v(t,["totalTokenCount"]);l!=null&&b(e,["totalTokenCount"],l);const c=v(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["promptTokensDetails"],y)}const d=v(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["cacheTokensDetails"],y)}const f=v(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["responseTokensDetails"],y)}const p=v(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["toolUsePromptTokensDetails"],y)}const g=v(t,["trafficType"]);return g!=null&&b(e,["trafficType"],g),e}function SG(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function wG(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],n);const i=v(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],_G(i));const r=v(t,["tokenCount"]);r!=null&&b(e,["tokenCount"],r);const s=v(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);const a=v(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&b(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const f=v(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),b(e,["safetyRatings"],g)}const p=v(t,["urlContextMetadata"]);return p!=null&&b(e,["urlContextMetadata"],p),e}function _G(t){const e={},n=v(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["citations"],i)}return e}function EG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let s=Vi(r);Array.isArray(s)&&(s=s.map(a=>a)),b(n,["contents"],s)}return n}function xG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(e,["tokensInfo"],r)}return e}function TG(t){const e={},n=v(t,["values"]);n!=null&&b(e,["values"],n);const i=v(t,["statistics"]);return i!=null&&b(e,["statistics"],CG(i)),e}function CG(t){const e={},n=v(t,["truncated"]);n!=null&&b(e,["truncated"],n);const i=v(t,["token_count"]);return i!=null&&b(e,["tokenCount"],i),e}function gp(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>L5(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function MG(t){const e={},n=v(t,["controlType"]);n!=null&&b(e,["controlType"],n);const i=v(t,["enableControlImageComputation"]);return i!=null&&b(e,["computeControl"],i),e}function PG(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function RG(t,e){const n={},i=v(t,["systemInstruction"]);e!==void 0&&i!=null&&b(e,["systemInstruction"],On(i));const r=v(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>NI(l))),b(e,["tools"],a)}const s=v(t,["generationConfig"]);return e!==void 0&&s!=null&&b(e,["generationConfig"],S5(s)),n}function NG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=Vi(r);Array.isArray(a)&&(a=a.map(l=>gp(l))),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&PG(s),n}function IG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=Vi(r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&RG(s,n),n}function DG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["totalTokens"]);i!=null&&b(e,["totalTokens"],i);const r=v(t,["cachedContentTokenCount"]);return r!=null&&b(e,["cachedContentTokenCount"],r),e}function OG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["totalTokens"]);return i!=null&&b(e,["totalTokens"],i),e}function kG(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function LG(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function UG(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function BG(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function FG(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["negativePrompt"]);e!==void 0&&r!=null&&b(e,["parameters","negativePrompt"],r);const s=v(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a);const l=v(t,["guidanceScale"]);e!==void 0&&l!=null&&b(e,["parameters","guidanceScale"],l);const c=v(t,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&b(e,["parameters","includeSafetyAttributes"],p);const g=v(t,["includeRaiReason"]);e!==void 0&&g!=null&&b(e,["parameters","includeRaiReason"],g);const y=v(t,["language"]);e!==void 0&&y!=null&&b(e,["parameters","language"],y);const S=v(t,["outputMimeType"]);e!==void 0&&S!=null&&b(e,["parameters","outputOptions","mimeType"],S);const w=v(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&b(e,["parameters","outputOptions","compressionQuality"],w);const E=v(t,["addWatermark"]);e!==void 0&&E!=null&&b(e,["parameters","addWatermark"],E);const x=v(t,["labels"]);e!==void 0&&x!=null&&b(e,["labels"],x);const C=v(t,["editMode"]);e!==void 0&&C!=null&&b(e,["parameters","editMode"],C);const T=v(t,["baseSteps"]);return e!==void 0&&T!=null&&b(e,["parameters","editConfig","baseSteps"],T),n}function zG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>G5(c))),b(n,["instances[0]","referenceImages"],l)}const a=v(e,["config"]);return a!=null&&FG(a,n),n}function HG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>vp(s))),b(e,["generatedImages"],r)}return e}function GG(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["requests[]","title"],r);const s=v(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qG(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["instances[]","task_type"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["instances[]","title"],r);const s=v(t,["outputDimensionality"]);e!==void 0&&s!=null&&b(e,["parameters","outputDimensionality"],s);const a=v(t,["mimeType"]);e!==void 0&&a!=null&&b(e,["instances[]","mimeType"],a);const l=v(t,["autoTruncate"]);return e!==void 0&&l!=null&&b(e,["parameters","autoTruncate"],l),n}function VG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let l=lA(t,r);Array.isArray(l)&&(l=l.map(c=>c)),b(n,["requests[]","content"],l)}const s=v(e,["config"]);s!=null&&GG(s,n);const a=v(e,["model"]);return a!==void 0&&b(n,["requests[]","model"],Qe(t,a)),n}function $G(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=lA(t,r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["instances[]","content"],a)}const s=v(e,["config"]);return s!=null&&qG(s,n),n}function jG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["embeddings"],s)}const r=v(t,["metadata"]);return r!=null&&b(e,["metadata"],r),e}function YG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>TG(a))),b(e,["embeddings"],s)}const r=v(t,["metadata"]);return r!=null&&b(e,["metadata"],r),e}function KG(t){const e={},n=v(t,["endpoint"]);n!=null&&b(e,["name"],n);const i=v(t,["deployedModelId"]);return i!=null&&b(e,["deployedModelId"],i),e}function WG(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function XG(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JG(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QG(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function ZG(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],gp(On(r)));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const E=v(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const x=v(e,["responseSchema"]);x!=null&&b(i,["responseSchema"],uA(x));const C=v(e,["responseJsonSchema"]);if(C!=null&&b(i,["responseJsonSchema"],C),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=v(e,["safetySettings"]);if(n!==void 0&&T!=null){let le=T;Array.isArray(le)&&(le=le.map(oe=>q5(oe))),b(n,["safetySettings"],le)}const N=v(e,["tools"]);if(n!==void 0&&N!=null){let le=Bl(N);Array.isArray(le)&&(le=le.map(oe=>X5(Ul(oe)))),b(n,["tools"],le)}const R=v(e,["toolConfig"]);if(n!==void 0&&R!=null&&b(n,["toolConfig"],W5(R)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=v(e,["cachedContent"]);n!==void 0&&I!=null&&b(n,["cachedContent"],Es(t,I));const O=v(e,["responseModalities"]);O!=null&&b(i,["responseModalities"],O);const F=v(e,["mediaResolution"]);F!=null&&b(i,["mediaResolution"],F);const z=v(e,["speechConfig"]);if(z!=null&&b(i,["speechConfig"],cA(z)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=v(e,["thinkingConfig"]);$!=null&&b(i,["thinkingConfig"],$);const G=v(e,["imageConfig"]);G!=null&&b(i,["imageConfig"],T5(G));const X=v(e,["enableEnhancedCivicAnswers"]);return X!=null&&b(i,["enableEnhancedCivicAnswers"],X),i}function e5(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],On(r));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const E=v(e,["responseMimeType"]);E!=null&&b(i,["responseMimeType"],E);const x=v(e,["responseSchema"]);x!=null&&b(i,["responseSchema"],uA(x));const C=v(e,["responseJsonSchema"]);C!=null&&b(i,["responseJsonSchema"],C);const T=v(e,["routingConfig"]);T!=null&&b(i,["routingConfig"],T);const N=v(e,["modelSelectionConfig"]);N!=null&&b(i,["modelConfig"],N);const R=v(e,["safetySettings"]);if(n!==void 0&&R!=null){let B=R;Array.isArray(B)&&(B=B.map(V=>V)),b(n,["safetySettings"],B)}const I=v(e,["tools"]);if(n!==void 0&&I!=null){let B=Bl(I);Array.isArray(B)&&(B=B.map(V=>NI(Ul(V)))),b(n,["tools"],B)}const O=v(e,["toolConfig"]);n!==void 0&&O!=null&&b(n,["toolConfig"],O);const F=v(e,["labels"]);n!==void 0&&F!=null&&b(n,["labels"],F);const z=v(e,["cachedContent"]);n!==void 0&&z!=null&&b(n,["cachedContent"],Es(t,z));const $=v(e,["responseModalities"]);$!=null&&b(i,["responseModalities"],$);const G=v(e,["mediaResolution"]);G!=null&&b(i,["mediaResolution"],G);const X=v(e,["speechConfig"]);X!=null&&b(i,["speechConfig"],cA(X));const le=v(e,["audioTimestamp"]);le!=null&&b(i,["audioTimestamp"],le);const oe=v(e,["thinkingConfig"]);oe!=null&&b(i,["thinkingConfig"],oe);const pe=v(e,["imageConfig"]);if(pe!=null&&b(i,["imageConfig"],C5(pe)),v(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function kC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=Vi(r);Array.isArray(a)&&(a=a.map(l=>gp(l))),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&b(n,["generationConfig"],ZG(t,s,n)),n}function LC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=Vi(r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&b(n,["generationConfig"],e5(t,s,n)),n}function UC(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>wG(d))),b(e,["candidates"],c)}const r=v(t,["modelVersion"]);r!=null&&b(e,["modelVersion"],r);const s=v(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);const a=v(t,["responseId"]);a!=null&&b(e,["responseId"],a);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function BC(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),b(e,["candidates"],d)}const r=v(t,["createTime"]);r!=null&&b(e,["createTime"],r);const s=v(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const l=v(t,["responseId"]);l!=null&&b(e,["responseId"],l);const c=v(t,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function t5(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=v(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["aspectRatio"]);e!==void 0&&r!=null&&b(e,["parameters","aspectRatio"],r);const s=v(t,["guidanceScale"]);if(e!==void 0&&s!=null&&b(e,["parameters","guidanceScale"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&b(e,["parameters","safetySetting"],a);const l=v(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);const c=v(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&b(e,["parameters","includeSafetyAttributes"],c);const d=v(t,["includeRaiReason"]);e!==void 0&&d!=null&&b(e,["parameters","includeRaiReason"],d);const f=v(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);const p=v(t,["outputMimeType"]);e!==void 0&&p!=null&&b(e,["parameters","outputOptions","mimeType"],p);const g=v(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=v(t,["imageSize"]);if(e!==void 0&&y!=null&&b(e,["parameters","sampleImageSize"],y),v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function n5(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["negativePrompt"]);e!==void 0&&r!=null&&b(e,["parameters","negativePrompt"],r);const s=v(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a);const l=v(t,["guidanceScale"]);e!==void 0&&l!=null&&b(e,["parameters","guidanceScale"],l);const c=v(t,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&b(e,["parameters","includeSafetyAttributes"],p);const g=v(t,["includeRaiReason"]);e!==void 0&&g!=null&&b(e,["parameters","includeRaiReason"],g);const y=v(t,["language"]);e!==void 0&&y!=null&&b(e,["parameters","language"],y);const S=v(t,["outputMimeType"]);e!==void 0&&S!=null&&b(e,["parameters","outputOptions","mimeType"],S);const w=v(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&b(e,["parameters","outputOptions","compressionQuality"],w);const E=v(t,["addWatermark"]);e!==void 0&&E!=null&&b(e,["parameters","addWatermark"],E);const x=v(t,["labels"]);e!==void 0&&x!=null&&b(e,["labels"],x);const C=v(t,["imageSize"]);e!==void 0&&C!=null&&b(e,["parameters","sampleImageSize"],C);const T=v(t,["enhancePrompt"]);return e!==void 0&&T!=null&&b(e,["parameters","enhancePrompt"],T),n}function i5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["config"]);return s!=null&&t5(s,n),n}function r5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["config"]);return s!=null&&n5(s,n),n}function s5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>v5(a))),b(e,["generatedImages"],s)}const r=v(t,["positivePromptSafetyAttributes"]);return r!=null&&b(e,["positivePromptSafetyAttributes"],PI(r)),e}function a5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>vp(a))),b(e,["generatedImages"],s)}const r=v(t,["positivePromptSafetyAttributes"]);return r!=null&&b(e,["positivePromptSafetyAttributes"],RI(r)),e}function o5(t,e){const n={},i=v(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=v(t,["durationSeconds"]);if(e!==void 0&&r!=null&&b(e,["parameters","durationSeconds"],r),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);const a=v(t,["resolution"]);e!==void 0&&a!=null&&b(e,["parameters","resolution"],a);const l=v(t,["personGeneration"]);if(e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=v(t,["negativePrompt"]);e!==void 0&&c!=null&&b(e,["parameters","negativePrompt"],c);const d=v(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&b(e,["parameters","enhancePrompt"],d),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=v(t,["lastFrame"]);e!==void 0&&f!=null&&b(e,["instances[0]","lastFrame"],yp(f));const p=v(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>uq(y))),b(e,["instances[0]","referenceImages"],g)}if(v(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function l5(t,e){const n={},i=v(t,["numberOfVideos"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&b(e,["parameters","storageUri"],r);const s=v(t,["fps"]);e!==void 0&&s!=null&&b(e,["parameters","fps"],s);const a=v(t,["durationSeconds"]);e!==void 0&&a!=null&&b(e,["parameters","durationSeconds"],a);const l=v(t,["seed"]);e!==void 0&&l!=null&&b(e,["parameters","seed"],l);const c=v(t,["aspectRatio"]);e!==void 0&&c!=null&&b(e,["parameters","aspectRatio"],c);const d=v(t,["resolution"]);e!==void 0&&d!=null&&b(e,["parameters","resolution"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["pubsubTopic"]);e!==void 0&&p!=null&&b(e,["parameters","pubsubTopic"],p);const g=v(t,["negativePrompt"]);e!==void 0&&g!=null&&b(e,["parameters","negativePrompt"],g);const y=v(t,["enhancePrompt"]);e!==void 0&&y!=null&&b(e,["parameters","enhancePrompt"],y);const S=v(t,["generateAudio"]);e!==void 0&&S!=null&&b(e,["parameters","generateAudio"],S);const w=v(t,["lastFrame"]);e!==void 0&&w!=null&&b(e,["instances[0]","lastFrame"],cr(w));const E=v(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(N=>cq(N))),b(e,["instances[0]","referenceImages"],T)}const x=v(t,["mask"]);e!==void 0&&x!=null&&b(e,["instances[0]","mask"],lq(x));const C=v(t,["compressionQuality"]);return e!==void 0&&C!=null&&b(e,["parameters","compressionQuality"],C),n}function u5(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response","generateVideoResponse"]);return a!=null&&b(e,["response"],h5(a)),e}function c5(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],p5(a)),e}function d5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["image"]);s!=null&&b(n,["instances[0]","image"],yp(s));const a=v(e,["video"]);a!=null&&b(n,["instances[0]","video"],II(a));const l=v(e,["source"]);l!=null&&m5(l,n);const c=v(e,["config"]);return c!=null&&o5(c,n),n}function f5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["image"]);s!=null&&b(n,["instances[0]","image"],cr(s));const a=v(e,["video"]);a!=null&&b(n,["instances[0]","video"],DI(a));const l=v(e,["source"]);l!=null&&g5(l,n);const c=v(e,["config"]);return c!=null&&l5(c,n),n}function h5(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>b5(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function p5(t){const e={},n=v(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>A5(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function m5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],yp(r));const s=v(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],II(s)),n}function g5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],cr(r));const s=v(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],DI(s)),n}function v5(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],M5(n));const i=v(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const r=v(t,["_self"]);return r!=null&&b(e,["safetyAttributes"],PI(r)),e}function vp(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],MI(n));const i=v(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const r=v(t,["_self"]);r!=null&&b(e,["safetyAttributes"],RI(r));const s=v(t,["prompt"]);return s!=null&&b(e,["enhancedPrompt"],s),e}function y5(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["mask"],MI(n));const i=v(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(e,["labels"],r)}return e}function b5(t){const e={},n=v(t,["video"]);return n!=null&&b(e,["video"],aq(n)),e}function A5(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],oq(n)),e}function S5(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=v(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const r=v(t,["audioTimestamp"]);r!=null&&b(e,["audioTimestamp"],r);const s=v(t,["candidateCount"]);s!=null&&b(e,["candidateCount"],s);const a=v(t,["enableAffectiveDialog"]);a!=null&&b(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&b(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&b(e,["logprobs"],c);const d=v(t,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const f=v(t,["mediaResolution"]);f!=null&&b(e,["mediaResolution"],f);const p=v(t,["presencePenalty"]);p!=null&&b(e,["presencePenalty"],p);const g=v(t,["responseLogprobs"]);g!=null&&b(e,["responseLogprobs"],g);const y=v(t,["responseMimeType"]);y!=null&&b(e,["responseMimeType"],y);const S=v(t,["responseModalities"]);S!=null&&b(e,["responseModalities"],S);const w=v(t,["responseSchema"]);w!=null&&b(e,["responseSchema"],w);const E=v(t,["routingConfig"]);E!=null&&b(e,["routingConfig"],E);const x=v(t,["seed"]);x!=null&&b(e,["seed"],x);const C=v(t,["speechConfig"]);C!=null&&b(e,["speechConfig"],C);const T=v(t,["stopSequences"]);T!=null&&b(e,["stopSequences"],T);const N=v(t,["temperature"]);N!=null&&b(e,["temperature"],N);const R=v(t,["thinkingConfig"]);R!=null&&b(e,["thinkingConfig"],R);const I=v(t,["topK"]);I!=null&&b(e,["topK"],I);const O=v(t,["topP"]);if(O!=null&&b(e,["topP"],O),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function w5(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function _5(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function E5(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function x5(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function T5(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function C5(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);i!=null&&b(e,["imageSize"],i);const r=v(t,["outputMimeType"]);r!=null&&b(e,["imageOutputOptions","mimeType"],r);const s=v(t,["outputCompressionQuality"]);return s!=null&&b(e,["imageOutputOptions","compressionQuality"],s),e}function M5(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],ma(n));const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function MI(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["imageBytes"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function yp(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],ma(n));const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function cr(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["imageBytes"]);i!=null&&b(e,["bytesBase64Encoded"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function P5(t,e,n){const i={},r=v(e,["pageSize"]);n!==void 0&&r!=null&&b(n,["_query","pageSize"],r);const s=v(e,["pageToken"]);n!==void 0&&s!=null&&b(n,["_query","pageToken"],s);const a=v(e,["filter"]);n!==void 0&&a!=null&&b(n,["_query","filter"],a);const l=v(e,["queryBase"]);return n!==void 0&&l!=null&&b(n,["_url","models_url"],SI(t,l)),i}function R5(t,e,n){const i={},r=v(e,["pageSize"]);n!==void 0&&r!=null&&b(n,["_query","pageSize"],r);const s=v(e,["pageToken"]);n!==void 0&&s!=null&&b(n,["_query","pageToken"],s);const a=v(e,["filter"]);n!==void 0&&a!=null&&b(n,["_query","filter"],a);const l=v(e,["queryBase"]);return n!==void 0&&l!=null&&b(n,["_url","models_url"],SI(t,l)),i}function N5(t,e){const n={},i=v(e,["config"]);return i!=null&&P5(t,i,n),n}function I5(t,e){const n={},i=v(e,["config"]);return i!=null&&R5(t,i,n),n}function D5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["_self"]);if(r!=null){let s=wI(r);Array.isArray(s)&&(s=s.map(a=>k0(a))),b(e,["models"],s)}return e}function O5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["_self"]);if(r!=null){let s=wI(r);Array.isArray(s)&&(s=s.map(a=>L0(a))),b(e,["models"],s)}return e}function k5(t){const e={},n=v(t,["maskMode"]);n!=null&&b(e,["maskMode"],n);const i=v(t,["segmentationClasses"]);i!=null&&b(e,["maskClasses"],i);const r=v(t,["maskDilation"]);return r!=null&&b(e,["dilation"],r),e}function k0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["version"]);s!=null&&b(e,["version"],s);const a=v(t,["_self"]);a!=null&&b(e,["tunedModelInfo"],J5(a));const l=v(t,["inputTokenLimit"]);l!=null&&b(e,["inputTokenLimit"],l);const c=v(t,["outputTokenLimit"]);c!=null&&b(e,["outputTokenLimit"],c);const d=v(t,["supportedGenerationMethods"]);d!=null&&b(e,["supportedActions"],d);const f=v(t,["temperature"]);f!=null&&b(e,["temperature"],f);const p=v(t,["maxTemperature"]);p!=null&&b(e,["maxTemperature"],p);const g=v(t,["topP"]);g!=null&&b(e,["topP"],g);const y=v(t,["topK"]);y!=null&&b(e,["topK"],y);const S=v(t,["thinking"]);return S!=null&&b(e,["thinking"],S),e}function L0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["versionId"]);s!=null&&b(e,["version"],s);const a=v(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(g=>KG(g))),b(e,["endpoints"],p)}const l=v(t,["labels"]);l!=null&&b(e,["labels"],l);const c=v(t,["_self"]);c!=null&&b(e,["tunedModelInfo"],Q5(c));const d=v(t,["defaultCheckpointId"]);d!=null&&b(e,["defaultCheckpointId"],d);const f=v(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),b(e,["checkpoints"],p)}return e}function L5(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],WG(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],XG(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],SG(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function U5(t){const e={},n=v(t,["productImage"]);return n!=null&&b(e,["image"],cr(n)),e}function B5(t,e){const n={},i=v(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["baseSteps"]);e!==void 0&&r!=null&&b(e,["parameters","baseSteps"],r);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);const a=v(t,["seed"]);e!==void 0&&a!=null&&b(e,["parameters","seed"],a);const l=v(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&b(e,["parameters","safetySetting"],l);const c=v(t,["personGeneration"]);e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c);const d=v(t,["addWatermark"]);e!==void 0&&d!=null&&b(e,["parameters","addWatermark"],d);const f=v(t,["outputMimeType"]);e!==void 0&&f!=null&&b(e,["parameters","outputOptions","mimeType"],f);const p=v(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&b(e,["parameters","outputOptions","compressionQuality"],p);const g=v(t,["enhancePrompt"]);e!==void 0&&g!=null&&b(e,["parameters","enhancePrompt"],g);const y=v(t,["labels"]);return e!==void 0&&y!=null&&b(e,["labels"],y),n}function F5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["source"]);r!=null&&H5(r,n);const s=v(e,["config"]);return s!=null&&B5(s,n),n}function z5(t){const e={},n=v(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>vp(r))),b(e,["generatedImages"],i)}return e}function H5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["personImage"]);e!==void 0&&r!=null&&b(e,["instances[0]","personImage","image"],cr(r));const s=v(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>U5(l))),b(e,["instances[0]","productImages"],a)}return n}function G5(t){const e={},n=v(t,["referenceImage"]);n!=null&&b(e,["referenceImage"],cr(n));const i=v(t,["referenceId"]);i!=null&&b(e,["referenceId"],i);const r=v(t,["referenceType"]);r!=null&&b(e,["referenceType"],r);const s=v(t,["maskImageConfig"]);s!=null&&b(e,["maskImageConfig"],k5(s));const a=v(t,["controlImageConfig"]);a!=null&&b(e,["controlImageConfig"],MG(a));const l=v(t,["styleImageConfig"]);l!=null&&b(e,["styleImageConfig"],l);const c=v(t,["subjectImageConfig"]);return c!=null&&b(e,["subjectImageConfig"],c),e}function PI(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=v(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const r=v(t,["contentType"]);return r!=null&&b(e,["contentType"],r),e}function RI(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=v(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const r=v(t,["contentType"]);return r!=null&&b(e,["contentType"],r),e}function q5(t){const e={},n=v(t,["category"]);if(n!=null&&b(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=v(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function V5(t){const e={},n=v(t,["image"]);return n!=null&&b(e,["image"],cr(n)),e}function $5(t,e){const n={},i=v(t,["mode"]);e!==void 0&&i!=null&&b(e,["parameters","mode"],i);const r=v(t,["maxPredictions"]);e!==void 0&&r!=null&&b(e,["parameters","maxPredictions"],r);const s=v(t,["confidenceThreshold"]);e!==void 0&&s!=null&&b(e,["parameters","confidenceThreshold"],s);const a=v(t,["maskDilation"]);e!==void 0&&a!=null&&b(e,["parameters","maskDilation"],a);const l=v(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&b(e,["parameters","binaryColorThreshold"],l);const c=v(t,["labels"]);return e!==void 0&&c!=null&&b(e,["labels"],c),n}function j5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["source"]);r!=null&&K5(r,n);const s=v(e,["config"]);return s!=null&&$5(s,n),n}function Y5(t){const e={},n=v(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>y5(r))),b(e,["generatedMasks"],i)}return e}function K5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],cr(r));const s=v(t,["scribbleImage"]);return e!==void 0&&s!=null&&b(e,["instances[0]","scribble"],V5(s)),n}function W5(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],JG(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function X5(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],E5(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],x5(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function NI(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>QG(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function J5(t){const e={},n=v(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const r=v(t,["updateTime"]);return r!=null&&b(e,["updateTime"],r),e}function Q5(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&b(e,["baseModel"],n);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const r=v(t,["updateTime"]);return r!=null&&b(e,["updateTime"],r),e}function Z5(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);e!==void 0&&r!=null&&b(e,["description"],r);const s=v(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),n}function eq(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);e!==void 0&&r!=null&&b(e,["description"],r);const s=v(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),n}function tq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","name"],Qe(t,i));const r=v(e,["config"]);return r!=null&&Z5(r,n),n}function nq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&eq(r,n),n}function iq(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&b(e,["parameters","safetySetting"],r);const s=v(t,["personGeneration"]);e!==void 0&&s!=null&&b(e,["parameters","personGeneration"],s);const a=v(t,["includeRaiReason"]);e!==void 0&&a!=null&&b(e,["parameters","includeRaiReason"],a);const l=v(t,["outputMimeType"]);e!==void 0&&l!=null&&b(e,["parameters","outputOptions","mimeType"],l);const c=v(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&b(e,["parameters","outputOptions","compressionQuality"],c);const d=v(t,["enhanceInputImage"]);e!==void 0&&d!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=v(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=v(t,["labels"]);e!==void 0&&p!=null&&b(e,["labels"],p);const g=v(t,["numberOfImages"]);e!==void 0&&g!=null&&b(e,["parameters","sampleCount"],g);const y=v(t,["mode"]);return e!==void 0&&y!=null&&b(e,["parameters","mode"],y),n}function rq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["image"]);r!=null&&b(n,["instances[0]","image"],cr(r));const s=v(e,["upscaleFactor"]);s!=null&&b(n,["parameters","upscaleConfig","upscaleFactor"],s);const a=v(e,["config"]);return a!=null&&iq(a,n),n}function sq(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>vp(s))),b(e,["generatedImages"],r)}return e}function aq(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],ma(i));const r=v(t,["encoding"]);return r!=null&&b(e,["mimeType"],r),e}function oq(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function lq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["_self"],cr(n));const i=v(t,["maskMode"]);return i!=null&&b(e,["maskMode"],i),e}function uq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["image"],yp(n));const i=v(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function cq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["image"],cr(n));const i=v(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function II(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["videoBytes"]);i!=null&&b(e,["encodedVideo"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["encoding"],r),e}function DI(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["videoBytes"]);i!=null&&b(e,["bytesBase64Encoded"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function dq(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["displayName"],i),n}function fq(t){const e={},n=v(t,["config"]);return n!=null&&dq(n,e),e}function hq(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function pq(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&hq(i,e),e}function mq(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function gq(t,e){const n={},i=v(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["customMetadata"],s)}const r=v(t,["chunkingConfig"]);return e!==void 0&&r!=null&&b(e,["chunkingConfig"],r),n}function vq(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],bq(a)),e}function yq(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=v(t,["fileName"]);i!=null&&b(e,["fileName"],i);const r=v(t,["config"]);return r!=null&&gq(r,e),e}function bq(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function Aq(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function Sq(t){const e={},n=v(t,["config"]);return n!=null&&Aq(n,e),e}function wq(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["fileSearchStores"],s)}return e}function OI(t,e){const n={},i=v(t,["mimeType"]);e!==void 0&&i!=null&&b(e,["mimeType"],i);const r=v(t,["displayName"]);e!==void 0&&r!=null&&b(e,["displayName"],r);const s=v(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),b(e,["customMetadata"],l)}const a=v(t,["chunkingConfig"]);return e!==void 0&&a!=null&&b(e,["chunkingConfig"],a),n}function _q(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=v(t,["config"]);return i!=null&&OI(i,e),e}function Eq(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}const xq="Content-Type",Tq="X-Server-Timeout",Cq="User-Agent",U0="x-goog-api-client",Mq="1.34.0",Pq=`google-genai-sdk/${Mq}`,Rq="v1beta1",Nq="v1beta";class Iq{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Rq,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Nq,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))r.searchParams.append(a,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&n?.timeout>0){const l=setTimeout(()=>s.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&Dq(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await FC(r),new I0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await FC(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ar(this,arguments,function*(){var i;const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield De(r.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=s.decode(f,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const w=JSON.parse(JSON.stringify(S.error)),E=w.status,x=w.code,C=`got status: ${E}. ${JSON.stringify(S)}`;if(x>=400&&x<600)throw new mp({message:C,status:x})}}catch(S){if(S.name==="ApiError")throw S}a+=p;let g=-1,y=0;for(;;){g=-1,y=0;for(const E of c){const x=a.indexOf(E);x!==-1&&(g===-1||x<g)&&(g=x,y=E.length)}if(g===-1)break;const S=a.substring(0,g);a=a.substring(g+y);const w=S.trim();if(w.startsWith(l)){const E=w.substring(l.length).trim();try{const x=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield De(new I0(x))}catch(x){throw new Error(`exception parsing stream chunk ${E}. ${x}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Pq+" "+this.clientOptions.userAgentExtra;return e[Cq]=n,e[U0]=n,e[xq]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(Tq,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const l=(i=n?.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const c={file:r},d=this.getFileName(e),f=fe("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n?.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var r;const s=this.clientOptions.uploader,a=await s.stat(n),l=String(a.size),c=(r=i?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};i!=null&&OI(i,p);const g=await this.fetchUploadUrl(d,l,c,f,p,i?.httpOptions);return s.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,a){var l;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=d?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function FC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new mp({message:r,status:n}):new Error(r)}}function Dq(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const l=Object.assign({},s);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const r=i(n,e);t.body=JSON.stringify(r)}const Oq="mcp_used/unknown";let kq=!1;function kI(t){for(const e of t)if(Lq(e)||typeof e=="object"&&"inputSchema"in e)return!0;return kq}function LI(t){var e;const n=(e=t[U0])!==null&&e!==void 0?e:"";t[U0]=(n+` ${Oq}`).trimStart()}function Lq(t){return t!==null&&typeof t=="object"&&t instanceof fA}function Uq(t){return ar(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){const a=yield De(n.listTools({cursor:r}));for(const l of a.tools)yield yield De(l),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class fA{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new fA(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const f of this.mcpClients)try{for(var l=!0,c=(n=void 0,or(Uq(f))),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const p=r;a.push(p);const g=p.name;if(s[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);s[g]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),mH(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}async function Bq(t,e,n){const i=new oH;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Fq{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=Gq(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(T=>{d=T}),p=e.callbacks,g=function(){d({})},y=this.apiClient,S={onopen:g,onmessage:T=>{Bq(y,p.onmessage,T)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(T){}},w=this.webSocketFactory.create(c,Hq(a),S);w.connect(),await f;const C={setup:{model:Qe(this.apiClient,e.model)}};return w.send(JSON.stringify(C)),new zq(w,this.apiClient)}}class zq{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fG(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=dG(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(pl.PLAY)}pause(){this.sendPlaybackControl(pl.PAUSE)}stop(){this.sendPlaybackControl(pl.STOP)}resetContext(){this.sendPlaybackControl(pl.RESET_CONTEXT)}close(){this.conn.close()}}function Hq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Gq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const qq="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Vq(t,e,n){const i=new aH;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const a=mG(s);Object.assign(i,a)}else Object.assign(i,s);e(i)}class $q{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Fq(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&kI(e.config.tools)&&LI(p);const g=Wq(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,f);else{const z=this.apiClient.getApiKey();let $="BidiGenerateContent",G="key";z?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${$}?${G}=${z}`}let y=()=>{};const S=new Promise(z=>{y=z}),w=e.callbacks,E=function(){var z;(z=w?.onopen)===null||z===void 0||z.call(w),y({})},x=this.apiClient,C={onopen:E,onmessage:z=>{Vq(x,w.onmessage,z)},onerror:(n=w?.onerror)!==null&&n!==void 0?n:function(z){},onclose:(i=w?.onclose)!==null&&i!==void 0?i:function(z){}},T=this.webSocketFactory.create(f,Kq(g),C);T.connect(),await S;let N=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const z=this.apiClient.getProject(),$=this.apiClient.getLocation();N=`projects/${z}/locations/${$}/`+N}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[fh.AUDIO]}:e.config.responseModalities=[fh.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(l=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],O=[];for(const z of I)if(this.isCallableTool(z)){const $=z;O.push(await $.tool())}else O.push(z);O.length>0&&(e.config.tools=O);const F={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=cG(this.apiClient,F):R=uG(this.apiClient,F),delete R.config,T.send(JSON.stringify(R)),new Yq(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jq={turnComplete:!0};class Yq{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Vi(n.turns),e.isVertexAI()||(i=i.map(r=>gp(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(qq)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},jq),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:pG(e)}:n={realtimeInput:hG(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Kq(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Wq(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const zC=10;function HC(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(wl(a)){r=!0;break}if(!r)return!0;const s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function wl(t){return"callTool"in t&&typeof t.callTool=="function"}function Xq(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>wl(r)))!==null&&i!==void 0?i:!1}function GC(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(wl(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function qC(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class Jq extends _s{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,a,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Xq(n)||HC(n.config))return await this.generateContentInternal(c);const d=GC(n);if(d.length>0){const w=d.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,p;const g=Vi(c.contents),y=(s=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:zC;let S=0;for(;S<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,E=[];for(const x of(l=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(wl(x)){const T=await x.callTool(f.functionCalls);E.push(...T)}S++,p={role:"user",parts:E},c.contents=Vi(c.contents),c.contents.push(w),c.contents.push(p),qC(c.config)&&(g.push(w),g.push(p))}return qC(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{var i,r,s,a,l;if(this.maybeMoveToResponseJsonSchem(n),HC(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=GC(n);if(c.length>0){const p=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(l=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i?.generatedImages)for(const c of i.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c?.safetyAttributes:a.push(c);let l;return s?l={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new fo(gs.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async c=>wl(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&kI(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),LI(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(wl(a)){const l=a,c=await l.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,l)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:zC;let a=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(d,f,p){return ar(this,arguments,function*(){for(var g,y,S,w,E,x;l<s;){a&&(l++,a=!1);const R=yield De(d.processParamsMaybeAddMcpUsage(p)),I=yield De(d.generateContentStreamInternal(R)),O=[],F=[];try{for(var C=!0,T=(y=void 0,or(I)),N;N=yield De(T.next()),g=N.done,!g;C=!0){w=N.value,C=!1;const z=w;if(yield yield De(z),z.candidates&&(!((E=z.candidates[0])===null||E===void 0)&&E.content)){F.push(z.candidates[0].content);for(const $ of(x=z.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(l<s&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has($.functionCall.name)){const G=yield De(f.get($.functionCall.name).callTool([$.functionCall]));O.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(z){y={error:z}}finally{try{!C&&!g&&(S=T.return)&&(yield De(S.call(T)))}finally{if(y)throw y.error}}if(O.length>0){a=!0;const z=new qu;z.candidates=[{content:{role:"user",parts:O}}],yield yield De(z);const $=[];$.push(...F),$.push({role:"user",parts:O});const G=Vi(p.contents).concat($);p.contents=G}else break}})})(this,c,e)}async generateContentInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=LC(this.apiClient,e);return l=fe("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=BC(f),g=new qu;return Object.assign(g,p),g})}else{const d=kC(this.apiClient,e);return l=fe("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=UC(f),g=new qu;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=LC(this.apiClient,e);return l=fe("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return ar(this,arguments,function*(){var g,y,S,w;try{for(var E=!0,x=or(p),C;C=yield De(x.next()),g=C.done,!g;E=!0){w=C.value,E=!1;const T=w,N=BC(yield De(T.json()));N.sdkHttpResponse={headers:T.headers};const R=new qu;Object.assign(R,N),yield yield De(R)}}catch(T){y={error:T}}finally{try{!E&&!g&&(S=x.return)&&(yield De(S.call(x)))}finally{if(y)throw y.error}}})})}else{const d=kC(this.apiClient,e);return l=fe("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return ar(this,arguments,function*(){var g,y,S,w;try{for(var E=!0,x=or(p),C;C=yield De(x.next()),g=C.done,!g;E=!0){w=C.value,E=!1;const T=w,N=UC(yield De(T.json()));N.sdkHttpResponse={headers:T.headers};const R=new qu;Object.assign(R,N),yield yield De(R)}}catch(T){y={error:T}}finally{try{!E&&!g&&(S=x.return)&&(yield De(S.call(x)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=$G(this.apiClient,e);return l=fe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=YG(f),g=new yC;return Object.assign(g,p),g})}else{const d=VG(this.apiClient,e);return l=fe("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=jG(f),g=new yC;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=r5(this.apiClient,e);return l=fe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=a5(f),g=new bC;return Object.assign(g,p),g})}else{const d=i5(this.apiClient,e);return l=fe("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=s5(f),g=new bC;return Object.assign(g,p),g})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=zG(this.apiClient,e);return s=fe("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=HG(c),f=new Wz;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=rq(this.apiClient,e);return s=fe("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=sq(c),f=new Xz;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=F5(this.apiClient,e);return s=fe("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=z5(c),f=new Jz;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=j5(this.apiClient,e);return s=fe("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Y5(c),f=new Qz;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=_5(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>L0(f))}else{const d=w5(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>k0(f))}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=I5(this.apiClient,e);return l=fe("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=O5(f),g=new AC;return Object.assign(g,p),g})}else{const d=N5(this.apiClient,e);return l=fe("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=D5(f),g=new AC;return Object.assign(g,p),g})}}async update(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=nq(this.apiClient,e);return l=fe("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>L0(f))}else{const d=tq(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>k0(f))}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=LG(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=BG(f),g=new SC;return Object.assign(g,p),g})}else{const d=kG(this.apiClient,e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=UG(f),g=new SC;return Object.assign(g,p),g})}}async countTokens(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=IG(this.apiClient,e);return l=fe("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=OG(f),g=new wC;return Object.assign(g,p),g})}else{const d=NG(this.apiClient,e);return l=fe("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=DG(f),g=new wC;return Object.assign(g,p),g})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=EG(this.apiClient,e);return s=fe("{model}:computeTokens",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=xG(c),f=new Zz;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=f5(this.apiClient,e);return l=fe("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>{const p=c5(f),g=new hh;return Object.assign(g,p),g})}else{const d=d5(this.apiClient,e);return l=fe("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=u5(f),g=new hh;return Object.assign(g,p),g})}}}class Qq extends _s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=qz(e);return l=fe("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a}else{const d=Gz(e);return l=fe("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=kz(e);return s=fe("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function Zq(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function eV(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>uV(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function tV(t,e,n){const i={},r=v(e,["expireTime"]);n!==void 0&&r!=null&&b(n,["expireTime"],r);const s=v(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&b(n,["newSessionExpireTime"],s);const a=v(e,["uses"]);n!==void 0&&a!=null&&b(n,["uses"],a);const l=v(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&b(n,["bidiGenerateContentSetup"],lV(t,l));const c=v(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&b(n,["fieldMask"],c),i}function nV(t,e){const n={},i=v(e,["config"]);return i!=null&&b(n,["config"],tV(t,i,n)),n}function iV(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function rV(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sV(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function aV(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function oV(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],dA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],eV(On(S)));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let I=Bl(w);Array.isArray(I)&&(I=I.map(O=>dV(Ul(O)))),b(e,["setup","tools"],I)}const E=v(t,["sessionResumption"]);e!==void 0&&E!=null&&b(e,["setup","sessionResumption"],cV(E));const x=v(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&b(e,["setup","inputAudioTranscription"],x);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);if(e!==void 0&&R!=null&&b(e,["setup","proactivity"],R),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function lV(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],oV(r,n)),n}function uV(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],iV(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],rV(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],Zq(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function cV(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dV(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],sV(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],aV(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function fV(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function hV(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=fV(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];s&&c.push(s),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class pV extends _s{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=nV(this.apiClient,e);s=fe("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const c=hV(l,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function mV(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function gV(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&mV(i,e),e}function vV(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function yV(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function bV(t){const e={},n=v(t,["parent"]);n!=null&&b(e,["_url","parent"],n);const i=v(t,["config"]);return i!=null&&yV(i,e),e}function AV(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["documents"],s)}return e}class SV extends _s{constructor(e){super(),this.apiClient=e,this.list=async n=>new fo(gs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=vV(e);return s=fe("{name}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gV(e);r=fe("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bV(e);return s=fe("{parent}/documents",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=AV(c),f=new eH;return Object.assign(f,d),f})}}}class wV extends _s{constructor(e,n=new SV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new fo(gs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=fq(e);return s=fe("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mq(e);return s=fe("{name}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pq(e);r=fe("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Sq(e);return s=fe("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=wq(c),f=new tH;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_q(e);return s=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Eq(c),f=new nH;return Object.assign(f,d),f})}}async importFile(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=yq(e);return s=fe("{file_search_store_name}:importFile",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=vq(c),f=new aA;return Object.assign(f,d),f})}}}let UI=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return UI=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const _V=()=>UI();function B0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const F0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class $i extends Error{}class Yn extends $i{constructor(e,n,i,r){super(`${Yn.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new bp({message:i,cause:F0(n)});const s=n;return e===400?new FI(e,s,i,r):e===401?new zI(e,s,i,r):e===403?new HI(e,s,i,r):e===404?new GI(e,s,i,r):e===409?new qI(e,s,i,r):e===422?new VI(e,s,i,r):e===429?new $I(e,s,i,r):e>=500?new jI(e,s,i,r):new Yn(e,s,i,r)}}class z0 extends Yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class bp extends Yn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class BI extends bp{constructor({message:e}={}){super({message:e??"Request timed out."})}}class FI extends Yn{}class zI extends Yn{}class HI extends Yn{}class GI extends Yn{}class qI extends Yn{}class VI extends Yn{}class $I extends Yn{}class jI extends Yn{}const EV=/^[a-z][a-z0-9+.-]*:/i,xV=t=>EV.test(t);let H0=t=>(H0=Array.isArray,H0(t));const TV=H0;let CV=TV;const VC=CV;function MV(t){if(!t)return!0;for(const e in t)return!1;return!0}function PV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const RV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $i(`${t} must be an integer`);if(e<0)throw new $i(`${t} must be a positive integer`);return e},NV=t=>{try{return JSON.parse(t)}catch{return}};const IV=t=>new Promise(e=>setTimeout(e,t));const ul="0.0.1";function DV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const OV=()=>{var t,e,n,i,r;const s=DV();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":jC(Deno.build.os),"X-Stainless-Arch":$C(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":jC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":$C((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=kV();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${s}.${a}`}}}return null}const $C=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",jC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ef;const LV=()=>Ef??(Ef=OV());function UV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function YI(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function BV(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return YI({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function KI(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function FV(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}const zV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const WI=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zv(t,e,n){return WI(),new File(t,e??"unknown_file",n)}function HV(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const GV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const XI=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",qV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&XI(t),VV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function $V(t,e,n){if(WI(),t=await t,qV(t))return t instanceof File?t:zv([await t.arrayBuffer()],t.name);if(VV(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),zv(await G0(r),e,n)}const i=await G0(t);if(e||(e=HV(t)),!n?.type){const r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return zv(i,e,n)}async function G0(t){var e,n,i,r,s;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(XI(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(GV(t))try{for(var l=!0,c=or(t),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const f=r;a.push(...await G0(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const f=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${jV(t)}`)}return a}function jV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class JI{constructor(e){this._client=e}}JI._key=[];function QI(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const YC=Object.freeze(Object.create(null)),YV=(t=QI)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const s=[],a=n.reduce((f,p,g)=>{var y,S,w;/[?#]/.test(p)&&(r=!0);const E=i[g];let x=(r?encodeURIComponent:t)(""+E);return g!==i.length&&(E==null||typeof E=="object"&&E.toString===((w=Object.getPrototypeOf((S=Object.getPrototypeOf((y=E.hasOwnProperty)!==null&&y!==void 0?y:YC))!==null&&S!==void 0?S:YC))===null||w===void 0?void 0:w.toString))&&(x=E+"",s.push({start:f.length+p.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(g===i.length?"":x)},""),l=a.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((f,p)=>f.start-p.start),s.length>0){let f=0;const p=s.reduce((g,y)=>{const S=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,g+S+w},"");throw new $i(`Path parameters result in path with invalid segments:
${s.map(g=>g.error).join(`
`)}
${a}
${p}`)}return a}),xf=YV(QI);class ZI extends JI{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,s=mh(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new $i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new $i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xf`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(xf`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(xf`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const s=n??{},{api_version:a=this._client.apiVersion}=s,l=mh(s,["api_version"]);return this._client.get(xf`/${a}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}ZI._key=Object.freeze(["interactions"]);class eD extends ZI{}function KV(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Tf;function hA(t){let e;return(Tf??(e=new globalThis.TextEncoder,Tf=e.encode.bind(e)))(t)}let Cf;function KC(t){let e;return(Cf??(e=new globalThis.TextDecoder,Cf=e.decode.bind(e)))(t)}class Ap{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?hA(e):e;this.buffer=KV([this.buffer,n]);const i=[];let r;for(;(r=WV(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(KC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=KC(this.buffer.subarray(0,s));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ap.NEWLINE_CHARS=new Set([`
`,"\r"]);Ap.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function WV(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function XV(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const gh={off:0,error:200,warn:300,info:400,debug:500},WC=(t,e,n)=>{if(t){if(PV(gh,t))return t;Gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(gh))}`)}};function rc(){}function Mf(t,e,n){return!e||gh[t]>gh[n]?rc:e[t].bind(e)}const JV={error:rc,warn:rc,info:rc,debug:rc};let XC=new WeakMap;function Gn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return JV;const r=XC.get(n);if(r&&r[0]===i)return r[1];const s={error:Mf("error",n,i),warn:Mf("warn",n,i),info:Mf("info",n,i),debug:Mf("debug",n,i)};return XC.set(n,[i,s]),s}const Ha=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class ml{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const s=i?Gn(i):console;function a(){return ar(this,arguments,function*(){var c,d,f,p;if(r)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,S=or(QV(e,n)),w;w=yield De(S.next()),c=w.done,!c;y=!0){p=w.value,y=!1;const E=p;if(!g)if(E.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield De(JSON.parse(E.data))}catch(x){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),x}}}catch(E){d={error:E}}finally{try{!y&&!c&&(f=S.return)&&(yield De(f.call(S)))}finally{if(d)throw d.error}}g=!0}catch(E){if(B0(E))return yield De(void 0);throw E}finally{g||n.abort()}})}return new ml(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function s(){return ar(this,arguments,function*(){var c,d,f,p;const g=new Ap,y=KI(e);try{for(var S=!0,w=or(y),E;E=yield De(w.next()),c=E.done,!c;S=!0){p=E.value,S=!1;const x=p;for(const C of g.decode(x))yield yield De(C)}}catch(x){d={error:x}}finally{try{!S&&!c&&(f=w.return)&&(yield De(f.call(w)))}finally{if(d)throw d.error}}for(const x of g.flush())yield yield De(x)})}function a(){return ar(this,arguments,function*(){var c,d,f,p;if(r)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,S=or(s()),w;w=yield De(S.next()),c=w.done,!c;y=!0){p=w.value,y=!1;const E=p;g||E&&(yield yield De(JSON.parse(E)))}}catch(E){d={error:E}}finally{try{!y&&!c&&(f=S.return)&&(yield De(f.call(S)))}finally{if(d)throw d.error}}g=!0}catch(E){if(B0(E))return yield De(void 0);throw E}finally{g||n.abort()}})}return new ml(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const a=i.next();e.push(a),n.push(a)}return s.shift()}});return[new ml(()=>r(e),this.controller,this.client),new ml(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return YI({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:s}=await n.next();if(s)return i.close();const a=hA(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function QV(t,e){return ar(this,arguments,function*(){var i,r,s,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $i("Attempted to iterate over a response with no body");const l=new e6,c=new Ap,d=KI(t.body);try{for(var f=!0,p=or(ZV(d)),g;g=yield De(p.next()),i=g.done,!i;f=!0){a=g.value,f=!1;const y=a;for(const S of c.decode(y)){const w=l.decode(S);w&&(yield yield De(w))}}}catch(y){r={error:y}}finally{try{!f&&!i&&(s=p.return)&&(yield De(s.call(p)))}finally{if(r)throw r.error}}for(const y of c.flush()){const S=l.decode(y);S&&(yield yield De(S))}})}function ZV(t){return ar(this,arguments,function*(){var n,i,r,s;let a=new Uint8Array;try{for(var l=!0,c=or(t),d;d=yield De(c.next()),n=d.done,!n;l=!0){s=d.value,l=!1;const f=s;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?hA(f):f;let g=new Uint8Array(a.length+p.length);g.set(a),g.set(p,a.length),a=g;let y;for(;(y=XV(a))!==-1;)yield yield De(a.slice(0,y)),a=a.slice(y)}}catch(f){i={error:f}}finally{try{!l&&!n&&(r=c.return)&&(yield De(r.call(c)))}finally{if(i)throw i.error}}a.length>0&&(yield yield De(a))})}class e6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=t6(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function t6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function n6(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=e,a=await(async()=>{var l;if(e.options.stream)return Gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ml.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c?.split(";")[0])===null||l===void 0?void 0:l.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Gn(t).debug(`[${i}] response parsed`,Ha({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}class pA extends Promise{constructor(e,n,i=n6){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new pA(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const tD=Symbol("brand.privateNullableHeaders");function*i6(t){if(!t)return;if(tD in t){const{values:i,nulls:r}=t;yield*i.entries();for(const s of r)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():VC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=VC(i[1])?i[1]:[i[1]];let a=!1;for(const l of s)l!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,l])}}const Vu=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[s,a]of i6(i)){const l=s.toLowerCase();r.has(l)||(e.delete(s),r.add(l)),a===null?(e.delete(s),n.add(l)):(e.append(s,a),n.delete(l))}}return{[tD]:!0,values:e,nulls:n}};const Hv=t=>{var e,n,i,r,s,a;if(typeof globalThis.process<"u")return(i=(n=(e=Pz)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,t))===null||a===void 0?void 0:a.trim()};var nD;class Sp{constructor(e){var n,i,r,s,a,l,c,{baseURL:d=Hv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Hv("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=mh(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:f,apiVersion:p},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(i=y.timeout)!==null&&i!==void 0?i:Sp.DEFAULT_TIMEOUT,this.logger=(r=y.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(a=(s=WC(y.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:WC(Hv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:S,this.fetchOptions=y.fetchOptions,this.maxRetries=(l=y.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:UV(),this.encoder=zV,this._options=y,this.apiKey=f,this.apiVersion=p,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Vu([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Vu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Vu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new $i(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ul}`}defaultIdempotencyKey(){return`stainless-node-retry-${_V()}`}makeStatusError(e,n,i,r){return Yn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,s=xV(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return MV(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new pA(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,s,a;const l=await e,c=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:f,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=i===void 0?"":`, retryOf: ${i}`,S=Date.now();if(Gn(this).debug(`[${g}] sending request`,Ha({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:d.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new z0;const w=new AbortController,E=await this.fetchWithTimeout(f,d,p,w).catch(F0),x=Date.now();if(E instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new z0;const N=B0(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Gn(this).info(`[${g}] connection ${N?"timed out":"failed"} - ${T}`),Gn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (${T})`,Ha({retryOfRequestLogID:i,url:f,durationMs:x-S,message:E.message})),this.retryRequest(l,n,i??g);throw Gn(this).info(`[${g}] connection ${N?"timed out":"failed"} - error; no more retries left`),Gn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (error; no more retries left)`,Ha({retryOfRequestLogID:i,url:f,durationMs:x-S,message:E.message})),N?new BI:new bp({cause:E})}const C=`[${g}${y}] ${d.method} ${f} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${x-S}ms`;if(!E.ok){const T=await this.shouldRetry(E);if(n&&T){const z=`retrying, ${n} attempts remaining`;return await FV(E.body),Gn(this).info(`${C} - ${z}`),Gn(this).debug(`[${g}] response error (${z})`,Ha({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:x-S})),this.retryRequest(l,n,i??g,E.headers)}const N=T?"error; no more retries left":"error; not retryable";Gn(this).info(`${C} - ${N}`);const R=await E.text().catch(z=>F0(z).message),I=NV(R),O=I?void 0:R;throw Gn(this).debug(`[${g}] response error (${N})`,Ha({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:O,durationMs:Date.now()-S})),this.makeStatusError(E.status,I,O,E.headers)}return Gn(this).info(C),Gn(this).debug(`[${g}] response start`,Ha({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:x-S})),{response:E,options:l,controller:w,requestLogID:g,retryOfRequestLogID:i,startTime:S}}async fetchWithTimeout(e,n,i,r){const s=n||{},{signal:a,method:l}=s,c=mh(s,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var s;let a;const l=r?.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(a=d)}const c=r?.get("retry-after");if(c&&!a){const d=parseFloat(c);Number.isNaN(d)?a=Date.parse(c)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await IV(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,s;const a=Object.assign({},e),{method:l,path:c,query:d,defaultBaseURL:f}=a,p=this.buildURL(c,d,f);"timeout"in a&&RV("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:a}),S=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:S},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let l=Vu([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),LV()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Vu([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:BV(e)}:this.encoder({body:e,headers:i})}}Sp.DEFAULT_TIMEOUT=6e4;class mn extends Sp{constructor(){super(...arguments),this.interactions=new eD(this)}}nD=mn;mn.GeminiNextGenAPIClient=nD;mn.GeminiNextGenAPIClientError=$i;mn.APIError=Yn;mn.APIConnectionError=bp;mn.APIConnectionTimeoutError=BI;mn.APIUserAbortError=z0;mn.NotFoundError=GI;mn.ConflictError=qI;mn.RateLimitError=$I;mn.BadRequestError=FI;mn.AuthenticationError=zI;mn.InternalServerError=jI;mn.PermissionDeniedError=HI;mn.UnprocessableEntityError=VI;mn.toFile=$V;mn.Interactions=eD;function r6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function s6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function a6(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&b(n,["sdkHttpResponse"],i),n}function o6(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&b(n,["sdkHttpResponse"],i),n}function l6(t,e,n){const i={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=v(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&b(e,["displayName"],r),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&b(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&b(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=v(t,["batchSize"]);e!==void 0&&l!=null&&b(e,["tuningTask","hyperparameters","batchSize"],l);const c=v(t,["learningRate"]);if(e!==void 0&&c!=null&&b(e,["tuningTask","hyperparameters","learningRate"],c),v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(v(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function u6(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const y=v(t,["validationDataset"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec"],JC(y))}else if(r==="PREFERENCE_TUNING"){const y=v(t,["validationDataset"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec"],JC(y))}const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&b(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&b(e,["description"],a);let l=v(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=v(t,["epochCount"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(l==="PREFERENCE_TUNING"){const y=v(t,["epochCount"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=v(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=v(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=v(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let d=v(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=v(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(d==="PREFERENCE_TUNING"){const y=v(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=v(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=v(t,["adapterSize"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=v(t,["adapterSize"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=v(t,["labels"]);e!==void 0&&p!=null&&b(e,["labels"],p);const g=v(t,["beta"]);return e!==void 0&&g!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),i}function c6(t,e){const n={},i=v(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&b(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&S6(s);const a=v(t,["config"]);return a!=null&&l6(a,n),n}function d6(t,e){const n={},i=v(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&b(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&w6(s,n,e);const a=v(t,["config"]);return a!=null&&u6(a,n,e),n}function f6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function h6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function p6(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),i}function m6(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),i}function g6(t,e){const n={},i=v(t,["config"]);return i!=null&&p6(i,n),n}function v6(t,e){const n={},i=v(t,["config"]);return i!=null&&m6(i,n),n}function y6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&b(n,["nextPageToken"],r);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>iD(l))),b(n,["tuningJobs"],a)}return n}function b6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&b(n,["nextPageToken"],r);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>q0(l))),b(n,["tuningJobs"],a)}return n}function A6(t,e){const n={},i=v(t,["name"]);i!=null&&b(n,["model"],i);const r=v(t,["name"]);return r!=null&&b(n,["endpoint"],r),n}function S6(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=v(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(n,["examples","examples"],r)}return n}function w6(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=v(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function iD(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["state"]);s!=null&&b(n,["state"],bI(s));const a=v(t,["createTime"]);a!=null&&b(n,["createTime"],a);const l=v(t,["tuningTask","startTime"]);l!=null&&b(n,["startTime"],l);const c=v(t,["tuningTask","completeTime"]);c!=null&&b(n,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(n,["updateTime"],d);const f=v(t,["description"]);f!=null&&b(n,["description"],f);const p=v(t,["baseModel"]);p!=null&&b(n,["baseModel"],p);const g=v(t,["_self"]);return g!=null&&b(n,["tunedModel"],A6(g)),n}function q0(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["state"]);s!=null&&b(n,["state"],bI(s));const a=v(t,["createTime"]);a!=null&&b(n,["createTime"],a);const l=v(t,["startTime"]);l!=null&&b(n,["startTime"],l);const c=v(t,["endTime"]);c!=null&&b(n,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(n,["updateTime"],d);const f=v(t,["error"]);f!=null&&b(n,["error"],f);const p=v(t,["description"]);p!=null&&b(n,["description"],p);const g=v(t,["baseModel"]);g!=null&&b(n,["baseModel"],g);const y=v(t,["tunedModel"]);y!=null&&b(n,["tunedModel"],y);const S=v(t,["preTunedModel"]);S!=null&&b(n,["preTunedModel"],S);const w=v(t,["supervisedTuningSpec"]);w!=null&&b(n,["supervisedTuningSpec"],w);const E=v(t,["preferenceOptimizationSpec"]);E!=null&&b(n,["preferenceOptimizationSpec"],E);const x=v(t,["tuningDataStats"]);x!=null&&b(n,["tuningDataStats"],x);const C=v(t,["encryptionSpec"]);C!=null&&b(n,["encryptionSpec"],C);const T=v(t,["partnerModelTuningSpec"]);T!=null&&b(n,["partnerModelTuningSpec"],T);const N=v(t,["customBaseModel"]);N!=null&&b(n,["customBaseModel"],N);const R=v(t,["experiment"]);R!=null&&b(n,["experiment"],R);const I=v(t,["labels"]);I!=null&&b(n,["labels"],I);const O=v(t,["outputUri"]);O!=null&&b(n,["outputUri"],O);const F=v(t,["pipelineJob"]);F!=null&&b(n,["pipelineJob"],F);const z=v(t,["serviceAccount"]);z!=null&&b(n,["serviceAccount"],z);const $=v(t,["tunedModelDisplayName"]);$!=null&&b(n,["tunedModelDisplayName"],$);const G=v(t,["veoTuningSpec"]);return G!=null&&b(n,["veoTuningSpec"],G),n}function _6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["metadata"]);s!=null&&b(n,["metadata"],s);const a=v(t,["done"]);a!=null&&b(n,["done"],a);const l=v(t,["error"]);return l!=null&&b(n,["error"],l),n}function JC(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&b(n,["validationDatasetUri"],i);const r=v(t,["vertexDatasetResource"]);return r!=null&&b(n,["validationDatasetUri"],r),n}class E6 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(gs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:N0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=h6(e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>q0(f))}else{const d=f6(e);return l=fe("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>iD(f))}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=v6(e);return l=fe("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=b6(f),g=new _C;return Object.assign(g,p),g})}else{const d=g6(e);return l=fe("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=y6(f),g=new _C;return Object.assign(g,p),g})}}async cancel(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=s6(e);return l=fe("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=o6(f),g=new EC;return Object.assign(g,p),g})}else{const d=r6(e);return l=fe("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=a6(f),g=new EC;return Object.assign(g,p),g})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=d6(e,e);return s=fe("tuningJobs",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>q0(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=c6(e);return s=fe("tunedModels",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>_6(c))}}}class x6{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const T6=1024*1024*8,C6=3,M6=1e3,P6=2,vh="x-goog-upload-status";async function R6(t,e,n){var i;const r=await rD(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function N6(t,e,n){var i;const r=await rD(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[vh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=hI(s),l=new oA;return Object.assign(l,a),l}async function rD(t,e,n){var i,r;let s=0,a=0,l=new I0(new Response),c="upload";for(s=t.size;a<s;){const d=Math.min(T6,s-a),f=t.slice(a,a+d);a+d>=s&&(c+=", finalize");let p=0,g=M6;for(;p<C6&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((i=l?.headers)===null||i===void 0)&&i[vh]));)p++,await D6(g),g=g*P6;if(a+=d,((r=l?.headers)===null||r===void 0?void 0:r[vh])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function I6(t){return{size:t.size,type:t.type}}function D6(t){return new Promise(e=>setTimeout(e,t))}class O6{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await R6(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N6(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await I6(e)}}class k6{create(e,n,i){return new L6(e,n,i)}}class L6{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const QC="x-goog-api-key";class U6{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(QC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(QC,this.apiKey)}}}const B6="gl-node/";class mA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new mn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Dz(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new U6(this.apiKey);this.apiClient=new Iq({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:B6+"web",uploader:new O6,downloader:new x6}),this.models=new Jq(this.apiClient),this.live=new $q(this.apiClient,r,new k6),this.batches=new l4(this.apiClient),this.chats=new q4(this.models,this.apiClient),this.caches=new z4(this.apiClient),this.files=new Z4(this.apiClient),this.operations=new Qq(this.apiClient),this.authTokens=new pV(this.apiClient),this.tunings=new E6(this.apiClient),this.fileSearchStores=new wV(this.apiClient)}}const F6={type:nt.OBJECT,properties:{patientName:{type:nt.STRING,description:"Name of the patient found in the report. If not found, use 'Unknown'."},reportDate:{type:nt.STRING,description:"Date of the medical report in YYYY-MM-DD format. If uncertain, leave empty."},labName:{type:nt.STRING,description:"Name of the laboratory or hospital."},results:{type:nt.ARRAY,items:{type:nt.OBJECT,properties:{testName:{type:nt.STRING,description:"The exact name of the test as written in the report."},standardizedName:{type:nt.STRING,description:"The common, standardized medical name for this test (e.g., if 'Hb' or 'Hgb', use 'Hemoglobin'; if 'FBS', use 'Glucose (Fasting)'). This allows grouping results across different labs."},description:{type:nt.STRING,description:"A very short explanation (max 15 words) of what this test measures and its clinical significance for a patient."},value:{type:nt.NUMBER,description:"The numeric value of the result. Remove any non-numeric characters."},unit:{type:nt.STRING,description:"Unit of measurement (e.g., 'g/dL', 'mg/dL')."},status:{type:nt.STRING,description:"Interpretation: 'NORMAL', 'HIGH', 'LOW', or 'UNKNOWN'."},category:{type:nt.STRING,description:"Medical category of the test. E.g., 'Hematology', 'Lipid Profile', 'Liver Function', 'Kidney Function', 'Thyroid', 'Electrolytes', 'Metabolic', 'Urinalysis', 'Vitamins', or 'Other'."},referenceRange:{type:nt.OBJECT,properties:{min:{type:nt.NUMBER,description:"Minimum normal value."},max:{type:nt.NUMBER,description:"Maximum normal value."},text:{type:nt.STRING,description:"Original reference range text (e.g., '12-16')."}}}},required:["testName","standardizedName","value","status","category"]}}},required:["patientName","results"]},z6={type:nt.OBJECT,properties:{mapping:{type:nt.ARRAY,items:{type:nt.OBJECT,properties:{canonicalName:{type:nt.STRING,description:"The single, unified standard English name for the biomarker."},rawNames:{type:nt.ARRAY,items:{type:nt.STRING},description:"List of ALL raw variations found in the input that belong to this canonical name."}}}}}},H6=async(t,e,n,i="gemini-3-pro-preview")=>{try{if(!n)throw new Error("API Key is missing. Please add your Gemini API Key in Settings.");const a=await new mA({apiKey:n}).models.generateContent({model:i,contents:{parts:[{text:`
      You are an expert medical data analyst. Analyze the attached medical laboratory report image or PDF.
      Extract the patient details, date, and all tabular test results.
      
      For each test row:
      1. Identify the Test Name (e.g., Glucose, HbA1c, RBC).
      2. **CRITICAL**: Provide a 'standardizedName'. Map abbreviations to standard English names (e.g., 'Hb' -> 'Hemoglobin').
      3. **CRITICAL**: Provide a 'description'. Briefly explain what this test is for a layperson.
      4. Extract the numeric Value, Unit, and Reference Range (Min/Max).
      5. Determine the status (NORMAL, HIGH, LOW).
      6. Categorize the test into standard medical groups.

      Return the data strictly in JSON format matching the provided schema.
      If the date is ambiguous, try to infer the most likely report date.
    `},{inlineData:{mimeType:e,data:t}}]},config:{responseMimeType:"application/json",responseSchema:F6}});if(!a.text)throw new Error("No response text received from Gemini.");const l=JSON.parse(a.text);return l.results&&l.results.sort((c,d)=>c.standardizedName.localeCompare(d.standardizedName)),l}catch(r){throw console.error("Error analyzing medical report:",r),r}},G6=async(t,e,n,i="gemini-3-pro-preview")=>{if(t.length===0&&Object.keys(e).length===0)return{};try{if(!n)throw new Error("API Key Missing");const r=new mA({apiKey:n}),s=Object.entries(e).map(([f,p])=>({canonical:f,existingVariations:p})),a=`
      You are a Medical Terminology Standardization Engine.
      
      I have a database of medical test names. Some are already grounded (grouped), and some are new raw names extracted from reports.
      Your job is to MERGE the new raw names into the existing groups or create new groups.
      
      GOAL: Eliminate redundancy. "Vitamin D", "Vitamin D Total", "Vit D3", "25-OH Vitamin D" MUST all be grouped under one Canonical Name (e.g., "Vitamin D").
      
      INPUT CONTEXT:
      1. Existing Groups: ${JSON.stringify(s)}
      2. New Raw Names to Ground: ${JSON.stringify(t)}
      
      INSTRUCTIONS:
      1. Look at the "New Raw Names".
      2. If a new name belongs to an "Existing Group", add it to that group.
      3. If a new name is a synonym for another new name, group them together under a new Canonical Name.
      4. If a new name is unique, create a new group.
      5. **IMPORTANT**: Return the COMPLETE list of mappings (Existing + New merged).
      
      Output JSON format:
      {
        "mapping": [
          { "canonicalName": "Hemoglobin", "rawNames": ["Hb", "Hgb", "Hemoglobin", "Haemoglobin"] },
          ...
        ]
      }
    `,l=await r.models.generateContent({model:i,contents:{parts:[{text:a}]},config:{responseMimeType:"application/json",responseSchema:z6}});if(!l.text)return e;const c=JSON.parse(l.text),d={};return c.mapping.forEach(f=>{const p=Array.from(new Set(f.rawNames));d[f.canonicalName]=p}),d}catch(r){return console.error("Optimization failed",r),e}},q6=async t=>{if(!t)return[];try{const n=await new mA({apiKey:t}).models.list(),i=[];for await(const r of n)i.push(r);return i.length===0?[]:i.filter(r=>r.name?.includes("gemini")&&!r.name.includes("embedding")).map(r=>{const s=r.name?.replace(/^models\//,"")||"";return{name:s,displayName:r.displayName||s}}).sort((r,s)=>s.name.localeCompare(r.name))}catch(e){return console.error("Error listing models:",e),[]}},V6=`
You are an expert medical data analyst. Analyze the provided medical laboratory report image.
Extract the patient details, date, and all tabular test results.

For each test row:
1. Identify the Test Name (e.g., Glucose, HbA1c, RBC).
2. **CRITICAL**: Provide a 'standardizedName'. Map abbreviations to standard English names (e.g., 'Hb' -> 'Hemoglobin').
3. **CRITICAL**: Provide a 'description'. Briefly explain what this test is for a layperson (max 15 words).
4. Extract the numeric Value, Unit, and Reference Range (Min/Max).
5. Determine the status (NORMAL, HIGH, LOW).
6. Categorize the test into standard medical groups (e.g., Hematology, Lipid Profile).

**IMPORTANT**: You MUST respond with ONLY valid JSON, no markdown, no explanation, just the raw JSON object.

JSON Schema:
{
  "patientName": "string",
  "reportDate": "YYYY-MM-DD",
  "labName": "string",
  "results": [
    {
      "testName": "string",
      "standardizedName": "string",
      "description": "string",
      "value": number,
      "unit": "string",
      "status": "NORMAL" | "HIGH" | "LOW" | "UNKNOWN",
      "category": "string",
      "referenceRange": { "min": number, "max": number, "text": "string" }
    }
  ]
}
`,ZC=async(t,e,n,i,r)=>{if(e==="application/pdf")throw new Error("Received PDF directly in OpenAI Service. Upstream conversion failed.");const s=t.map((p,g)=>({type:"image_url",image_url:{url:`data:${e};base64,${p}`}})),a={model:r,messages:[{role:"system",content:V6},{role:"user",content:[{type:"text",text:t.length>1?`Analyze these ${t.length} pages of a medical report and return ONLY the JSON result. Combine all test results from all pages.`:"Analyze this medical report and return ONLY the JSON result."},...s]}]},l={"Content-Type":"application/json"};n&&(l.Authorization=`Bearer ${n}`);const c=await fetch(`${i}/chat/completions`,{method:"POST",headers:l,body:JSON.stringify(a)});if(!c.ok){let p=`OpenAI Request Failed: ${c.status}`;try{const g=await c.json();console.error("OpenAI API Error Details:",JSON.stringify(g,null,2)),p=g.error?.message||g.message||p}catch{try{const y=await c.text();console.error("OpenAI API Error (text):",y),y&&(p=y)}catch{}}throw new Error(p)}const f=(await c.json()).choices[0].message.content;if(!f)throw new Error("No content received from OpenAI.");try{let p=f.trim();const g=p.match(/```(?:json)?\s*([\s\S]*?)```/);g&&(p=g[1].trim());const y=p.indexOf("{"),S=p.lastIndexOf("}");y!==-1&&S!==-1&&S>y&&(p=p.slice(y,S+1));const w=JSON.parse(p);return w.results&&w.results.sort((E,x)=>E.standardizedName.localeCompare(x.standardizedName)),w}catch{throw console.error("Failed to parse OpenAI JSON:",f),new Error("Failed to parse valid JSON from AI response. The model may not support vision or structured output.")}},$6=async(t,e,n,i,r)=>{const s=Object.entries(e).map(([g,y])=>({canonical:g,existingVariations:y})),a=`
      You are a Medical Terminology Standardization Engine.
      
      I have a database of medical test names. Some are already grounded (grouped), and some are new raw names extracted from reports.
      Your job is to MERGE the new raw names into the existing groups or create new groups.
      
      GOAL: Eliminate redundancy. "Vitamin D", "Vitamin D Total", "Vit D3", "25-OH Vitamin D" MUST all be grouped under one Canonical Name (e.g., "Vitamin D").
      
      INPUT CONTEXT:
      1. Existing Groups: ${JSON.stringify(s)}
      2. New Raw Names to Ground: ${JSON.stringify(t)}
      
      INSTRUCTIONS:
      1. Look at the "New Raw Names".
      2. If a new name belongs to an "Existing Group", add it to that group.
      3. If a new name is a synonym for another new name, group them together under a new Canonical Name.
      4. If a new name is unique, create a new group.
      5. **IMPORTANT**: Return the COMPLETE list of mappings (Existing + New merged).
      
      **IMPORTANT**: Respond with ONLY valid JSON, no markdown, no explanation.
      
      Output JSON format:
      {
        "mapping": [
          { "canonicalName": "Hemoglobin", "rawNames": ["Hb", "Hgb", "Hemoglobin", "Haemoglobin"] },
          ...
        ]
      }
    `,l={model:r,messages:[{role:"system",content:"You are a helpful assistant that outputs ONLY valid JSON, no markdown or explanation."},{role:"user",content:a}]},c={"Content-Type":"application/json"};n&&(c.Authorization=`Bearer ${n}`);const d=await fetch(`${i}/chat/completions`,{method:"POST",headers:c,body:JSON.stringify(l)});if(!d.ok)return e;const p=(await d.json()).choices[0].message.content;try{let g=p.trim();const y=g.match(/```(?:json)?\s*([\s\S]*?)```/);y&&(g=y[1].trim());const S=g.indexOf("{"),w=g.lastIndexOf("}");S!==-1&&w!==-1&&w>S&&(g=g.slice(S,w+1));const E=JSON.parse(g),x={};return E.mapping.forEach(C=>{const T=Array.from(new Set(C.rawNames));x[C.canonicalName]=T}),x}catch(g){return console.error("Failed to parse mapping JSON:",g),e}},Voe=async(t,e)=>{try{const n={"Content-Type":"application/json"};t&&(n.Authorization=`Bearer ${t}`);const i=await fetch(`${e}/models`,{method:"GET",headers:n});if(!i.ok){const s=await i.text();throw new Error(`Failed to fetch models: ${i.status} ${s}`)}const r=await i.json();return r.data&&Array.isArray(r.data)?r.data.map(s=>s.id).sort():[]}catch(n){throw console.error("Error fetching OpenAI models:",n),n}},qn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),V0=[.001,0,0,.001,0,0],Gv=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ia={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},fc="pdfjs_internal_editor_",Ue={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},j6={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},$0={TRIANGLES:1,LATTICE:2},Qt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},jt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},cl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},wp={ERRORS:0,WARNINGS:1,INFOS:5},hc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},$u={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Y6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _p=wp.WARNINGS;function K6(t){Number.isInteger(t)&&(_p=t)}function W6(){return _p}function Ep(t){_p>=wp.INFOS&&console.info(`Info: ${t}`)}function ke(t){_p>=wp.WARNINGS&&console.warn(`Warning: ${t}`)}function mt(t){throw new Error(t)}function We(t,e){t||mt(e)}function X6(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sD(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"&&(n.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),n.tryConvertEncoding))try{t=t$(t)}catch{}const i=e?URL.parse(t,e):URL.parse(t);return X6(i)?i:null}function aD(t,e,n=!1){const i=URL.parse(t);return i?(i.hash=e,i.href):n&&sD(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const ho=(function(){function e(n,i){this.message=n,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class e1 extends ho{constructor(e,n){super(e,"PasswordException"),this.code=n}}class qv extends ho{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class j0 extends ho{constructor(e){super(e,"InvalidPDFException")}}class yh extends ho{constructor(e,n,i){super(e,"ResponseException"),this.status=n,this.missing=i}}class J6 extends ho{constructor(e){super(e,"FormatError")}}class la extends ho{constructor(e){super(e,"AbortException")}}function oD(t){(typeof t!="object"||t?.length===void 0)&&mt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function kc(t){typeof t!="string"&&mt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=t.charCodeAt(i)&255;return n}function Q6(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function Z6(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function e$(){try{return new Function(""),!0}catch{return!1}}class en{static get isLittleEndian(){return Le(this,"isLittleEndian",Z6())}static get isEvalSupported(){return Le(this,"isEvalSupported",e$())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Le(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Le(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return Le(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return Le(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Vv=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class he{static makeHexColor(e,n,i){return`#${Vv[e]}${Vv[n]}${Vv[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let i;e[0]?(e[0]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[3],n[3]*=e[3]):(i=n[0],n[0]=n[1],n[1]=i,i=n[2],n[2]=n[3],n[3]=i,e[1]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,i=0){const r=e[i],s=e[i+1];e[i]=r*n[0]+s*n[2]+n[4],e[i+1]=r*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,i=0){const r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],d=n[5];for(let f=0;f<6;f+=2){const p=e[i+f],g=e[i+f+1];e[i+f]=p*r+g*a+c,e[i+f+1]=p*s+g*l+d}}static applyInverseTransform(e,n){const i=e[0],r=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(i*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-i*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,i){const r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],d=n[5],f=e[0],p=e[1],g=e[2],y=e[3];let S=r*f+c,w=S,E=r*g+c,x=E,C=l*p+d,T=C,N=l*y+d,R=N;if(s!==0||a!==0){const I=s*f,O=s*g,F=a*p,z=a*y;S+=F,x+=F,E+=z,w+=z,C+=I,R+=I,N+=O,T+=O}i[0]=Math.min(i[0],S,E,w,x),i[1]=Math.min(i[1],C,N,T,R),i[2]=Math.max(i[2],S,E,w,x),i[3]=Math.max(i[3],C,N,T,R)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const i=e[0],r=e[1],s=e[2],a=e[3],l=i**2+r**2,c=i*s+r*a,d=s**2+a**2,f=(l+d)/2,p=Math.sqrt(f**2-(l*d-c**2));n[0]=Math.sqrt(f+p||1),n[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const i=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[i,s,r,a]}static pointBoundingBox(e,n,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],n),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],n)}static rectBoundingBox(e,n,i,r,s){s[0]=Math.min(s[0],e,i),s[1]=Math.min(s[1],n,r),s[2]=Math.max(s[2],e,i),s[3]=Math.max(s[3],n,r)}static#e(e,n,i,r,s,a,l,c,d,f){if(d<=0||d>=1)return;const p=1-d,g=d*d,y=g*d,S=p*(p*(p*e+3*d*n)+3*g*i)+y*r,w=p*(p*(p*s+3*d*a)+3*g*l)+y*c;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],w)}static#t(e,n,i,r,s,a,l,c,d,f,p,g){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,n,i,r,s,a,l,c,-p/f,g);return}const y=f**2-4*p*d;if(y<0)return;const S=Math.sqrt(y),w=2*d;this.#e(e,n,i,r,s,a,l,c,(-f+S)/w,g),this.#e(e,n,i,r,s,a,l,c,(-f-S)/w,g)}static bezierBoundingBox(e,n,i,r,s,a,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],n,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],n,c),this.#t(e,i,s,l,n,r,a,c,3*(-e+3*(i-s)+l),6*(e-2*i+s),3*(i-e),d),this.#t(e,i,s,l,n,r,a,c,3*(-n+3*(r-a)+c),6*(n-2*r+a),3*(r-n),d)}}function t$(t){return decodeURIComponent(escape(t))}let $v=null,t1=null;function n$(t){return $v||($v=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,t1=new Map([["","t"]])),t.replaceAll($v,(e,n,i)=>n?n.normalize("NFKC"):t1.get(i))}function lD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),oD(t)}const gl="pdfjs_internal_id_";function i$(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i)||!e(r))return!1;const a=s.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Vn(t,e,n){return Math.min(Math.max(t,e),n)}function uD(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(oD(t))}function r$(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):kc(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class pc{static textContent(e){const n=[],i={items:n,styles:Object.create(null)};function r(s){if(!s)return;let a=null;const l=s.name;if(l==="#text")a=s.value;else if(pc.shouldBuildText(l))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const c of s.children)r(c)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class cD{static setupStorage(e,n,i,r,s){const a=r.getValue(n,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(n,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{r.setValue(n,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(n,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of i.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(n,{value:d})});break}}static setAttributes({html:e,element:n,storage:i=null,intent:r,linkService:s}){const{attributes:a}=n,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(e){const n=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const l=s!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);a.append(p),l&&pc.shouldBuildText(r.name)&&d.push(p)}return{textDivs:d}}const f=[[r,-1,a]];for(;f.length>0;){const[p,g,y]=f.at(-1);if(g+1===p.children.length){f.pop();continue}const S=p.children[++f.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const x=document.createTextNode(S.value);d.push(x),y.append(x);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(y.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:n,intent:s,linkService:i}),S.children?.length>0)f.push([S,-1,E]);else if(S.value){const x=document.createTextNode(S.value);l&&pc.shouldBuildText(w)&&d.push(x),E.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const as="http://www.w3.org/2000/svg";class Rl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Lc(t,e="text"){if(sc(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Uc{constructor({viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let f,p,g,y;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,p=0,g=0,y=1;break;case 90:f=0,p=1,g=1,y=0;break;case 270:f=0,p=-1,g=-1,y=0;break;case 0:f=1,p=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(g=-g,y=-y);let S,w,E,x;f===0?(S=Math.abs(d-e[1])*i+s,w=Math.abs(c-e[0])*i+a,E=(e[3]-e[1])*i,x=(e[2]-e[0])*i):(S=Math.abs(c-e[0])*i+s,w=Math.abs(d-e[1])*i+a,E=(e[2]-e[0])*i,x=(e[3]-e[1])*i),this.transform=[f*i,p*i,g*i,y*i,S-f*i*c-g*i*d,w-p*i*c-y*i*d],this.width=E,this.height=x}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Uc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,n){const i=[e,n];return he.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const n=[e[0],e[1]];he.applyTransform(n,this.transform);const i=[e[2],e[3]];return he.applyTransform(i,this.transform),[n[0],n[1],i[0],i[1]]}convertToPdfPoint(e,n){const i=[e,n];return he.applyInverseTransform(i,this.transform),i}}class gA extends ho{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function xp(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function vA(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function s$(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function a$(t,e="document.pdf"){if(typeof t!="string")return e;if(xp(t))return ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!i)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},s=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(s.test(a))return r(a);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const d of l)if(s.test(d))return r(d);const c=Array.from(i.searchParams.keys()).reverse();for(const d of c)if(s.test(d))return r(d)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return r(c[0])}return e}class n1{started=Object.create(null);times=[];time(e){e in this.started&&ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:i}of this.times)n=Math.max(i.length,n);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(n)} ${s-r}ms
`);return e.join("")}}function sc(t,e){const n=e?URL.parse(t,e):URL.parse(t);return n?.protocol==="http:"||n?.protocol==="https:"}function ji(t){t.preventDefault()}function Ot(t){t.preventDefault(),t.stopPropagation()}function o$(t){console.log("Deprecated API usage: "+t)}class Y0{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#e.exec(e);if(!n)return null;const i=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(n[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(n[6],10);c=c>=0&&c<=59?c:0;const d=n[7]||"Z";let f=parseInt(n[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(n[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(a+=f,l+=p):d==="+"&&(a-=f,l-=p),new Date(Date.UTC(i,r,s,a,l,c))}}function l$(t,{scale:e=1,rotation:n=0}){const{width:i,height:r}=t.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Uc({viewBox:s,userUnit:1,scale:e,rotation:n})}function Bc(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ke(`Not a valid color format: "${t}"`),[0,0,0])}function u$(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,Bc(i))}e.remove()}function Pt(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function _r(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function no(t,e,n=!1,i=!0){if(e instanceof Uc){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=t,l=en.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${s}px`,f=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,p=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||e.rotation%180===0?(a.width=f,a.height=p):(a.width=p,a.height=f)}i&&t.setAttribute("data-main-rotation",e.rotation)}class Ir{constructor(){const{pixelRatio:e}=Ir;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,i,r,s=-1){let a=1/0,l=1/0,c=1/0;i=Ir.capPixels(i,s),i>0&&(a=Math.sqrt(i/(e*n))),r!==-1&&(l=r/e,c=r/n);const d=Math.min(a,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,i):i}return e}}const K0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class c${static get isDarkMode(){return Le(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class d${static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",Bc(i))}}function f$(t,e,n,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return t=Math.round(t*i+r),e=Math.round(e*i+r),n=Math.round(n*i+r),[t,e,n]}function i1(t,e){const n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),l=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const c=s-a;switch(e[1]=l<.5?c/(s+a):c/(2-s-a),s){case n:e[0]=((i-r)/c+(i<r?6:0))*60;break;case i:e[0]=((r-n)/c+2)*60;break;case r:e[0]=((n-i)/c+4)*60;break}}e[2]=l}function W0(t,e){const n=t[0],i=t[1],r=t[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),l=r-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+l,e[1]=a+l,e[2]=l;break;case 1:e[0]=a+l,e[1]=s+l,e[2]=l;break;case 2:e[0]=l,e[1]=s+l,e[2]=a+l;break;case 3:e[0]=l,e[1]=a+l,e[2]=s+l;break;case 4:e[0]=a+l,e[1]=l,e[2]=s+l;break;case 5:case 6:e[0]=s+l,e[1]=l,e[2]=a+l;break}}function r1(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function s1(t,e,n){W0(t,n),n.map(r1);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];W0(e,n),n.map(r1);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const a1=new Map;function h$(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=a1.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);i1(t,a);const l=r.subarray(6,9);i1(e,l);const c=l[2]<.5,d=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),s1(a,l,s)<d){let f,p;c?(f=a[2],p=1):(f=0,p=a[2]);const g=.005;for(;p-f>g;){const y=a[2]=(f+p)/2;c===s1(a,l,s)<d?f=y:p=y}a[2]=c?p:f}return W0(a,s),i=he.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),a1.set(n,i),i}function dD({html:t,dir:e,className:n},i){const r=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=t.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const d=a[l];s.append(document.createTextNode(d)),l<c-1&&s.append(document.createElement("br"))}r.append(s)}else cD.render({xfaHtml:t,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",n),i.append(r)}function fD(t){const e=new Path2D;if(!t)return e;for(let n=0,i=t.length;n<i;)switch(t[n++]){case $u.moveTo:e.moveTo(t[n++],t[n++]);break;case $u.lineTo:e.lineTo(t[n++],t[n++]);break;case $u.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case $u.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case $u.closePath:e.closePath();break;default:ke(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}class cc{#e=null;#t=null;#i;#n=null;#a=null;#s=null;#r=null;#o=null;static#u=null;constructor(e){this.#i=e,cc.#u||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",ji,{signal:n}),e.addEventListener("pointerdown",cc.#l,{signal:n}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const r=this.#i.toolbarPosition;if(r){const{style:s}=e,a=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#f(e){this.#i._focusEventsAllowed=!1,Ot(e)}#d(e){this.#i._focusEventsAllowed=!0,Ot(e)}#h(e){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",this.#f.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",ji,{signal:n}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",cc.#u[e]),this.#h(i)&&i.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#n.append(i)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const n=await e.render();this.#h(n),this.#n.append(n,this.#g),this.#a=e}addComment(e,n=null){if(this.#s)return;const i=e.renderForToolbar();if(!i)return;this.#h(i);const r=this.#r=this.#g;n?(this.#n.insertBefore(i,n),this.#n.insertBefore(r,n)):this.#n.append(i,r),this.#s=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const n=e.renderButton();this.#h(n),this.#n.append(n,this.#g)}async addEditSignatureButton(e){const n=this.#o=await e.renderEditButton(this.#i);this.#h(n),this.#n.append(n,this.#g)}removeButton(e){e==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#r?.remove(),this.#r=null)}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,i){if(!n&&e==="comment")return;const r=this.#n.querySelector(i);r&&e==="comment"&&this.addComment(n,r)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class p${#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",ji,{signal:n});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,n){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const l=s.x+(n?s.width:0);if(a>i){r=l,i=a;continue}n?l>r&&(r=l):l<r&&(r=l)}return[n?1-r:r,i]}show(e,n,i){const[r,s]=this.#a(n,i),{style:a}=this.#t||=this.#n();e.append(this.#t),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,n,i,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const l=this.#i._signal;l instanceof AbortSignal&&!l.aborted&&(s.addEventListener("contextmenu",ji,{signal:l}),s.addEventListener("click",r,{signal:l})),this.#e.append(s)}}function hD(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}class it{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(it.#t||=new Set).add(e)}static setPointer(e,n){it.#e||=n,it.#n??=e}static setTimeStamp(e){it.#i=e}static isSamePointerId(e){return it.#e===e}static isSamePointerIdOrRemove(e){return it.#e===e?!0:(it.#t?.delete(e),!1)}static isSamePointerType(e){return it.#n===e}static isInitializedAndDifferentPointerType(e){return it.#n!==null&&!it.isSamePointerType(e)}static isSameTimeStamp(e){return it.#i===e}static isUsingMultiplePointers(){return it.#t?.size>=1}static clearPointerType(){it.#n=null}static clearPointerIds(){it.#e=NaN,it.#t=null}static clearTimeStamp(){it.#i=NaN}}class m${#e=0;get id(){return`${fc}${this.#e++}`}}class yA{#e=lD();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",s)}async#n(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(i.url=n,r=await Lc(n,"blob")):n instanceof File?r=i.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const s=yA._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,f)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,d()},a.onload=async()=>{const p=i.svgUrl=a.result;l.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},l.onerror=a.onerror=f});a.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){ke(r),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:n,name:i,size:r,type:s}=e;return this.#n(`${n}_${i}_${r}_${s}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,n){const i=await n;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:i}=n;return delete n.blobPromise,this.getFromBlob(n.id,i)}return this.getFromUrl(n.url)}getFromCanvas(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const n=this.#i.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:i}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=r.convertToBlob()}i.close?.(),n.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class g${#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),this.#t)return;const c={cmd:e,undo:n,post:i,type:s};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(a&&this.#e[this.#n].type===s){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const d=this.#n+1;d===this.#i?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#e[n].type!==e){this.#e.splice(n+1,this.#n-n),this.#n=n;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Fc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=en.platform;for(const[i,r,s={}]of e)for(const a of i){const l=a.startsWith("mac+");n&&l?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!l&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const i=this.callbacks.get(this.#e(n));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:l=null}}=i;l&&!l(e,n)||(r.bind(e,...a,n)(),s||Ot(n))}}class bA{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return u$(e),Le(this,"_colors",e)}convert(e){const n=Bc(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,r]of this._colors)if(r.every((s,a)=>s===n[a]))return bA._colorsMapping.get(i);return n}getHexCode(e){const n=this._colors.get(e);return n?he.makeHexColor(...n):e}}class ua{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#s=null;#r=null;#o=null;#u=new g$;#l=null;#f=null;#d=null;#h=0;#g=new Set;#m=null;#c=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#x=null;#_=null;#S=null;#C=null;#A=!1;#E=null;#R=new m$;#M=!1;#P=!1;#U=!1;#I=null;#O=null;#B=null;#k=null;#V=null;#T=Ue.NONE;#w=new Set;#D=null;#F=null;#H=null;#Y=null;#j=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#G=[0,0];#L=null;#$=null;#Q=null;#Z=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ua.prototype,n=a=>a.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new Fc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#$.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}constructor(e,n,i,r,s,a,l,c,d,f,p,g,y,S,w,E){const x=this._signal=this.#e.signal;this.#$=e,this.#Q=n,this.#Z=i,this.#s=r,this.#l=s,this.#F=a,this.#j=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:x}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),l._on("setpreference",this.onSetPreference.bind(this),{signal:x}),l._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:x}),this.#ae(),this.#fe(),this.#te(),this.#r=c.annotationStorage,this.#x=c.filterFactory,this.#H=d,this.#C=f||null,this.#v=p,this.#b=g,this.#y=y,this.#V=S||null,this.viewParameters={realScale:Rl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,s?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#k?.clear(),this.#t=null,this.#w.clear(),this.#u.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#j=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Le(this,"hcmFilter",this.#H?this.#x.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Le(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return Le(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const n=new Map,i=!!this.#H;for(const[r,s]of e){const a=r.endsWith("_HCM");if(i&&a){n.set(r.replace("_HCM",""),s);continue}!i&&!a&&n.set(r,s)}return Le(this,"highlightColors",n)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,n=!1){this.#s?.editAltText(this,e,n)}hasCommentManager(){return!!this.#l}editComment(e,n,i,r){this.#l?.showDialog(this,e,n,i,r)}selectComment(e,n){this.#a.get(e)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,n,i=void 0){this.#l?.toggleCommentPopup(e,n,i)}makeCommentColor(e,n){return e&&this.#l?.makeCommentColor(e,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:n,promise:i}=Promise.withResolvers(),r=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",r),n())};this._eventBus.on("editorsrendered",r),await i}getSignature(e){this.#F?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#F}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=n)}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#$.focus()}findParent(e,n){for(const i of this.#a.values()){const{x:r,y:s,width:a,height:l}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&n>=s&&n<=s+l)return i}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Rl.PDF_TO_CSS_UNITS;for(const n of this.#p)n.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const i of this.#a.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",n=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:l}=i,c=i.toString(),f=this.#J(i).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;i.empty();const g=this.#ee(f),y=this.#T===Ue.NONE,S=()=>{const w=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:l,text:c});y&&this.showAllEditors("highlight",!0,!0),n&&w?.editComment()};if(y){this.switchToMode(Ue.HIGHLIGHT,S);return}S()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#J(e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#E||=new p$(this),this.#E.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const n=`${fc}${e}`,i=this.#r.getRawValue(n);return i&&this.#r.remove(n),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,n=null){const i=this.#Z;i&&(i.setAttribute("data-l10n-id",e),n?i.setAttribute("data-l10n-args",JSON.stringify(n)):i.removeAttribute("data-l10n-args"))}#se(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#E?.hide(),this.#D=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===this.#D)return;const r=this.#J(e).closest(".textLayer");if(!r){this.#D&&(this.#E?.hide(),this.#D=null,this.#N({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#D=n,this.#N({hasSelectedText:!0}),!(this.#T!==Ue.HIGHLIGHT&&this.#T!==Ue.NONE)&&(this.#T===Ue.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#T===Ue.HIGHLIGHT?this.#ee(r):null;if(s?.toggleDrawing(),this.#P){const a=new AbortController,l=this.combinedSignal(a),c=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),s?.toggleDrawing(!0),d.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else s?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#T===Ue.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#re()}#ae(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#oe(){if(this.#S)return;this.#S=new AbortController;const e=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of this.#w)if(n.div.contains(e)){this.#O=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,n]=this.#O;this.#O=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#te(){if(this.#I)return;this.#I=new AbortController;const e=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#I?.abort(),this.#I=null}#ce(){if(this.#f)return;this.#f=new AbortController;const e=this.combinedSignal(this.#f);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#f?.abort(),this.#f=null}#fe(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ue(),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const i of this.#c)if(i.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const i of this.#c)if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of this.#w){const r=i.serialize(!0);r&&n.push(r)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of this.#c)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){ke(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const d=await r.deserialize(c);if(!d)return;s.push(d)}const a=()=>{for(const c of s)this.#ne(c);this.#ie(s)},l=()=>{for(const c of s)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){ke(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Ue.NONE&&!this.isEditorHandlingKeyboard&&ua._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([i,r])=>this.#K[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,e)}),this.#T===Ue.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#q([[Ke.HIGHLIGHT_FREE,!0]]))}#q(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ce(),this.#N({isEditing:this.#T!==Ue.NONE,isEmpty:this.#X(),hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:this.#u.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#c){this.#c=e;for(const n of this.#c)this.#q(n.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#h)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#a.set(e.pageIndex,e),this.#M?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,n=null,i=!1,r=!1,s=!1,a=!1){if(this.#T!==e&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===Ue.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Ue.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Ue.SIGNATURE&&await this.#F?.loadSignatures(),i&&it.clearPointerType(),this.setEditingState(!0),await this.#he(),this.unselectAll();for(const l of this.#a.values())l.updateMode(e);if(e===Ue.POPUP){this.#i||=await this.#j.getAnnotationsByType(new Set(this.#c.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:g}=d;f&&l.add(f),p&&!g&&c.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:p,contentsObj:g}=d;p&&g?.str&&!l.has(f)&&!this.#g.has(f)&&c.push(d)}this.#l?.showSidebar(c)}if(!n){r&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const l of this.#n.values())l.uid===n?(this.setSelected(l),a?l.editComment():s?l.enterInEditMode():l.focus()):l.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(this.#c){switch(e){case Ke.CREATE:this.currentLayer.addNewEditor(n);return;case Ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(e,n);else for(const i of this.#c)i.updateDefaultParams(e,n)}}showAllEditors(e,n,i=!1){for(const s of this.#n.values())s.editorType===e&&s.show(n);(this.#Y?.get(Ke.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#q([[Ke.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#U!==e){this.#U=e;for(const n of this.#a.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}async#he(){if(!this.#M){this.#M=!0;const e=[];for(const n of this.#a.values())e.push(n.enable());await Promise.all(e);for(const n of this.#n.values())n.enable()}}#pe(){if(this.unselectAll(),this.#M){this.#M=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const n of this.#n.values())n.pageIndex===e&&(yield n)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const n=this.#a.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#q(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#q(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#q(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const n of this.#w)n!==e&&n.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#u.undo(),this.#N({hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#X()}),this._editorUndoBar?.hide()}redo(){this.#u.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#u.hasSomethingToRedo(),isEmpty:this.#X()})}addCommands(e){this.#u.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#X()})}cleanUndoStack(e){this.#u.cleanType(e)}#X(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...this.#w],i=()=>{this._editorUndoBar?.show(r,n.length===1?n[0].editorType:n.length);for(const s of n)s.remove()},r=()=>{for(const s of n)this.#ne(s)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const n of this.#w)n.unselect();this.#w.clear();for(const n of e)n.isEmpty()||(this.#w.add(n),n.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==Ue.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#G[0]+=e,this.#G[1]+=n;const[r,s]=this.#G,a=[...this.#w],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#G[0]=this.#G[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(r,s),c.translationDone())},undo:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(-r,-s),c.translationDone())},mustExec:!1})},l);for(const c of a)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let n=!1;for(const[{x:r,y:s,pageIndex:a},l]of e)l.newX=r,l.newY=s,l.newPageIndex=a,n||=r!==l.savedX||s!==l.savedY||a!==l.savedPageIndex;if(!n)return!1;const i=(r,s,a,l)=>{if(this.#n.has(r.id)){const c=this.#a.get(l);c?r._setParentAndPosition(c,s,a):(r.pageIndex=l,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:l}]of e)i(r,s,a,l)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:l}]of e)i(r,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#m)for(const i of this.#m.keys())i.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Ue.NONE}get imageManager(){return Le(this,"imageManager",new yA)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let d=0,f=n.rangeCount;d<f;d++)if(!e.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,f,p,g)=>({x:(f-r)/a,y:1-(d+p-i)/s,width:g/a,height:p/s});break;case"180":l=(d,f,p,g)=>({x:1-(d+p-i)/s,y:1-(f+g-r)/a,width:p/s,height:g/a});break;case"270":l=(d,f,p,g)=>({x:1-(f+g-r)/a,y:(d-i)/s,width:g/a,height:p/s});break;default:l=(d,f,p,g)=>({x:(d-i)/s,y:(f-r)/a,width:p/s,height:g/a});break}const c=[];for(let d=0,f=n.rangeCount;d<f;d++){const p=n.getRangeAt(d);if(!p.collapsed)for(const{x:g,y,width:S,height:w}of p.getClientRects())S===0||w===0||c.push(l(g,y,S,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#o||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const n=this.#o?.get(e.data.id);if(!n)return;const i=this.#r.getRawValue(n);i&&(this.#T===Ue.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,n,i){const r=this.#k?.get(e);r&&(r.setCanvas(n,i),this.#k.delete(e))}addMissingCanvas(e,n){(this.#k||=new Map).set(e,n)}}class Cr{#e=null;#t=!1;#i=null;#n=null;#a=null;#s=null;#r=!1;#o=null;#u=null;#l=null;#f=null;#d=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,Cr.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Cr._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const n=this.#n=document.createElement("span");e.append(n),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Cr.#h.missing),n.setAttribute("data-l10n-id",Cr.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#u._uiManager._signal;e.addEventListener("contextmenu",ji,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#r=!0,r(s))},{signal:i}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#f=await Cr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#o.classList.toggle("hidden",!e)}serialize(e){let n=this.#e;return!e&&this.#l===n&&(n=this.#f),{altText:n,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#f}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(this.#l=i,this.#f=r),!(this.#e===e&&this.#t===n)&&(s||(this.#e=e,this.#t=n),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Cr.#h[this.#g]),this.#n?.setAttribute("data-l10n-id",Cr.#h[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;const r=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:s})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||e.append(n),this.#u.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Pf{#e=null;#t=null;#i=!1;#n=null;#a=null;#s=null;#r=null;#o=null;#u=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#f(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(i.backgroundColor=r)}return this.#f(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:n,height:i}=this.#e.getBoundingClientRect(),{x:r,y:s,width:a,height:l}=this.#n.parent.boundingClientRect;return[(e-r)/a,(n+i-s)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:n}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=n)}#f(e,n){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",ji,{signal:i}),n&&(e.addEventListener("focusin",s=>{this.#n._focusEventsAllowed=!1,Ot(s)},{capture:!0,signal:i}),e.addEventListener("focusout",s=>{this.#n._focusEventsAllowed=!0,Ot(s)},{capture:!0,signal:i})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#i=!0,r(s))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const n=this.commentPopupPositionInLayer;let i,r;if(n)[i,r]=n;else{[i,r]=this.#n.commentButtonPosition;const{width:f,height:p,x:g,y}=this.#n;i=g+i*f,r=y+r*p}const s=this.#n.parent.boundingClientRect,{x:a,y:l,width:c,height:d}=s;this.#n._uiManager.editComment(this.#n,a+i*c,l+r*d,{...e,parentDimensions:s})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#u||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#s=null),e===null){this.#r="",this.#u=!0;return}this.#r=e,this.#o=new Date,this.#u=!1}setInitialText(e,n=null){this.#a=e,this.data=e,this.#o=null,this.#s=n}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#u=!1}}class Tp{#e;#t=!1;#i=null;#n;#a;#s;#r;#o=null;#u;#l=null;#f;#d=null;constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:l}){this.#e=e,this.#i=i,this.#n=n,this.#a=r,this.#s=s,this.#r=a,this.#f=new AbortController,this.#u=AbortSignal.any([l,this.#f.signal]),e.addEventListener("touchstart",this.#h.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ir.pixelRatio}#h(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,s=AbortSignal.any([this.#u,r.signal]),a=this.#e,l={capture:!0,signal:s,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Ot(d),c(d))},l),a.addEventListener("pointerup",c,l),a.addEventListener("pointercancel",c,l);return}if(!this.#d){this.#d=new AbortController;const r=AbortSignal.any([this.#u,this.#d.signal]),s=this.#e,a={signal:r,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),a);const l=this.#m.bind(this);s.addEventListener("touchend",l,a),s.addEventListener("touchcancel",l,a),a.capture=!0,s.addEventListener("pointerdown",Ot,a),s.addEventListener("pointermove",Ot,a),s.addEventListener("pointercancel",Ot,a),s.addEventListener("pointerup",Ot,a),this.#a?.()}if(Ot(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Ot(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:l}=i,c=this.#l,{touch0X:d,touch0Y:f,touch1X:p,touch1Y:g}=c,y=p-d,S=g-f,w=a-r,E=l-s,x=Math.hypot(w,E)||1,C=Math.hypot(y,S)||1;if(!this.#t&&Math.abs(C-x)<=Tp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=a,c.touch1Y=l,!this.#t){this.#t=!0;return}const T=[(r+a)/2,(s+l)/2];this.#s?.(T,C,x)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#r?.()),this.#l&&(Ot(e),this.#l=null,this.#t=!1))}destroy(){this.#f?.abort(),this.#f=null,this.#o?.abort(),this.#o=null}}class Ce{#e=null;#t=null;#i=null;#n=null;#a=null;#s=!1;#r=null;#o="";#u=null;#l=null;#f=null;#d=null;#h=null;#g="";#m=!1;#c=null;#p=!1;#v=!1;#b=!1;#y=null;#x=0;#_=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=Ce._zIndex++;static _borderLineWidth=-1;static _colorManager=new bA;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ce.prototype._resizeWithKeyboard,n=ua.TRANSLATE_SMALL,i=ua.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new Fc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ce.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new v$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Ce._l10n??=e,Ce._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Ce._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ce._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(n+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r),this._onTranslated()}#R([e,n],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,n){this.#R(this.parentDimensions,e,n)}translateInPage(e,n){this.#c||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){this.#c||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:f}=i;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),i.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!this.#c&&(this.#c[0]!==this.x||this.#c[1]!==this.y)}get _hasBeenResized(){return!!this.#c&&(this.#c[2]!==this.width||this.#c[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:i}=Ce,r=i/e,s=i/n;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[i,r]}=this;let{x:s,y:a,width:l,height:c}=this;if(l*=i,c*=r,s*=i,a*=r,this._mustFixPosition)switch(e){case 0:s=Vn(s,0,i-l),a=Vn(a,0,r-c);break;case 90:s=Vn(s,0,i-c),a=Vn(a,l,r);break;case 180:s=Vn(s,l,i),a=Vn(a,c,r);break;case 270:s=Vn(s,c,i),a=Vn(a,0,r-l);break}this.x=s/=i,this.y=a/=r;const[d,f]=this.getBaseTranslation();s+=d,a+=f,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#M(e,n,i){switch(i){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return Ce.#M(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return Ce.#M(e,n,360-this.parentRotation)}#P(e){switch(e){case 90:{const[n,i]=this.pageDimensions;return[0,-n/i,i/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,i]=this.pageDimensions;return[0,n/i,-i/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,i]}=this;return[n*e,i*e]}setDims(){const{div:{style:e},width:n,height:i}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#U(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#u.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#I.bind(this,i),{signal:n}),r.addEventListener("contextmenu",ji,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#u)}#I(e,n){n.preventDefault();const{isMac:i}=en.platform;if(n.button!==0||n.ctrlKey&&i)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ot,{passive:!1,signal:a}),window.addEventListener("contextmenu",ji,{signal:a}),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#B()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#O(e,n,i,r){this.width=i,this.height=r,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#f)return;const{savedX:e,savedY:n,savedWidth:i,savedHeight:r}=this.#f;this.#f=null;const s=this.x,a=this.y,l=this.width,c=this.height;s===e&&a===n&&l===i&&c===r||this.addCommands({cmd:this.#O.bind(this,s,a,l,c),undo:this.#O.bind(this,e,n,i,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#k(e,n){const[i,r]=this.parentDimensions,s=this.x,a=this.y,l=this.width,c=this.height,d=Ce.MIN_SIZE/i,f=Ce.MIN_SIZE/r,p=this.#P(this.rotation),g=(B,V)=>[p[0]*B+p[2]*V,p[1]*B+p[3]*V],y=this.#P(360-this.rotation),S=(B,V)=>[y[0]*B+y[2]*V,y[1]*B+y[3]*V];let w,E,x=!1,C=!1;switch(e){case"topLeft":x=!0,w=(B,V)=>[0,0],E=(B,V)=>[B,V];break;case"topMiddle":w=(B,V)=>[B/2,0],E=(B,V)=>[B/2,V];break;case"topRight":x=!0,w=(B,V)=>[B,0],E=(B,V)=>[0,V];break;case"middleRight":C=!0,w=(B,V)=>[B,V/2],E=(B,V)=>[0,V/2];break;case"bottomRight":x=!0,w=(B,V)=>[B,V],E=(B,V)=>[0,0];break;case"bottomMiddle":w=(B,V)=>[B/2,V],E=(B,V)=>[B/2,0];break;case"bottomLeft":x=!0,w=(B,V)=>[0,V],E=(B,V)=>[B,0];break;case"middleLeft":C=!0,w=(B,V)=>[0,V/2],E=(B,V)=>[B,V/2];break}const T=w(l,c),N=E(l,c);let R=g(...N);const I=Ce._round(s+R[0]),O=Ce._round(a+R[1]);let F=1,z=1,$,G;if(n.fromKeyboard)({deltaX:$,deltaY:G}=n);else{const{screenX:B,screenY:V}=n,[re,ue]=this.#l;[$,G]=this.screenToPageTranslation(B-re,V-ue),this.#l[0]=B,this.#l[1]=V}if([$,G]=S($/i,G/r),x){const B=Math.hypot(l,c);F=z=Math.max(Math.min(Math.hypot(N[0]-T[0]-$,N[1]-T[1]-G)/B,1/l,1/c),d/l,f/c)}else C?F=Vn(Math.abs(N[0]-T[0]-$),d,1)/l:z=Vn(Math.abs(N[1]-T[1]-G),f,1)/c;const X=Ce._round(l*F),le=Ce._round(c*z);R=g(...E(X,le));const oe=I-R[0],pe=O-R[1];this.#c||=[this.x,this.y,this.width,this.height],this.width=X,this.height=le,this.x=oe,this.y=pe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new cc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,i]of e)await this._editToolbar.addButton(n,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const n=this._editToolbar?.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Cr.initialize(Ce._l10n),this.#i=new Cr(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Pf(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:i,deleted:r}}=this.#n;return{text:n,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Pf(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:i}){if(!n||(this.#n||=new Pf(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Pf(this),this.#n.edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,l=a+s+1,c=r-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,d,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){this.#n.data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#s?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),hD(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Tp({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,n,i){let s=.7*(i/n)+1-.7;if(s===1)return;const a=this.#P(this.rotation),l=(I,O)=>[a[0]*I+a[2]*O,a[1]*I+a[3]*O],[c,d]=this.parentDimensions,f=this.x,p=this.y,g=this.width,y=this.height,S=Ce.MIN_SIZE/c,w=Ce.MIN_SIZE/d;s=Math.max(Math.min(s,1/g,1/y),S/g,w/y);const E=Ce._round(g*s),x=Ce._round(y*s);if(E===g&&x===y)return;this.#c||=[f,p,g,y];const C=l(g/2,y/2),T=Ce._round(f+C[0]),N=Ce._round(p+C[1]),R=l(E/2,x/2);this.x=T-R[0],this.y=N-R[1],this.width=E,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:n}=en.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#F(e);return}this.#D(e)}#D(e){const{isMac:n}=en.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},l=d=>{r.abort(),this.#r=null,this.#m=!1,this._uiManager.endDragSession()||this.#D(d),i&&this._onStopDragging()};n&&(this.#x=e.clientX,this.#_=e.clientY,this.#r=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:g}=d;if(g!==this.#r){Ot(d);return}const[y,S]=this.screenToPageTranslation(f-this.#x,p-this.#_);this.#x=f,this.#_=p,this._uiManager.dragSelectedEditors(y,S)},a),window.addEventListener("touchmove",Ot,a),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#C||d.isPrimary)&&l(d),Ot(d)},a));const c=d=>{if(!this.#r||this.#r===d.pointerId){l(d);return}Ot(d)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,i){e.changeParent(this),this.x=n,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,f=n/r,p=this.x*s,g=this.y*a,y=this.width*s,S=this.height*a;switch(i){case 0:return[p+d+l,a-g-f-S+c,p+d+y+l,a-g-f+c];case 90:return[p+f+l,a-g+d+c,p+f+S+l,a-g+d+y+c];case 180:return[p-d-y+l,a-g+f+c,p-d+l,a-g+f+S+c];case 270:return[p-f-S+l,a-g-d-y+c,p-f+l,a-g-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[i,r,s,a]=e,l=s-i,c=a-r;switch(this.rotation){case 0:return[i,n-a,l,c];case 90:return[i,n-r,c,l];case 180:return[s,n-r,l,c];case 270:return[s,n-a,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:i,opacity:r,deleted:s,richText:a},uid:l,pageIndex:c,creationDate:d,modificationDate:f}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:i||f,popupRef:!s,color:n,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&r>0&&e<s&&i>0}#H(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,n,i){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[l,c,d,f]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/s,r.y=c/a,r.width=d/s,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#S){for(const e of this.#S.values())clearTimeout(e);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#U(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[i,r,s,a]=this.getPDFRect();return[Ce._round(i+(s-i)*e),Ce._round(r+(a-r)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#u.children;if(!this.#t){this.#t=Array.from(n);const a=this.#Y.bind(this),l=this.#j.bind(this),c=this._uiManager._signal;for(const d of this.#t){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",this.#K.bind(this,f),{signal:c}),d.setAttribute("data-l10n-id",Ce._l10nResizer[f])}}const i=this.#t[0];let r=0;for(const a of n){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let l=0;l<r-s;l++)this.#u.append(this.#u.firstElementChild);else if(s>r)for(let l=0;l<s-r;l++)this.#u.firstElementChild.before(this.#u.lastElementChild);let a=0;for(const l of n){const d=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Ce._l10nResizer[d])}}this.#G(0),this.#b=!0,this.#u.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){Ce._resizerKeyboardManager.exec(this,e)}#j(e){this.#b&&e.relatedTarget?.parentNode!==this.#u&&this.#L()}#K(e){this.#g=this.#b?e:""}#G(e){if(this.#t)for(const n of this.#t)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#b&&this.#k(this.#g,{deltaX:e,deltaY:n,fromKeyboard:!0})}#L(){this.#b=!1,this.#G(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#S||=new Map;const{action:i}=e;let r=this.#S.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#S.delete(i),this.#S.size===0&&(this.#S=null)},Ce._telemetryTimeout),this.#S.set(i,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const i=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),i.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class v$ extends Ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const o1=3285377520,Li=4294901760,Er=65535;class pD{constructor(e){this.h1=e?e&4294967295:o1,this.h2=e?e&4294967295:o1}update(e){let n,i;if(typeof e=="string"){n=new Uint8Array(e.length*2),i=0;for(let w=0,E=e.length;w<E;w++){const x=e.charCodeAt(w);x<=255?n[i++]=x:(n[i++]=x>>>8,n[i++]=x&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),i=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(n.buffer,0,r);let l=0,c=0,d=this.h1,f=this.h2;const p=3432918353,g=461845907,y=p&Er,S=g&Er;for(let w=0;w<r;w++)w&1?(l=a[w],l=l*p&Li|l*y&Er,l=l<<15|l>>>17,l=l*g&Li|l*S&Er,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[w],c=c*p&Li|c*y&Er,c=c<<15|c>>>17,c=c*g&Li|c*S&Er,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,s){case 3:l^=n[r*4+2]<<16;case 2:l^=n[r*4+1]<<8;case 1:l^=n[r*4],l=l*p&Li|l*y&Er,l=l<<15|l>>>17,l=l*g&Li|l*S&Er,r&1?d^=l:f^=l}this.h1=d,this.h2=f}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Li|e*36045&Er,n=n*4283543511&Li|((n<<16|e>>>16)*2950163797&Li)>>>16,e^=n>>>1,e=e*444984403&Li|e*60499&Er,n=n*3301882366&Li|((n<<16|e>>>16)*3120437893&Li)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const X0=Object.freeze({map:null,hash:"",transfer:void 0});class AA{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const i=this.#n.get(e);return i===void 0?n:Object.assign(n,i)}getRawValue(e){return this.#n.get(e)}remove(e){const n=this.#n.get(e);if(n!==void 0&&(n instanceof Ce&&this.#i.delete(n.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof Ce)return;this.onAnnotationEditor(null)}}setValue(e,n){const i=this.#n.get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(n))i[s]!==a&&(r=!0,i[s]=a);else r=!0,this.#n.set(e,n);r&&this.#a(),n instanceof Ce&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new mD(this)}get serializable(){if(this.#n.size===0)return X0;const e=new Map,n=new pD,i=[],r=Object.create(null);let s=!1;for(const[a,l]of this.#n){const c=l instanceof Ce?l.serialize(!1,r):l;c&&(e.set(a,c),n.update(`${a}:${JSON.stringify(c)}`),s||=!!c.bitmap)}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:X0}get editorStats(){let e=null;const n=new Map;let i=0,r=0;for(const s of this.#n.values()){if(!(s instanceof Ce)){s.popup&&(s.popup.deleted?r+=1:i+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(i+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:l}=a;n.has(l)||n.set(l,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[d,f]of Object.entries(a)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const g=p.get(f)??0;p.set(f,g+1)}}if((r>0||i>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:i}),!e)return null;for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,n){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(n),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&e.push(n.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class mD extends AA{#e;constructor(e){super();const{map:n,hash:i,transfer:r}=e.serializable,s=structuredClone(n,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}class y${#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(We(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,l=new FontFace(r,s,a);this.addNativeFontFace(l);try{await l.load(),this.#e.add(r),i?.(e)}catch{ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ke(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",qn||en.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(We(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:n,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function i(N,R){return N.charCodeAt(R)<<24|N.charCodeAt(R+1)<<16|N.charCodeAt(R+2)<<8|N.charCodeAt(R+3)&255}function r(N,R,I,O){const F=N.substring(0,R),z=N.substring(R+I);return F+O+z}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function f(N,R){if(++d>30){ke("Load test font never loaded."),R();return}if(c.font="30px "+N,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(f.bind(null,N,R))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,p.length,p);const S=16,w=1482184792;let E=i(g,S);for(s=0,a=p.length-3;s<a;s+=4)E=E-w+i(p,s)|0;s<p.length&&(E=E-w+i(p+"XXX",s)|0),g=r(g,S,4,Q6(E));const x=`url(data:font/opentype;base64,${btoa(g)});`,C=`@font-face {font-family:"${p}";src:${x}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const N of[e.loadedName,p]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=N,T.append(R)}this._document.body.append(T),f(p,()=>{T.remove(),n.complete()})}}class b${#e;constructor(e,n=null,i,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=n,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${uD(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const i=this.loadedName+"_path_"+n;let r;try{r=e.get(i)}catch(a){ke(`getPathGenerator - ignoring character: "${a}".`)}const s=fD(r?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[n]=s}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){Le(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){Le(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class _l{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const n=new TextEncoder,i={};let r=0;for(const d of _l.strings){const f=n.encode(e[d]);i[d]=f,r+=4+f.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),l=new DataView(s);let c=0;for(const d of _l.strings){const f=i[d],p=f.length;l.setUint32(c,p),a.set(f,c+4),c+=4+p}return We(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){We(e<_l.strings.length,"Invalid string index");let n=0;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class El{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const n=new TextEncoder,i={};let r=0;for(const g of El.strings){const y=n.encode(e[g]);i[g]=y,r+=4+y.length}r+=4;let s,a,l=1+r;e.style&&(s=n.encode(e.style.style),a=n.encode(e.style.weight),l+=4+s.length+4+a.length);const c=new ArrayBuffer(l),d=new Uint8Array(c),f=new DataView(c);let p=0;f.setUint8(p++,e.guessFallback?1:0),f.setUint32(p,0),p+=4,r=0;for(const g of El.strings){const y=i[g],S=y.length;r+=4+S,f.setUint32(p,S),d.set(y,p+4),p+=4+S}return f.setUint32(p-r-4,r),e.style&&(f.setUint32(p,s.length),d.set(s,p+4),p+=4+s.length,f.setUint32(p,a.length),d.set(a,p+4),p+=4+a.length),We(p<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){We(e<El.strings.length,"Invalid string index");let n=5;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const n=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,n));e+=4+n;const r=this.#t.getUint32(e),s=this.#i.decode(new Uint8Array(this.#e,e+4,r));return{style:i,weight:s}}}class ft{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#s;#r;#o;constructor({data:e,extra:n}){this.#s=e,this.#r=new TextDecoder,this.#o=new DataView(this.#s),n&&Object.assign(this,n)}#u(e){We(e<ft.bools.length,"Invalid boolean index");const n=Math.floor(e/4),i=e*2%8,r=this.#o.getUint8(n)>>i&3;return r===0?void 0:r===2}get black(){return this.#u(0)}get bold(){return this.#u(1)}get disableFontFace(){return this.#u(2)}get fontExtraProperties(){return this.#u(3)}get isInvalidPDFjsFont(){return this.#u(4)}get isType3Font(){return this.#u(5)}get italic(){return this.#u(6)}get missingFile(){return this.#u(7)}get remeasure(){return this.#u(8)}get vertical(){return this.#u(9)}#l(e){return We(e<ft.numbers.length,"Invalid number index"),this.#o.getFloat64(ft.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=ft.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=ft.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=ft.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#f(e){We(e<ft.strings.length,"Invalid string index");let n=ft.#a+4;for(let s=0;s<e;s++)n+=this.#o.getUint32(n)+4;const i=this.#o.getUint32(n),r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,n+4,i)),this.#r.decode(r)}get fallbackName(){return this.#f(0)}get loadedName(){return this.#f(1)}get mimetype(){return this.#f(2)}get name(){return this.#f(3)}get data(){let e=ft.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);if(s!==0)return new Uint8Array(this.#s,e+4,s)}clearData(){let e=ft.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);new Uint8Array(this.#s,e+4,s).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=ft.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(this.#s,e+4,r)),new _l(s.buffer)}get systemFontInfo(){let e=ft.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,e+4,i)),new El(r.buffer)}static write(e){const n=e.systemFontInfo?El.write(e.systemFontInfo):null,i=e.cssFontInfo?_l.write(e.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const w of ft.strings)s[w]=r.encode(e[w]),a+=4+s[w].length;const l=ft.#a+4+a+4+(n?n.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),d=new Uint8Array(c),f=new DataView(c);let p=0;const g=ft.bools.length;let y=0,S=0;for(let w=0;w<g;w++){const E=e[ft.bools[w]];y|=(E===void 0?0:E?2:1)<<S,S+=2,(S===8||w===g-1)&&(f.setUint8(p++,y),y=0,S=0)}We(p===ft.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of ft.numbers)f.setFloat64(p,e[w]),p+=8;if(We(p===ft.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(p++,4);for(const w of e.bbox)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=8;if(We(p===ft.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(p++,6);for(const w of e.fontMatrix)f.setFloat64(p,w,!0),p+=8}else f.setUint8(p++,0),p+=48;if(We(p===ft.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(p++,1);for(const w of e.defaultVMetrics)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=6;We(p===ft.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(ft.#a,0),p+=4;for(const w of ft.strings){const E=s[w],x=E.length;f.setUint32(p,x),d.set(E,p+4),p+=4+x}if(f.setUint32(ft.#a,p-ft.#a-4),!n)f.setUint32(p,0),p+=4;else{const w=n.byteLength;f.setUint32(p,w),We(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(n),p+4),p+=4+w}if(!i)f.setUint32(p,0),p+=4;else{const w=i.byteLength;f.setUint32(p,w),We(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(i),p+4),p+=4+w}return e.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,e.data.length),d.set(e.data,p+4),p+=4+e.data.length),We(p<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(p)}}class un{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#s=8;static#r=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,i=null,r=[],s=[],a=[],l=[],c=null,d=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,i=e[2],a=e[3],n===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,c=e[1],r=e[2],s=e[3],l=e[4]||[],i=e[6],d=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),p=Math.floor(s.length/3),g=a.length,y=l.length;let S=0;for(const R of l)S+=1,S=Math.ceil(S/4)*4,S+=4+R.coords.length*4,S+=4+R.colors.length*4,R.verticesPerRow!==void 0&&(S+=4);const w=20+f*8+p*3+g*8+(i?16:0)+(d?3:0)+S,E=new ArrayBuffer(w),x=new DataView(E),C=new Uint8Array(E);x.setUint8(un.#e,n),x.setUint8(un.#t,i?1:0),x.setUint8(un.#i,d?1:0),x.setUint8(un.#n,c),x.setUint32(un.#a,f,!0),x.setUint32(un.#s,p,!0),x.setUint32(un.#r,g,!0),x.setUint32(un.#o,y,!0);let T=20;new Float32Array(E,T,f*2).set(r),T+=f*8,C.set(s,T),T+=p*3;for(const[R,I]of a)x.setFloat32(T,R,!0),T+=4,x.setUint32(T,parseInt(I.slice(1),16),!0),T+=4;if(i)for(const R of i)x.setFloat32(T,R,!0),T+=4;d&&(C.set(d,T),T+=3);for(let R=0;R<l.length;R++){const I=l[R];x.setUint8(T,I.type),T+=1,T=Math.ceil(T/4)*4,x.setUint32(T,I.coords.length,!0),T+=4,new Int32Array(E,T,I.coords.length).set(I.coords),T+=I.coords.length*4,x.setUint32(T,I.colors.length,!0),T+=4,new Int32Array(E,T,I.colors.length).set(I.colors),T+=I.colors.length*4,I.verticesPerRow!==void 0&&(x.setUint32(T,I.verticesPerRow,!0),T+=4)}return E}getIR(){const e=this.view,n=this.data[un.#e],i=!!this.data[un.#t],r=!!this.data[un.#i],s=e.getUint32(un.#a,!0),a=e.getUint32(un.#s,!0),l=e.getUint32(un.#r,!0),c=e.getUint32(un.#o,!0);let d=20;const f=new Float32Array(this.buffer,d,s*2);d+=s*8;const p=new Uint8Array(this.buffer,d,a*3);d+=a*3;const g=[];for(let E=0;E<l;++E){const x=e.getFloat32(d,!0);d+=4;const C=e.getUint32(d,!0);d+=4,g.push([x,`#${C.toString(16).padStart(6,"0")}`])}let y=null;if(i){y=[];for(let E=0;E<4;++E)y.push(e.getFloat32(d,!0)),d+=4}let S=null;r&&(S=new Uint8Array(this.buffer,d,3),d+=3);const w=[];for(let E=0;E<c;++E){const x=e.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const C=e.getUint32(d,!0);d+=4;const T=new Int32Array(this.buffer,d,C);d+=C*4;const N=e.getUint32(d,!0);d+=4;const R=new Int32Array(this.buffer,d,N);d+=N*4;const I={type:x,coords:T,colors:R};x===$0.LATTICE&&(I.verticesPerRow=e.getUint32(d,!0),d+=4),w.push(I)}if(n===1)return["RadialAxial","axial",y,g,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",y,g,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(n===3){const E=this.data[un.#n];let x=null;if(f.length>0){let C=f[0],T=f[0],N=f[1],R=f[1];for(let I=0;I<f.length;I+=2){const O=f[I],F=f[I+1];C=C>O?O:C,N=N>F?F:N,T=T<O?O:T,R=R<F?F:R}x=[C,N,T,R]}return["Mesh",E,f,p,w,x,y,S]}throw new Error(`Unsupported pattern kind: ${n}`)}}class A${static write(e){let n,i;return en.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),n=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),n=new Float32Array(i)),n.set(e),i}#e;constructor(e){this.#e=e}get path(){return en.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function S$(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(qn)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function w$(t){if(qn&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return kc(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Rf(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const J0=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,_$=t=>typeof t=="object"&&typeof t?.name=="string",E$=i$.bind(null,J0,_$);class x${#e=new Map;#t=Promise.resolve();postMessage(e,n){const i={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,i)})}addEventListener(e,n,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){ke("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(n,r)}removeEventListener(e,n){this.#e.get(n)?.(),this.#e.delete(n)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Nf={DATA:1,ERROR:2},$t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function l1(){}function si(t){if(t instanceof la||t instanceof j0||t instanceof e1||t instanceof yh||t instanceof qv)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new la(t.message);case"InvalidPDFException":return new j0(t.message);case"PasswordException":return new e1(t.message,t.code);case"ResponseException":return new yh(t.message,t.status,t.missing);case"UnknownErrorException":return new qv(t.message,t.details)}return new qv(t.message,t.toString())}class ac{#e=new AbortController;constructor(e,n,i){this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Nf.DATA)r.resolve(e.data);else if(e.callback===Nf.ERROR)r.reject(si(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:Nf.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:Nf.ERROR,callbackId:e.callbackId,reason:si(a)})});return}if(e.streamId){this.#i(e);return}n(e.data)}on(e,n){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=n}send(e,n,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},i)}sendWithPromise(e,n,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,i,r){const s=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:s,data:n,desiredSize:d.desiredSize},r),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,c.postMessage({sourceName:a,targetName:l,stream:$t.PULL,streamId:s,desiredSize:d.desiredSize}),f.promise},cancel:d=>{We(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:$t.CANCEL,streamId:s,reason:si(d)}),f.promise}},i)}#i(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,f=1,p){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:$t.ENQUEUE,streamId:n,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:$t.CLOSE,streamId:n}),delete a.streamSinks[n])},error(d){We(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:$t.ERROR,streamId:n,reason:si(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,Promise.try(l,e.data,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:$t.START_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:$t.START_COMPLETE,streamId:n,reason:si(d)})})}#n(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[n],l=this.streamSinks[n];switch(e.stream){case $t.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(si(e.reason));break;case $t.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(si(e.reason));break;case $t.PULL:if(!l){s.postMessage({sourceName:i,targetName:r,stream:$t.PULL_COMPLETE,streamId:n,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||l1).then(function(){s.postMessage({sourceName:i,targetName:r,stream:$t.PULL_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:$t.PULL_COMPLETE,streamId:n,reason:si(d)})});break;case $t.ENQUEUE:if(We(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case $t.CLOSE:if(We(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,n);break;case $t.ERROR:We(a,"error should have stream controller"),a.controller.error(si(e.reason)),this.#a(a,n);break;case $t.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(si(e.reason)),this.#a(a,n);break;case $t.CANCEL:if(!l)break;const c=si(e.reason);Promise.try(l.onCancel||l1,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:$t.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:$t.CANCEL_COMPLETE,streamId:n,reason:si(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(e,n){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#e?.abort(),this.#e=null}}class gD{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,n);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,n,i){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){mt("Abstract method `_createCanvas` called.")}}class T$ extends gD{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const i=this._document.createElement("canvas");return i.width=e,i.height=n,i}}class vD{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class u1 extends vD{async _fetch(e){const n=await Lc(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):kc(n)}}class yD{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,i,r,s){return"none"}destroy(e=!1){}}class C$ extends yD{#e;#t;#i;#n;#a;#s;#r=0;constructor({docId:e,ownerDocument:n=globalThis.document}){super(),this.#n=e,this.#a=n}get#o(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=this.#a.createElementNS(as,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(as,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#f(e){if(e.length===1){const c=e[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=c[p]/255;const f=d.join(",");return[f,f,f]}const[n,i,r]=e,s=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)s[c]=n[c]/255,a[c]=i[c]/255,l[c]=r[c]/255;return[s.join(","),a.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const n=this.#a.URL;n!==this.#a.baseURI&&(xp(n)?ke('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=aD(n,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let n=this.#o.get(e);if(n)return n;const[i,r,s]=this.#f(e),a=e.length===1?i:`${i}${r}${s}`;if(n=this.#o.get(a),n)return this.#o.set(e,n),n;const l=`g_${this.#n}_transfer_map_${this.#r++}`,c=this.#d(l);this.#o.set(e,c),this.#o.set(a,c);const d=this.#m(l);return this.#p(i,r,s,d),c}addHCMFilter(e,n){const i=`${e}-${n}`,r="base";let s=this.#u.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#u.set(r,s)),!e||!n))return s.url;const a=this.#b(e);e=he.makeHexColor(...a);const l=this.#b(n);if(n=he.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&n==="#ffffff"||e===n)return s.url;const c=new Array(256);for(let y=0;y<=255;y++){const S=y/255;c[y]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=c.join(","),f=`g_${this.#n}_hcm_filter`,p=s.filter=this.#m(f);this.#p(d,d,d,p),this.#g(p);const g=(y,S)=>{const w=a[y]/255,E=l[y]/255,x=new Array(S+1);for(let C=0;C<=S;C++)x[C]=w+C/S*(E-w);return x.join(",")};return this.#p(g(0,5),g(1,5),g(2,5),p),s.url=this.#d(f),s.url}addAlphaFilter(e){let n=this.#o.get(e);if(n)return n;const[i]=this.#f([e]),r=`alpha_${i}`;if(n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_alpha_map_${this.#r++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(r,a);const l=this.#m(s);return this.#v(i,l),a}addLuminosityFilter(e){let n=this.#o.get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=this.#f([e]),r=`luminosity_${i}`):r="luminosity",n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_luminosity_map_${this.#r++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(r,a);const l=this.#m(s);return this.#h(l),e&&this.#v(i,l),a}addHighlightHCMFilter(e,n,i,r,s){const a=`${n}-${i}-${r}-${s}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!n||!i))return l.url;const[c,d]=[n,i].map(this.#b.bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,y]=[r,s].map(this.#b.bind(this));p<f&&([f,p,g,y]=[p,f,y,g]),this.#l.style.color="";const S=(x,C,T)=>{const N=new Array(256),R=(p-f)/T,I=x/255,O=(C-x)/(255*T);let F=0;for(let z=0;z<=T;z++){const $=Math.round(f+z*R),G=I+z*O;for(let X=F;X<=$;X++)N[X]=G;F=$+1}for(let z=F;z<256;z++)N[z]=N[F-1];return N.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,E=l.filter=this.#m(w);return this.#g(E),this.#p(S(g[0],y[0],5),S(g[1],y[1],5),S(g[2],y[2],5),E),l.url=this.#d(w),l.url}destroy(e=!1){e&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#r=0)}#h(e){const n=this.#a.createElementNS(as,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#g(e){const n=this.#a.createElementNS(as,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#m(e){const n=this.#a.createElementNS(as,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#l.append(n),n}#c(e,n,i){const r=this.#a.createElementNS(as,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#p(e,n,i,r){const s=this.#a.createElementNS(as,"feComponentTransfer");r.append(s),this.#c(s,"feFuncR",e),this.#c(s,"feFuncG",n),this.#c(s,"feFuncB",i)}#v(e,n){const i=this.#a.createElementNS(as,"feComponentTransfer");n.append(i),this.#c(i,"feFuncA",e)}#b(e){return this.#l.style.color=e,Bc(getComputedStyle(this.#l).getPropertyValue("color"))}}class bD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class c1 extends bD{async _fetch(e){const n=await Lc(e,"arraybuffer");return new Uint8Array(n)}}class AD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class d1 extends AD{async _fetch(e){const n=await Lc(e,"arraybuffer");return new Uint8Array(n)}}qn&&ke("Please use the `legacy` build in Node.js environments.");async function SA(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class M$ extends yD{}class P$ extends gD{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class R$ extends vD{async _fetch(e){return SA(e)}}class N$ extends bD{async _fetch(e){return SA(e)}}class I$ extends AD{async _fetch(e){return SA(e)}}const sl="__forcedDependency",{floor:f1,ceil:h1}=Math;function If(t,e,n,i,r,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],i),t[e*4+2]=Math.max(t[e*4+2],r),t[e*4+3]=Math.max(t[e*4+3],s)}const Q0=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class D${#e;#t;constructor(e,n){this.#e=e,this.#t=n}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Q0}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Df=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};class O${#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[sl]:[]};#i=new Map;#n=[];#a=[];#s=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#u=-1;#l=new Set;#f=new Map;#d=new Map;#h;#g;#m;#c;#p;constructor(e,n,i=!1){this.#h=e.width,this.#g=e.height,this.#v(n),i&&(this.#p=new Map)}growOperationsCount(e){e>=this.#c.length&&this.#v(e,this.#c)}#v(e,n){const i=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(i),this.#c=new Uint32Array(i),n&&n.length>0?(this.#c.set(n),this.#c.fill(Q0,n.length)):this.#c.fill(Q0)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[sl]:{__proto__:this.#t[sl]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const n=Object.getPrototypeOf(this.#e);if(n===null)return this;this.#e=n,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const i=this.#n.pop();return i!==void 0&&(Df(this.#p,e)?.dependencies.add(i),this.#c[e]=this.#c[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const n=this.#n.pop();return n!==void 0&&(Df(this.#p,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const n=this.#a.pop();return n!==void 0&&(Df(this.#p,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}pushBaseTransform(e){return this.#s.push(he.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,n){return this.#e[e]=n,this}recordIncrementalData(e,n){return this.#t[e].push(n),this}resetIncrementalData(e,n){return this.#t[e].length=0,this}recordNamedData(e,n){return this.#i.set(e,n),this}recordSimpleDataFromNamed(e,n,i){this.#e[e]=this.#i.get(n)??i}recordFutureForcedDependency(e,n){return this.recordIncrementalData(sl,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in this.#e&&this.recordFutureForcedDependency(n,this.#e[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(sl,e);return this}resetBBox(e){return this.#u!==e&&(this.#u=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,n,i,r,s,a){const l=he.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform()),c=[1/0,1/0,-1/0,-1/0];he.axialAlignedBoundingBox([i,s,r,a],l,c);const d=he.intersect(this.#r,c);return d?(this.#r[0]=d[0],this.#r[1]=d[1],this.#r[2]=d[2],this.#r[3]=d[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,n,i,r,s,a){const l=this.#r;if(l[0]===1/0)return this;const c=he.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform());if(l[0]===-1/0)return he.axialAlignedBoundingBox([i,s,r,a],c,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return he.axialAlignedBoundingBox([i,s,r,a],c,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,n,i,r=1,s=0,a=0,l){const c=i.bbox;let d,f;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&this.#d.get(i),d!==!1&&(f=[0,0,0,0],he.axialAlignedBoundingBox(c,i.fontMatrix,f),(r!==1||s!==0||a!==0)&&he.scaleMinMax([r,0,0,-r,s,a],f),d)))return this.recordBBox(e,n,f[0],f[2],f[1],f[3]);if(!l)return this.recordFullPageBBox(e);const p=l();return c&&f&&d===void 0&&(d=f[0]<=s-p.actualBoundingBoxLeft&&f[2]>=s+p.actualBoundingBoxRight&&f[1]<=a-p.actualBoundingBoxAscent&&f[3]>=a+p.actualBoundingBoxDescent,this.#d.set(i,d),d)?this.recordBBox(e,n,f[0],f[2],f[1],f[3]):this.recordBBox(e,n,s-p.actualBoundingBoxLeft,s+p.actualBoundingBoxRight,a-p.actualBoundingBoxAscent,a+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#h,this.#r[2]),this.#o[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,n){const i=this.#l,r=this.#e,s=this.#t;for(const a of n)a in this.#e?i.add(r[a]):a in s&&s[a].forEach(i.add,i);return this}recordNamedDependency(e,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[sl]),this.#p){const i=Df(this.#p,e),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(e),i.isRenderingOperation=!0}if(this.#u===e){const i=f1(this.#o[0]*256/this.#h),r=f1(this.#o[1]*256/this.#g),s=h1(this.#o[2]*256/this.#h),a=h1(this.#o[3]*256/this.#g);If(this.#m,e,i,r,s,a);for(const l of this.#l)l!==e&&If(this.#m,l,i,r,s,a);for(const l of this.#n)l!==e&&If(this.#m,l,i,r,s,a);for(const l of this.#a)l!==e&&If(this.#m,l,i,r,s,a);n||(this.#l.clear(),this.#u=-1)}return this}recordShowTextOperation(e,n=!1){const i=Array.from(this.#l);this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,n=!1){return this.#u===e&&(this.#u=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const n=this.#f.get(e);return this.#f.delete(e),n}_pushPendingDependencies(e){for(const n of e)this.#l.add(n)}take(){return this.#d.clear(),new D$(this.#c,this.#m)}takeDebugMetadata(){return this.#p}}class bh{#e;#t;#i;#n=0;#a=0;constructor(e,n,i){if(e instanceof bh&&e.#i===!!i)return e;this.#e=e,this.#t=n,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,n){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,n){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,n){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,i){return this.#e.recordSimpleDataFromNamed(e,n,this.#t),this}recordFutureForcedDependency(e,n){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,n,i,r,s,a){return this.#i||this.#e.recordClipBox(this.#t,n,i,r,s,a),this}recordBBox(e,n,i,r,s,a){return this.#i||this.#e.recordBBox(this.#t,n,i,r,s,a),this}recordCharacterBBox(e,n,i,r,s,a,l){return this.#i||this.#e.recordCharacterBBox(this.#t,n,i,r,s,a,l),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,n){return this.#e.recordDependencies(this.#t,n),this}recordNamedDependency(e,n){return this.#e.recordNamedDependency(this.#t,n),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Ui={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},xn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Z0(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class wA{isModifyingCurrentTransform(){return!1}getPattern(){mt("Abstract method `getPattern` called.")}}class k$ extends wA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,n=null){let i,r=this._p0,s=this._p1;if(n&&(r=r.slice(),s=s.slice(),he.applyTransform(r,n),he.applyTransform(s,n)),this._type==="axial")i=e.createLinearGradient(r[0],r[1],s[0],s[1]);else if(this._type==="radial"){let a=this._r0,l=this._r1;if(n){const c=new Float32Array(2);he.singularValueDecompose2dScale(n,c),a*=c[0],l*=c[0]}i=e.createRadialGradient(r[0],r[1],a,s[0],s[1],l)}for(const a of this._colorStops)i.addColorStop(a[0],a[1]);return i}getPattern(e,n,i,r){let s;if(r===xn.STROKE||r===xn.FILL){if(this.isOriginBased()){let g=he.transform(i,n.baseTransform);this.matrix&&(g=he.transform(g,this.matrix));const y=.001,S=Math.hypot(g[0],g[1]),w=Math.hypot(g[2],g[3]),E=(g[0]*g[2]+g[1]*g[3])/(S*w);if(Math.abs(E)<y)if(this.isRadial()){if(Math.abs(S-w)<y)return this._createGradient(e,g)}else return this._createGradient(e,g)}const a=n.current.getClippedPathBoundingBox(r,Pt(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=n.cachedCanvases.getCanvas("pattern",l,c),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),i=he.transform(i,[1,0,0,1,a[0],a[1]]),f.transform(...n.baseTransform),this.matrix&&f.transform(...this.matrix),Z0(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(i);s.setTransform(p)}else Z0(e,this._bbox),s=this._createGradient(e);return s}}function jv(t,e,n,i,r,s,a,l){const c=e.coords,d=e.colors,f=t.data,p=t.width*4;let g;c[n+1]>c[i+1]&&(g=n,n=i,i=g,g=s,s=a,a=g),c[i+1]>c[r+1]&&(g=i,i=r,r=g,g=a,a=l,l=g),c[n+1]>c[i+1]&&(g=n,n=i,i=g,g=s,s=a,a=g);const y=(c[n]+e.offsetX)*e.scaleX,S=(c[n+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,E=(c[i+1]+e.offsetY)*e.scaleY,x=(c[r]+e.offsetX)*e.scaleX,C=(c[r+1]+e.offsetY)*e.scaleY;if(S>=C)return;const T=d[s],N=d[s+1],R=d[s+2],I=d[a],O=d[a+1],F=d[a+2],z=d[l],$=d[l+1],G=d[l+2],X=Math.round(S),le=Math.round(C);let oe,pe,B,V,re,ue,Me,L;for(let K=X;K<=le;K++){if(K<E){const me=K<S?0:(S-K)/(S-E);oe=y-(y-w)*me,pe=T-(T-I)*me,B=N-(N-O)*me,V=R-(R-F)*me}else{let me;K>C?me=1:E===C?me=0:me=(E-K)/(E-C),oe=w-(w-x)*me,pe=I-(I-z)*me,B=O-(O-$)*me,V=F-(F-G)*me}let ie;K<S?ie=0:K>C?ie=1:ie=(S-K)/(S-C),re=y-(y-x)*ie,ue=T-(T-z)*ie,Me=N-(N-$)*ie,L=R-(R-G)*ie;const ce=Math.round(Math.min(oe,re)),Ae=Math.round(Math.max(oe,re));let xe=p*K+ce*4;for(let me=ce;me<=Ae;me++)ie=(oe-me)/(oe-re),ie<0?ie=0:ie>1&&(ie=1),f[xe++]=pe-(pe-ue)*ie|0,f[xe++]=B-(B-Me)*ie|0,f[xe++]=V-(V-L)*ie|0,f[xe++]=255}}function L$(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case $0.LATTICE:const l=e.verticesPerRow,c=Math.floor(i.length/l)-1,d=l-1;for(s=0;s<c;s++){let f=s*l;for(let p=0;p<d;p++,f++)jv(t,n,i[f],i[f+1],i[f+l],r[f],r[f+1],r[f+l]),jv(t,n,i[f+l+1],i[f+1],i[f+l],r[f+l+1],r[f+1],r[f+l])}break;case $0.TRIANGLES:for(s=0,a=i.length;s<a;s+=3)jv(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class U$ extends wA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=d/p,S=f/g,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/y,scaleY:1/S},E=p+4,x=g+4,C=i.getCanvas("mesh",E,x),T=C.context,N=T.createImageData(p,g);if(n){const I=N.data;for(let O=0,F=I.length;O<F;O+=4)I[O]=n[0],I[O+1]=n[1],I[O+2]=n[2],I[O+3]=255}for(const I of this._figures)L$(N,I,w);return T.putImageData(N,2,2),{canvas:C.canvas,offsetX:l-2*y,offsetY:c-2*S,scaleX:y,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(e,n,i,r){Z0(e,this._bbox);const s=new Float32Array(2);if(r===xn.SHADING)he.singularValueDecompose2dScale(Pt(e),s);else if(this.matrix){he.singularValueDecompose2dScale(this.matrix,s);const[l,c]=s;he.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=l,s[1]*=c}else he.singularValueDecompose2dScale(n.baseTransform,s);const a=this._createMeshCanvas(s,r===xn.SHADING?null:this._background,n.cachedCanvases);return r!==xn.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class B$ extends wA{getPattern(){return"hotpink"}}function F$(t){switch(t[0]){case"RadialAxial":return new k$(t);case"Mesh":return new U$(t);case"Dummy":return new B$}throw new Error(`Unknown IR type: ${t[0]}`)}const p1={COLORED:1,UNCOLORED:2};class _A{static MAX_PATTERN_SIZE=3e3;constructor(e,n,i,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e,n){const{bbox:i,operatorList:r,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Ep("TilingType: "+a);const p=i[0],g=i[1],y=i[2],S=i[3],w=y-p,E=S-g,x=new Float32Array(2);he.singularValueDecompose2dScale(this.matrix,x);const[C,T]=x;he.singularValueDecompose2dScale(this.baseTransform,x);const N=C*x[0],R=T*x[1];let I=w,O=E,F=!1,z=!1;const $=Math.ceil(d*N),G=Math.ceil(f*R),X=Math.ceil(w*N),le=Math.ceil(E*R);$>=X?I=d:F=!0,G>=le?O=f:z=!0;const oe=this.getSizeAndScale(I,this.ctx.canvas.width,N),pe=this.getSizeAndScale(O,this.ctx.canvas.height,R),B=e.cachedCanvases.getCanvas("pattern",oe.size,pe.size),V=B.context,re=c.createCanvasGraphics(V,n);if(re.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(re,s,l),V.translate(-oe.scale*p,-pe.scale*g),re.transform(0,oe.scale,0,0,pe.scale,0,0),V.save(),re.dependencyTracker?.save(),this.clipBbox(re,p,g,y,S),re.baseTransform=Pt(re.ctx),re.executeOperatorList(r),re.endDrawing(),re.dependencyTracker?.restore(),V.restore(),F||z){const ue=B.canvas;F&&(I=d),z&&(O=f);const Me=this.getSizeAndScale(I,this.ctx.canvas.width,N),L=this.getSizeAndScale(O,this.ctx.canvas.height,R),K=Me.size,ie=L.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",K,ie),Ae=ce.context,xe=F?Math.floor(w/d):0,me=z?Math.floor(E/f):0;for(let lt=0;lt<=xe;lt++)for(let Z=0;Z<=me;Z++)Ae.drawImage(ue,K*lt,ie*Z,K,ie,0,0,K,ie);return{canvas:ce.canvas,scaleX:Me.scale,scaleY:L.scale,offsetX:p,offsetY:g}}return{canvas:B.canvas,scaleX:oe.scale,scaleY:pe.scale,offsetX:p,offsetY:g}}getSizeAndScale(e,n,i){const r=Math.max(_A.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,n,i,r,s){const a=r-n,l=s-i;e.ctx.rect(n,i,a,l),he.axialAlignedBoundingBox([n,i,r,s],Pt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,i){const r=e.ctx,s=e.current;switch(n){case p1.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=l;break;case p1.UNCOLORED:r.fillStyle=r.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new J6(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,i,r,s){let a=i;r!==xn.SHADING&&(a=he.transform(a,n.baseTransform),this.matrix&&(a=he.transform(a,this.matrix)));const l=this.createPatternCanvas(n,s);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function z$({src:t,srcPos:e=0,dest:n,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=en.isLittleEndian?4278190080:255,[c,d]=a?[s,l]:[l,s],f=i>>3,p=i&7,g=t.length;n=new Uint32Array(n.buffer);let y=0;for(let S=0;S<r;S++){for(const E=e+f;e<E;e++){const x=e<g?t[e]:255;n[y++]=x&128?d:c,n[y++]=x&64?d:c,n[y++]=x&32?d:c,n[y++]=x&16?d:c,n[y++]=x&8?d:c,n[y++]=x&4?d:c,n[y++]=x&2?d:c,n[y++]=x&1?d:c}if(p===0)continue;const w=e<g?t[e++]:255;for(let E=0;E<p;E++)n[y++]=w&1<<7-E?d:c}return{srcPos:e,destPos:y}}const m1=16,g1=100,H$=15,v1=10,ai=16,Yv=new DOMMatrix,Ai=new Float32Array(2),vl=new Float32Array([1/0,1/0,-1/0,-1/0]);function G$(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},t.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},t.transform=function(n,i,r,s,a,l){e.transform(n,i,r,s,a,l),this.__originalTransform(n,i,r,s,a,l)},t.setTransform=function(n,i,r,s,a,l){e.setTransform(n,i,r,s,a,l),this.__originalSetTransform(n,i,r,s,a,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,i){e.moveTo(n,i),this.__originalMoveTo(n,i)},t.lineTo=function(n,i){e.lineTo(n,i),this.__originalLineTo(n,i)},t.bezierCurveTo=function(n,i,r,s,a,l){e.bezierCurveTo(n,i,r,s,a,l),this.__originalBezierCurveTo(n,i,r,s,a,l)},t.rect=function(n,i,r,s){e.rect(n,i,r,s),this.__originalRect(n,i,r,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class q${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,n,i)):(r=this.canvasFactory.create(n,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function Of(t,e,n,i,r,s,a,l,c,d){const[f,p,g,y,S,w]=Pt(t);if(p===0&&g===0){const C=a*f+S,T=Math.round(C),N=l*y+w,R=Math.round(N),I=(a+c)*f+S,O=Math.abs(Math.round(I)-T)||1,F=(l+d)*y+w,z=Math.abs(Math.round(F)-R)||1;return t.setTransform(Math.sign(f),0,0,Math.sign(y),T,R),t.drawImage(e,n,i,r,s,0,0,O,z),t.setTransform(f,p,g,y,S,w),[O,z]}if(f===0&&y===0){const C=l*g+S,T=Math.round(C),N=a*p+w,R=Math.round(N),I=(l+d)*g+S,O=Math.abs(Math.round(I)-T)||1,F=(a+c)*p+w,z=Math.abs(Math.round(F)-R)||1;return t.setTransform(0,Math.sign(p),Math.sign(g),0,T,R),t.drawImage(e,n,i,r,s,0,0,z,O),t.setTransform(f,p,g,y,S,w),[z,O]}t.drawImage(e,n,i,r,s,a,l,c,d);const E=Math.hypot(f,p),x=Math.hypot(g,y);return[E*c,x*d]}class y1{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=V0;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Qt.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,n,i){i?.(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=vl.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=xn.FILL,n=null){const i=this.minMax.slice();if(e===xn.STROKE){n||mt("Stroke bounding box must include transform."),he.singularValueDecompose2dScale(n,Ai);const r=Ai[0]*this.lineWidth/2,s=Ai[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const e=he.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(vl,0)}getClippedPathBoundingBox(e=xn.FILL,n=null){return he.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function b1(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,i=e.width,r=n%ai,s=(n-r)/ai,a=r===0?s:s+1,l=t.createImageData(i,ai);let c=0,d;const f=e.data,p=l.data;let g,y,S,w;if(e.kind===rh.GRAYSCALE_1BPP){const E=f.byteLength,x=new Uint32Array(p.buffer,0,p.byteLength>>2),C=x.length,T=i+7>>3,N=4294967295,R=en.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(S=g<s?ai:r,d=0,y=0;y<S;y++){const I=E-c;let O=0;const F=I>T?i:I*8-7,z=F&-8;let $=0,G=0;for(;O<z;O+=8)G=f[c++],x[d++]=G&128?N:R,x[d++]=G&64?N:R,x[d++]=G&32?N:R,x[d++]=G&16?N:R,x[d++]=G&8?N:R,x[d++]=G&4?N:R,x[d++]=G&2?N:R,x[d++]=G&1?N:R;for(;O<F;O++)$===0&&(G=f[c++],$=128),x[d++]=G&$?N:R,$>>=1}for(;d<C;)x[d++]=0;t.putImageData(l,0,g*ai)}}else if(e.kind===rh.RGBA_32BPP){for(y=0,w=i*ai*4,g=0;g<s;g++)p.set(f.subarray(c,c+w)),c+=w,t.putImageData(l,0,y),y+=ai;g<a&&(w=i*r*4,p.set(f.subarray(c,c+w)),t.putImageData(l,0,y))}else if(e.kind===rh.RGB_24BPP)for(S=ai,w=i*S,g=0;g<a;g++){for(g>=s&&(S=r,w=i*S),d=0,y=w;y--;)p[d++]=f[c++],p[d++]=f[c++],p[d++]=f[c++],p[d++]=255;t.putImageData(l,0,g*ai)}else throw new Error(`bad image kind: ${e.kind}`)}function A1(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,i=e.width,r=n%ai,s=(n-r)/ai,a=r===0?s:s+1,l=t.createImageData(i,ai);let c=0;const d=e.data,f=l.data;for(let p=0;p<a;p++){const g=p<s?ai:r;({srcPos:c}=z$({src:d,srcPos:c,dest:f,width:i,height:g,nonBlackColor:0})),t.putImageData(l,0,p*ai)}}function ju(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)t[i]!==void 0&&(e[i]=t[i]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function kf(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function S1(t,e){if(e)return!0;he.singularValueDecompose2dScale(t,Ai);const n=Math.fround(Ir.pixelRatio*Rl.PDF_TO_CSS_UNITS);return Ai[0]<=n&&Ai[1]<=n}const V$=["butt","round","square"],$$=["miter","round","bevel"],j$={},w1={};class xl{constructor(e,n,i,r,s,{optionalContentConfig:a,markedContentStack:l=null},c,d,f){this.ctx=e,this.current=new y1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new q$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,n,i=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):i}beginDrawing({transform:e,viewport:n,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),kf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(e,n,i,r,s){const a=e.argsArray,l=e.fnArray;let c=n||0;const d=a.length;if(d===c)return c;const f=d-c>v1&&typeof i=="function",p=f?Date.now()+H$:0;let g=0;const y=this.commonObjs,S=this.objs;let w,E;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(!s||s(c))if(w=l[c],E=a[c]??null,w!==hc.dependency)E===null?this[w](c):this[w](c,...E);else for(const x of E){this.dependencyTracker?.recordNamedData(x,c);const C=x.startsWith("g_")?y:S;if(!C.has(x))return C.get(x,i),c}if(c++,c===d)return c;if(f&&++g>v1){if(Date.now()>p)return i(),c;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),l=i,c=r,d="prescale1",f,p;for(;s>2&&l>1||a>2&&c>1;){let g=l,y=c;s>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/g),a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/y),f=this.cachedCanvases.getCanvas(d,g,y),p=f.context,p.clearRect(0,0,g,y),p.drawImage(e,0,0,l,c,0,0,g,y),e=f.canvas,l=g,c=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,n){const i=this.ctx,{width:r,height:s}=n,a=this.current.fillColor,l=this.current.patternFill,c=Pt(i);let d,f,p,g;if((n.bitmap||n.data)&&n.count>1){const $=n.bitmap||n.data.buffer;f=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get($),d||(d=new Map,this._cachedBitmapsMap.set($,d));const G=d.get(f);if(G&&!l){const X=Math.round(Math.min(c[0],c[2])+c[4]),le=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,Ui.transformAndFill),{canvas:G,offsetX:X,offsetY:le}}p=G}p||(g=this.cachedCanvases.getCanvas("maskCanvas",r,s),A1(g.context,n));let y=he.transform(c,[1/r,0,0,-1/s,0,0]);y=he.transform(y,[1,0,0,1,0,-s]);const S=vl.slice();he.axialAlignedBoundingBox([0,0,r,s],y,S);const[w,E,x,C]=S,T=Math.round(x-w)||1,N=Math.round(C-E)||1,R=this.cachedCanvases.getCanvas("fillCanvas",T,N),I=R.context,O=w,F=E;I.translate(-O,-F),I.transform(...y),p||(p=this._scaleImage(g.canvas,_r(I)),p=p.img,d&&l&&d.set(f,p)),I.imageSmoothingEnabled=S1(Pt(I),n.interpolate),Of(I,p,0,0,p.width,p.height,0,0,r,s),I.globalCompositeOperation="source-in";const z=he.transform(_r(I),[1,0,0,1,-O,-F]);return I.fillStyle=l?a.getPattern(i,this,z,xn.FILL,e):a,I.fillRect(0,0,r,s),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,R.canvas)),this.dependencyTracker?.recordDependencies(e,Ui.transformAndFill),{canvas:R.canvas,offsetX:Math.round(O),offsetY:Math.round(F)}}setLineWidth(e,n){this.dependencyTracker?.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=V$[n]}setLineJoin(e,n){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=$$[n]}setMiterLimit(e,n){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,i){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(n),r.lineDashOffset=i)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){for(const[i,r]of n)switch(i){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,n,i);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),ju(this.suspendedCtx,a),G$(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ju(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,i,r){const s=r[0],a=r[1],l=r[2]-s,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(n.context,i,l,c,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,n,i,r,s,a,l,c,d,f,p){let g=e.canvas,y=c-f,S=d-p;if(a)if(y<0||S<0||y+i>g.width||S+r>g.height){const E=this.cachedCanvases.getCanvas("maskExtension",i,r),x=E.context;x.drawImage(g,-y,-S),x.globalCompositeOperation="destination-atop",x.fillStyle=a,x.fillRect(0,0,i,r),x.globalCompositeOperation="source-over",g=E.canvas,y=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,S,i,r),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(y,S,i,r),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?n.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,d,i,r),n.clip(w),n.globalCompositeOperation="destination-in",n.drawImage(g,y,S,i,r,c,d,i,r),n.restore()}save(e){this.inSMaskMode&&ju(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ju(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,i,r,s,a,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(n,i,r,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,i,r){let[s]=i;if(!r){s||=i[0]=new Path2D,this[n](e,s);return}if(this.dependencyTracker!==null){const a=n===hc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=i[0]=fD(s)),he.axialAlignedBoundingBox(r,Pt(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,i=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,_r(r),xn.STROKE,e),a){const l=new Path2D;l.addPath(n,r.getTransform().invertSelf().multiplySelf(a)),n=l}this.rescaleAndStroke(n,!1),r.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(e,Ui.stroke),i&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(xn.STROKE,Pt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,i=!0){const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const d=s.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=s.getPattern(r,this,_r(r),xn.FILL,e),d){const f=new Path2D;f.addPath(n,r.getTransform().invertSelf().multiplySelf(d)),n=f}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(n,"evenodd"),this.pendingEOFill=!1):r.fill(n)),this.dependencyTracker?.recordDependencies(e,Ui.fill),l&&(r.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,n,c)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(e,Ui.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=j$}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=w1}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;n!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(n!==void 0){const r=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:d,path:f}of n)f&&r.addPath(f,new DOMMatrix(a).preMultiplySelf(s).translate(l,c).scale(d,-d));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,n){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const r=this.commonObjs.get(n),s=this.current;if(!r)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=r.fontMatrix||V0,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ke("Invalid font matrix for font "+n),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const a=r.loadedName||"sans-serif",l=r.systemFontInfo?.css||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const d=r.italic?"italic":"normal";let f=i;i<m1?f=m1:i>g1&&(f=g1),this.current.fontSizeScale=i/f,this.ctx.font=`${d} ${c} ${f}px ${l}`}setTextRenderingMode(e,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,n,i){this.setLeading(e,-i),this.moveText(e,n,i)}setTextMatrix(e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=n,i.textMatrixScale=Math.hypot(n[0],n[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,n,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(n)),r}paintChar(e,n,i,r,s,a){const l=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&Qt.FILL_STROKE_MASK,y=!!(f&Qt.ADD_TO_PATH_FLAG),S=c.patternFill&&!d.missingFile,w=c.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||y||S||w)&&!d.missingFile&&(E=d.getPathGenerator(this.commonObjs,n)),E&&(d.disableFontFace||S||w)){l.save(),l.translate(i,r),l.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,l,d);let x;if(g===Qt.FILL||g===Qt.FILL_STROKE)if(s){x=l.getTransform(),l.setTransform(...s);const C=this.#i(E,x,s);l.fill(C)}else l.fill(E);if(g===Qt.STROKE||g===Qt.FILL_STROKE)if(a){x||=l.getTransform(),l.setTransform(...a);const{a:C,b:T,c:N,d:R}=x,I=he.inverseTransform(a),O=he.transform([C,T,N,R,0,0],I);he.singularValueDecompose2dScale(O,Ai),l.lineWidth*=Math.max(Ai[0],Ai[1])/p,l.stroke(this.#i(E,x,a))}else l.lineWidth/=p,l.stroke(E);l.restore()}else(g===Qt.FILL||g===Qt.FILL_STROKE)&&(l.fillText(n,i,r),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r,()=>l.measureText(n))),(g===Qt.STROKE||g===Qt.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r,()=>l.measureText(n)).recordDependencies(e,Ui.stroke),l.strokeText(n,i,r));y&&((this.pendingTextPaths||=[]).push({transform:Pt(l),x:i,y:r,fontSize:p,path:E}),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){i=!0;break}return Le(this,"isFontSubpixelAAEnabled",i)}showText(e,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ui.showText).resetBBox(e),this.current.textRenderingMode&Qt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(e,n),this.dependencyTracker?.recordShowTextOperation(e);return}const s=i.fontSize;if(s===0){this.dependencyTracker?.recordOperation(e);return}const a=this.ctx,l=i.fontSizeScale,c=i.charSpacing,d=i.wordSpacing,f=i.fontDirection,p=i.textHScale*f,g=n.length,y=r.vertical,S=y?1:-1,w=r.defaultVMetrics,E=s*i.fontMatrix[0],x=i.textRenderingMode===Qt.FILL&&!r.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),f>0?a.scale(p,-1):a.scale(p,1);let C,T;const N=i.textRenderingMode&Qt.FILL_STROKE_MASK,R=N===Qt.FILL||N===Qt.FILL_STROKE,I=N===Qt.STROKE||N===Qt.FILL_STROKE;if(R&&i.patternFill){a.save();const G=i.fillColor.getPattern(a,this,_r(a),xn.FILL,e);C=Pt(a),a.restore(),a.fillStyle=G}if(I&&i.patternStroke){a.save();const G=i.strokeColor.getPattern(a,this,_r(a),xn.STROKE,e);T=Pt(a),a.restore(),a.strokeStyle=G}let O=i.lineWidth;const F=i.textMatrixScale;if(F===0||O===0?I&&(O=this.getSinglePixelWidth()):O/=F,l!==1&&(a.scale(l,l),O/=l),a.lineWidth=O,r.isInvalidPDFjsFont){const G=[];let X=0;for(const oe of n)G.push(oe.unicode),X+=oe.width;const le=G.join("");if(a.fillText(le,0,0),this.dependencyTracker!==null){const oe=a.measureText(le);this.dependencyTracker.recordBBox(e,this.ctx,-oe.actualBoundingBoxLeft,oe.actualBoundingBoxRight,-oe.actualBoundingBoxAscent,oe.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=X*E*p,a.restore(),this.compose();return}let z=0,$;for($=0;$<g;++$){const G=n[$];if(typeof G=="number"){z+=S*G*s/1e3;continue}let X=!1;const le=(G.isSpace?d:0)+c,oe=G.fontChar,pe=G.accent;let B,V,re=G.width;if(y){const L=G.vmetric||w,K=-(G.vmetric?L[1]:re*.5)*E,ie=L[2]*E;re=L?-L[0]:re,B=K/l,V=(z+ie)/l}else B=z/l,V=0;let ue;if(r.remeasure&&re>0){ue=a.measureText(oe);const L=ue.width*1e3/s*l;if(re<L&&this.isFontSubpixelAAEnabled){const K=re/L;X=!0,a.save(),a.scale(K,1),B/=K}else re!==L&&(B+=(re-L)/2e3*s/l)}if(this.contentVisible&&(G.isInFont||r.missingFile)){if(x&&!pe)a.fillText(oe,B,V),this.dependencyTracker?.recordCharacterBBox(e,a,ue?{bbox:null}:r,s/l,B,V,()=>ue??a.measureText(oe));else if(this.paintChar(e,oe,B,V,C,T),pe){const L=B+s*pe.offset.x/l,K=V-s*pe.offset.y/l;this.paintChar(e,pe.fontChar,L,K,C,T)}}const Me=y?re*E-le*f:re*E+le*f;z+=Me,X&&a.restore()}y?i.y-=z:i.x+=z*p,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,n){const i=this.ctx,r=this.current,s=r.font,a=r.fontSize,l=r.fontDirection,c=s.vertical?1:-1,d=r.charSpacing,f=r.wordSpacing,p=r.textHScale*l,g=r.fontMatrix||V0,y=n.length,S=r.textRenderingMode===Qt.INVISIBLE;let w,E,x,C;if(S||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(p,l);const T=this.dependencyTracker;for(this.dependencyTracker=T?new bh(T,e):null,w=0;w<y;++w){if(E=n[w],typeof E=="number"){C=c*E*a/1e3,this.ctx.translate(C,0),r.x+=C*p;continue}const N=(E.isSpace?f:0)+d,R=s.charProcOperatorList[E.operatorListId];R?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...g),this.executeOperatorList(R),this.restore()):ke(`Type3 character "${E.operatorListId}" is not available.`);const I=[E.width,0];he.applyTransform(I,g),x=I[0]*a+N,i.translate(x,0),r.x+=x*p}i.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,n,i){}setCharWidthAndBounds(e,n,i,r,s,a,l){const c=new Path2D;c.rect(r,s,a-r,l-s),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,r,a,s,l).recordClipBox(e,this.ctx,r,a,s,l),this.endPath(e)}getColorN_Pattern(e,n){let i;if(n[0]==="TilingPattern"){const r=this.baseTransform||Pt(this.ctx),s={createCanvasGraphics:(a,l)=>new xl(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new bh(this.dependencyTracker,l,!0):null)};i=new _A(n,this.ctx,s,r)}else i=this._getPattern(e,n[1],n[2]);return i}setStrokeColorN(e,...n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,i=null){let r;return this.cachedPatterns.has(n)?r=this.cachedPatterns.get(n):(r=F$(this.getObject(e,n)),this.cachedPatterns.set(n,r)),i&&(r.matrix=i),r}shadingFill(e,n){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,n);i.fillStyle=r.getPattern(i,this,_r(i),xn.SHADING,e);const s=_r(i);if(s){const{width:a,height:l}=i.canvas,c=vl.slice();he.axialAlignedBoundingBox([0,0,a,l],s,c);const[d,f,p,g]=c;this.ctx.fillRect(d,f,p-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ui.transform).recordDependencies(e,Ui.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(e,n,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=Pt(this.ctx),i)){he.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,s,a,l]=i,c=new Path2D;c.rect(r,s,a-r,l-s),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,r,a,s,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;n.isolated||Ep("TODO: Support non-isolated groups."),n.knockout&&ke("Knockout groups not supported.");const r=Pt(i);if(n.matrix&&i.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=vl.slice();he.axialAlignedBoundingBox(n.bbox,Pt(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=he.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;n.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,d,f),y=g.context;y.translate(-l,-c),y.transform(...r);let S=new Path2D;const[w,E,x,C]=n.bbox;if(S.rect(w,E,x-w,C-E),n.matrix){const T=new Path2D;T.addPath(S,new DOMMatrix(n.matrix)),S=T}y.clip(S),n.smask&&this.smaskStack.push({canvas:g.canvas,context:y,offsetX:l,offsetY:c,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),ju(i,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,n){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=Pt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const a=vl.slice();he.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,n,i,r,s,a){if(this.#e(),kf(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,he.singularValueDecompose2dScale(Pt(this.ctx),Ai);const{viewportScale:d}=this,f=Math.ceil(l*this.outputScaleX*d),p=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(n,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ai[0],0,0,-Ai[1],0,c*Ai[1]),kf(this.ctx)}else{kf(this.ctx),this.endPath(e);const d=new Path2D;d.rect(i[0],i[1],l,c),this.ctx.clip(d)}}this.current=new y1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){if(!this.contentVisible)return;const i=n.count;n=this.getObject(e,n.data,n),n.count=i;const r=this.ctx,s=this._createMaskCanvas(e,n),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,i,r=0,s=0,a,l){if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const c=this.ctx;c.save();const d=Pt(c);c.transform(i,r,s,a,0,0);const f=this._createMaskCanvas(e,n);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,g=l.length;p<g;p+=2){const y=he.transform(d,[i,r,s,a,l[p],l[p+1]]);c.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,n){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Ui.transformAndFill);for(const a of n){const{data:l,width:c,height:d,transform:f}=a,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),g=p.context;g.save();const y=this.getObject(e,l,a);A1(g,y),g.globalCompositeOperation="source-in",g.fillStyle=s?r.getPattern(g,this,_r(i),xn.FILL,e):r,g.fillRect(0,0,c,d),g.restore(),i.save(),i.transform(...f),i.scale(1,-1),Of(i,p.canvas,0,0,c,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,c,0,d),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const i=this.getObject(e,n);if(!i){ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,n,i,r,s){if(!this.contentVisible)return;const a=this.getObject(e,n);if(!a){ke("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let f=0,p=s.length;f<p;f+=2)d.push({transform:[i,0,0,r,s[f],s[f+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,n){if(!this.contentVisible)return;const i=n.width,r=n.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/i,-1/r);let l;if(n.bitmap)l=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)l=n;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,r).context;b1(f,n),l=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(l,_r(s));s.imageSmoothingEnabled=S1(Pt(s),n.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,Ui.imageXObject).recordOperation(e),Of(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,i){if(!this.contentVisible)return;const r=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const a=n.width,l=n.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;b1(d,n),s=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const a of i)r.save(),r.transform(...a.transform),r.scale(1,-1),Of(r,s,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ui.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,i){}beginMarkedContent(e,n){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,i){this.dependencyTracker?.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===w1?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:i,c:r,d:s}=this.ctx.getTransform();let a,l;if(i===0&&r===0){const c=Math.abs(n),d=Math.abs(s);if(c===d)if(e===0)a=l=1/c;else{const f=c*e;a=l=f<1?1/f:1}else if(e===0)a=1/c,l=1/d;else{const f=c*e,p=d*e;a=f<1?1/f:1,l=p<1?1/p:1}}else{const c=Math.abs(n*s-i*r),d=Math.hypot(n,i),f=Math.hypot(r,s);if(e===0)a=f/c,l=d/c;else{const p=e*c;a=f>p?f/p:1,l=d>p?d/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:i,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(r||1)*s,i.stroke(e);return}const l=i.getLineDash();n&&i.save(),i.scale(s,a),Yv.a=1/s,Yv.d=1/a;const c=new Path2D;if(c.addPath(e,Yv),l.length>0){const d=Math.max(s,a);i.setLineDash(l.map(f=>f/d)),i.lineDashOffset/=d}i.lineWidth=r||1,i.stroke(c),n&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in hc)xl.prototype[t]!==void 0&&(xl.prototype[hc[t]]=xl.prototype[t]);class Tl{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class Y${#e;#t;constructor({parsedData:e,rawData:n}){this.#e=e,this.#t=n}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const dl=Symbol("INTERNAL");class K${#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:n,intent:i,usage:r,rbGroups:s}){this.#e=!!(e&yi.DISPLAY),this.#t=!!(e&yi.PRINT),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:n}=this.usage;return this.#e?n?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,n,i=!1){e!==dl&&mt("Internal method `_setVisible` called."),this.#i=i,this.#n=n}}class W${#e=null;#t=new Map;#i=null;#n=null;constructor(e,n=yi.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new K$(n,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(dl,!1);for(const i of e.on)this.#t.get(i)._setVisible(dl,!0);for(const i of e.off)this.#t.get(i)._setVisible(dl,!1);this.#i=this.getHash()}}#a(e){const n=e.length;if(n<2)return!0;const i=e[0];for(let r=1;r<n;r++){const s=e[r];let a;if(Array.isArray(s))a=this.#a(s);else if(this.#t.has(s))a=this.#t.get(s).visible;else return ke(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Ep("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return ke(`Unknown optional content policy ${e.policy}.`),!0}return ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,i=!0){const r=this.#t.get(e);if(!r){ke(`Optional content group not found: ${e}`);return}if(i&&n&&r.rbGroups.length)for(const s of r.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(dl,!1,!0);r._setVisible(dl,!!n,!0),this.#e=null}setOCGState({state:e,preserveRB:n}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!s.visible,n);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new pD;for(const[n,i]of this.#t)e.update(`${n}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class X${constructor(e,{disableRange:n=!1,disableStream:i=!1}){We(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,s?.length>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});We(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){We(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new J$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new Q$(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class J${constructor(e,n,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=vA(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q${constructor(e,n,i){this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Z$(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let f=l(n);return f=unescape(f),f=c(f),f=d(f),s(f)}if(n=a(t),n){const f=d(n);return s(f)}if(n=i("filename","i").exec(t),n){n=n[1];let f=l(n);return f=d(f),s(f)}function i(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const g=new TextDecoder(f,{fatal:!0}),y=kc(p);p=g.decode(y),e=!1}catch{}}return p}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function a(f){const p=[];let g;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(f))!==null;){let[,w,E,x]=g;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[E,x]}const S=[];for(let w=0;w<p.length&&w in p;++w){let[E,x]=p[w];x=l(x),E&&(x=unescape(x),w===0&&(x=c(x))),S.push(x)}return S.join("")}function l(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let g=0;g<p.length;++g){const y=p[g].indexOf('"');y!==-1&&(p[g]=p[g].slice(0,y),p.length=g+1),p[g]=p[g].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function c(f){const p=f.indexOf("'");if(p===-1)return f;const g=f.slice(0,p),S=f.slice(p+1).replace(/^[^']*'/,"");return r(g,S)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,g,y,S){if(y==="q"||y==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),r(g,S);try{S=atob(S)}catch{}return r(g,S)})}return""}function SD(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const i in e){const r=e[i];r!==void 0&&n.append(i,r)}return n}function Cp(t){return URL.parse(t)?.origin??null}function wD({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*n)||i||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function _D(t){const e=t.get("Content-Disposition");if(e){let n=Z$(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(vA(n))return n}return null}function zc(t,e){return new yh(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function ED(t){return t===200||t===206}function xD(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function TD(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ke(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class ej{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=SD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return We(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new tj(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new nj(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class tj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const i=new Headers(e.headers),r=n.url;fetch(r,xD(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=Cp(s.url),!ED(s.status))throw zc(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:l,suggestedLength:c}=wD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=_D(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new la("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:TD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class nj{constructor(e,n,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${i-1}`);const a=r.url;fetch(a,xD(s,this._withCredentials,this._abortController)).then(l=>{const c=Cp(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!ED(l.status))throw zc(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:TD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Kv=200,Wv=206;function ij(t){const e=t.response;return typeof e!="string"?e:kc(e).buffer}class rj{_responseOrigin=null;constructor({url:e,httpHeaders:n,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=SD(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,a]of this.headers)n.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Wv):r.expectedStatus=Kv,n.responseType="arraybuffer",We(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,i),n.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,n.send(null),i}onProgress(e,n){const i=this.pendingRequests[e];i&&i.onProgress?.(n)}onStateChange(e,n){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||Kv;if(!(s===Kv&&i.expectedStatus===Wv)&&s!==i.expectedStatus){i.onError(r.status);return}const l=ij(r);if(s===Wv){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?i.onDone({begin:parseInt(d[1],10),chunk:l}):(ke('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class sj{constructor(e){this._source=e,this._manager=new rj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return We(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new aj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const i=new oj(this._manager,e,n);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class aj{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=Cp(n.responseURL);const i=n.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=wD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=_D(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=zc(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class oj{constructor(e,n,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Cp(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=zc(e,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const lj=/^[a-z][a-z0-9\-+.]+:/i;function uj(t){if(lj.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class cj{constructor(e){this.source=e,this.url=uj(e.url),We(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return We(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new dj(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new fj(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=zc(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new la("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fj{constructor(e,n,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Yu=Symbol("INITIAL_DATA");class CD{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Yu}}get(e,n=null){if(n){const r=this.#t(e);return r.promise.then(()=>n(r.data)),null}const i=this.#e[e];if(!i||i.data===Yu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const n=this.#e[e];return!!n&&n.data!==Yu}delete(e){const n=this.#e[e];return!n||n.data===Yu?!1:(delete this.#e[e],!0)}resolve(e,n=null){const i=this.#t(e);i.data=n,i.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:n}=this.#e[e];n!==Yu&&(yield[e,n])}}}const hj=1e5,_1=30;class bi{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#r=0;#o=0;#u=null;#l=null;#f=0;#d=0;#h=Object.create(null);#g=[];#m=null;#c=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#x=new WeakMap;static#_=null;static#S=new Set;constructor({textContentSource:e,container:n,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=n,this.#d=i.scale*Ir.pixelRatio,this.#f=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:a,pageY:l}=i.rawDims;this.#v=[1,0,0,-1,-a,l+s],this.#o=r,this.#r=s,bi.#P(),n.style.setProperty("--min-font-size",bi.#_),no(n,i),this.#e.promise.finally(()=>{bi.#S.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=en.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:n,done:i})=>{if(i){this.#e.resolve();return}this.#a??=n.lang,Object.assign(this.#h,n.styles),this.#C(n.items),e()},this.#e.reject)};return this.#u=this.#m.getReader(),bi.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:n=null}){const i=e.scale*Ir.pixelRatio,r=e.rotation;if(r!==this.#f&&(n?.(),this.#f=r,no(this.#l,{rotation:r})),i!==this.#d){n?.(),this.#d=i;const s={div:null,properties:null,ctx:bi.#R(this.#a)};for(const a of this.#c)s.properties=this.#p.get(a),s.div=a,this.#E(s)}}cancel(){const e=new la("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#C(e){if(this.#i)return;this.#s.ctx??=bi.#R(this.#a);const n=this.#c,i=this.#g;for(const r of e){if(n.length>hj){ke("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),s.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(r.str),this.#A(r)}}#A(e){const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(n);const r=he.transform(this.#v,e.transform);let s=Math.atan2(r[1],r[0]);const a=this.#h[e.fontName];a.vertical&&(s+=Math.PI/2);let l=this.#n&&a.fontSubstitution||a.fontFamily;l=bi.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*bi.#U(l,a,this.#a);let f,p;s===0?(f=r[4],p=r[5]-d):(f=r[4]+d*Math.sin(s),p=r[5]-d*Math.cos(s));const g=n.style;g.left=`${(100*f/this.#o).toFixed(2)}%`,g.top=`${(100*p/this.#r).toFixed(2)}%`,g.setProperty("--font-height",`${c.toFixed(2)}px`),g.fontFamily=l,i.fontSize=c,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#n&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);S!==w&&Math.max(S,w)/Math.min(S,w)>1.5&&(y=!0)}if(y&&(i.canvasWidth=a.vertical?e.height:e.width),this.#p.set(n,i),this.#s.div=n,this.#s.properties=i,this.#E(this.#s),i.hasText&&this.#t.append(n),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#E(e){const{div:n,properties:i,ctx:r}=e,{style:s}=n;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=i;bi.#M(r,c*this.#d,a);const{width:d}=r.measureText(n.textContent);d>0&&s.setProperty("--scale-x",l*this.#d/d)}i.angle!==0&&s.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#R(e=null){let n=this.#y.get(e||="");if(!n){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),n=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,n),this.#x.set(n,{size:0,family:""})}return n}static#M(e,n,i){const r=this.#x.get(e);n===r.size&&i===r.family||(e.font=`${n}px ${i}`,r.size=n,r.family=i)}static#P(){if(this.#_!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#_=e.getBoundingClientRect().height,e.remove()}static#U(e,n,i){const r=this.#b.get(e);if(r)return r;const s=this.#R(i);s.canvas.width=s.canvas.height=_1,this.#M(s,_1,e);const a=s.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let d=.8;return l?d=l/(l+c):(en.platform.isFirefox&&ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),this.#b.set(e,d),d}}const pj=100;function MD(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new EA,{docId:n}=e,i=t.url?S$(t.url):null,r=t.data?w$(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,l=t.password??null,c=t.range instanceof PD?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let f=t.worker instanceof mc?t.worker:null;const p=t.verbosity,g=typeof t.docBaseUrl=="string"&&!xp(t.docBaseUrl)?t.docBaseUrl:null,y=Rf(t.cMapUrl),S=t.cMapPacked!==!1,w=t.CMapReaderFactory||(qn?R$:u1),E=Rf(t.iccUrl),x=Rf(t.standardFontDataUrl),C=t.StandardFontDataFactory||(qn?N$:c1),T=Rf(t.wasmUrl),N=t.WasmFactory||(qn?I$:d1),R=t.stopAtErrors!==!0,I=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,O=t.isEvalSupported!==!1,F=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!qn,z=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!qn&&(en.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,G=typeof t.disableFontFace=="boolean"?t.disableFontFace:qn,X=t.fontExtraProperties===!0,le=t.enableXfa===!0,oe=t.ownerDocument||globalThis.document,pe=t.disableRange===!0,B=t.disableStream===!0,V=t.disableAutoFetch===!0,re=t.pdfBug===!0,ue=t.CanvasFactory||(qn?P$:T$),Me=t.FilterFactory||(qn?M$:C$),L=t.enableHWA===!0,K=t.useWasm!==!1,ie=c?c.length:t.length??NaN,ce=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!qn&&!G,Ae=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(w===u1&&C===c1&&N===d1&&y&&x&&T&&sc(y,document.baseURI)&&sc(x,document.baseURI)&&sc(T,document.baseURI)),xe=null;K6(p);const me={canvasFactory:new ue({ownerDocument:oe,enableHWA:L}),filterFactory:new Me({docId:n,ownerDocument:oe}),cMapReaderFactory:Ae?null:new w({baseUrl:y,isCompressed:S}),standardFontDataFactory:Ae?null:new C({baseUrl:x}),wasmFactory:Ae?null:new N({baseUrl:T})};f||(f=mc.create({verbosity:p,port:Tl.workerPort}),e._worker=f);const lt={docId:n,apiVersion:"5.4.530",data:r,password:l,disableAutoFetch:V,rangeChunkSize:d,length:ie,docBaseUrl:g,enableXfa:le,evaluatorOptions:{maxImageSize:I,disableFontFace:G,ignoreErrors:R,isEvalSupported:O,isOffscreenCanvasSupported:F,isImageDecoderSupported:z,canvasMaxAreaInBytes:$,fontExtraProperties:X,useSystemFonts:ce,useWasm:K,useWorkerFetch:Ae,cMapUrl:y,iccUrl:E,standardFontDataUrl:x,wasmUrl:T}},Z={ownerDocument:oe,pdfBug:re,styleElement:xe,loadingParams:{disableAutoFetch:V,enableXfa:le}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Re=f.messageHandler.sendWithPromise("GetDocRequest",lt,r?[r.buffer]:null);let Ie;if(c)Ie=new X$(c,{disableRange:pe,disableStream:B});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ae=sc(i)?ej:qn?cj:sj;Ie=new ae({url:i,length:ie,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:pe,disableStream:B})}return Re.then(ae=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ht=new ac(n,ae,f.port),ze=new vj(ht,e,Ie,Z,me,L);e._transport=ze,ht.send("Ready",null)})}).catch(e._capability.reject),e}class EA{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${EA.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class PD{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,n,i=!1,r=null){this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,n){for(const i of this.#a)i(e,n)}onDataProgress(e,n){this.#e.promise.then(()=>{for(const i of this.#n)i(e,n)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const n of this.#i)n(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,n){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mj{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class gj{#e=!1;constructor(e,n,i,r=!1){this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=r?new n1:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new CD,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Uc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:n=e.canvas,viewport:i,intent:r="display",annotationMode:s=ia.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:g=!1,recordOperations:y=!1,operationsFilter:S=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(r,s,p,g),{renderingIntent:E,cacheKey:x}=w;this.#e=!1,c||=this._transport.getOptionalContentConfig(E);let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(E&yi.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(y||N),I=z=>{if(C.renderTasks.delete(O),R){const $=O.gfx?.dependencyTracker.take();$&&(O.stepper&&O.stepper.setOperatorBBoxes($,O.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=$))}T&&(this.#e=!0),this.#t(),z?(O.capability.reject(z),this._abortOperatorList({intentState:C,reason:z instanceof Error?z:new Error(z)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new yl({callback:I,params:{canvas:n,canvasContext:e,dependencyTracker:R?new O$(n,C.operatorList.length,N):null,viewport:i,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:S});(C.renderTasks||=new Set).add(O);const F=O.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([z,$])=>{if(this.destroyed){I();return}if(this._stats?.time("Rendering"),!($.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:z,optionalContentConfig:$}),O.operatorListChanged()}).catch(I),F}getOperatorList({intent:e="display",annotationMode:n=ia.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,n,i,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>pc.textContent(i));const n=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:c,done:d}){if(d){i(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),s()},r)}const a=n.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const n=this.#t();return e&&n&&(this._stats&&=new n1),n}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let i=0,r=e.length;i<r;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),d=this._intentStates.get(n);d.streamReader=c;const f=()=>{c.read().then(({value:p,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),f())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:n,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof gA){let r=pj;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},r);return}}if(e.streamReader.cancel(new la(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var sa,nr,us,Xa,pp,Ja,Qa,jn,sh,RD,ND,oc,Pl,ah;const xt=class xt{constructor({name:e=null,port:n=null,verbosity:i=W6()}={}){Sr(this,jn);Sr(this,sa,Promise.withResolvers());Sr(this,nr,null);Sr(this,us,null);Sr(this,Xa,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,n){if(Et(xt,Qa).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Et(xt,Qa).set(n,this),wr(this,jn,RD).call(this,n)}else wr(this,jn,ND).call(this)}get promise(){return Et(this,sa).promise}get port(){return Et(this,us)}get messageHandler(){return Et(this,nr)}destroy(){this.destroyed=!0,Et(this,Xa)?.terminate(),ri(this,Xa,null),Et(xt,Qa).delete(Et(this,us)),ri(this,us,null),Et(this,nr)?.destroy(),ri(this,nr,null)}static create(e){const n=Et(this,Qa).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new xt(e)}static get workerSrc(){if(Tl.workerSrc)return Tl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>Et(this,Pl,ah)?Et(this,Pl,ah):(await import(this.workerSrc)).WorkerMessageHandler)())}};sa=new WeakMap,nr=new WeakMap,us=new WeakMap,Xa=new WeakMap,pp=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,jn=new WeakSet,sh=function(){Et(this,sa).resolve(),Et(this,nr).send("configure",{verbosity:this.verbosity})},RD=function(e){ri(this,us,e),ri(this,nr,new ac("main","worker",e)),Et(this,nr).on("ready",()=>{}),wr(this,jn,sh).call(this)},ND=function(){if(Et(xt,Ja)||Et(xt,Pl,ah)){wr(this,jn,oc).call(this);return}let{workerSrc:e}=xt;try{xt._isSameOrigin(window.location,e)||(e=xt._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),i=new ac("main","worker",n),r=()=>{s.abort(),i.destroy(),n.terminate(),this.destroyed?Et(this,sa).reject(new Error("Worker was destroyed")):wr(this,jn,oc).call(this)},s=new AbortController;n.addEventListener("error",()=>{Et(this,Xa)||r()},{signal:s.signal}),i.on("test",l=>{if(s.abort(),this.destroyed||!l){r();return}ri(this,nr,i),ri(this,us,n),ri(this,Xa,n),wr(this,jn,sh).call(this)}),i.on("ready",l=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{wr(this,jn,oc).call(this)}});const a=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};a();return}catch{Ep("The worker has been disabled.")}wr(this,jn,oc).call(this)},oc=function(){Et(xt,Ja)||(ke("Setting up fake worker."),ri(xt,Ja,!0)),xt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Et(this,sa).reject(new Error("Worker was destroyed"));return}const n=new x$;ri(this,us,n);const i=`fake${tT(xt,pp)._++}`,r=new ac(i+"_worker",i,n);e.setup(r,n),ri(this,nr,new ac(i,i+"_worker",n)),wr(this,jn,sh).call(this)}).catch(e=>{Et(this,sa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Pl=new WeakSet,ah=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Sr(xt,Pl),Sr(xt,pp,0),Sr(xt,Ja,!1),Sr(xt,Qa,new WeakMap),qn&&(ri(xt,Ja,!0),Tl.workerSrc||="./pdf.worker.mjs"),xt._isSameOrigin=(e,n)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const r=new URL(n,i);return i.origin===r.origin},xt._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},xt.fromPort=e=>{if(o$("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return xt.create(e)};let mc=xt;class vj{#e=new Map;#t=new Map;#i=new Map;#n=new Map;#a=null;constructor(e,n,i,r,s,a){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new CD,this.fontLoader=new y$({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#s(e,n=null){const i=this.#e.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,r),r}get annotationStorage(){return Le(this,"annotationStorage",new AA)}getRenderingIntent(e,n=ia.ENABLE,i=null,r=!1,s=!1){let a=yi.DISPLAY,l=X0;switch(e){case"any":a=yi.ANY;break;case"display":break;case"print":a=yi.PRINT;break;default:ke(`getRenderingIntent - invalid intent: ${e}`)}const c=a&yi.PRINT&&i instanceof mD?i:this.annotationStorage;switch(n){case ia.DISABLE:a+=yi.ANNOTATIONS_DISABLE;break;case ia.ENABLE:break;case ia.ENABLE_FORMS:a+=yi.ANNOTATIONS_FORMS;break;case ia.ENABLE_STORAGE:a+=yi.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ke(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(a+=yi.IS_EDITING),s&&(a+=yi.OPLIST);const{ids:d,hash:f}=c.modifiedIds,p=[a,l.hash,f];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),bi.cleanup(),this._networkStream?.cancelAllRequests(new la("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(i,r)=>{We(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}We(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{n.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{We(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:l}){if(l){r.close();return}We(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new mj(i,this))}),e.on("DocException",i=>{n._capability.reject(si(i))}),e.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw si(i);const r=s=>{s instanceof Error?this.#a.reject(s):this.#a.resolve({password:s})};n.onPassword(r,i.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),e.on("DataLoaded",i=>{n.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const p=s.error;ke(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const a=new ft(s),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,c=new b$(a,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:d}=s;We(d,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,g]of p.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new A$(s));break;case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":const f=new un(s);this.commonObjs.resolve(i,f.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{if(this.destroyed)return;const l=this.#t.get(r);if(!l.objs.has(i)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{this.destroyed||n.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,i=this.#i.get(n);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#n.set(s.refStr,e);const a=new gj(n,s,this,this._params.pdfBug);return this.#t.set(n,a),a});return this.#i.set(n,r),r}getPageIndex(e){return J0(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(n=>new W$(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new Y$(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),bi.cleanup()}}cachedPageNumber(e){if(!J0(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(n)??null}}class yj{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}class yl{#e=null;static#t=new WeakSet;constructor({callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:g=null,enableHWA:y=!1,operationsFilter:S=null}){this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=p,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=y,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(yl.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yl.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:s,dependencyTracker:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new xl(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),yl.#t.delete(this._canvas),e||=new gA(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yl.#t.delete(this._canvas),this.callback())))}}const ID="5.4.530",bj="50cc4adac";class Hi{#e=null;#t=null;#i;#n=null;#a=!1;#s=!1;#r=null;#o;#u=null;#l=null;static#f=null;static get _keyboardManager(){return Le(this,"_keyboardManager",new Fc([[["Escape","mac+Escape"],Hi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Hi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Hi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Hi.prototype._moveToPrevious],[["Home","mac+Home"],Hi.prototype._moveToBeginning],[["End","mac+End"],Hi.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#s=!1,this.#r=e):this.#s=!0,this.#l=e?._uiManager||n,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Hi.#f||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const n=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:n}),e.addEventListener("keydown",this.#g.bind(this),{signal:n});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),n=this.#l._signal;e.addEventListener("contextmenu",ji,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",Hi.#f[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===this.#i,s.addEventListener("click",this.#h.bind(this,r),{signal:n}),e.append(s)}return e.addEventListener("keydown",this.#g.bind(this),{signal:n}),e}#h(e,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const n=e.target.getAttribute("data-color");n&&this.#h(n,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){Hi._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#c.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#d();this.#e.append(n)}#c(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#p){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const n=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=n.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class gc{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,gc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:n,color:i}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",gc.#n[e]),r.addEventListener("input",()=>{this.#i.updateParams(n,r.value)},{signal:this.#i._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function E1(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Ku(t){return Math.max(0,Math.min(255,255*t))}class x1{static CMYK_G([e,n,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ku(e),[e,e,e]}static G_HTML([e]){const n=E1(e);return`#${n}${n}${n}`}static RGB_G([e,n,i]){return["G",.3*e+.59*n+.11*i]}static RGB_rgb(e){return e.map(Ku)}static RGB_HTML(e){return`#${e.map(E1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb([e,n,i,r]){return[Ku(1-Math.min(1,e+r)),Ku(1-Math.min(1,i+r)),Ku(1-Math.min(1,n+r))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,i]){const r=1-e,s=1-n,a=1-i,l=Math.min(r,s,a);return["CMYK",r,s,a,l]}}class Aj{create(e,n,i=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${n}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){mt("Abstract method `_createSVG` called.")}}class Ah extends Aj{_createSVG(e){return document.createElementNS(as,e)}}const Sj=9,io=new WeakSet,wj=new Date().getTimezoneOffset()*60*1e3;class Xv{static create(e){switch(e.data.annotationType){case jt.LINK:return new xA(e);case jt.TEXT:return new Ej(e);case jt.WIDGET:switch(e.data.fieldType){case"Tx":return new xj(e);case"Btn":return e.data.radioButton?new DD(e):e.data.checkBox?new Cj(e):new Mj(e);case"Ch":return new Pj(e);case"Sig":return new Tj(e)}return new po(e);case jt.POPUP:return new eb(e);case jt.FREETEXT:return new OD(e);case jt.LINE:return new Nj(e);case jt.SQUARE:return new Ij(e);case jt.CIRCLE:return new Dj(e);case jt.POLYLINE:return new kD(e);case jt.CARET:return new kj(e);case jt.INK:return new TA(e);case jt.POLYGON:return new Oj(e);case jt.HIGHLIGHT:return new LD(e);case jt.UNDERLINE:return new Lj(e);case jt.SQUIGGLY:return new Uj(e);case jt.STRIKEOUT:return new Bj(e);case jt.STAMP:return new UD(e);case jt.FILEATTACHMENT:return new Fj(e);default:return new Rt(e)}}}class Rt{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Rt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,n=this.annotationStorage?.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if(n?.length>=8){for(let l=0;l<n.length;l+=8)n[l+1]>a?(a=n[l+1],s=n[l+2]):n[l+1]===a&&(s=Math.max(s,n[l+2]));return[s,a]}if(i?.length>=1){for(const l of i)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>a?(a=l[c+1],s=l[c]):l[c+1]===a&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/i,e[1]=100*(e[1]-a)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${fc}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:n}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:i})||this.annotationStorage.setValue(`${fc}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:n,popup:i}=e;n&&this.#n(n);let r=this.#i?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#i.popup),r&&(r.updateEdited(e),i?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:n},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:c}}}}=this;i?.splice(0,4,...e),n.left=`${100*(e[0]-l)/s}%`,n.top=`${100*(a-e[3]+c)/a}%`,r===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)}_createContainer(e){const{data:n,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof po)&&!(this instanceof xA)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof eb){const{rotation:w}=n;return!n.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:l,height:c}=this;if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const w=n.borderStyle.horizontalCornerRadius,E=n.borderStyle.verticalCornerRadius;if(w>0||E>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;a.borderRadius=C}else if(this instanceof DD){const C=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=C}switch(n.borderStyle.style){case cl.SOLID:a.borderStyle="solid";break;case cl.DASHED:a.borderStyle="dashed";break;case cl.BEVELED:ke("Unimplemented border style: beveled");break;case cl.INSET:ke("Unimplemented border style: inset");break;case cl.UNDERLINE:a.borderBottomStyle="solid";break}const x=n.borderColor||null;x?(this.#t=!0,a.borderColor=he.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):a.borderWidth=0}const d=he.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:p,pageX:g,pageY:y}=r.rawDims;a.left=`${100*(d[0]-g)/f}%`,a.top=`${100*(d[1]-y)/p}%`;const{rotation:S}=n;return n.hasOwnCanvas||S===0?(a.width=`${100*l/f}%`,a.height=`${100*c/p}%`):this.setRotation(S,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),n.style.width=`${100*s/i}%`,n.style.height=`${100*a/r}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,i,r)=>{const s=r.detail[n],a=s[0],l=s.slice(1);r.target.style[i]=x1[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:x1[`${a}_rgb`](l)})};return Le(this,"_commonActions",{display:n=>{const{display:i}=n.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:i}=n.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const i=n.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,n){const i=this._commonActions;for(const r of Object.keys(n.detail))(e[r]||i[r])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const i=this._commonActions;for(const[r,s]of Object.entries(n)){const a=i[r];if(a){const l={detail:{[r]:s},target:e};a(l),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,i,r,s]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,x,C]=e.subarray(2,6);if(r===w&&s===E&&n===x&&i===C)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:w,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=r-n,d=s-i,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const g=f.createElement("defs");p.append(g);const y=f.createElement("clipPath"),S=`clippath_${this.data.id}`;y.setAttribute("id",S),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let w=2,E=e.length;w<E;w+=8){const x=e[w],C=e[w+1],T=e[w+2],N=e[w+3],R=f.createElement("rect"),I=(T-n)/c,O=(s-C)/d,F=(x-T)/c,z=(C-N)/d;R.setAttribute("x",I),R.setAttribute("y",O),R.setAttribute("width",F),R.setAttribute("height",z),y.append(R),l?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${O}" width="${F}" height="${z}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(p),this.container.style.clipPath=`url(#${S})`}_createPopup(e=null){const{data:n}=this;let i,r;e?(i={str:e.text},r=e.date):(i=n.contentsObj,r=n.modificationDate),this.#i=new eb({data:{color:n.color,titleObj:n.titleObj,modificationDate:r,contentsObj:i,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:l}of r){if(s===-1||a===n)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!io.has(d)){ke(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:d})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==n&&io.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class _j extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class xA extends Rt{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),this.#e()}#t(e,n,i="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,r),!1),this.#e()}#i(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:r,refs:s,include:a}=n,l=[];if(r.length!==0||s.length!==0){const f=new Set(s);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;c.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!io.has(g)){ke(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class Ej extends Rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class po extends Rt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return en.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if(i==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(i==="focus"){if(n.focused)return;n.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(e,n,i,r){for(const[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(n||={focused:!1}),this._setEventListener(e,n,s,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,n,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":he.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||Sj,s=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(d/(Gv*r))||1,p=d/f;a=Math.min(r,c(p/Gv))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(d/Gv))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=he.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class xj extends po{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=i),s.setValue(a.id,{[r]:i})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(n,{value:this.data.fieldValue});let s=r.value||"";const a=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let l=r.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=l??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",l??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),io.add(i),this.contentElement=i,i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,g=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",S=>{e.setValue(n,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),c.formattedValue=null}),i.addEventListener("resetform",S=>{const w=this.data.defaultFieldValue??"";i.value=c.userValue=w,c.formattedValue=null});let y=S=>{const{formattedValue:w}=c;w!=null&&(S.target.value=w),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(c.focused)return;const{target:E}=w;if(g&&(E.type=f,p&&(E.step=p)),c.userValue){const x=c.userValue;if(g)if(f==="time"){const C=new Date(x),T=[C.getHours(),C.getMinutes(),C.getSeconds()];E.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else E.value=new Date(x-wj).toISOString().split(f==="date"?"T":".",1)[0];else E.value=x}c.lastCommittedValue=E.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const E={value(x){c.userValue=x.detail.value??"",g||e.setValue(n,{value:c.userValue.toString()}),x.target.value=c.userValue},formattedValue(x){const{formattedValue:C}=x.detail;c.formattedValue=C,C!=null&&x.target!==document.activeElement&&(x.target.value=C);const T={formattedValue:C};g&&(T.value=C),e.setValue(n,T)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:C}=x.detail,{target:T}=x;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let N=c.userValue;!N||N.length<=C||(N=N.slice(0,C),T.value=c.userValue=N,e.setValue(n,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,w)}),i.addEventListener("keydown",w=>{c.commitKey=1;let E=-1;if(w.key==="Escape"?E=0:w.key==="Enter"&&!this.data.multiLine?E=2:w.key==="Tab"&&(c.commitKey=3),E===-1)return;const{value:x}=w.target;c.lastCommittedValue!==x&&(c.lastCommittedValue=x,c.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,willCommit:!0,commitKey:E,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const S=y;y=null,i.addEventListener("blur",w=>{if(!c.focused||!w.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:E}=w;let{value:x}=E;if(g){if(x&&f==="time"){const C=x.split(":").map(T=>parseInt(T,10));x=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),E.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();E.type="text"}c.userValue=x,c.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:x,willCommit:!0,commitKey:c.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),S(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{c.lastCommittedValue=null;const{data:E,target:x}=w,{value:C,selectionStart:T,selectionEnd:N}=x;let R=T,I=N;switch(w.inputType){case"deleteWordBackward":{const O=C.substring(0,T).match(/\w*[^\w]*$/);O&&(R-=O[0].length);break}case"deleteWordForward":{const O=C.substring(T).match(/^[^\w]*\w*/);O&&(I+=O[0].length);break}case"deleteContentBackward":T===N&&(R-=1);break;case"deleteContentForward":T===N&&(I+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,change:E||"",willCommit:!1,selStart:R,selEnd:I}})}),this._setEventListeners(i,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Tj extends po{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Cj extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return io.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,i)){const f=c&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const l=n.defaultFieldValue||"Off";a.target.checked=l===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class DD extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(n.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(io.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,i))e.setValue(d.id,{value:!1});e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const l=n.defaultFieldValue;a.target.checked=l!=null&&l===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const f=a===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const g=f&&p.id===i;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Mj extends xA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Pj extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");io.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,i.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),s=!1),r.append(p)}let a=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=f=>{const p=f?"value":"textContent",{options:g,multiple:y}=r;return y?Array.prototype.filter.call(g,S=>S.selected).map(S=>S[p]):g.selectedIndex===-1?null:g[g.selectedIndex][p]};let c=l(!1);const d=f=>{const p=f.target.options;return Array.prototype.map.call(p,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const p={value(g){a?.();const y=g.detail.value,S=new Set(Array.isArray(y)?y:[y]);for(const w of r.options)w.selected=S.has(w.value);e.setValue(n,{value:l(!0)}),c=l(!1)},multipleSelection(g){r.multiple=!0},remove(g){const y=r.options,S=g.detail.remove;y[S].selected=!1,r.remove(S),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(n,{value:null,items:[]}),c=l(!1)},insert(g){const{index:y,displayValue:S,exportValue:w}=g.detail.insert,E=r.children[y],x=document.createElement("option");x.textContent=S,x.value=w,E?E.before(x):r.append(x),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},items(g){const{items:y}=g.detail;for(;r.length!==0;)r.remove(0);for(const S of y){const{displayValue:w,exportValue:E}=S,x=document.createElement("option");x.textContent=w,x.value=E,r.append(x)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},indices(g){const y=new Set(g.detail.indices);for(const S of g.target.options)S.selected=y.has(S.index);e.setValue(n,{value:l(!0)}),c=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("input",f=>{const p=l(!0),g=l(!1);e.setValue(n,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:c,change:g,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(n,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class eb extends Rt{constructor(e){const{data:n,elements:i,parent:r}=e,s=!!r._commentManager;if(super(e,{isRenderable:!s&&Rt._hasPopupData(n)}),this.elements=i,s&&Rt._hasPopupData(n)){const a=this.popup=this.#e();for(const l of i)l.popup=a}else this.popup=null}#e(){return new Rj({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=this.#e(),i=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${gl}${r}`).join(",")),this.container}}class Rj{#e=null;#t=this.#V.bind(this);#i=this.#F.bind(this);#n=this.#D.bind(this);#a=this.#w.bind(this);#s=null;#r=null;#o=null;#u=null;#l=null;#f=null;#d=null;#h=!1;#g=null;#m=null;#c=null;#p=null;#v=null;#b=null;#y=null;#x=null;#_=null;#S=null;#C=!1;#A=null;#E=null;constructor({container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:l,parent:c,rect:d,parentRect:f,open:p,commentManager:g=null}){this.#r=e,this.#_=r,this.#o=a,this.#x=l,this.#f=c,this.#s=n,this.#y=d,this.#d=f,this.#l=i,this.#e=g,this.#A=i[0],this.#u=Y0.toDateObject(s),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup()),g||(this.#R(),this.#r.hidden=!0,p&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const n of this.trigger)n.addEventListener("click",this.#a,{signal:e}),n.addEventListener("pointerenter",this.#n,{signal:e}),n.addEventListener("pointerleave",this.#i,{signal:e}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#t,{signal:e})}#M(){const e=this.#l.find(n=>n.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#v||this.#M(),!this.#v)return;const{signal:e}=this.#m=new AbortController,n=this.#A.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!n)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!n)},s=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(n){this.#p=this.#A.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=this.#p=document.createElement("button");a.className="annotationCommentButton";const l=this.#A.container;a.style.zIndex=l.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#U(),this.#P(),a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),l.after(a)}}#P(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[e,n]=this.#v,{style:i}=this.#p;i.left=`calc(${e}%)`,i.top=`calc(${n}% - var(--comment-button-dim))`}#U(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:n}=this.#A.commentData;return e?this.#f._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(e){e!==this.comment&&(this.#A.commentText=this.#E=e)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=n)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:n,height:i}=this.#p.getBoundingClientRect(),{x:r,y:s,width:a,height:l}=this.#A.layer.getBoundingClientRect();return[(e-r)/a,(n+i-s)/l]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,i]=this.#b||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:s,y:a,width:l,height:c}=r;this.#e.showDialog(null,this,s+n*l,a+i*c,{...e,parentDimensions:r})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#s){const i=e.style.outlineColor=he.makeHexColor(...this.#s);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#_?.str){const i=document.createElement("span");i.className="title",n.append(i),{dir:i.dir,str:i.textContent}=this.#_}if(e.append(n),this.#u){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#u.valueOf()})),i.dateTime=this.#u.toISOString(),n.append(i)}dD({html:this.#I||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#r.append(e)}get#I(){const e=this.#x,n=this.#o;return e?.str&&(!n?.str||n.str===e.str)&&this.#x.html||null}get#O(){return this.#I?.attributes?.style?.fontSize||0}get#B(){return this.#I?.attributes?.style?.color||null}#k(e){const n=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:r});return i}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#h)&&this.#w()}updateEdited({rect:e,popup:n,deleted:i}){if(this.#e){i?(this.remove(),this.#E=null):n&&(n.deleted?this.remove():(this.#U(),this.#E=n.text)),e&&(this.#v=null,this.#M(),this.#P());return}if(i||n?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#x},e&&(this.#c=null),n&&n.text&&(this.#x=this.#k(n.text),this.#u=Y0.toDateObject(n.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#x}=this.#S,this.#S=null,this.#g?.remove(),this.#g=null,this.#c=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#h=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#c!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.#f;let a=!!this.#d,l=a?this.#d:this.#y;for(const S of this.#l)if(!l||he.intersect(S.data.rect,l)!==null){l=S.data.rect,a=!0;break}const c=he.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,p=c[0]+f,g=c[1];this.#c=[100*(p-r)/n,100*(g-s)/i];const{style:y}=this.#r;y.left=`${this.#c[0]}%`,y.top=`${this.#c[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#h=!this.#h,this.#h?(this.#D(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#t)):(this.#F(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#t))}#D(){this.#g||this.render(),this.isVisible?this.#h&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#F(){this.#r.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#C&&(this.#g||this.#D(),this.#C=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class OD extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ue.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const i=document.createElement("span");i.textContent=n,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Nj extends Rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ij extends Rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dj extends Rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kD extends Rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r},width:s,height:a}=this;if(!n)return this.container;const l=this.svgFactory.create(s,a,!0);let c=[];for(let f=0,p=n.length;f<p;f+=2){const g=n[f]-e[0],y=e[3]-n[f+1];c.push(`${g},${y}`)}c=c.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Oj extends kD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kj extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class TA extends Rt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ue.HIGHLIGHT:Ue.INK}#i(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:s}}=this,{transform:a,width:l,height:c}=this.#i(n,e),d=this.svgFactory.create(l,c,!0),f=this.#e=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,g=i.length;p<g;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",i[p].join(",")),f.append(y)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,s=this.#e;if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,l=this.#t.length;a<l;a++)this.#t[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:c}=this.#i(this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class LD extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ue.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Lj extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Uj extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Bj extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class UD extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ue.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Fj extends Rt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=en.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class CA{#e=null;#t=null;#i=null;#n=new Map;#a=null;#s=null;#r=[];#o=!1;constructor({div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:l,commentManager:c,linkService:d,annotationStorage:f}){this.div=e,this.#e=n,this.#t=i,this.#a=l||null,this.#s=d||null,this.#i=f||new AA,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:n}=e,i=this.div;no(i,this.viewport);const r=new Map,s=[],a={data:null,layer:i,linkService:this.#s,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ah,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===jt.POPUP;if(c){const p=r.get(l.id);if(!p)continue;if(!this._commentManager){s.push(l);continue}a.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=Xv.create(a);if(!d.isRenderable)continue;if(!c&&(this.#r.push(d),l.popupRef)){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}await this.#u();for(const l of s){const c=a.elements=r.get(l.id);a.data=l;const d=Xv.create(a);if(!d.isRenderable)continue;const f=d.render();d.contentElement.id=`${gl}${l.id}`,l.hidden&&(f.style.visibility="hidden"),c.at(-1).container.after(f)}this.#l()}async#u(){if(this.#r.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:r}}of this.#r){const s=i.id=`${gl}${r}`;e.push(this.#a?.getAriaAttributes(s).then(a=>{if(a)for(const[l,c]of a)i.setAttribute(l,c)}))}}this.#r.sort(({data:{rect:[i,r,s,a]}},{data:{rect:[l,c,d,f]}})=>{if(i===s&&r===a)return 1;if(l===d&&c===f)return-1;const p=a,g=r,y=(r+a)/2,S=f,w=c,E=(c+f)/2;if(y>=S&&E<=g)return-1;if(E>=p&&y<=w)return 1;const x=(i+s)/2,C=(l+d)/2;return x-C});const n=document.createDocumentFragment();for(const i of this.#r)n.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&n.append(i.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),this.#e)for(const i of this.#r)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:this.#s,svgFactory:new Ah,parent:this};for(const i of e){i.borderStyle||=CA._defaultBorderStyle,n.data=i;const r=Xv.create(n);r.isRenderable&&(r.render(),r.contentElement.id=`${gl}${i.id}`,this.#r.push(r))}await this.#u()}update({viewport:e}){const n=this.div;this.viewport=e,no(n,{rotation:e.rotation}),this.#l(),n.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[n,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=this.#n.get(n);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:n}=this,{id:i,rotation:r}=e,s=new _j({data:{id:i,rect:e.getPDFRect(),rotation:r},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i});return s.render(),s.contentElement.id=`${gl}${i}`,s.createOrUpdatePopup(),this.#r.push(s),s}removeAnnotation(e){const n=this.#r.findIndex(r=>r.data.id===e);if(n<0)return;const[i]=this.#r.splice(n,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);this.#u()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:cl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Lf=/\r\n?|\n/g;class cn extends Ce{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=cn.prototype,n=s=>s.isEmpty(),i=ua.TRANSLATE_SMALL,r=ua.TRANSLATE_BIG;return Le(this,"_keyboardManager",new Fc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=Ue.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||cn._defaultColor||Ce._defaultLineColor,this.#n=e.fontSize||cn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,n){Ce.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Ke.FREETEXT_SIZE:cn._defaultFontSize=n;break;case Ke.FREETEXT_COLOR:cn._defaultColor=n;break}}updateParams(e,n){switch(e){case Ke.FREETEXT_SIZE:this.#a(n);break;case Ke.FREETEXT_COLOR:this.#s(n);break}}static get defaultPropertiesToUpdate(){return[[Ke.FREETEXT_SIZE,cn._defaultFontSize],[Ke.FREETEXT_COLOR,cn._defaultColor||Ce._defaultLineColor]]}get propertiesToUpdate(){return[[Ke.FREETEXT_SIZE,this.#n],[Ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new gc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.FREETEXT_COLOR}#a(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},i=this.#n;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(e){const n=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-cn._internalPadding*e,-(cn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(cn.#u(i)),n=i);return e.join(`
`)}#o(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,a=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,n=this.#e=this.#r().trimEnd();if(e===n)return;const i=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){cn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,f]=this.pageDimensions,[p,g]=this.pageTranslation;let y,S;switch(this.rotation){case 0:y=e+(a[0]-p)/d,S=n+this.height-(a[1]-g)/f;break;case 90:y=e+(a[0]-p)/d,S=n-(a[1]-g)/f,[l,c]=[c,-l];break;case 180:y=e-this.width+(a[0]-p)/d,S=n-(a[1]-g)/f,[l,c]=[-l,-c];break;case 270:y=e+(a[0]-p-this.height*f)/d,S=n+(a[1]-g-this.width*d)/f,[l,c]=[-c,l];break}this.setAt(y*r,S*s,l,c)}else this._moveAfterPaste(e,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Lf,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=cn.#d(n.getData("text")||"").replaceAll(Lf,`
`);if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(Lf,"")),y!==this.editorDiv){let S=d;for(const w of this.editorDiv.childNodes){if(w===y){S=f;continue}S.push(cn.#u(w))}}d.push(l.nodeValue.slice(0,c).replaceAll(Lf,""))}else if(l===this.editorDiv){let y=d,S=0;for(const w of this.editorDiv.childNodes)S++===c&&(y=f),y.push(cn.#u(w))}this.#e=`${d.join(`
`)}${r}${f.join(`
`)}`,this.#l();const p=new Range;let g=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const S=y.nodeValue.length;if(g<=S){p.setStart(y,g),p.setEnd(y,g);break}g-=S}s.removeAllRanges(),s.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#f(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=cn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){let r=null;if(e instanceof OD){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:c,rotation:d,id:f,popupRef:p,richText:g,contentsObj:y,creationDate:S,modificationDate:w},textContent:E,textPosition:x,parent:{page:{pageNumber:C}}}=e;if(!E||E.length===0)return null;r=e={annotationType:Ue.FREETEXT,color:Array.from(l),fontSize:a,value:E.join(`
`),position:x,pageIndex:C-1,rect:c.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:y?.str||null,richText:g,creationDate:S,modificationDate:w}}const s=await super.deserialize(e,n,i);return s.#n=e.fontSize,s.color=he.makeHexColor(...e.color),s.#e=cn.#d(e.value),s._initialData=r,e.comment&&s.setCommentData(e),s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:this.#n,value:this.#f()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#h(i)?null:(i.id=this.annotationElementId,i)}#h(e){const{value:n,fontSize:i,color:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==s}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const r of this.#e.split(`
`)){const s=document.createElement("div");s.append(r?document.createTextNode(r):document.createElement("br")),n.append(s)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ge{static PRECISION=1e-4;toSVGPath(){mt("Abstract method `toSVGPath` must be implemented.")}get box(){mt("Abstract getter `box` must be implemented.")}serialize(e,n){mt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l]*r,a[l+1]=i+e[l+1]*s;return a}static _rescaleAndSwap(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l+1]*r,a[l+1]=i+e[l]*s;return a}static _translate(e,n,i,r){r||=new Float32Array(e.length);for(let s=0,a=e.length;s<a;s+=2)r[s]=n+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,i,r,s){switch(s){case 90:return[1-n/i,e/r];case 180:return[1-e/i,1-n/r];case 270:return[n/i,1-e/r];default:return[e/i,n/r]}}static _normalizePagePoint(e,n,i){switch(i){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,i,r,s,a){return[(e+5*i)/6,(n+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}class $a{#e;#t=[];#i;#n;#a=[];#s=new Float32Array(18);#r;#o;#u;#l;#f;#d;#h=[];static#g=8;static#m=2;static#c=$a.#g+$a.#m;constructor({x:e,y:n},i,r,s,a,l=0){this.#e=i,this.#d=s*r,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,e,n],6),this.#i=l,this.#l=$a.#g*r,this.#u=$a.#c*r,this.#f=r,this.#h.push(e,n)}isEmpty(){return isNaN(this.#s[8])}#p(){const e=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[i,r,s,a]=this.#e;return[(this.#r+(e[0]-n[0])/2-i)/s,(this.#o+(e[1]-n[1])/2-r)/a,(this.#r+(n[0]-e[0])/2-i)/s,(this.#o+(n[1]-e[1])/2-r)/a]}add({x:e,y:n}){this.#r=e,this.#o=n;const[i,r,s,a]=this.#e;let[l,c,d,f]=this.#s.subarray(8,12);const p=e-d,g=n-f,y=Math.hypot(p,g);if(y<this.#u)return!1;const S=y-this.#l,w=S/y,E=w*p,x=w*g;let C=l,T=c;l=d,c=f,d+=E,f+=x,this.#h?.push(e,n);const N=-x/S,R=E/S,I=N*this.#d,O=R*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+I,f+O],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-I,f-O],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([l+I,c+O],2),this.#a.push(NaN,NaN,NaN,NaN,(l+I-i)/s,(c+O-r)/a),this.#s.set([l-I,c-O],14),this.#t.push(NaN,NaN,NaN,NaN,(l-I-i)/s,(c-O-r)/a)),this.#s.set([C,T,l,c,d,f],6),!this.isEmpty()):(this.#s.set([C,T,l,c,d,f],6),Math.abs(Math.atan2(T-c,C-l)-Math.atan2(x,E))<Math.PI/2?([l,c,d,f]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((l+d)/2-i)/s,((c+f)/2-r)/a),[l,c,C,T]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+l)/2-i)/s,((T+c)/2-r)/a),!0):([C,T,l,c,d,f]=this.#s.subarray(0,6),this.#a.push(((C+5*l)/6-i)/s,((T+5*c)/6-r)/a,((5*l+d)/6-i)/s,((5*c+f)/6-r)/a,((l+d)/2-i)/s,((c+f)/2-r)/a),[d,f,l,c,C,T]=this.#s.subarray(12,18),this.#t.push(((C+5*l)/6-i)/s,((T+5*c)/6-r)/a,((5*l+d)/6-i)/s,((5*c+f)/6-r)/a,((l+d)/2-i)/s,((c+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,n=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#y(i);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?i.push(`L${n[r+4]} ${n[r+5]}`):i.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#b(i),i.join(" ")}#v(){const[e,n,i,r]=this.#e,[s,a,l,c]=this.#p();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-n)/r} L${(this.#s[4]-e)/i} ${(this.#s[5]-n)/r} L${s} ${a} L${l} ${c} L${(this.#s[16]-e)/i} ${(this.#s[17]-n)/r} L${(this.#s[14]-e)/i} ${(this.#s[15]-n)/r} Z`}#b(e){const n=this.#t;e.push(`L${n[4]} ${n[5]} Z`)}#y(e){const[n,i,r,s]=this.#e,a=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[c,d,f,p]=this.#p();e.push(`L${(a[0]-n)/r} ${(a[1]-i)/s} L${c} ${d} L${f} ${p} L${(l[0]-n)/r} ${(l[1]-i)/s}`)}newFreeDrawOutline(e,n,i,r,s,a){return new BD(e,n,i,r,s,a)}getOutlines(){const e=this.#a,n=this.#t,i=this.#s,[r,s,a,l]=this.#e,c=new Float32Array((this.#h?.length??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(this.#h[p]-r)/a,c[p+1]=(this.#h[p+1]-s)/l;if(c[c.length-2]=(this.#r-r)/a,c[c.length-1]=(this.#o-s)/l,isNaN(i[6])&&!this.isEmpty())return this.#x(c);const d=new Float32Array(this.#a.length+24+this.#t.length);let f=e.length;for(let p=0;p<f;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}f=this.#S(d,f);for(let p=n.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(n[p+g])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=n[p+g],d[f+1]=n[p+g+1],f+=2}return this.#_(d,f),this.newFreeDrawOutline(d,c,this.#e,this.#f,this.#i,this.#n)}#x(e){const n=this.#s,[i,r,s,a]=this.#e,[l,c,d,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(n[2]-i)/s,(n[3]-r)/a,NaN,NaN,NaN,NaN,(n[4]-i)/s,(n[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(n[16]-i)/s,(n[17]-r)/a,NaN,NaN,NaN,NaN,(n[14]-i)/s,(n[15]-r)/a],0),this.newFreeDrawOutline(p,e,this.#e,this.#f,this.#i,this.#n)}#_(e,n){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],n),n+=6}#S(e,n){const i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,a,l,c]=this.#e,[d,f,p,g]=this.#p();return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-a)/c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-a)/c],n),n+=24}}class BD extends ge{#e;#t=new Float32Array(4);#i;#n;#a;#s;#r;constructor(e,n,i,r,s,a){super(),this.#r=e,this.#a=n,this.#e=i,this.#s=r,this.#i=s,this.#n=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[l,c,d,f]=this.#t;for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-l)/d,e[p+1]=(e[p+1]-c)/f;for(let p=0,g=n.length;p<g;p+=2)n[p]=(n[p]-l)/d,n[p+1]=(n[p+1]-c)/f}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let n=6,i=this.#r.length;n<i;n+=6){if(isNaN(this.#r[n])){e.push(`L${this.#r[n+4]} ${this.#r[n+5]}`);continue}e.push(`C${this.#r[n]} ${this.#r[n+1]} ${this.#r[n+2]} ${this.#r[n+3]} ${this.#r[n+4]} ${this.#r[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],s){const a=i-e,l=r-n;let c,d;switch(s){case 0:c=ge._rescale(this.#r,e,r,a,-l),d=ge._rescale(this.#a,e,r,a,-l);break;case 90:c=ge._rescaleAndSwap(this.#r,e,n,a,l),d=ge._rescaleAndSwap(this.#a,e,n,a,l);break;case 180:c=ge._rescale(this.#r,i,n,-a,l),d=ge._rescale(this.#a,i,n,-a,l);break;case 270:c=ge._rescaleAndSwap(this.#r,i,r,-a,-l),d=ge._rescaleAndSwap(this.#a,i,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}#o(e){const n=this.#r;let i=n[4],r=n[5];const s=[i,r,i,r];let a=i,l=r,c=i,d=r;const f=e?Math.max:Math.min,p=new Float32Array(4);for(let y=6,S=n.length;y<S;y+=6){const w=n[y+4],E=n[y+5];isNaN(n[y])?(he.pointBoundingBox(w,E,s),l>E?(a=w,l=E):l===E&&(a=f(a,w)),d<E?(c=w,d=E):d===E&&(c=f(c,w))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,he.bezierBoundingBox(i,r,...n.slice(y,y+6),p),he.rectBoundingBox(p[0],p[1],p[2],p[3],s),l>p[1]?(a=p[0],l=p[1]):l===p[1]&&(a=f(a,p[0])),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=f(c,p[2]))),i=w,r=E}const g=this.#t;g[0]=s[0]-this.#i,g[1]=s[1]-this.#i,g[2]=s[2]-s[0]+2*this.#i,g[3]=s[3]-s[1]+2*this.#i,this.firstPoint=[a,l],this.lastPoint=[c,d]}get box(){return this.#t}newOutliner(e,n,i,r,s,a=0){return new $a(e,n,i,r,s,a)}getNewOutline(e,n){const[i,r,s,a]=this.#t,[l,c,d,f]=this.#e,p=s*d,g=a*f,y=i*d+l,S=r*f+c,w=this.newOutliner({x:this.#a[0]*p+y,y:this.#a[1]*g+S},this.#e,this.#s,e,this.#n,n??this.#i);for(let E=2;E<this.#a.length;E+=2)w.add({x:this.#a[E]*p+y,y:this.#a[E+1]*g+S});return w.getOutlines()}}class tb{#e;#t;#i;#n=[];#a=[];constructor(e,n=0,i=0,r=!0){const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:E,width:x,height:C}of e){const T=Math.floor((w-n)/a)*a,N=Math.ceil((w+x+n)/a)*a,R=Math.floor((E-n)/a)*a,I=Math.ceil((E+C+n)/a)*a,O=[T,R,I,!0],F=[N,R,I,!1];this.#n.push(O,F),he.rectBoundingBox(T,R,N,I,s)}const l=s[2]-s[0]+2*i,c=s[3]-s[1]+2*i,d=s[0]-i,f=s[1]-i;let p=r?-1/0:1/0,g=1/0;const y=this.#n.at(r?-1:-2),S=[y[0],y[2]];for(const w of this.#n){const[E,x,C,T]=w;!T&&r?x<g?(g=x,p=E):x===g&&(p=Math.max(p,E)):T&&!r&&(x<g?(g=x,p=E):x===g&&(p=Math.min(p,E))),w[0]=(E-d)/l,w[1]=(x-f)/c,w[2]=(C-f)/c}this.#e=new Float32Array([d,f,l,c]),this.#t=[p,g],this.#i=S}getOutlines(){this.#n.sort((n,i)=>n[0]-i[0]||n[1]-i[1]||n[2]-i[2]);const e=[];for(const n of this.#n)n[3]?(e.push(...this.#l(n)),this.#o(n)):(this.#u(n),e.push(...this.#l(n)));return this.#s(e)}#s(e){const n=[],i=new Set;for(const a of e){const[l,c,d]=a;n.push([l,c,a],[l,d,a])}n.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=n.length;a<l;a+=2){const c=n[a][2],d=n[a+1][2];c.push(d),d.push(c),i.add(c),i.add(d)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[l,c,d,f,p]=a;i.delete(a);let g=l,y=c;for(s=[l,d],r.push(s);;){let S;if(i.has(f))S=f;else if(i.has(p))S=p;else break;i.delete(S),[l,c,d,f,p]=S,g!==l&&(s.push(g,y,l,y===c?c:d),g=l),y=y===c?d:c}s.push(g,y)}return new zj(r,this.#e,this.#t,this.#i)}#r(e){const n=this.#a;let i=0,r=n.length-1;for(;i<=r;){const s=i+r>>1,a=n[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1}#o([,e,n]){const i=this.#r(e);this.#a.splice(i,0,[e,n])}#u([,e,n]){const i=this.#r(e);for(let r=i;r<this.#a.length;r++){const[s,a]=this.#a[r];if(s!==e)break;if(s===e&&a===n){this.#a.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=this.#a[r];if(s!==e)break;if(s===e&&a===n){this.#a.splice(r,1);return}}}#l(e){const[n,i,r]=e,s=[[n,i,r]],a=this.#r(r);for(let l=0;l<a;l++){const[c,d]=this.#a[l];for(let f=0,p=s.length;f<p;f++){const[,g,y]=s[f];if(!(d<=g||y<=c)){if(g>=c){if(y>d)s[f][1]=d;else{if(p===1)return[];s.splice(f,1),f--,p--}continue}s[f][2]=c,y>d&&s.push([n,d,y])}}}return s}}class zj extends ge{#e;#t;constructor(e,n,i,r){super(),this.#t=e,this.#e=n,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const e=[];for(const n of this.#t){let[i,r]=n;e.push(`M${i} ${r}`);for(let s=2;s<n.length;s+=2){const a=n[s],l=n[s+1];a===i?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],s){const a=[],l=i-e,c=r-n;for(const d of this.#t){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=e+d[p]*l,f[p+1]=r-d[p+1]*c;a.push(f)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class nb extends $a{newFreeDrawOutline(e,n,i,r,s,a){return new Hj(e,n,i,r,s,a)}}class Hj extends BD{newOutliner(e,n,i,r,s,a=0){return new nb(e,n,i,r,s,a)}}class Ft extends Ce{#e=null;#t=0;#i;#n=null;#a=null;#s=null;#r=null;#o=0;#u=null;#l=null;#f=null;#d=!1;#h=null;#g=null;#m=null;#c="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ue.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ft.prototype;return Le(this,"_keyboardManager",new Fc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ft._defaultColor,this.#p=e.thickness||Ft._defaultThickness,this.opacity=e.opacity||Ft._defaultOpacity,this.#i=e.boxes||null,this.#v=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#A()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new tb(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new tb(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{firstPoint:i}=this.#l;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:n,clipPathId:i}){this.#l=e;const r=1.5;if(this.#s=e.getNewOutline(this.#p/2+r,.0025),n>=0)this.#f=n,this.#n=i,this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#f,{bbox:Ft.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Ft.#E(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[s,a,l,c]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=l,this.height=c;break;case 90:{const[p,g]=this.parentDimensions;this.x=a,this.y=1-s,this.width=l*g/p,this.height=c*p/g;break}case 180:this.x=1-s,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-a,this.y=s,this.width=l*g/p,this.height=c*p/g;break}}const{firstPoint:d}=e;this.#h=[(d[0]-s)/l,(d[1]-a)/c];const{lastPoint:f}=this.#s;this.#g=[(f[0]-s)/l,(f[1]-a)/c]}static initialize(e,n){Ce.initialize(e,n),Ft._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case Ke.HIGHLIGHT_COLOR:Ft._defaultColor=n;break;case Ke.HIGHLIGHT_THICKNESS:Ft._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#h}updateParams(e,n){switch(e){case Ke.HIGHLIGHT_COLOR:this.#x(n);break;case Ke.HIGHLIGHT_THICKNESS:this.#_(n);break}}static get defaultPropertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,Ft._defaultColor],[Ke.HIGHLIGHT_THICKNESS,Ft._defaultThickness]]}get propertiesToUpdate(){return[[Ke.HIGHLIGHT_COLOR,this.color||Ft._defaultColor],[Ke.HIGHLIGHT_THICKNESS,this.#p||Ft._defaultThickness],[Ke.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#f,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#x(e){const n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,Ft._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#_(e){const n=this.#p,i=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Hi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#C():e&&(this.#A(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#S(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#f===null||!this.parent||(this.parent.drawLayer.remove(this.#f),this.#f=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#A(e=this.parent){this.#f===null&&({id:this.#f,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#E([e,n,i,r],s){switch(s){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]}rotate(e){const{drawLayer:n}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=Ft.#E(this.#l.box,e)):i=Ft.#E([this.x,this.y,this.width,this.height],e),n.updateProperties(this.#f,{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(this.#m,{bbox:Ft.#E(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const n=this.#u=document.createElement("div");return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(),hD(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(e){Ft._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(e){if(!this.#e)return;const n=window.getSelection();e?n.setPosition(this.#e,this.#t):n.setPosition(this.#r,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#M(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#P(){return this.#d?this.rotation:0}#U(){if(this.#d)return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#i,a=new Float32Array(s.length*8);let l=0;for(const{x:c,y:d,width:f,height:p}of s){const g=c*e+i,y=(1-d)*n+r;a[l]=a[l+4]=g,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=g+f*e,a[l+5]=a[l+7]=y-p*n,l+=8}return a}#I(e){return this.#l.serialize(e,this.#P())}static startHighlighting(e,n,{target:i,x:r,y:s}){const{x:a,y:l,width:c,height:d}=i.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=y=>{f.abort(),this.#B(e,y)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Ot,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ji,{signal:p}),i.addEventListener("pointermove",this.#O.bind(this,e),{signal:p}),this._freeHighlight=new nb({x:r,y:s},[a,l,c,d],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,n,i){let r=null;if(e instanceof LD){const{data:{quadPoints:S,rect:w,rotation:E,id:x,color:C,opacity:T,popupRef:N,richText:R,contentsObj:I,creationDate:O,modificationDate:F},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ue.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:S,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:N,richText:R,comment:I?.str||null,creationDate:O,modificationDate:F}}else if(e instanceof TA){const{data:{inkLists:S,rect:w,rotation:E,id:x,color:C,borderStyle:{rawWidth:T},popupRef:N,richText:R,contentsObj:I,creationDate:O,modificationDate:F},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ue.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:S,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:N,richText:R,comment:I?.str||null,creationDate:O,modificationDate:F}}const{color:s,quadPoints:a,inkLists:l,opacity:c}=e,d=await super.deserialize(e,n,i);d.color=he.makeHexColor(...s),d.opacity=c||1,l&&(d.#p=e.thickness),d._initialData=r,e.comment&&d.setCommentData(e);const[f,p]=d.pageDimensions,[g,y]=d.pageTranslation;if(a){const S=d.#i=[];for(let w=0;w<a.length;w+=8)S.push({x:(a[w]-g)/f,y:1-(a[w+1]-y)/p,width:(a[w+2]-a[w])/f,height:(a[w+1]-a[w+5])/p});d.#b(),d.#A(),d.rotate(d.rotation)}else if(l){d.#d=!0;const S=l[0],w={x:S[0]-g,y:p-(S[1]-y)},E=new nb(w,[0,0,f,p],1,d.#p/2,!0,.001);for(let T=0,N=S.length;T<N;T+=2)w.x=S[T]-g,w.y=p-(S[T+1]-y),E.add(w);const{id:x,clipPathId:C}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#y({highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:C}),d.#A(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:this.#p,quadPoints:this.#U(),outlines:this.#I(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#k(i)?null:(i.id=this.annotationElementId,i)}#k(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,r)=>i!==n[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class FD{#e=Object.create(null);updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,i]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,i)}updateSVGProperty(e,n){this.#e[e]=n}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){mt("Not implemented")}}class tt extends Ce{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#s(e),this.#u())}#s({drawOutlines:e,drawId:n,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#r(e,this.parent),this.#d(e.box)}#r(e,n){const{id:i}=n.drawLayer.draw(tt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,s]of Object.entries(n))i.has(r)?Object.assign(e[r],s):e[r]=s;return e}static getDefaultDrawingOptions(e){mt("Not implemented")}static get typesMap(){mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(tt.#i.updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,s=r[n],a=l=>{r.updateProperty(n,l);const c=this.#e.updateProperty(n,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#f()),{bbox:this.#h()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#f()),{bbox:this.#h()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#h()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#h()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#u(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#u(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#u(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#r(this.#e,e)}}#l([e,n,i,r]){const{parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}#f(){const{x:e,y:n,width:i,height:r,parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[1-n,e,i*(s/a),r*(a/s)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(s/a),r*(a/s)];default:return[e,n,i,r]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#h(){const{x:e,y:n,width:i,height:r,rotation:s,parentRotation:a,parentDimensions:[l,c]}=this;switch((s*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(l/c),r*(c/l),i*(l/c)];case 5:return[1-n,e,i*(l/c),r*(c/l)];case 6:return[1-e-r*(c/l),1-n,r*(c/l),i*(l/c)];case 7:return[n-i*(l/c),1-e-r*(c/l),i*(l/c),r*(c/l)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(c/l),n,r*(c/l),i*(l/c)];case 13:return[1-n-i*(l/c),e-r*(c/l),i*(l/c),r*(c/l)];case 14:return[1-e,1-n-i*(l/c),r*(c/l),i*(l/c)];case 15:return[n,1-e,i*(l/c),r*(c/l)];default:return[e,n,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties({bbox:this.#h()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,r,s){mt("Not implemented")}static startDrawing(e,n,i,r){const{target:s,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=r;if(it.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:f}}=e,{width:p,height:g}=s.getBoundingClientRect(),y=tt.#n=new AbortController,S=e.combinedSignal(y);if(it.setPointer(d,c),window.addEventListener("pointerup",w=>{it.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:S}),window.addEventListener("pointercancel",w=>{it.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",w=>{it.isSamePointerType(w.pointerType)&&(it.initializeAndAddPointerId(w.pointerId),tt.#i.isCancellable()&&(tt.#i.removeLastElement(),tt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",ji,{signal:S}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),s.addEventListener("touchmove",w=>{it.isSameTimeStamp(w.timeStamp)&&Ot(w)},{signal:S}),e.toggleDrawing(),n._editorUndoBar?.hide(),tt.#i){e.drawLayer.updateProperties(this._currentDrawId,tt.#i.startNew(a,l,p,g,f));return}n.updateUIForDefaultProperties(this),tt.#i=this.createDrawerInstance(a,l,p,g,f),tt.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(tt.#a.toSVGProperties(),tt.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(it.isSameTimeStamp(e.timeStamp),!tt.#i)return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(it.isSamePointerId(r)){if(it.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,tt.#i.add(n,i)),it.setTimeStamp(e.timeStamp),Ot(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,tt.#i=null,tt.#a=null,it.clearTimeStamp()),tt.#n&&(tt.#n.abort(),tt.#n=null,it.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,tt.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=tt.#i,r=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ke.DRAW_STEP),!tt.#i.isEmpty()){const{pageDimensions:[i,r],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:tt.#i.getOutlines(i*s,r*s,s,this._INNER_MARGIN),drawingOptions:tt.#a,mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,s,a){mt("Not implemented")}static async deserialize(e,n,i){const{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:l}}=n.viewport,c=this.deserializeDraw(a,l,r,s,this._INNER_MARGIN,e),d=await super.deserialize(e,n,i);return d.createDrawingOptions(e),d.#s({drawOutlines:c}),d.#u(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[n,i]=this.pageTranslation,[r,s]=this.pageDimensions;return this.#e.serialize([n,i,r,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Gj{#e=new Float64Array(6);#t;#i;#n;#a;#s;#r="";#o=0;#u=new Hc;#l;#f;constructor(e,n,i,r,s,a){this.#l=i,this.#f=r,this.#n=s,this.#a=a,[e,n]=this.#d(e,n);const l=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#s=[e,n],this.#i=[{line:l,points:this.#s}],this.#e.set(l,0)}updateProperty(e,n){e==="stroke-width"&&(this.#a=n)}#d(e,n){return ge._normalizePoint(e,n,this.#l,this.#f,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(e,n){[e,n]=this.#d(e,n);const[i,r,s,a]=this.#e.subarray(2,6),l=e-s,c=n-a;return Math.hypot(this.#l*l,this.#f*c)<=2?null:(this.#s.push(e,n),isNaN(i)?(this.#e.set([s,a,e,n],2),this.#t.push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,r,s,a,e,n],0),this.#t.push(...ge.createBezierPoints(i,r,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const i=this.add(e,n);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,i,r,s){this.#l=i,this.#f=r,this.#n=s,[e,n]=this.#d(e,n);const a=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#s=[e,n];const l=this.#i.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#i.push({line:a,points:this.#s}),this.#e.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#s=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#r="";for(let e=0,n=this.#i.length;e<n;e++){const{line:i,points:r}=this.#i[e];this.#t=i,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=ge.svgRound(this.#t[4]),n=ge.svgRound(this.#t[5]);if(this.#s.length===2)return this.#r=`${this.#r} M ${e} ${n} Z`,this.#r;if(this.#s.length<=6){const r=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,r)} M ${e} ${n}`,this.#o=6}if(this.#s.length===4){const r=ge.svgRound(this.#t[10]),s=ge.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${r} ${s}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${e} ${n}`),this.#o=6);for(let r=this.#o,s=this.#t.length;r<s;r+=6){const[a,l,c,d,f,p]=this.#t.slice(r,r+6).map(ge.svgRound);i.push(`C${a} ${l} ${c} ${d} ${f} ${p}`)}return this.#r+=i.join(" "),this.#o=this.#t.length,this.#r}getOutlines(e,n,i,r){const s=this.#i.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#u.build(this.#i,e,n,i,this.#n,this.#a,r),this.#e=null,this.#t=null,this.#i=null,this.#r=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Hc extends ge{#e;#t=0;#i;#n;#a;#s;#r;#o;#u;build(e,n,i,r,s,a,l){this.#a=n,this.#s=i,this.#r=r,this.#o=s,this.#u=a,this.#i=l??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of this.#n){if(e.push(`M${ge.svgRound(n[4])} ${ge.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ge.svgRound(n[10])} ${ge.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[s,a,l,c,d,f]=n.subarray(i,i+6).map(ge.svgRound);e.push(`C${s} ${a} ${l} ${c} ${d} ${f}`)}}return e.join("")}serialize([e,n,i,r],s){const a=[],l=[],[c,d,f,p]=this.#f();let g,y,S,w,E,x,C,T,N;switch(this.#o){case 0:N=ge._rescale,g=e,y=n+r,S=i,w=-r,E=e+c*i,x=n+(1-d-p)*r,C=e+(c+f)*i,T=n+(1-d)*r;break;case 90:N=ge._rescaleAndSwap,g=e,y=n,S=i,w=r,E=e+d*i,x=n+c*r,C=e+(d+p)*i,T=n+(c+f)*r;break;case 180:N=ge._rescale,g=e+i,y=n,S=-i,w=r,E=e+(1-c-f)*i,x=n+d*r,C=e+(1-c)*i,T=n+(d+p)*r;break;case 270:N=ge._rescaleAndSwap,g=e+i,y=n+r,S=-i,w=-r,E=e+(1-d-p)*i,x=n+(1-c-f)*r,C=e+(1-d)*i,T=n+(1-c)*r;break}for(const{line:R,points:I}of this.#n)a.push(N(R,g,y,S,w,s?new Array(R.length):null)),l.push(N(I,g,y,S,w,s?new Array(I.length):null));return{lines:a,points:l,rect:[E,x,C,T]}}static deserialize(e,n,i,r,s,{paths:{lines:a,points:l},rotation:c,thickness:d}){const f=[];let p,g,y,S,w;switch(c){case 0:w=ge._rescale,p=-e/i,g=n/r+1,y=1/i,S=-1/r;break;case 90:w=ge._rescaleAndSwap,p=-n/r,g=-e/i,y=1/r,S=1/i;break;case 180:w=ge._rescale,p=e/i+1,g=-n/r,y=-1/i,S=1/r;break;case 270:w=ge._rescaleAndSwap,p=n/r+1,g=e/i+1,y=-1/r,S=-1/i;break}if(!a){a=[];for(const x of l){const C=x.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const T=new Float32Array(3*(C-2));a.push(T);let[N,R,I,O]=x.subarray(0,4);T.set([NaN,NaN,NaN,NaN,N,R],0);for(let F=4;F<C;F+=2){const z=x[F],$=x[F+1];T.set(ge.createBezierPoints(N,R,I,O,z,$),(F-2)*3),[N,R,I,O]=[I,O,z,$]}}}for(let x=0,C=a.length;x<C;x++)f.push({line:w(a[x].map(T=>T??NaN),p,g,y,S),points:w(l[x].map(T=>T??NaN),p,g,y,S)});const E=new this.prototype.constructor;return E.build(f,i,r,1,c,d,s),E}#l(e=this.#u){const n=this.#i+e/2*this.#r;return this.#o%180===0?[n/this.#a,n/this.#s]:[n/this.#s,n/this.#a]}#f(){const[e,n,i,r]=this.#e,[s,a]=this.#l(0);return[e+s,n+a,i-2*s,r-2*a]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6)he.pointBoundingBox(r[l],r[l+1],e);continue}let s=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[d,f,p,g,y,S]=r.subarray(l,l+6);he.bezierBoundingBox(s,a,d,f,p,g,y,S,e),s=y,a=S}}const[n,i]=this.#l();e[0]=Vn(e[0]-n,0,1),e[1]=Vn(e[1]-i,0,1),e[2]=Vn(e[2]+n,0,1),e[3]=Vn(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,n){return e==="stroke-width"?this.#h(n):null}#h(e){const[n,i]=this.#l();this.#u=e;const[r,s]=this.#l(),[a,l]=[r-n,s-i],c=this.#e;return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c}updateParentDimensions([e,n],i){const[r,s]=this.#l();this.#a=e,this.#s=n,this.#r=i;const[a,l]=this.#l(),c=a-r,d=l-s,f=this.#e;return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ge.svgRound).join(" ")}get defaultProperties(){const[e,n]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(e)} ${ge.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=this.#e;let i=0,r=0,s=0,a=0,l=0,c=0;switch(this.#t){case 90:r=n/e,s=-e/n,l=e;break;case 180:i=-1,a=-1,l=e,c=n;break;case 270:r=-n/e,s=e/n,c=n;break;default:return""}return`matrix(${i} ${r} ${s} ${a} ${ge.svgRound(l)} ${ge.svgRound(c)})`}getPathResizingSVGProperties([e,n,i,r]){const[s,a]=this.#l(),[l,c,d,f]=this.#e;if(Math.abs(d-s)<=ge.PRECISION||Math.abs(f-a)<=ge.PRECISION){const w=e+i/2-(l+d/2),E=n+r/2-(c+f/2);return{path:{"transform-origin":`${ge.svgRound(e)} ${ge.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const p=(i-2*s)/(d-2*s),g=(r-2*a)/(f-2*a),y=d/i,S=f/r;return{path:{"transform-origin":`${ge.svgRound(l)} ${ge.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${S}) translate(${ge.svgRound(s)} ${ge.svgRound(a)}) scale(${p} ${g}) translate(${ge.svgRound(-s)} ${ge.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[s,a]=this.#l(),l=this.#e,[c,d,f,p]=l;if(l[0]=e,l[1]=n,l[2]=i,l[3]=r,Math.abs(f-s)<=ge.PRECISION||Math.abs(p-a)<=ge.PRECISION){const E=e+i/2-(c+f/2),x=n+r/2-(d+p/2);for(const{line:C,points:T}of this.#n)ge._translate(C,E,x,C),ge._translate(T,E,x,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(e)} ${ge.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*s)/(f-2*s),y=(r-2*a)/(p-2*a),S=-g*(c+s)+e+s,w=-y*(d+a)+n+a;if(g!==1||y!==1||S!==0||w!==0)for(const{line:E,points:x}of this.#n)ge._rescale(E,S,w,g,y,E),ge._rescale(x,S,w,g,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ge.svgRound(e)} ${ge.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,s]=i,a=this.#e,l=e-a[0],c=n-a[1];if(this.#a===r&&this.#s===s)for(const{line:d,points:f}of this.#n)ge._translate(d,l,c,d),ge._translate(f,l,c,f);else{const d=this.#a/r,f=this.#s/s;this.#a=r,this.#s=s;for(const{line:p,points:g}of this.#n)ge._rescale(p,l,c,d,f,p),ge._rescale(g,l,c,d,f,g);a[2]*=d,a[3]*=f}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ge.svgRound(e)} ${ge.svgRound(n)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ge.svgRound(e[0])} ${ge.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Mp extends FD{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new Mp(this._viewParameters);return e.updateAll(this),e}}class MA extends tt{static _type="ink";static _editorType=Ue.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Ce.initialize(e,n),this._defaultDrawingOptions=new Mp(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[Ke.INK_THICKNESS,"stroke-width"],[Ke.INK_COLOR,"stroke"],[Ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,s){return new Gj(e,n,i,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,s,a){return Hc.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){let r=null;if(e instanceof TA){const{data:{inkLists:a,rect:l,rotation:c,id:d,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:y,richText:S,contentsObj:w,creationDate:E,modificationDate:x},parent:{page:{pageNumber:C}}}=e;r=e={annotationType:Ue.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:C-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:S,comment:w?.str||null,creationDate:E,modificationDate:x}}const s=await super.deserialize(e,n,i);return s._initialData=r,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||=new gc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=MA.getDefaultDrawingOptions({stroke:he.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,l=Object.assign(super.serialize(e),{color:Ce._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:n,thickness:i,opacity:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==n[l])||e.thickness!==i||e.opacity!==r||e.pageIndex!==s}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class ib extends Hc{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Uf=8,Wu=3;class fl{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,n,i,r){return i-=e,r-=n,i===0?r>0?0:4:i===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,n,i,r,s,a,l){const c=this.#t(i,r,s,a);for(let d=0;d<8;d++){const f=(-d+c-l+16)%8,p=this.#i[2*f],g=this.#i[2*f+1];if(e[(i+p)*n+(r+g)]!==0)return f}return-1}static#a(e,n,i,r,s,a,l){const c=this.#t(i,r,s,a);for(let d=0;d<8;d++){const f=(d+c+l+16)%8,p=this.#i[2*f],g=this.#i[2*f+1];if(e[(i+p)*n+(r+g)]!==0)return f}return-1}static#s(e,n,i,r){const s=e.length,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=e[f]<=r?1:0;for(let f=1;f<i-1;f++)a[f*n]=a[f*n+n-1]=0;for(let f=0;f<n;f++)a[f]=a[n*i-1-f]=0;let l=1,c;const d=[];for(let f=1;f<i-1;f++){c=1;for(let p=1;p<n-1;p++){const g=f*n+p,y=a[g];if(y===0)continue;let S=f,w=p;if(y===1&&a[g-1]===0)l+=1,w-=1;else if(y>=1&&a[g+1]===0)l+=1,w+=1,y>1&&(c=y);else{y!==1&&(c=Math.abs(y));continue}const E=[p,f],x=w===p+1,C={isHole:x,points:E,id:l,parent:0};d.push(C);let T;for(const G of d)if(G.id===c){T=G;break}T?T.isHole?C.parent=x?T.parent:c:C.parent=x?c:T.parent:C.parent=x?c:0;const N=this.#n(a,n,f,p,S,w,0);if(N===-1){a[g]=-l,a[g]!==1&&(c=Math.abs(a[g]));continue}let R=this.#i[2*N],I=this.#i[2*N+1];const O=f+R,F=p+I;S=O,w=F;let z=f,$=p;for(;;){const G=this.#a(a,n,z,$,S,w,1);R=this.#i[2*G],I=this.#i[2*G+1];const X=z+R,le=$+I;E.push(le,X);const oe=z*n+$;if(a[oe+1]===0?a[oe]=-l:a[oe]===1&&(a[oe]=l),X===f&&le===p&&z===O&&$===F){a[g]!==1&&(c=Math.abs(a[g]));break}else S=z,w=$,z=X,$=le}}}return d}static#r(e,n,i,r){if(i-n<=4){for(let O=n;O<i-2;O+=2)r.push(e[O],e[O+1]);return}const s=e[n],a=e[n+1],l=e[i-4]-s,c=e[i-3]-a,d=Math.hypot(l,c),f=l/d,p=c/d,g=f*a-p*s,y=c/l,S=1/d,w=Math.atan(y),E=Math.cos(w),x=Math.sin(w),C=S*(Math.abs(E)+Math.abs(x)),T=S*(1-C+C**2),N=Math.max(Math.atan(Math.abs(x+E)*T),Math.atan(Math.abs(x-E)*T));let R=0,I=n;for(let O=n+2;O<i-2;O+=2){const F=Math.abs(g-f*e[O+1]+p*e[O]);F>R&&(I=O,R=F)}R>(d*N)**2?(this.#r(e,n,I+2,r),this.#r(e,I,i,r)):r.push(s,a)}static#o(e){const n=[],i=e.length;return this.#r(e,0,i,n),n.push(e[i-2],e[i-1]),n.length<=4?null:n}static#u(e,n,i,r,s,a){const l=new Float32Array(a**2),c=-2*r**2,d=a>>1;for(let w=0;w<a;w++){const E=(w-d)**2;for(let x=0;x<a;x++)l[w*a+x]=Math.exp((E+(x-d)**2)/c)}const f=new Float32Array(256),p=-2*s**2;for(let w=0;w<256;w++)f[w]=Math.exp(w**2/p);const g=e.length,y=new Uint8Array(g),S=new Uint32Array(256);for(let w=0;w<i;w++)for(let E=0;E<n;E++){const x=w*n+E,C=e[x];let T=0,N=0;for(let I=0;I<a;I++){const O=w+I-d;if(!(O<0||O>=i))for(let F=0;F<a;F++){const z=E+F-d;if(z<0||z>=n)continue;const $=e[O*n+z],G=l[I*a+F]*f[Math.abs($-C)];T+=$*G,N+=G}}const R=y[x]=Math.round(T/N);S[R]++}return[y,S]}static#l(e){const n=new Uint32Array(256);for(const i of e)n[i]++;return n}static#f(e){const n=e.length,i=new Uint8ClampedArray(n>>2);let r=-1/0,s=1/0;for(let l=0,c=i.length;l<c;l++){const d=i[l]=e[l<<2];r=Math.max(r,d),s=Math.min(s,d)}const a=255/(r-s);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-s)*a;return i}static#d(e){let n,i=-1/0,r=-1/0;const s=e.findIndex(c=>c!==0);let a=s,l=s;for(n=s;n<256;n++){const c=e[n];c>i&&(n-a>r&&(r=n-a,l=n-1),i=c,a=n)}for(n=l-1;n>=0&&!(e[n]>e[n+1]);n--);return n}static#h(e){const n=e,{width:i,height:r}=e,{maxDim:s}=this.#e;let a=i,l=r;if(i>s||r>s){let g=i,y=r,S=Math.log2(Math.max(i,r)/s);const w=Math.floor(S);S=S===w?w-1:w;for(let x=0;x<S;x++){a=Math.ceil(g/2),l=Math.ceil(y/2);const C=new OffscreenCanvas(a,l);C.getContext("2d").drawImage(e,0,0,g,y,0,0,a,l),g=a,y=l,e!==n&&e.close(),e=C.transferToImageBitmap()}const E=Math.min(s/a,s/l);a=Math.round(a*E),l=Math.round(l*E)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const f=d.getImageData(0,0,a,l).data;return[this.#f(f),a,l]}static extractContoursFromText(e,{fontFamily:n,fontStyle:i,fontWeight:r},s,a,l,c){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const p=200,g=f.font=`${i} ${r} ${p}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:C,width:T}=f.measureText(e),N=1.5,R=Math.ceil(Math.max(Math.abs(y)+Math.abs(S)||0,T)*N),I=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||p,Math.abs(x)+Math.abs(C)||p)*N);d=new OffscreenCanvas(R,I),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,R,I),f.fillStyle="black",f.fillText(e,R*(N-1)/2,I*(3-N)/2);const O=this.#f(f.getImageData(0,0,R,I).data),F=this.#l(O),z=this.#d(F),$=this.#s(O,R,I,z);return this.processDrawnLines({lines:{curves:$,width:R,height:I},pageWidth:s,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,n,i,r,s){const[a,l,c]=this.#h(e),[d,f]=this.#u(a,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(f),g=this.#s(d,l,c,p);return this.processDrawnLines({lines:{curves:g,width:l,height:c},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:a,areContours:l}){r%180!==0&&([n,i]=[i,n]);const{curves:c,width:d,height:f}=e,p=e.thickness??0,g=[],y=Math.min(n/d,i/f),S=y/n,w=y/i,E=[];for(const{points:C}of c){const T=a?this.#o(C):C;if(!T)continue;E.push(T);const N=T.length,R=new Float32Array(N),I=new Float32Array(3*(N===2?2:N-2));if(g.push({line:I,points:R}),N===2){R[0]=T[0]*S,R[1]=T[1]*w,I.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[O,F,z,$]=T;O*=S,F*=w,z*=S,$*=w,R.set([O,F,z,$],0),I.set([NaN,NaN,NaN,NaN,O,F],0);for(let G=4;G<N;G+=2){const X=R[G]=T[G]*S,le=R[G+1]=T[G+1]*w;I.set(ge.createBezierPoints(O,F,z,$,X,le),(G-2)*3),[O,F,z,$]=[z,$,X,le]}}if(g.length===0)return null;const x=l?new ib:new Hc;return x.build(g,n,i,1,r,l?0:p,s),{outline:x,newCurves:E,areContours:l,thickness:p,width:d,height:f}}static async compressSignature({outlines:e,areContours:n,thickness:i,width:r,height:s}){let a=1/0,l=-1/0,c=0;for(const T of e){c+=T.length;for(let N=2,R=T.length;N<R;N++){const I=T[N]-T[N-2];a=Math.min(a,I),l=Math.max(l,I)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const f=e.length,p=Uf+Wu*f,g=new Uint32Array(p);let y=0;g[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*f)*d.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=r,g[y++]=s,g[y++]=n?0:1,g[y++]=Math.max(0,Math.floor(i??0)),g[y++]=f,g[y++]=d.BYTES_PER_ELEMENT;for(const T of e)g[y++]=T.length-2,g[y++]=T[0],g[y++]=T[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(g);const E=d.prototype.constructor;for(const T of e){const N=new E(T.length-2);for(let R=2,I=T.length;R<I;R++)N[R-2]=T[R]-T[R-2];w.write(N)}w.close();const x=await new Response(S.readable).arrayBuffer(),C=new Uint8Array(x);return uD(C)}static async decompressSignature(e){try{const n=r$(e),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,l=0;for await(const T of i)a||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),a.set(T,l),l+=T.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=c[2],p=c[3],g=c[4]===0,y=c[5],S=c[6],w=c[7],E=[],x=(Uf+Wu*S)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(a.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(a.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(a.buffer,x);break}l=0;for(let T=0;T<S;T++){const N=c[Wu*T+Uf],R=new Float32Array(N+2);E.push(R);for(let I=0;I<Wu-1;I++)R[I]=c[Wu*T+Uf+I+1];for(let I=0;I<N;I++)R[I+2]=R[I]+C[l++]}return{areContours:g,thickness:y,outlines:E,width:f,height:p}}catch(n){return ke(`decompressSignature: ${n}`),null}}}class PA extends FD{constructor(){super(),super.updateProperties({fill:Ce._defaultLineColor,"stroke-width":0})}clone(){const e=new PA;return e.updateAll(this),e}}class RA extends Mp{constructor(e){super(e),super.updateProperties({stroke:Ce._defaultLineColor,"stroke-width":1})}clone(){const e=new RA(this._viewParameters);return e.updateAll(this),e}}class Tr extends tt{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=Ue.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Ce.initialize(e,n),this._defaultDrawingOptions=new PA,this._defaultDrawnSignatureOptions=new RA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:s,areContours:a,description:l,uuid:c,heightInPage:d}=this.#i,{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,y=fl.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:Tr._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(y,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:r,height:s}=this.#i,a=Math.max(r,s),l=fl.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:i,width:r,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,r){const{x:s,y:a}=this,{outline:l}=this.#i=e;this.#e=l instanceof ib,this.description=i;let c;this.#e?c=Tr.getDefaultDrawingOptions():(c=Tr._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let f=n/d;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return fl.process(e,n,i,r,Tr._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return fl.extractContoursFromText(e,n,i,r,s,Tr._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return fl.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:Tr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Tr.getDefaultDrawingOptions():(this._drawingOptions=Tr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(s),e?(s.paths={lines:n,points:i},s.uuid=this.#n,s.isCopy=!0):s.lines=n,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,n,i,r,s,a){return a.areContours?ib.deserialize(e,n,i,r,s,a):Hc.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){const r=await super.deserialize(e,n,i);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class qj extends Ce{#e=null;#t=null;#i=null;#n=null;#a=null;#s="";#r=null;#o=!1;#u=null;#l=!1;#f=!1;static _type="stamp";static _editorType=Ue.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Ce.initialize(e,n)}static isHandlingMimeForPasting(e){return K0.includes(e)}static paste(e,n){n.pasteEditor({mode:Ue.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#d(e,n=!1){if(!e){this.remove();return}this.#e=e.bitmap,n||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#m()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#h());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#d(r)).finally(()=>this.#h());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#d(r)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=K0.join(",");const n=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,r&&(this.#e=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},e)}#m(){const{div:e}=this;let{width:n,height:i}=this.#e;const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const c=Math.min(a*r/n,a*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=this.#r=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=n/r,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,n,i=!1){e||(e=224);const{width:r,height:s}=this.#e,a=new Ir;let l=this.#e,c=r,d=s,f=null;if(n){if(r>n||s>n){const I=Math.min(n/r,n/s);c=Math.floor(r*I),d=Math.floor(s*I)}f=document.createElement("canvas");const g=f.width=Math.ceil(c*a.sx),y=f.height=Math.ceil(d*a.sy);this.#l||(l=this.#c(g,y));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":c$.isDarkMode&&(w="#8f8f9d",E="#42414d");const x=15,C=x*a.sx,T=x*a.sy,N=new OffscreenCanvas(C*2,T*2),R=N.getContext("2d");R.fillStyle=w,R.fillRect(0,0,C*2,T*2),R.fillStyle=E,R.fillRect(0,0,C,T),R.fillRect(C,T,C,T),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,g,y),S.drawImage(l,0,0,l.width,l.height,0,0,g,y)}let p=null;if(i){let g,y;if(a.symmetric&&l.width<e&&l.height<e)g=l.width,y=l.height;else if(l=this.#e,r>e||s>e){const E=Math.min(e/r,e/s);g=Math.floor(r*E),y=Math.floor(s*E),this.#l||(l=this.#c(g,y))}const w=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,g,y),p={width:g,height:y,data:w.getImageData(0,0,g,y).data}}return{canvas:f,width:c,height:d,imageData:p}}#c(e,n){const{width:i,height:r}=this.#e;let s=i,a=r,l=this.#e;for(;s>2*e||a>2*n;){const c=s,d=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(s,a);f.getContext("2d").drawImage(l,0,0,c,d,0,0,s,a),l=f.transferToImageBitmap()}return l}#p(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,s=new Ir,a=Math.ceil(i*e*s.sx),l=Math.ceil(r*n*s.sy),c=this.#r;if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=this.#l?this.#e:this.#c(a,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,a,l)}#v(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#e,n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#l){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Rl.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Rl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,n,i){let r=null,s=!1;if(e instanceof UD){const{data:{rect:w,rotation:E,id:x,structParent:C,popupRef:T,richText:N,contentsObj:R,creationDate:I,modificationDate:O},container:F,parent:{page:{pageNumber:z}},canvas:$}=e;let G,X;$?(delete e.canvas,{id:G,bitmap:X}=i.imageManager.getFromCanvas(F.id,$),$.remove()):(s=!0,e._hasNoCanvas=!0);const le=(await n._structTree.getAriaAttributes(`${gl}${x}`))?.get("aria-label")||"";r=e={annotationType:Ue.STAMP,bitmapId:G,bitmap:X,pageIndex:z-1,rect:w.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:le},isSvg:!1,structParent:C,popupRef:T,richText:N,comment:R?.str||null,creationDate:I,modificationDate:O}}const a=await super.deserialize(e,n,i),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:g}=e;s?(i.addMissingCanvas(e.id,a),a.#o=!0):f&&i.imageManager.isValidId(f)?(a.#t=f,c&&(a.#e=c)):a.#n=d,a.#l=p;const[y,S]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/S,g&&(a.altTextData=g),a._initialData=r,e.comment&&a.setCommentData(e),a.#f=!!r,a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=this.#b(i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(this.#t))n.stamps.set(this.#t,{area:a,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){const l=n.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#v(!1))}return i}#b(e){const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class os{#e;#t=!1;#i=null;#n=null;#a=null;#s=new Map;#r=!1;#o=!1;#u=!1;#l=null;#f=null;#d=null;#h=null;#g=null;#m=-1;#c;static _initialized=!1;static#p=new Map([cn,MA,qj,Ft,Tr].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:f}){const p=[...os.#p.values()];if(!os._initialized){os._initialized=!0;for(const g of p)g.initialize(f,e)}e.registerEditorTypes(p),this.#c=e,this.pageIndex=n,this.div=i,this.#e=s,this.#i=a,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=r,this.#c.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===Ue.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#S(),e){case Ue.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ue.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ue.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===Ue.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const i of os.#p.values())n.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#v(){return this.#s.size!==0?this.#s.values():this.#c.getEditors(this.pageIndex)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const i of this.#v)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#c.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=this.#i;if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),this.#c.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1,this.#c._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const r=this.#c.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:c,timeStamp:d}=s,f=this.#m;if(d-f>500){this.#m=d;return}this.#m=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const S=new RegExp(`^${fc}[0-9]+$`);for(const E of g)if(S.test(E.id)){y=E.id;break}if(!y)return;const w=this.#s.get(y);w?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick(s))},{signal:r,capture:!0})}const e=this.#i,n=[];if(e){const r=new Map,s=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=s.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=r.get(c),d&&(this.#c.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of os.#p.values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(n),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#h){this.#h=new AbortController;const e=this.#c.combinedSignal(this.#h);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#c.unselectAll();const{target:n}=e;if(n===this.#d.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#d.div.contains(n)){const{isMac:i}=en.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Ft.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:n}=e;n&&this.#c.isDeletedAnnotationElement(n)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e),Ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),n.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getEditorByUID(e){for(const n of this.#s.values())if(n.uid===e)return n;return null}getNextId(){return this.#c.getId()}get#y(){return os.#p.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#x(e){const n=this.#y;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:i,offsetY:r}=this.#_(),s=this.getNextId(),a=this.#x({parent:this,id:s,x:i,y:r,uiManager:this.#c,isCentered:!0,...n});a&&this.add(a)}async deserialize(e){return await os.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,n,i={}){const r=this.getNextId(),s=this.#x({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:n,...i});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:e,y:n,width:i,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,n),l=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,n+r),d=(s+l)/2-e,f=(a+c)/2-n,[p,g]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:p,offsetY:g}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:n}=en.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#r||(this.#r=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#c.getMode();if(i===Ue.STAMP||i===Ue.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===Ue.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:n}=en.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#r=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const i=this.#c.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#f=null,this.commitOrRemove())},{signal:n}),this.#y.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&(this.#f=n);return}this.#f&&setTimeout(()=>{this.#f?.focus(),this.#f=null},0)}endDrawingSession(e=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#f=null,this.#y.endDrawing(e)):null}findNewParent(e,n,i){const r=this.#c.findParent(n,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#c.removeLayer(this)}#S(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,no(this.div,e);for(const n of this.#c.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#S();const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,no(this.div,{rotation:i}),n!==i)for(const r of this.#s.values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#c.viewParameters.realScale}}class wn{#e=null;#t=new Map;#i=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const n of this.#t.values())n.remove(),e.append(n);this.#e=e}}static get _svgFactory(){return Le(this,"_svgFactory",new Ah)}static#a(e,[n,i,r,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*n}%`,a.width=`${100*r}%`,a.height=`${100*s}%`}#s(){const e=wn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,n){const i=wn._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${n}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=wn._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),r}#o(e,n){for(const[i,r]of Object.entries(n))r===null?e.removeAttribute(i):e.setAttribute(i,r)}draw(e,n=!1,i=!1){const r=wn.#n++,s=this.#s(),a=wn._svgFactory.createElement("defs");s.append(a);const l=wn._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(r,l);const d=i?this.#r(a,c):null,f=wn._svgFactory.createElement("use");return s.append(f),f.setAttribute("href",`#${c}`),this.updateProperties(s,e),this.#t.set(r,s),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,n){const i=wn.#n++,r=this.#s(),s=wn._svgFactory.createElement("defs");r.append(s);const a=wn._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(n){const p=wn._svgFactory.createElement("mask");s.append(p),c=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",c),p.setAttribute("maskUnits","objectBoundingBox");const g=wn._svgFactory.createElement("rect");p.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=wn._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${l}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=wn._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const f=d.cloneNode();return r.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(i,r),i}finalizeDraw(e,n){this.#i.delete(e),this.updateProperties(e,n)}updateProperties(e,n){if(!n)return;const{root:i,bbox:r,rootClass:s,path:a}=n,l=typeof e=="number"?this.#t.get(e):e;if(l){if(i&&this.#o(l,i),r&&wn.#a(l,r),s){const{classList:c}=l;for(const[d,f]of Object.entries(s))c.toggle(d,f)}if(a){const d=l.firstElementChild.firstElementChild;this.#o(d,a)}}}updateParent(e,n){if(n===this)return;const i=this.#t.get(e);i&&(n.#e.append(i),this.#t.delete(e),n.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:tb};globalThis.pdfjsLib={AbortException:la,AnnotationEditorLayer:os,AnnotationEditorParamsType:Ke,AnnotationEditorType:Ue,AnnotationEditorUIManager:ua,AnnotationLayer:CA,AnnotationMode:ia,AnnotationType:jt,applyOpacity:f$,build:bj,ColorPicker:Hi,createValidAbsoluteUrl:sD,CSSConstants:d$,DOMSVGFactory:Ah,DrawLayer:wn,FeatureTest:en,fetchData:Lc,findContrastColor:h$,getDocument:MD,getFilenameFromUrl:s$,getPdfFilenameFromUrl:a$,getRGB:Bc,getUuid:lD,getXfaPageViewport:l$,GlobalWorkerOptions:Tl,ImageKind:rh,InvalidPDFException:j0,isDataScheme:xp,isPdfFile:vA,isValidExplicitDest:E$,MathClamp:Vn,noContextMenu:ji,normalizeUnicode:n$,OPS:hc,OutputScale:Ir,PasswordResponses:Y6,PDFDataRangeTransport:PD,PDFDateString:Y0,PDFWorker:mc,PermissionFlag:j6,PixelsPerInch:Rl,RenderingCancelledException:gA,renderRichText:dD,ResponseException:yh,setLayerDimensions:no,shadow:Le,SignatureExtractor:fl,stopEvent:Ot,SupportedImageMimeTypes:K0,TextLayer:bi,TouchManager:Tp,updateUrlHash:aD,Util:he,VerbosityLevel:wp,version:ID,XfaLayer:cD};Tl.workerSrc=`https://unpkg.com/pdfjs-dist@${ID}/build/pdf.worker.min.mjs`;const zD=async t=>{try{const e=window.atob(t),n=e.length,i=new Uint8Array(n);for(let c=0;c<n;c++)i[c]=e.charCodeAt(c);const s=await MD({data:i,isEvalSupported:!1}).promise,a=[],l=s.numPages;for(let c=1;c<=l;c++){const d=await s.getPage(c),p=d.getViewport({scale:2}),g=document.createElement("canvas"),y=g.getContext("2d");if(!y)continue;g.height=p.height,g.width=p.width;const S={canvasContext:y,viewport:p};await d.render(S).promise;const E=g.toDataURL("image/jpeg",.85).split(",")[1];a.push(E)}return a}catch(e){throw console.error("PDF Conversion Failed",e),new Error("Failed to convert PDF to image for analysis.")}},Vj=t=>{if(t.length===0)return{patientName:"",reportDate:"",labName:"",results:[]};const e=t.find(a=>a.patientName)?.patientName||"",n=t.find(a=>a.reportDate)?.reportDate||"",i=t.find(a=>a.labName)?.labName||"",s=t.flatMap(a=>a.results||[]).filter((a,l,c)=>c.findIndex(d=>d.standardizedName===a.standardizedName)===l);return{patientName:e,reportDate:n,labName:i,results:s.sort((a,l)=>a.standardizedName.localeCompare(l.standardizedName))}},T1=async(t,e,n,i)=>{if(!n.modelId)throw new Error("No AI Model selected. Please go to Settings and configure your AI provider.");const r=i?.processingMode||"page-by-page",s=i?.onProgress,a=Array.isArray(t)?t:[t];if(n.provider==="openai"){let l=[],c=e;if(e==="application/pdf")try{const d=await zD(a[0]);if(d.length===0)throw new Error("Failed to extract images from PDF");l=d,c="image/jpeg"}catch(d){throw console.error("PDF Conversion Error:",d),new Error("Failed to convert PDF for OpenAI analysis. Please try uploading an image directly.")}else l=a;if(r==="page-by-page"&&l.length>1){const d=[];for(let f=0;f<l.length;f++){s&&s(f+1,l.length);const p=await ZC([l[f]],c,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId);d.push(p)}return Vj(d)}return ZC(l,c,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId)}else return H6(a[0],e,n.apiKey,n.modelId)},$j=async(t,e,n)=>n.provider==="openai"?$6(t,e,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId):G6(t,e,n.apiKey,n.modelId),$oe=async t=>q6(t.apiKey),HD="MediTimelineDB",Dr="reports",ca="mappings",da="profiles",NA=3,jj=()=>new Promise((t,e)=>{const n=indexedDB.open(HD,NA);n.onerror=()=>e(n.error),n.onsuccess=()=>t(),n.onupgradeneeded=i=>{const r=i.target.result;r.objectStoreNames.contains(Dr)||r.createObjectStore(Dr,{keyPath:"id"}),r.objectStoreNames.contains(ca)||r.createObjectStore(ca,{keyPath:"id"}),r.objectStoreNames.contains(da)||r.createObjectStore(da,{keyPath:"id"})}}),ga=()=>new Promise((t,e)=>{const n=indexedDB.open(HD,NA);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result)}),Yj=async t=>{const e=await ga();return new Promise((n,i)=>{const r=e.transaction(da,"readwrite");r.objectStore(da).put(t),r.oncomplete=()=>n(),r.onerror=()=>i(r.error)})},rb=async()=>{const t=await ga();return new Promise((e,n)=>{const r=t.transaction(da,"readonly").objectStore(da).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>n(r.error)})},ss=async t=>{const e=await ga();return new Promise((n,i)=>{const a=e.transaction(Dr,"readwrite").objectStore(Dr).put(t);a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},sb=async()=>{const t=await ga();return new Promise((e,n)=>{const s=t.transaction(Dr,"readonly").objectStore(Dr).getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})},Kj=async t=>{const e=await ga();return new Promise((n,i)=>{const a=e.transaction(Dr,"readwrite").objectStore(Dr).delete(t);a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},Wj=async t=>{const e=await ga();return new Promise((n,i)=>{const a=e.transaction(ca,"readwrite").objectStore(ca).put({id:"grouped_mapping",data:t});a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},ab=async()=>{const t=await ga();return new Promise((e,n)=>{const s=t.transaction(ca,"readonly").objectStore(ca).get("grouped_mapping");s.onsuccess=()=>e(s.result?.data||{}),s.onerror=()=>n(s.error)})},joe=async()=>{const t=await sb(),e=await ab(),n=await rb(),i={version:NA,timestamp:Date.now(),profiles:n,reports:t,mapping:e};return JSON.stringify(i)},Yoe=async t=>{try{const e=JSON.parse(t);if(!e.reports||!Array.isArray(e.reports))throw new Error("Invalid backup file format");const i=(await ga()).transaction([Dr,ca,da],"readwrite");if(e.profiles&&Array.isArray(e.profiles)){const a=i.objectStore(da);e.profiles.forEach(l=>a.put(l))}const r=i.objectStore(Dr);let s=0;for(const a of e.reports)r.put(a),s++;return e.mapping&&i.objectStore(ca).put({id:"grouped_mapping",data:e.mapping}),new Promise((a,l)=>{i.oncomplete=()=>a(s),i.onerror=()=>l(i.error)})}catch(e){throw e}};function Xj(t){const e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.onload=()=>{window.gapi.load("client:picker",async()=>{await window.gapi.client.init({discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})})},document.body.appendChild(e);const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.onload=()=>{console.warn("Google Client ID not found. Drive sync will be unavailable.")},document.body.appendChild(n)}const Jj=()=>{const t=[],e=new Date,n=(r,s)=>{const a=new Date(r);return a.setMonth(a.getMonth()-s),a.toISOString().split("T")[0]},i=[36,33,30,27,24,20,16,12,9,6,3,0];for(let r=0;r<i.length;r++){const s=i[r],a=r/(i.length-1),l=13.5+Math.random()*1.5,c=6.5+Math.random()*2,d=240-50*a+(Math.random()*10-5),f=160-60*a+(Math.random()*10-5),p=40+15*a+Math.random()*5,g=15+40*a+Math.random()*5,y=2.5+Math.sin(r)*1.5;let S=25+Math.random()*10;r===5&&(S=85),r===6&&(S=45);const w=.9+Math.random()*.2,E=[{testName:"Hemoglobin",standardizedName:"Hemoglobin",value:Number(l.toFixed(1)),unit:"g/dL",status:"NORMAL",category:"Hematology",referenceRange:{min:13.5,max:17.5},description:"Protein in red blood cells that carries oxygen."},{testName:"WBC Count",standardizedName:"WBC Count",value:Number(c.toFixed(1)),unit:"K/uL",status:"NORMAL",category:"Hematology",referenceRange:{min:4.5,max:11},description:"White blood cells fight infection."},{testName:"Total Cholesterol",standardizedName:"Total Cholesterol",value:Math.round(d),unit:"mg/dL",status:d>200?"HIGH":"NORMAL",category:"Lipid Profile",referenceRange:{max:200},description:"Sum of all cholesterol in your blood."},{testName:"LDL Cholesterol",standardizedName:"LDL Cholesterol",value:Math.round(f),unit:"mg/dL",status:f>100?"HIGH":"NORMAL",category:"Lipid Profile",referenceRange:{max:100},description:"Bad cholesterol, builds up in arteries."},{testName:"HDL Cholesterol",standardizedName:"HDL Cholesterol",value:Math.round(p),unit:"mg/dL",status:p<40?"LOW":"NORMAL",category:"Lipid Profile",referenceRange:{min:40},description:"Good cholesterol, protects heart."},{testName:"Vitamin D, 25-OH",standardizedName:"Vitamin D",value:Math.round(g),unit:"ng/mL",status:g<30?"LOW":"NORMAL",category:"Vitamins",referenceRange:{min:30,max:100},description:"Crucial for bone health and immunity."},{testName:"Vitamin B12",standardizedName:"Vitamin B12",value:Math.round(350+Math.random()*100),unit:"pg/mL",status:"NORMAL",category:"Vitamins",referenceRange:{min:200,max:900},description:"Important for nerve function."},{testName:"TSH",standardizedName:"TSH",value:Number(y.toFixed(2)),unit:"mIU/L",status:y>4.5||y<.4?"HIGH":"NORMAL",category:"Thyroid Profile",referenceRange:{min:.4,max:4.5},description:"Thyroid Stimulating Hormone."},{testName:"ALT (SGPT)",standardizedName:"ALT",value:Math.round(S),unit:"U/L",status:S>45?"HIGH":"NORMAL",category:"Liver Function",referenceRange:{max:45},description:"Enzyme found mostly in the liver."},{testName:"Serum Creatinine",standardizedName:"Creatinine",value:Number(w.toFixed(2)),unit:"mg/dL",status:"NORMAL",category:"Kidney Function",referenceRange:{min:.7,max:1.3},description:"Waste product filtered by kidneys."}];t.push({id:`demo-report-${r}`,profileId:"demo",fileName:`Lab_Report_${n(e,s)}.pdf`,fileType:"application/pdf",uploadDate:Date.now()-s*30*24*60*60*1e3,status:Yt.COMPLETED,isDemo:!0,rawBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",data:{patientName:"Demo User",reportDate:n(e,s),labName:r%2===0?"City General Lab":"Metropolis Diagnostics",results:E}})}return t.reverse()},Qj=({onFileSelect:t})=>{const e=P.useRef(null),[n,i]=P.useState(!1),r=c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?i(!0):c.type==="dragleave"&&i(!1)},s=c=>{if(c.preventDefault(),c.stopPropagation(),i(!1),c.dataTransfer.files&&c.dataTransfer.files.length>0){const d=Array.from(c.dataTransfer.files);t(d)}},a=c=>{if(c.preventDefault(),c.target.files&&c.target.files.length>0){const d=Array.from(c.target.files);t(d)}},l=()=>{e.current?.click()};return k.jsxs("div",{className:`relative w-full border-2 border-dashed rounded-xl p-8 transition-all duration-200 ease-in-out text-center cursor-pointer
        ${n?"border-blue-500 bg-blue-50":"border-slate-300 hover:border-slate-400 bg-white"}
      `,onDragEnter:r,onDragLeave:r,onDragOver:r,onDrop:s,onClick:l,children:[k.jsx("input",{ref:e,type:"file",className:"hidden",accept:"image/png,image/jpeg,image/jpg,application/pdf",multiple:!0,onChange:a}),k.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[k.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:k.jsx(xz,{className:"w-8 h-8 text-blue-600"})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Click to upload or drag & drop"}),k.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Upload multiple images or PDFs (Max 10MB each)"})]}),k.jsxs("div",{className:"flex gap-4 mt-2",children:[k.jsxs("div",{className:"flex items-center text-xs text-slate-400",children:[k.jsx(j3,{className:"w-3 h-3 mr-1"})," Images"]}),k.jsxs("div",{className:"flex items-center text-xs text-slate-400",children:[k.jsx(P0,{className:"w-3 h-3 mr-1"})," PDFs"]})]})]})]})},Zj=({reports:t,onDelete:e,onSelect:n,selectedId:i,analysisProgress:r})=>t.length===0?k.jsxs("div",{className:"text-center py-10 px-4 text-slate-400",children:[k.jsx(P0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),k.jsx("p",{className:"text-sm",children:"No reports uploaded yet."})]}):k.jsx("div",{className:"space-y-3",children:t.map(s=>k.jsxs("div",{className:`
            group relative p-4 rounded-xl border transition-all duration-200 cursor-pointer
            ${i===s.id?"bg-blue-50 border-blue-300 shadow-sm":"bg-white border-slate-200 hover:border-blue-200 hover:shadow-sm"}
          `,onClick:()=>n(s.id),children:[s.isDemo&&k.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-blue-100 text-blue-600 text-[9px] font-bold px-1.5 py-0.5 rounded uppercase",children:[k.jsx(th,{className:"w-2.5 h-2.5"})," Demo"]}),k.jsxs("div",{className:"flex justify-between items-start mb-2",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx("div",{className:`
                p-2 rounded-lg 
                ${s.status===Yt.COMPLETED?"bg-green-100 text-green-600":s.status===Yt.ERROR?"bg-red-100 text-red-600":s.status===Yt.PROCESSING?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-500"}
              `,children:k.jsx(P0,{className:"w-5 h-5"})}),k.jsxs("div",{className:"overflow-hidden",children:[k.jsx("h4",{className:"font-medium text-slate-900 truncate pr-4 text-sm",title:s.fileName,children:s.data?.labName||s.fileName}),k.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[k.jsx(_3,{className:"w-3 h-3 mr-1"}),s.data?.reportDate||"Unknown Date"]})]})]}),!s.isDemo&&k.jsx("button",{onClick:a=>{a.stopPropagation(),e(s.id)},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",children:k.jsx(yz,{className:"w-4 h-4"})})]}),s.tags&&s.tags.length>0&&k.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 mb-1",children:[s.tags.slice(0,3).map(a=>k.jsxs("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 flex items-center gap-0.5",children:[k.jsx(fI,{className:"w-2 h-2"})," ",a]},a)),s.tags.length>3&&k.jsxs("span",{className:"text-[9px] bg-slate-50 text-slate-500 px-1.5 py-0.5 rounded border border-slate-100",children:["+",s.tags.length-3]})]}),k.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-100",children:[k.jsxs("div",{className:"flex items-center space-x-1",children:[s.status===Yt.QUEUED&&k.jsxs(k.Fragment,{children:[k.jsx(V3,{className:"w-3 h-3 text-slate-400 animate-pulse"}),k.jsx("span",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wide",children:"In Queue"})]}),s.status===Yt.PROCESSING&&k.jsxs(k.Fragment,{children:[k.jsx(k3,{className:"w-3 h-3 text-amber-500 animate-spin"}),k.jsx("span",{className:"text-[10px] font-medium text-amber-600 uppercase tracking-wide",children:r?`Processing ${r.current}/${r.total}...`:"Processing..."})]}),s.status===Yt.COMPLETED&&k.jsxs(k.Fragment,{children:[k.jsx(I3,{className:"w-3 h-3 text-green-500"}),k.jsx("span",{className:"text-[10px] font-medium text-green-600 uppercase tracking-wide",children:"Completed"})]}),s.status===Yt.ERROR&&k.jsxs(k.Fragment,{children:[k.jsx(R3,{className:"w-3 h-3 text-red-500"}),k.jsx("span",{className:"text-[10px] font-medium text-red-600 uppercase tracking-wide",title:s.errorMessage,children:s.errorMessage||"Error"})]})]}),s.data?.results&&k.jsxs("span",{className:"text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:[s.data.results.length," markers"]})]})]},s.id))});function GD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=GD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ot(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=GD(t))&&(i&&(i+=" "),i+=e);return i}var e8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IA(t){if(typeof t!="string")return!1;var e=e8;return e.includes(t)}var t8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],n8=new Set(t8);function qD(t){return typeof t!="string"?!1:n8.has(t)}function VD(t){return typeof t=="string"&&t.startsWith("data-")}function Or(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(qD(n)||VD(n))&&(e[n]=t[n]);return e}function Pp(t){if(t==null)return null;if(P.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Or(e)}return typeof t=="object"&&!Array.isArray(t)?Or(t):null}function Pn(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(qD(n)||VD(n)||IA(n))&&(e[n]=t[n]);return e}function i8(t){return t==null?null:P.isValidElement(t)?Pn(t.props):typeof t=="object"&&!Array.isArray(t)?Pn(t):null}var r8=["children","width","height","viewBox","className","style","title","desc"];function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ob.apply(null,arguments)}function s8(t,e){if(t==null)return{};var n,i,r=a8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function a8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var $D=P.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:a,style:l,title:c,desc:d}=t,f=s8(t,r8),p=s||{width:i,height:r,x:0,y:0},g=ot("recharts-surface",a);return P.createElement("svg",ob({},Pn(f),{className:g,width:i,height:r,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),P.createElement("title",null,c),P.createElement("desc",null,d),n)}),o8=["children","className"];function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lb.apply(null,arguments)}function l8(t,e){if(t==null)return{};var n,i,r=u8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var kr=P.forwardRef((t,e)=>{var{children:n,className:i}=t,r=l8(t,o8),s=ot("recharts-layer",i);return P.createElement("g",lb({className:s},Pn(r),{ref:e}),n)}),jD=lI(),c8=P.createContext(null);function vt(t){return function(){return t}}const YD=Math.cos,Sh=Math.sin,dr=Math.sqrt,wh=Math.PI,Rp=2*wh,ub=Math.PI,cb=2*ub,Ga=1e-6,d8=cb-Ga;function KD(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function f8(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return KD;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class h8{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?KD:f8(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=i-e,d=r-n,f=a-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Ga)if(!(Math.abs(p*c-d*f)>Ga)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let y=i-a,S=r-l,w=c*c+d*d,E=y*y+S*S,x=Math.sqrt(w),C=Math.sqrt(g),T=s*Math.tan((ub-Math.acos((w+g-E)/(2*x*C)))/2),N=T/C,R=T/x;Math.abs(N-1)>Ga&&this._append`L${e+N*f},${n+N*p}`,this._append`A${s},${s},0,0,${+(p*y>f*S)},${this._x1=e+R*c},${this._y1=n+R*d}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),d=e+l,f=n+c,p=1^a,g=a?r-s:s-r;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ga||Math.abs(this._y1-f)>Ga)&&this._append`L${d},${f}`,i&&(g<0&&(g=g%cb+cb),g>d8?this._append`A${i},${i},0,1,${p},${e-l},${n-c}A${i},${i},0,1,${p},${this._x1=d},${this._y1=f}`:g>Ga&&this._append`A${i},${i},0,${+(g>=ub)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function DA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new h8(e)}function OA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function WD(t){this._context=t}WD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Np(t){return new WD(t)}function XD(t){return t[0]}function JD(t){return t[1]}function QD(t,e){var n=vt(!0),i=null,r=Np,s=null,a=DA(l);t=typeof t=="function"?t:t===void 0?XD:vt(t),e=typeof e=="function"?e:e===void 0?JD:vt(e);function l(c){var d,f=(c=OA(c)).length,p,g=!1,y;for(i==null&&(s=r(y=a())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(y)return s=null,y+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(s=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=s=null:s=r(i=c),l):i},l}function Bf(t,e,n){var i=null,r=vt(!0),s=null,a=Np,l=null,c=DA(d);t=typeof t=="function"?t:t===void 0?XD:vt(+t),e=typeof e=="function"?e:vt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?JD:vt(+n);function d(p){var g,y,S,w=(p=OA(p)).length,E,x=!1,C,T=new Array(w),N=new Array(w);for(s==null&&(l=a(C=c())),g=0;g<=w;++g){if(!(g<w&&r(E=p[g],g,p))===x)if(x=!x)y=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),S=g-1;S>=y;--S)l.point(T[S],N[S]);l.lineEnd(),l.areaEnd()}x&&(T[g]=+t(E,g,p),N[g]=+e(E,g,p),l.point(i?+i(E,g,p):T[g],n?+n(E,g,p):N[g]))}if(C)return l=null,C+""||null}function f(){return QD().defined(r).curve(a).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:vt(+p),i=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:vt(+p),d):t},d.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:vt(+p),d):i},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:vt(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:vt(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:vt(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(i).y(e)},d.defined=function(p){return arguments.length?(r=typeof p=="function"?p:vt(!!p),d):r},d.curve=function(p){return arguments.length?(a=p,s!=null&&(l=a(s)),d):a},d.context=function(p){return arguments.length?(p==null?s=l=null:l=a(s=p),d):s},d}class ZD{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function p8(t){return new ZD(t,!0)}function m8(t){return new ZD(t,!1)}const kA={draw(t,e){const n=dr(e/wh);t.moveTo(n,0),t.arc(0,0,n,0,Rp)}},g8={draw(t,e){const n=dr(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},eO=dr(1/3),v8=eO*2,y8={draw(t,e){const n=dr(e/v8),i=n*eO;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},b8={draw(t,e){const n=dr(e),i=-n/2;t.rect(i,i,n,n)}},A8=.8908130915292852,tO=Sh(wh/10)/Sh(7*wh/10),S8=Sh(Rp/10)*tO,w8=-YD(Rp/10)*tO,_8={draw(t,e){const n=dr(e*A8),i=S8*n,r=w8*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=Rp*s/5,l=YD(a),c=Sh(a);t.lineTo(c*n,-l*n),t.lineTo(l*i-c*r,c*i+l*r)}t.closePath()}},Jv=dr(3),E8={draw(t,e){const n=-dr(e/(Jv*3));t.moveTo(0,n*2),t.lineTo(-Jv*n,-n),t.lineTo(Jv*n,-n),t.closePath()}},Bi=-.5,Fi=dr(3)/2,db=1/dr(12),x8=(db/2+1)*3,T8={draw(t,e){const n=dr(e/x8),i=n/2,r=n*db,s=i,a=n*db+n,l=-s,c=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(Bi*i-Fi*r,Fi*i+Bi*r),t.lineTo(Bi*s-Fi*a,Fi*s+Bi*a),t.lineTo(Bi*l-Fi*c,Fi*l+Bi*c),t.lineTo(Bi*i+Fi*r,Bi*r-Fi*i),t.lineTo(Bi*s+Fi*a,Bi*a-Fi*s),t.lineTo(Bi*l+Fi*c,Bi*c-Fi*l),t.closePath()}};function C8(t,e){let n=null,i=DA(r);t=typeof t=="function"?t:vt(t||kA),e=typeof e=="function"?e:vt(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:vt(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:vt(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function _h(){}function Eh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function nO(t){this._context=t}nO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Eh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Eh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function M8(t){return new nO(t)}function iO(t){this._context=t}iO.prototype={areaStart:_h,areaEnd:_h,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Eh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function P8(t){return new iO(t)}function rO(t){this._context=t}rO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Eh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R8(t){return new rO(t)}function sO(t){this._context=t}sO.prototype={areaStart:_h,areaEnd:_h,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function N8(t){return new sO(t)}function C1(t){return t<0?-1:1}function M1(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(s*r+a*i)/(i+r);return(C1(s)+C1(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function P1(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Qv(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,r+l*e,s-l,a-l*n,s,a)}function xh(t){this._context=t}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qv(this,this._t0,P1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Qv(this,P1(this,n=M1(this,t,e)),n);break;default:Qv(this,this._t0,n=M1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function aO(t){this._context=new oO(t)}(aO.prototype=Object.create(xh.prototype)).point=function(t,e){xh.prototype.point.call(this,e,t)};function oO(t){this._context=t}oO.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function I8(t){return new xh(t)}function D8(t){return new aO(t)}function lO(t){this._context=t}lO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=R1(t),r=R1(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function R1(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function O8(t){return new lO(t)}function Ip(t,e){this._context=t,this._t=e}Ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function k8(t){return new Ip(t,.5)}function L8(t){return new Ip(t,0)}function U8(t){return new Ip(t,1)}function ro(t,e){if((a=t.length)>1)for(var n=1,i,r,s=t[e[0]],a,l=s.length;n<a;++n)for(r=s,s=t[e[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function fb(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function B8(t,e){return t[e]}function F8(t){const e=[];return e.key=t,e}function z8(){var t=vt([]),e=fb,n=ro,i=B8;function r(s){var a=Array.from(t.apply(this,arguments),F8),l,c=a.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(a[l][d]=[0,+i(p,a[l].key,d,s)]).data=p;for(l=0,f=OA(e(a));l<c;++l)a[f[l]].index=l;return n(a,f),a}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:vt(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:vt(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?fb:typeof s=="function"?s:vt(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??ro,r):n},r}function H8(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,a;r<s;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}ro(t,e)}}function G8(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var a=0,l=0;a<r;++a)l+=t[a][n][1]||0;i[n][1]+=i[n][0]=-l/2}ro(t,e)}}function q8(t,e){if(!(!((a=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,a;i<s;++i){for(var l=0,c=0,d=0;l<a;++l){for(var f=t[e[l]],p=f[i][1]||0,g=f[i-1][1]||0,y=(p-g)/2,S=0;S<l;++S){var w=t[e[S]],E=w[i][1]||0,x=w[i-1][1]||0;y+=E-x}c+=p,d+=y*p}r[i-1][1]+=r[i-1][0]=n,c&&(n-=d/c)}r[i-1][1]+=r[i-1][0]=n,ro(t,e)}}var Zv={},ey={},N1;function V8(){return N1||(N1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(ey)),ey}var ty={},I1;function uO(){return I1||(I1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(ty)),ty}var ny={},D1;function LA(){return D1||(D1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(ny)),ny}var iy={},ry={},O1;function $8(){return O1||(O1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(ry)),ry}var k1;function UA(){return k1||(k1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$8(),n=LA();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const s=[],a=r.length;if(a===0)return s;let l=0,c="",d="",f=!1;for(r.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const p=r[l];d?p==="\\"&&l+1<a?(l++,c+=r[l]):p===d?d="":c+=p:f?p==='"'||p==="'"?d=p:p==="]"?(f=!1,s.push(c),c=""):c+=p:p==="["?(f=!0,c&&(s.push(c),c="")):p==="."?c&&(s.push(c),c=""):c+=p,l++}return c&&s.push(c),s}t.toPath=i})(iy)),iy}var L1;function BA(){return L1||(L1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=V8(),n=uO(),i=LA(),r=UA();function s(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return d;const f=l[c];return f===void 0?n.isDeepKey(c)?s(l,r.toPath(c),d):d:f}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const f=l[c];return f===void 0?d:f}default:{if(Array.isArray(c))return a(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return d;const f=l[c];return f===void 0?d:f}}}function a(l,c,d){if(c.length===0)return d;let f=l;for(let p=0;p<c.length;p++){if(f==null||e.isUnsafeProperty(c[p]))return d;f=f[c[p]]}return f===void 0?d:f}t.get=s})(Zv)),Zv}var sy,U1;function j8(){return U1||(U1=1,sy=BA().get),sy}var Y8=j8();const Dp=Br(Y8);var K8=4;function aa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K8,n=10**e,i=Math.round(t*n)/n;return Object.is(i,-0)?0:i}function Dt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.reduce((r,s,a)=>{var l=n[a-1];return typeof l=="string"?r+l+s:l!==void 0?r+aa(l)+s:r+s},"")}var Gi=t=>t===0?0:t>0?1:-1,Yi=t=>typeof t=="number"&&t!=+t,vs=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ee=t=>(typeof t=="number"||t instanceof Number)&&!Yi(t),kn=t=>Ee(t)||typeof t=="string",W8=0,vc=t=>{var e=++W8;return"".concat(t||"").concat(e)},fa=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&typeof e!="string")return i;var s;if(vs(e)){if(n==null)return i;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Yi(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},cO=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[String(t[i])])n[String(t[i])]=!0;else return!0;return!1};function oi(t,e,n){return Ee(t)&&Ee(e)?aa(t+n*(e-t)):e}function dO(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):Dp(i,e))===n)}var pn=t=>t===null||typeof t>"u",Gc=t=>pn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function X8(t){return t!=null}function qc(){}var J8=["type","size","sizeType"];function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hb.apply(null,arguments)}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function F1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(i){Q8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Q8(t,e,n){return(e=Z8(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z8(t){var e=eY(t,"string");return typeof e=="symbol"?e:e+""}function eY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tY(t,e){if(t==null)return{};var n,i,r=nY(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var fO={symbolCircle:kA,symbolCross:g8,symbolDiamond:y8,symbolSquare:b8,symbolStar:_8,symbolTriangle:E8,symbolWye:T8},iY=Math.PI/180,rY=t=>{var e="symbol".concat(Gc(t));return fO[e]||kA},sY=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*iY;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},aY=(t,e)=>{fO["symbol".concat(Gc(t))]=e},hO=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,r=tY(t,J8),s=F1(F1({},r),{},{type:e,size:n,sizeType:i}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var g=rY(a),y=C8().type(g).size(sY(n,i,a)),S=y();if(S!==null)return S},{className:c,cx:d,cy:f}=s,p=Pn(s);return Ee(d)&&Ee(f)&&Ee(n)?P.createElement("path",hb({},p,{className:ot("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};hO.registerSymbol=aY;var pO=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,FA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{IA(r)&&(i[r]=(s=>n[r](n,s)))}),i},oY=(t,e,n)=>i=>(t(e,n,i),null),lY=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];IA(r)&&typeof s=="function"&&(i||(i={}),i[r]=oY(s,e,n))}),i};function z1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(n),!0).forEach(function(i){cY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cY(t,e,n){return(e=dY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dY(t){var e=fY(t,"string");return typeof e=="symbol"?e:e+""}function fY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ln(t,e){var n=uY({},t),i=e,r=Object.keys(e),s=r.reduce((a,l)=>(a[l]===void 0&&i[l]!==void 0&&(a[l]=i[l]),a),n);return s}var ay={},oy={},H1;function hY(){return H1||(H1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const a=n[s],l=i(a);r.has(l)||r.set(l,a)}return Array.from(r.values())}t.uniqBy=e})(oy)),oy}var ly={},G1;function mO(){return G1||(G1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(ly)),ly}var uy={},cy={},dy={},q1;function pY(){return q1||(q1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(dy)),dy}var V1;function zA(){return V1||(V1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pY();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(cy)),cy}var fy={},$1;function mY(){return $1||($1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(fy)),fy}var j1;function gY(){return j1||(j1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zA(),n=mY();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(uy)),uy}var hy={},py={},Y1;function vY(){return Y1||(Y1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BA();function n(i){return function(r){return e.get(r,i)}}t.property=n})(py)),py}var my={},gy={},vy={},yy={},K1;function gO(){return K1||(K1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(yy)),yy}var by={},W1;function vO(){return W1||(W1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(by)),by}var Ay={},X1;function yO(){return X1||(X1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(Ay)),Ay}var J1;function yY(){return J1||(J1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gO(),n=vO(),i=yO();function r(f,p,g){return typeof g!="function"?r(f,p,()=>{}):s(f,p,function y(S,w,E,x,C,T){const N=g(S,w,E,x,C,T);return N!==void 0?!!N:s(S,w,y,T)},new Map)}function s(f,p,g,y){if(p===f)return!0;switch(typeof p){case"object":return a(f,p,g,y);case"function":return Object.keys(p).length>0?s(f,{...p},g,y):i.eq(f,p);default:return e.isObject(f)?typeof p=="string"?p==="":!0:i.eq(f,p)}}function a(f,p,g,y){if(p==null)return!0;if(Array.isArray(p))return c(f,p,g,y);if(p instanceof Map)return l(f,p,g,y);if(p instanceof Set)return d(f,p,g,y);const S=Object.keys(p);if(f==null||n.isPrimitive(f))return S.length===0;if(S.length===0)return!0;if(y?.has(p))return y.get(p)===f;y?.set(p,f);try{for(let w=0;w<S.length;w++){const E=S[w];if(!n.isPrimitive(f)&&!(E in f)||p[E]===void 0&&f[E]!==void 0||p[E]===null&&f[E]!==null||!g(f[E],p[E],E,f,p,y))return!1}return!0}finally{y?.delete(p)}}function l(f,p,g,y){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[S,w]of p.entries()){const E=f.get(S);if(g(E,w,S,f,p,y)===!1)return!1}return!0}function c(f,p,g,y){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const S=new Set;for(let w=0;w<p.length;w++){const E=p[w];let x=!1;for(let C=0;C<f.length;C++){if(S.has(C))continue;const T=f[C];let N=!1;if(g(T,E,w,f,p,y)&&(N=!0),N){S.add(C),x=!0;break}}if(!x)return!1}return!0}function d(f,p,g,y){return p.size===0?!0:f instanceof Set?c([...f],[...p],g,y):!1}t.isMatchWith=r,t.isSetMatch=d})(vy)),vy}var Q1;function bO(){return Q1||(Q1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yY();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(gy)),gy}var Sy={},wy={},_y={},Z1;function bY(){return Z1||(Z1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(_y)),_y}var Ey={},eM;function AO(){return eM||(eM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Ey)),Ey}var xy={},tM;function SO(){return tM||(tM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",f="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",S="[object Error]",w="[object DataView]",E="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]",N="[object BigUint64Array]",R="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",F="[object BigInt64Array]",z="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=F,t.bigUint64ArrayTag=N,t.booleanTag=r,t.dataViewTag=w,t.dateTag=l,t.errorTag=S,t.float32ArrayTag=z,t.float64ArrayTag=$,t.functionTag=p,t.int16ArrayTag=I,t.int32ArrayTag=O,t.int8ArrayTag=R,t.mapTag=c,t.numberTag=i,t.objectTag=y,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=C,t.uint32ArrayTag=T,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=x})(xy)),xy}var Ty={},nM;function AY(){return nM||(nM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Ty)),Ty}var iM;function wO(){return iM||(iM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bY(),n=AO(),i=SO(),r=vO(),s=AY();function a(f,p){return l(f,void 0,f,new Map,p)}function l(f,p,g,y=new Map,S=void 0){const w=S?.(f,p,g,y);if(w!==void 0)return w;if(r.isPrimitive(f))return f;if(y.has(f))return y.get(f);if(Array.isArray(f)){const E=new Array(f.length);y.set(f,E);for(let x=0;x<f.length;x++)E[x]=l(f[x],x,g,y,S);return Object.hasOwn(f,"index")&&(E.index=f.index),Object.hasOwn(f,"input")&&(E.input=f.input),E}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const E=new RegExp(f.source,f.flags);return E.lastIndex=f.lastIndex,E}if(f instanceof Map){const E=new Map;y.set(f,E);for(const[x,C]of f)E.set(x,l(C,x,g,y,S));return E}if(f instanceof Set){const E=new Set;y.set(f,E);for(const x of f)E.add(l(x,void 0,g,y,S));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const E=new(Object.getPrototypeOf(f)).constructor(f.length);y.set(f,E);for(let x=0;x<f.length;x++)E[x]=l(f[x],x,g,y,S);return E}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const E=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return y.set(f,E),c(E,f,g,y,S),E}if(typeof File<"u"&&f instanceof File){const E=new File([f],f.name,{type:f.type});return y.set(f,E),c(E,f,g,y,S),E}if(typeof Blob<"u"&&f instanceof Blob){const E=new Blob([f],{type:f.type});return y.set(f,E),c(E,f,g,y,S),E}if(f instanceof Error){const E=new f.constructor;return y.set(f,E),E.message=f.message,E.name=f.name,E.stack=f.stack,E.cause=f.cause,c(E,f,g,y,S),E}if(f instanceof Boolean){const E=new Boolean(f.valueOf());return y.set(f,E),c(E,f,g,y,S),E}if(f instanceof Number){const E=new Number(f.valueOf());return y.set(f,E),c(E,f,g,y,S),E}if(f instanceof String){const E=new String(f.valueOf());return y.set(f,E),c(E,f,g,y,S),E}if(typeof f=="object"&&d(f)){const E=Object.create(Object.getPrototypeOf(f));return y.set(f,E),c(E,f,g,y,S),E}return f}function c(f,p,g=f,y,S){const w=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<w.length;E++){const x=w[E],C=Object.getOwnPropertyDescriptor(f,x);(C==null||C.writable)&&(f[x]=l(p[x],x,g,y,S))}}function d(f){switch(n.getTag(f)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=l,t.copyProperties=c})(wy)),wy}var rM;function SY(){return rM||(rM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wO();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(Sy)),Sy}var sM;function wY(){return sM||(sM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bO(),n=SY();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i})(my)),my}var Cy={},My={},Py={},aM;function _Y(){return aM||(aM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wO(),n=SO();function i(r,s){return e.cloneDeepWith(r,(a,l,c,d)=>{const f=s?.(a,l,c,d);if(f!==void 0)return f;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new r.constructor(r?.valueOf());return e.copyProperties(p,r),p}case n.argumentsTag:{const p={};return e.copyProperties(p,r),p.length=r.length,p[Symbol.iterator]=r[Symbol.iterator],p}default:return}})}t.cloneDeepWith=i})(Py)),Py}var oM;function EY(){return oM||(oM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_Y();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(My)),My}var Ry={},Ny={},lM;function _O(){return lM||(lM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(Ny)),Ny}var Iy={},uM;function xY(){return uM||(uM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AO();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(Iy)),Iy}var cM;function TY(){return cM||(cM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uO(),n=_O(),i=xY(),r=UA();function s(a,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=a;for(let f=0;f<c.length;f++){const p=c[f];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||i.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=s})(Ry)),Ry}var dM;function CY(){return dM||(dM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bO(),n=LA(),i=EY(),r=BA(),s=TY();function a(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=i.cloneDeep(c),function(d){const f=r.get(d,l);return f===void 0?s.has(d,l):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=a})(Cy)),Cy}var fM;function MY(){return fM||(fM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mO(),n=vY(),i=wY(),r=CY();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?r.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(hy)),hy}var hM;function PY(){return hM||(hM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hY(),n=mO(),i=gY(),r=MY();function s(a,l=n.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),r.iteratee(l)):[]}t.uniqBy=s})(ay)),ay}var Dy,pM;function RY(){return pM||(pM=1,Dy=PY().uniqBy),Dy}var NY=RY();const mM=Br(NY);function IY(t,e,n){return e===!0?mM(t,n):typeof e=="function"?mM(t,e):t}var Oy={exports:{}},ky={},Ly={exports:{}},Uy={};var gM;function DY(){if(gM)return Uy;gM=1;var t=Ll();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(p,g){var y=g(),S=i({inst:{value:y,getSnapshot:g}}),w=S[0].inst,E=S[1];return s(function(){w.value=y,w.getSnapshot=g,c(w)&&E({inst:w})},[p,y,g]),r(function(){return c(w)&&E({inst:w}),p(function(){c(w)&&E({inst:w})})},[p]),a(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Uy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Uy}var vM;function OY(){return vM||(vM=1,Ly.exports=DY()),Ly.exports}var yM;function kY(){if(yM)return ky;yM=1;var t=Ll(),e=OY();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return ky.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var S=s(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=l(function(){function x(I){if(!C){if(C=!0,T=I,I=g(I),y!==void 0&&w.hasValue){var O=w.value;if(y(O,I))return N=O}return N=I}if(O=N,i(T,I))return O;var F=g(I);return y!==void 0&&y(O,F)?(T=I,O):(T=I,N=F)}var C=!1,T,N,R=p===void 0?null:p;return[function(){return x(f())},R===null?void 0:function(){return x(R())}]},[f,p,g,y]);var E=r(d,S[0],S[1]);return a(function(){w.hasValue=!0,w.value=E},[E]),c(E),E},ky}var bM;function LY(){return bM||(bM=1,Oy.exports=kY()),Oy.exports}var UY=LY(),HA=P.createContext(null),BY=t=>t,Xt=()=>{var t=P.useContext(HA);return t?t.store.dispatch:BY},oh=()=>{},FY=()=>oh,zY=(t,e)=>t===e;function _e(t){var e=P.useContext(HA);return UY.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:FY,e?e.store.getState:oh,e?e.store.getState:oh,e?t:oh,zY)}function HY(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function GY(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function qY(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var AM=t=>Array.isArray(t)?t:[t];function VY(t){const e=Array.isArray(t[0])?t[0]:t;return qY(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function $Y(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var jY=class{constructor(t){this.value=t}deref(){return this.value}},YY=typeof WeakRef<"u"?WeakRef:jY,KY=0,SM=1;function Ff(){return{s:KY,v:void 0,o:null,p:null}}function EO(t,e={}){let n=Ff();const{resultEqualityCheck:i}=e;let r,s=0;function a(){let l=n;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const w=S.get(y);w===void 0?(l=Ff(),S.set(y,l)):l=w}else{let S=l.p;S===null&&(l.p=S=new Map);const w=S.get(y);w===void 0?(l=Ff(),S.set(y,l)):l=w}}const d=l;let f;if(l.s===SM)f=l.v;else if(f=t.apply(null,arguments),s++,i){const p=r?.deref?.()??r;p!=null&&i(p,f)&&(f=p,s!==0&&s--),r=typeof f=="object"&&f!==null||typeof f=="function"?new YY(f):f}return d.s=SM,d.v=f,f}return a.clearCache=()=>{n=Ff(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function WY(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,a=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),HY(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=EO,argsMemoizeOptions:S=[]}=f,w=AM(g),E=AM(S),x=VY(r),C=p(function(){return s++,d.apply(null,arguments)},...w),T=y(function(){a++;const R=$Y(x,arguments);return l=C.apply(null,R),l},...E);return Object.assign(T,{resultFunc:d,memoizedResultFunc:C,dependencies:x,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:y})};return Object.assign(i,{withTypes:()=>i}),i}var Q=WY(EO),XY=Object.assign((t,e=Q)=>{GY(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((a,l,c)=>(a[n[c]]=l,a),{}))},{withTypes:()=>XY}),By={},Fy={},zy={},wM;function JY(){return wM||(wM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const a=e(i),l=e(r);if(a===l&&a===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};t.compareValues=n})(zy)),zy}var Hy={},Gy={},_M;function xO(){return _M||(_M=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Gy)),Gy}var EM;function QY(){return EM||(EM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=r})(Hy)),Hy}var xM;function ZY(){return xM||(xM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JY(),n=QY(),i=UA();function r(s,a,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,S)=>{let w=y;for(let E=0;E<S.length&&w!=null;++E)w=w[S[E]];return w},f=(y,S)=>S==null||y==null?S:typeof y=="object"&&"key"in y?Object.hasOwn(S,y.key)?S[y.key]:d(S,y.path):typeof y=="function"?y(S):Array.isArray(y)?d(S,y):typeof S=="object"?S[y]:S,p=a.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:i.toPath(y)}));return s.map(y=>({original:y,criteria:p.map(S=>f(S,y))})).slice().sort((y,S)=>{for(let w=0;w<p.length;w++){const E=e.compareValues(y.criteria[w],S.criteria[w],l[w]);if(E!==0)return E}return 0}).map(y=>y.original)}t.orderBy=r})(Fy)),Fy}var qy={},TM;function eK(){return TM||(TM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),a=(l,c)=>{for(let d=0;d<l.length;d++){const f=l[d];Array.isArray(f)&&c<s?a(f,c+1):r.push(f)}};return a(n,0),r}t.flatten=e})(qy)),qy}var Vy={},CM;function TO(){return CM||(CM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_O(),n=zA(),i=gO(),r=yO();function s(a,l,c){return i.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],a):!1}t.isIterateeCall=s})(Vy)),Vy}var MM;function tK(){return MM||(MM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZY(),n=eK(),i=TO();function r(s,...a){const l=a.length;return l>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=r})(By)),By}var $y,PM;function nK(){return PM||(PM=1,$y=tK().sortBy),$y}var iK=nK();const Op=Br(iK);var CO=t=>t.legend.settings,rK=t=>t.legend.size,sK=t=>t.legend.payload;Q([sK,CO],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?Op(i,n):i});var zf=1;function aK(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=P.useState({height:0,left:0,top:0,width:0}),i=P.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>zf||Math.abs(a.left-e.left)>zf||Math.abs(a.top-e.top)>zf||Math.abs(a.width-e.width)>zf)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function _n(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var oK=typeof Symbol=="function"&&Symbol.observable||"@@observable",RM=oK,jy=()=>Math.random().toString(36).substring(7).split("").join("."),lK={INIT:`@@redux/INIT${jy()}`,REPLACE:`@@redux/REPLACE${jy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jy()}`},Th=lK;function GA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function MO(t,e,n){if(typeof t!="function")throw new Error(_n(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(_n(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(_n(1));return n(MO)(t,e)}let i=t,r=e,s=new Map,a=s,l=0,c=!1;function d(){a===s&&(a=new Map,s.forEach((E,x)=>{a.set(x,E)}))}function f(){if(c)throw new Error(_n(3));return r}function p(E){if(typeof E!="function")throw new Error(_n(4));if(c)throw new Error(_n(5));let x=!0;d();const C=l++;return a.set(C,E),function(){if(x){if(c)throw new Error(_n(6));x=!1,d(),a.delete(C),s=null}}}function g(E){if(!GA(E))throw new Error(_n(7));if(typeof E.type>"u")throw new Error(_n(8));if(typeof E.type!="string")throw new Error(_n(17));if(c)throw new Error(_n(9));try{c=!0,r=i(r,E)}finally{c=!1}return(s=a).forEach(C=>{C()}),E}function y(E){if(typeof E!="function")throw new Error(_n(10));i=E,g({type:Th.REPLACE})}function S(){const E=p;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(_n(11));function C(){const N=x;N.next&&N.next(f())}return C(),{unsubscribe:E(C)}},[RM](){return this}}}return g({type:Th.INIT}),{dispatch:g,subscribe:p,getState:f,replaceReducer:y,[RM]:S}}function uK(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Th.INIT})>"u")throw new Error(_n(12));if(typeof n(void 0,{type:Th.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_n(13))})}function PO(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const i=Object.keys(n);let r;try{uK(n)}catch(s){r=s}return function(a={},l){if(r)throw r;let c=!1;const d={};for(let f=0;f<i.length;f++){const p=i[f],g=n[p],y=a[p],S=g(y,l);if(typeof S>"u")throw l&&l.type,new Error(_n(14));d[p]=S,c=c||S!==y}return c=c||i.length!==Object.keys(a).length,c?d:a}}function Ch(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function cK(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(_n(15))};const a={getState:r.getState,dispatch:(c,...d)=>s(c,...d)},l=t.map(c=>c(a));return s=Ch(...l)(r.dispatch),{...r,dispatch:s}}}function RO(t){return GA(t)&&"type"in t&&typeof t.type=="string"}var NO=Symbol.for("immer-nothing"),NM=Symbol.for("immer-draftable"),Kn=Symbol.for("immer-state");function ir(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _i=Object,Nl=_i.getPrototypeOf,Mh="constructor",kp="prototype",pb="configurable",Ph="enumerable",lh="writable",yc="value",ys=t=>!!t&&!!t[Kn];function ur(t){return t?IO(t)||Up(t)||!!t[NM]||!!t[Mh]?.[NM]||Bp(t)||Fp(t):!1}var dK=_i[kp][Mh].toString(),IM=new WeakMap;function IO(t){if(!t||!qA(t))return!1;const e=Nl(t);if(e===null||e===_i[kp])return!0;const n=_i.hasOwnProperty.call(e,Mh)&&e[Mh];if(n===Object)return!0;if(!hl(n))return!1;let i=IM.get(n);return i===void 0&&(i=Function.toString.call(n),IM.set(n,i)),i===dK}function Lp(t,e,n=!0){Vc(t)===0?(n?Reflect.ownKeys(t):_i.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Vc(t){const e=t[Kn];return e?e.type_:Up(t)?1:Bp(t)?2:Fp(t)?3:0}var DM=(t,e,n=Vc(t))=>n===2?t.has(e):_i[kp].hasOwnProperty.call(t,e),mb=(t,e,n=Vc(t))=>n===2?t.get(e):t[e],Rh=(t,e,n,i=Vc(t))=>{i===2?t.set(e,n):i===3?t.add(n):t[e]=n};function fK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Up=Array.isArray,Bp=t=>t instanceof Map,Fp=t=>t instanceof Set,qA=t=>typeof t=="object",hl=t=>typeof t=="function",Yy=t=>typeof t=="boolean";function hK(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var ls=t=>t.copy_||t.base_,VA=t=>t.modified_?t.copy_:t.base_;function gb(t,e){if(Bp(t))return new Map(t);if(Fp(t))return new Set(t);if(Up(t))return Array[kp].slice.call(t);const n=IO(t);if(e===!0||e==="class_only"&&!n){const i=_i.getOwnPropertyDescriptors(t);delete i[Kn];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],l=i[a];l[lh]===!1&&(l[lh]=!0,l[pb]=!0),(l.get||l.set)&&(i[a]={[pb]:!0,[lh]:!0,[Ph]:l[Ph],[yc]:t[a]})}return _i.create(Nl(t),i)}else{const i=Nl(t);if(i!==null&&n)return{...t};const r=_i.create(i);return _i.assign(r,t)}}function $A(t,e=!1){return zp(t)||ys(t)||!ur(t)||(Vc(t)>1&&_i.defineProperties(t,{set:Hf,add:Hf,clear:Hf,delete:Hf}),_i.freeze(t),e&&Lp(t,(n,i)=>{$A(i,!0)},!1)),t}function pK(){ir(2)}var Hf={[yc]:pK};function zp(t){return t===null||!qA(t)?!0:_i.isFrozen(t)}var Nh="MapSet",vb="Patches",OM="ArrayMethods",DO={};function so(t){const e=DO[t];return e||ir(0,t),e}var kM=t=>!!DO[t],bc,OO=()=>bc,mK=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:kM(Nh)?so(Nh):void 0,arrayMethodsPlugin_:kM(OM)?so(OM):void 0});function LM(t,e){e&&(t.patchPlugin_=so(vb),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function yb(t){bb(t),t.drafts_.forEach(gK),t.drafts_=null}function bb(t){t===bc&&(bc=t.parent_)}var UM=t=>bc=mK(bc,t);function gK(t){const e=t[Kn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function BM(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Kn].modified_&&(yb(e),ir(4)),ur(t)&&(t=FM(e,t));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(n[Kn].base_,t,e)}else t=FM(e,n);return vK(e,t,!0),yb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==NO?t:void 0}function FM(t,e){if(zp(e))return e;const n=e[Kn];if(!n)return Ih(e,t.handledSet_,t);if(!Hp(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(t);UO(n,t)}return n.copy_}function vK(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$A(e,n)}function kO(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var Hp=(t,e)=>t.scope_===e,yK=[];function LO(t,e,n,i){const r=ls(t),s=t.type_;if(i!==void 0&&mb(r,i,s)===e){Rh(r,i,n,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;Lp(r,(c,d)=>{if(ys(d)){const f=l.get(d)||[];f.push(c),l.set(d,f)}})}const a=t.draftLocations_.get(e)??yK;for(const l of a)Rh(r,l,n,s)}function bK(t,e,n){t.callbacks_.push(function(r){const s=e;if(!s||!Hp(s,r))return;r.mapSetPlugin_?.fixSetContents(s);const a=VA(s);LO(t,s.draft_??s,a,n),UO(s,r)})}function UO(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:i}=e;if(i){const r=i.getPath(t);r&&i.generatePatches_(t,r,e)}kO(t)}}function AK(t,e,n){const{scope_:i}=t;if(ys(n)){const r=n[Kn];Hp(r,i)&&r.callbacks_.push(function(){uh(t);const a=VA(r);LO(t,n,a,e)})}else ur(n)&&t.callbacks_.push(function(){const s=ls(t);t.type_===3?s.has(n)&&Ih(n,i.handledSet_,i):mb(s,e,t.type_)===n&&i.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Ih(mb(t.copy_,e,t.type_),i.handledSet_,i)})}function Ih(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||ys(t)||e.has(t)||!ur(t)||zp(t)||(e.add(t),Lp(t,(i,r)=>{if(ys(r)){const s=r[Kn];if(Hp(s,n)){const a=VA(s);Rh(t,i,a,t.type_),kO(s)}}else ur(r)&&Ih(r,e,n)})),t}function SK(t,e){const n=Up(t),i={type_:n?1:0,scope_:e?e.scope_:OO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,s=Dh;n&&(r=[i],s=Ac);const{revoke:a,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=a,[l,i]}var Dh={get(t,e){if(e===Kn)return t;let n=t.scope_.arrayMethodsPlugin_;const i=t.type_===1&&typeof e=="string";if(i&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const r=ls(t);if(!DM(r,e,t.type_))return wK(t,r,e);const s=r[e];if(t.finalized_||!ur(s)||i&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&hK(e))return s;if(s===Ky(t.base_,e)){uh(t);const a=t.type_===1?+e:e,l=Sb(t.scope_,s,t,a);return t.copy_[a]=l}return s},has(t,e){return e in ls(t)},ownKeys(t){return Reflect.ownKeys(ls(t))},set(t,e,n){const i=BO(ls(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=Ky(ls(t),e),s=r?.[Kn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(fK(n,r)&&(n!==void 0||DM(t.base_,e,t.type_)))return!0;uh(t),Ab(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),AK(t,e,n)),!0},deleteProperty(t,e){return uh(t),Ky(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Ab(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ls(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{[lh]:!0,[pb]:t.type_!==1||e!=="length",[Ph]:i[Ph],[yc]:n[e]}},defineProperty(){ir(11)},getPrototypeOf(t){return Nl(t.base_)},setPrototypeOf(){ir(12)}},Ac={};for(let t in Dh){let e=Dh[t];Ac[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Ac.deleteProperty=function(t,e){return Ac.set.call(this,t,e,void 0)};Ac.set=function(t,e,n){return Dh.set.call(this,t[0],e,n,t[0])};function Ky(t,e){const n=t[Kn];return(n?ls(n):t)[e]}function wK(t,e,n){const i=BO(e,n);return i?yc in i?i[yc]:i.get?.call(t.draft_):void 0}function BO(t,e){if(!(e in t))return;let n=Nl(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Nl(n)}}function Ab(t){t.modified_||(t.modified_=!0,t.parent_&&Ab(t.parent_))}function uh(t){t.copy_||(t.assigned_=new Map,t.copy_=gb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _K=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,r)=>{if(hl(n)&&!hl(i)){const a=i;i=n;const l=this;return function(d=a,...f){return l.produce(d,p=>i.call(this,p,...f))}}hl(i)||ir(6),r!==void 0&&!hl(r)&&ir(7);let s;if(ur(n)){const a=UM(this),l=Sb(a,n,void 0);let c=!0;try{s=i(l),c=!1}finally{c?yb(a):bb(a)}return LM(a,r),BM(s,a)}else if(!n||!qA(n)){if(s=i(n),s===void 0&&(s=n),s===NO&&(s=void 0),this.autoFreeze_&&$A(s,!0),r){const a=[],l=[];so(vb).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:l}),r(a,l)}return s}else ir(1,n)},this.produceWithPatches=(n,i)=>{if(hl(n))return(l,...c)=>this.produceWithPatches(l,d=>n(d,...c));let r,s;return[this.produce(n,i,(l,c)=>{r=l,s=c}),r,s]},Yy(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Yy(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Yy(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ur(e)||ir(8),ys(e)&&(e=lr(e));const n=UM(this),i=Sb(n,e,void 0);return i[Kn].isManual_=!0,bb(n),i}finishDraft(e,n){const i=e&&e[Kn];(!i||!i.isManual_)&&ir(9);const{scope_:r}=i;return LM(r,n),BM(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const s=n[i];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}i>-1&&(n=n.slice(i+1));const r=so(vb).applyPatches_;return ys(e)?r(e,n):this.produce(e,s=>r(s,n))}};function Sb(t,e,n,i){const[r,s]=Bp(e)?so(Nh).proxyMap_(e,n):Fp(e)?so(Nh).proxySet_(e,n):SK(e,n);return(n?.scope_??OO()).drafts_.push(r),s.callbacks_=n?.callbacks_??[],s.key_=i,n&&i!==void 0?bK(n,s,i):s.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=c;s.modified_&&d&&d.generatePatches_(s,[],c)}),r}function lr(t){return ys(t)||ir(10,t),FO(t)}function FO(t){if(!ur(t)||zp(t))return t;const e=t[Kn];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=gb(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=gb(t,!0);return Lp(n,(r,s)=>{Rh(n,r,FO(s))},i),e&&(e.finalized_=!1),n}var EK=new _K,zO=EK.produce;function HO(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var xK=HO(),TK=HO,CK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ch:Ch.apply(null,arguments)};function Ki(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(Ei(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>RO(i)&&i.type===t,n}var GO=class lc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,lc.prototype)}static get[Symbol.species](){return lc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new lc(...e[0].concat(this)):new lc(...e.concat(this))}};function zM(t){return ur(t)?zO(t,()=>{}):t}function Gf(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function MK(t){return typeof t=="boolean"}var PK=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new GO;return n&&(MK(n)?a.push(xK):a.push(TK(n.extraArgument))),a},qO="RTK_autoBatch",Tt=()=>t=>({payload:t,meta:{[qO]:!0}}),HM=t=>e=>{setTimeout(e,t)},VO=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,a=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:HM(10):t.type==="callback"?t.queueNotification:HM(t.timeout),d=()=>{a=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},i,{subscribe(f){const p=()=>r&&f(),g=i.subscribe(p);return l.add(f),()=>{g(),l.delete(f)}},dispatch(f){try{return r=!f?.meta?.[qO],s=!r,s&&(a||(a=!0,c(d))),i.dispatch(f)}finally{r=!0}}})},RK=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new GO(t);return i&&r.push(VO(typeof i=="object"?i:void 0)),r};function NK(t){const e=PK(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(GA(n))l=PO(n);else throw new Error(Ei(1));let c;typeof i=="function"?c=i(e):c=e();let d=Ch;r&&(d=CK({trace:!1,...typeof r=="object"&&r}));const f=cK(...c),p=RK(f);let g=typeof a=="function"?a(p):p();const y=d(...g);return MO(l,s,y)}function $O(t){const e={},n=[];let i;const r={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Ei(28));if(l in e)throw new Error(Ei(29));return e[l]=a,r},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),r},addMatcher(s,a){return n.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}function IK(t){return typeof t=="function"}function DK(t,e){let[n,i,r]=$O(e),s;if(IK(t))s=()=>zM(t());else{const l=zM(t);s=()=>l}function a(l=s(),c){let d=[n[c.type],...i.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[r]),d.reduce((f,p)=>{if(p)if(ys(f)){const y=p(f,c);return y===void 0?f:y}else{if(ur(f))return zO(f,g=>p(g,c));{const g=p(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},l)}return a.getInitialState=s,a}var OK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kK=(t=21)=>{let e="",n=t;for(;n--;)e+=OK[Math.random()*64|0];return e},LK=Symbol.for("rtk-slice-createasyncthunk");function UK(t,e){return`${t}/${e}`}function BK({creators:t}={}){const e=t?.asyncThunk?.[LK];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(Ei(11));const a=(typeof i.reducers=="function"?i.reducers(zK()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,N){const R=typeof T=="string"?T:T.type;if(!R)throw new Error(Ei(12));if(R in c.sliceCaseReducersByType)throw new Error(Ei(13));return c.sliceCaseReducersByType[R]=N,d},addMatcher(T,N){return c.sliceMatchers.push({matcher:T,reducer:N}),d},exposeAction(T,N){return c.actionCreators[T]=N,d},exposeCaseReducer(T,N){return c.sliceCaseReducersByName[T]=N,d}};l.forEach(T=>{const N=a[T],R={reducerName:T,type:UK(r,T),createNotation:typeof i.reducers=="function"};GK(N)?VK(R,N,d,e):HK(R,N,d)});function f(){const[T={},N=[],R=void 0]=typeof i.extraReducers=="function"?$O(i.extraReducers):[i.extraReducers],I={...T,...c.sliceCaseReducersByType};return DK(i.initialState,O=>{for(let F in I)O.addCase(F,I[F]);for(let F of c.sliceMatchers)O.addMatcher(F.matcher,F.reducer);for(let F of N)O.addMatcher(F.matcher,F.reducer);R&&O.addDefaultCase(R)})}const p=T=>T,g=new Map,y=new WeakMap;let S;function w(T,N){return S||(S=f()),S(T,N)}function E(){return S||(S=f()),S.getInitialState()}function x(T,N=!1){function R(O){let F=O[T];return typeof F>"u"&&N&&(F=Gf(y,R,E)),F}function I(O=p){const F=Gf(g,N,()=>new WeakMap);return Gf(F,O,()=>{const z={};for(const[$,G]of Object.entries(i.selectors??{}))z[$]=FK(G,O,()=>Gf(y,O,E),N);return z})}return{reducerPath:T,getSelectors:I,get selectors(){return I(R)},selectSlice:R}}const C={name:r,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...x(s),injectInto(T,{reducerPath:N,...R}={}){const I=N??s;return T.inject({reducerPath:I,reducer:w},R),{...C,...x(I,!0)}}};return C}}function FK(t,e,n,i){function r(s,...a){let l=e(s);return typeof l>"u"&&i&&(l=n()),t(l,...a)}return r.unwrapped=t,r}var ui=BK();function zK(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function HK({type:t,reducerName:e,createNotation:n},i,r){let s,a;if("reducer"in i){if(n&&!qK(i))throw new Error(Ei(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Ki(t,a):Ki(t))}function GK(t){return t._reducerDefinitionType==="asyncThunk"}function qK(t){return t._reducerDefinitionType==="reducerWithPrepare"}function VK({type:t,reducerName:e},n,i,r){if(!r)throw new Error(Ei(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:c,settled:d,options:f}=n,p=r(t,s,f);i.exposeAction(e,p),a&&i.addCase(p.fulfilled,a),l&&i.addCase(p.pending,l),c&&i.addCase(p.rejected,c),d&&i.addMatcher(p.settled,d),i.exposeCaseReducer(e,{fulfilled:a||qf,pending:l||qf,rejected:c||qf,settled:d||qf})}function qf(){}var $K="task",jO="listener",YO="completed",jA="cancelled",jK=`task-${jA}`,YK=`task-${YO}`,wb=`${jO}-${jA}`,KK=`${jO}-${YO}`,Gp=class{constructor(t){this.code=t,this.message=`${$K} ${jA} (reason: ${t})`}name="TaskAbortError";message},YA=(t,e)=>{if(typeof t!="function")throw new TypeError(Ei(32))},Oh=()=>{},KO=(t,e=Oh)=>(t.catch(e),t),WO=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Za=t=>{if(t.aborted)throw new Gp(t.reason)};function XO(t,e){let n=Oh;return new Promise((i,r)=>{const s=()=>r(new Gp(t.reason));if(t.aborted){s();return}n=WO(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=Oh})}var WK=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Gp?"cancelled":"rejected",error:n}}finally{e?.()}},kh=t=>e=>KO(XO(t,e).then(n=>(Za(t),n))),JO=t=>{const e=kh(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Cl}=Object,GM={},qp="listenerMiddleware",XK=(t,e)=>{const n=i=>WO(t,()=>i.abort(t.reason));return(i,r)=>{YA(i);const s=new AbortController;n(s);const a=WK(async()=>{Za(t),Za(s.signal);const l=await i({pause:kh(s.signal),delay:JO(s.signal),signal:s.signal});return Za(s.signal),l},()=>s.abort(YK));return r?.autoJoin&&e.push(a.catch(Oh)),{result:kh(t)(a),cancel(){s.abort(jK)}}}},JK=(t,e)=>{const n=async(i,r)=>{Za(e);let s=()=>{};const l=[new Promise((c,d)=>{let f=t({predicate:i,effect:(p,g)=>{g.unsubscribe(),c([p,g.getState(),g.getOriginalState()])}});s=()=>{f(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await XO(e,Promise.race(l));return Za(e),c}finally{s()}};return(i,r)=>KO(n(i,r))},QO=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=Ki(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(Ei(21));return YA(s),{predicate:r,type:e,effect:s}},ZO=Cl(t=>{const{type:e,predicate:n,effect:i}=QO(t);return{id:kK(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ei(22))}}},{withTypes:()=>ZO}),qM=(t,e)=>{const{type:n,effect:i,predicate:r}=QO(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},_b=t=>{t.pending.forEach(e=>{e.abort(wb)})},QK=(t,e)=>()=>{for(const n of e.keys())_b(n);t.clear()},VM=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},e2=Cl(Ki(`${qp}/add`),{withTypes:()=>e2}),ZK=Ki(`${qp}/removeAll`),t2=Cl(Ki(`${qp}/remove`),{withTypes:()=>t2}),eW=(...t)=>{console.error(`${qp}/error`,...t)},$c=(t={})=>{const e=new Map,n=new Map,i=y=>{const S=n.get(y)??0;n.set(y,S+1)},r=y=>{const S=n.get(y)??1;S===1?n.delete(y):n.set(y,S-1)},{extra:s,onError:a=eW}=t;YA(a);const l=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),S=>{y.unsubscribe(),S?.cancelActive&&_b(y)}),c=y=>{const S=qM(e,y)??ZO(y);return l(S)};Cl(c,{withTypes:()=>c});const d=y=>{const S=qM(e,y);return S&&(S.unsubscribe(),y.cancelActive&&_b(S)),!!S};Cl(d,{withTypes:()=>d});const f=async(y,S,w,E)=>{const x=new AbortController,C=JK(c,x.signal),T=[];try{y.pending.add(x),i(y),await Promise.resolve(y.effect(S,Cl({},w,{getOriginalState:E,condition:(N,R)=>C(N,R).then(Boolean),take:C,delay:JO(x.signal),pause:kh(x.signal),extra:s,signal:x.signal,fork:XK(x.signal,T),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((N,R,I)=>{N!==x&&(N.abort(wb),I.delete(N))})},cancel:()=>{x.abort(wb),y.pending.delete(x)},throwIfCancelled:()=>{Za(x.signal)}})))}catch(N){N instanceof Gp||VM(a,N,{raisedBy:"effect"})}finally{await Promise.all(T),x.abort(KK),r(y),y.pending.delete(x)}},p=QK(e,n);return{middleware:y=>S=>w=>{if(!RO(w))return S(w);if(e2.match(w))return c(w.payload);if(ZK.match(w)){p();return}if(t2.match(w))return d(w.payload);let E=y.getState();const x=()=>{if(E===GM)throw new Error(Ei(23));return E};let C;try{if(C=S(w),e.size>0){const T=y.getState(),N=Array.from(e.values());for(const R of N){let I=!1;try{I=R.predicate(w,T,E)}catch(O){I=!1,VM(a,O,{raisedBy:"predicate"})}I&&f(R,w,y,x)}}}finally{E=GM}return C},startListening:c,stopListening:d,clearListeners:p}};function Ei(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tW={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},n2=ui({name:"chartLayout",initialState:tW,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:nW,setLayout:iW,setChartSize:rW,setScale:sW}=n2.actions,aW=n2.reducer;function i2(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Ct(t){return Number.isFinite(t)}function Lr(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function $M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$M(Object(n),!0).forEach(function(i){oW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$M(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oW(t,e,n){return(e=lW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lW(t){var e=uW(t,"string");return typeof e=="symbol"?e:e+""}function uW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mn(t,e,n){return pn(t)||pn(e)?n:kn(e)?Dp(t,e,n):typeof e=="function"?e(t):n}var cW=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&Ee(t[s]))return bl(bl({},t),{},{[s]:t[s]+(i||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&Ee(t[a]))return bl(bl({},t),{},{[a]:t[a]+(r||0)})}return t},va=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",r2=(t,e,n,i)=>{if(i)return t.map(l=>l.coordinate);var r,s,a=t.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===n&&(s=!0),l.coordinate));return r||a.push(e),s||a.push(n),a},s2=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:s,scale:a,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:f,ticks:p,niceTicks:g,axisType:y}=t;if(!a)return null;var S=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,w=r==="category"&&a.bandwidth?a.bandwidth()/S:0;if(w=y==="angleAxis"&&s&&s.length>=2?Gi(s[0]-s[1])*2*w:w,p||g){var E=(p||g||[]).map((x,C)=>{var T=i?i.indexOf(x):x;return{coordinate:a(T)+w,value:x,offset:w,index:C}});return E.filter(x=>!Yi(x.coordinate))}return c&&d?d.map((x,C)=>({coordinate:a(x)+w,value:x,index:C,offset:w})):a.ticks&&f!=null?a.ticks(f).map((x,C)=>({coordinate:a(x)+w,value:x,offset:w,index:C})):a.domain().map((x,C)=>({coordinate:a(x)+w,value:i?i[x]:x,index:C,offset:w}))},jM=1e-4,dW=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-jM,s=Math.max(i[0],i[1])+jM,a=t(e[0]),l=t(e[n-1]);(a<r||a>s||l<r||l>s)&&t.domain([e[0],e[n-1]])}},fW=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0,l=0;l<n;++l){var c=t[l],d=c?.[r];if(d!=null){var f=d[1],p=d[0],g=Yi(f)?p:f;g>=0?(d[0]=s,d[1]=s+g,s=f):(d[0]=a,d[1]=a+g,a=f)}}}},hW=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0;a<n;++a){var l=t[a],c=l?.[r];if(c!=null){var d=Yi(c[1])?c[0]:c[1];d>=0?(c[0]=s,c[1]=s+d,s=c[1]):(c[0]=0,c[1]=0)}}}},pW={sign:fW,expand:H8,none:ro,silhouette:G8,wiggle:q8,positive:hW},mW=(t,e,n)=>{var i,r=(i=pW[n])!==null&&i!==void 0?i:ro,s=z8().keys(e).value((l,c)=>Number(Mn(l,c,0))).order(fb).offset(r),a=s(t);return a.forEach((l,c)=>{l.forEach((d,f)=>{var p=Mn(t[f],e[c],0);Array.isArray(p)&&p.length===2&&Ee(p[0])&&Ee(p[1])&&(d[0]=p[0],d[1]=p[1])})}),a};function YM(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!pn(r[e.dataKey])){var l=dO(n,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=Mn(r,pn(a)?e.dataKey:a);return pn(c)?null:e.scale(c)}var gW=t=>{var e=t.flat(2).filter(Ee);return[Math.min(...e),Math.max(...e)]},vW=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],yW=(t,e,n)=>{if(t!=null)return vW(Object.keys(t).reduce((i,r)=>{var s=t[r];if(!s)return i;var{stackedData:a}=s,l=a.reduce((c,d)=>{var f=i2(d,e,n),p=gW(f);return!Ct(p[0])||!Ct(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},KM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=Op(e,f=>f.coordinate),s=1/0,a=1,l=r.length;a<l;a++){var c=r[a],d=r[a-1];s=Math.min((c?.coordinate||0)-(d?.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function XM(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return bl(bl({},e),{},{dataKey:n,payload:i,value:r,name:s})}function a2(t,e){if(t)return String(t);if(typeof e=="string")return e}var bW=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},AW=(t,e)=>e==="centric"?t.angle:t.radius,xs=t=>t.layout.width,Ts=t=>t.layout.height,SW=t=>t.layout.scale,o2=t=>t.layout.margin,Vp=Q(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),$p=Q(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),wW="data-recharts-item-index",_W="data-recharts-item-id",jc=60;function JM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JM(Object(n),!0).forEach(function(i){EW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function EW(t,e,n){return(e=xW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xW(t){var e=TW(t,"string");return typeof e=="symbol"?e:e+""}function TW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CW=t=>t.brush.height;function MW(t){var e=$p(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:jc;return n+r}return n},0)}function PW(t){var e=$p(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:jc;return n+r}return n},0)}function RW(t){var e=Vp(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function NW(t){var e=Vp(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var Rn=Q([xs,Ts,o2,CW,MW,PW,RW,NW,CO,rK],(t,e,n,i,r,s,a,l,c,d)=>{var f={left:(n.left||0)+r,right:(n.right||0)+s},p={top:(n.top||0)+a,bottom:(n.bottom||0)+l},g=Vf(Vf({},p),f),y=g.bottom;g.bottom+=i,g=cW(g,c,d);var S=t-g.left-g.right,w=e-g.top-g.bottom;return Vf(Vf({brushBottom:y},g),{},{width:Math.max(S,0),height:Math.max(w,0)})}),IW=Q(Rn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),l2=Q(xs,Ts,(t,e)=>({x:0,y:0,width:t,height:e})),DW=P.createContext(null),Un=()=>P.useContext(DW)!=null,jp=t=>t.brush,Yp=Q([jp,Rn,o2],(t,e,n)=>({height:t.height,x:Ee(t.x)?t.x:e.left,y:Ee(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ee(t.width)?t.width:e.width})),Wy={},Xy={},Jy={},QM;function OW(){return QM||(QM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:s}={}){let a,l=null;const c=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),f=()=>{l!==null&&(n.apply(a,l),a=void 0,l=null)},p=()=>{d&&f(),w()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},i)},S=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{S(),a=void 0,l=null},E=()=>{f()},x=function(...C){if(r?.aborted)return;a=this,l=C;const T=g==null;y(),c&&T&&f()};return x.schedule=y,x.cancel=w,x.flush=E,r?.addEventListener("abort",w,{once:!0}),x}t.debounce=e})(Jy)),Jy}var ZM;function kW(){return ZM||(ZM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OW();function n(i,r=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:l=!0,maxWait:c}=s,d=Array(2);a&&(d[0]="leading"),l&&(d[1]="trailing");let f,p=null;const g=e.debounce(function(...w){f=i.apply(this,w),p=null},r,{edges:d}),y=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(f=i.apply(this,w),p=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,w),f)},S=()=>(g.flush(),f);return y.cancel=g.cancel,y.flush=S,y}t.debounce=n})(Xy)),Xy}var eP;function LW(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kW();function n(i,r=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(i,r,{leading:a,maxWait:r,trailing:l})}t.throttle=n})(Wy)),Wy}var Qy,tP;function UW(){return tP||(tP=1,Qy=LW().throttle),Qy}var BW=UW();const FW=Br(BW);var Uh=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>r[a++]))}},u2=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:s,maxHeight:a}=n,l=vs(i)?t:Number(i),c=vs(r)?e:Number(r);return s&&s>0&&(l?c=l/s:c&&(l=c*s),a&&c!=null&&c>a&&(c=a)),{calculatedWidth:l,calculatedHeight:c}},zW={width:0,height:0,overflow:"visible"},HW={width:0,overflowX:"visible"},GW={height:0,overflowY:"visible"},qW={},VW=t=>{var{width:e,height:n}=t,i=vs(e),r=vs(n);return i&&r?zW:i?HW:r?GW:qW};function $W(t){var{width:e,height:n,aspect:i}=t,r=e,s=n;return r===void 0&&s===void 0?(r="100%",s="100%"):r===void 0?r=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:r,height:s}}function Eb(){return Eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Eb.apply(null,arguments)}function nP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function iP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nP(Object(n),!0).forEach(function(i){jW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jW(t,e,n){return(e=YW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YW(t){var e=KW(t,"string");return typeof e=="symbol"?e:e+""}function KW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c2=P.createContext({width:-1,height:-1});function WW(t){return Lr(t.width)&&Lr(t.height)}function d2(t){var{children:e,width:n,height:i}=t,r=P.useMemo(()=>({width:n,height:i}),[n,i]);return WW(r)?P.createElement(c2.Provider,{value:r},e):null}var KA=()=>P.useContext(c2),XW=P.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:s,minWidth:a=0,minHeight:l,maxHeight:c,children:d,debounce:f=0,id:p,className:g,onResize:y,style:S={}}=t,w=P.useRef(null),E=P.useRef();E.current=y,P.useImperativeHandle(e,()=>w.current);var[x,C]=P.useState({containerWidth:i.width,containerHeight:i.height}),T=P.useCallback((F,z)=>{C($=>{var G=Math.round(F),X=Math.round(z);return $.containerWidth===G&&$.containerHeight===X?$:{containerWidth:G,containerHeight:X}})},[]);P.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return qc;var F=X=>{var le,{width:oe,height:pe}=X[0].contentRect;T(oe,pe),(le=E.current)===null||le===void 0||le.call(E,oe,pe)};f>0&&(F=FW(F,f,{trailing:!0,leading:!1}));var z=new ResizeObserver(F),{width:$,height:G}=w.current.getBoundingClientRect();return T($,G),z.observe(w.current),()=>{z.disconnect()}},[T,f]);var{containerWidth:N,containerHeight:R}=x;Uh(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:I,calculatedHeight:O}=u2(N,R,{width:r,height:s,aspect:n,maxHeight:c});return Uh(I!=null&&I>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,O,r,s,a,l,n),P.createElement("div",{id:p?"".concat(p):void 0,className:ot("recharts-responsive-container",g),style:iP(iP({},S),{},{width:r,height:s,minWidth:a,minHeight:l,maxHeight:c}),ref:w},P.createElement("div",{style:VW({width:r,height:s})},P.createElement(d2,{width:I,height:O},d)))}),JW=P.forwardRef((t,e)=>{var n=KA();if(Lr(n.width)&&Lr(n.height))return t.children;var{width:i,height:r}=$W({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=u2(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return Ee(s)&&Ee(a)?P.createElement(d2,{width:s,height:a},t.children):P.createElement(XW,Eb({},t,{width:i,height:r,ref:e}))});function f2(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Yc=()=>{var t,e=Un(),n=_e(IW),i=_e(Yp),r=(t=_e(jp))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},QW={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},h2=()=>{var t;return(t=_e(Rn))!==null&&t!==void 0?t:QW},p2=()=>_e(xs),m2=()=>_e(Ts),St=t=>t.layout.layoutType,Kc=()=>_e(St),ZW=()=>{var t=Kc();return t!==void 0},Kp=t=>{var e=Xt(),n=Un(),{width:i,height:r}=t,s=KA(),a=i,l=r;return s&&(a=s.width>0?s.width:i,l=s.height>0?s.height:r),P.useEffect(()=>{!n&&Lr(a)&&Lr(l)&&e(rW({width:a,height:l}))},[e,n,a,l]),null},g2=Symbol.for("immer-nothing"),rP=Symbol.for("immer-draftable"),xi=Symbol.for("immer-state");function rr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Sc=Object.getPrototypeOf;function Il(t){return!!t&&!!t[xi]}function ao(t){return t?v2(t)||Array.isArray(t)||!!t[rP]||!!t.constructor?.[rP]||Wc(t)||Xp(t):!1}var e9=Object.prototype.constructor.toString(),sP=new WeakMap;function v2(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=sP.get(n);return i===void 0&&(i=Function.toString.call(n),sP.set(n,i)),i===e9}function Bh(t,e,n=!0){Wp(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Wp(t){const e=t[xi];return e?e.type_:Array.isArray(t)?1:Wc(t)?2:Xp(t)?3:0}function xb(t,e){return Wp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function y2(t,e,n){const i=Wp(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function t9(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Wc(t){return t instanceof Map}function Xp(t){return t instanceof Set}function qa(t){return t.copy_||t.base_}function Tb(t,e){if(Wc(t))return new Map(t);if(Xp(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=v2(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[xi];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],l=i[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(Sc(t),i)}else{const i=Sc(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function WA(t,e=!1){return Jp(t)||Il(t)||!ao(t)||(Wp(t)>1&&Object.defineProperties(t,{set:$f,add:$f,clear:$f,delete:$f}),Object.freeze(t),e&&Object.values(t).forEach(n=>WA(n,!0))),t}function n9(){rr(2)}var $f={value:n9};function Jp(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var i9={};function oo(t){const e=i9[t];return e||rr(0,t),e}var wc;function b2(){return wc}function r9(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function aP(t,e){e&&(oo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Cb(t){Mb(t),t.drafts_.forEach(s9),t.drafts_=null}function Mb(t){t===wc&&(wc=t.parent_)}function oP(t){return wc=r9(wc,t)}function s9(t){const e=t[xi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function lP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[xi].modified_&&(Cb(e),rr(4)),ao(t)&&(t=Fh(e,t),e.parent_||zh(e,t)),e.patches_&&oo("Patches").generateReplacementPatches_(n[xi].base_,t,e.patches_,e.inversePatches_)):t=Fh(e,n,[]),Cb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==g2?t:void 0}function Fh(t,e,n){if(Jp(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[xi];if(!r)return Bh(e,(s,a)=>uP(t,r,e,s,a,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return zh(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,l=!1;r.type_===3&&(a=new Set(s),s.clear(),l=!0),Bh(a,(c,d)=>uP(t,r,s,c,d,n,l),i),zh(t,s,!1),n&&t.patches_&&oo("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function uP(t,e,n,i,r,s,a){if(r==null||typeof r!="object"&&!a)return;const l=Jp(r);if(!(l&&!a)){if(Il(r)){const c=s&&e&&e.type_!==3&&!xb(e.assigned_,i)?s.concat(i):void 0,d=Fh(t,r,c);if(y2(n,i,d),Il(d))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(ao(r)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&l)return;Fh(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Wc(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&zh(t,r)}}}function zh(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&WA(e,n)}function a9(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:b2(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=XA;n&&(r=[i],s=_c);const{revoke:a,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=a,l}var XA={get(t,e){if(e===xi)return t;const n=qa(t);if(!xb(n,e))return o9(t,n,e);const i=n[e];return t.finalized_||!ao(i)?i:i===Zy(t.base_,e)?(e0(t),t.copy_[e]=Rb(i,t)):i},has(t,e){return e in qa(t)},ownKeys(t){return Reflect.ownKeys(qa(t))},set(t,e,n){const i=A2(qa(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=Zy(qa(t),e),s=r?.[xi];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(t9(n,r)&&(n!==void 0||xb(t.base_,e)))return!0;e0(t),Pb(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Zy(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,e0(t),Pb(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=qa(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){rr(11)},getPrototypeOf(t){return Sc(t.base_)},setPrototypeOf(){rr(12)}},_c={};Bh(XA,(t,e)=>{_c[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});_c.deleteProperty=function(t,e){return _c.set.call(this,t,e,void 0)};_c.set=function(t,e,n){return XA.set.call(this,t[0],e,n,t[0])};function Zy(t,e){const n=t[xi];return(n?qa(n):t)[e]}function o9(t,e,n){const i=A2(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function A2(t,e){if(!(e in t))return;let n=Sc(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Sc(n)}}function Pb(t){t.modified_||(t.modified_=!0,t.parent_&&Pb(t.parent_))}function e0(t){t.copy_||(t.copy_=Tb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var l9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(c=s,...d){return a.produce(c,f=>n.call(this,f,...d))}}typeof n!="function"&&rr(6),i!==void 0&&typeof i!="function"&&rr(7);let r;if(ao(e)){const s=oP(this),a=Rb(e,void 0);let l=!0;try{r=n(a),l=!1}finally{l?Cb(s):Mb(s)}return aP(s,i),lP(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===g2&&(r=void 0),this.autoFreeze_&&WA(r,!0),i){const s=[],a=[];oo("Patches").generateReplacementPatches_(e,r,s,a),i(s,a)}return r}else rr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,c=>e(c,...l));let i,r;return[this.produce(e,n,(a,l)=>{i=a,r=l}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ao(t)||rr(8),Il(t)&&(t=u9(t));const e=oP(this),n=Rb(t,void 0);return n[xi].isManual_=!0,Mb(e),n}finishDraft(t,e){const n=t&&t[xi];(!n||!n.isManual_)&&rr(9);const{scope_:i}=n;return aP(i,e),lP(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=oo("Patches").applyPatches_;return Il(t)?i(t,e):this.produce(t,r=>i(r,e))}};function Rb(t,e){const n=Wc(t)?oo("MapSet").proxyMap_(t,e):Xp(t)?oo("MapSet").proxySet_(t,e):a9(t,e);return(e?e.scope_:b2()).drafts_.push(n),n}function u9(t){return Il(t)||rr(10,t),S2(t)}function S2(t){if(!ao(t)||Jp(t))return t;const e=t[xi];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Tb(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=Tb(t,!0);return Bh(n,(r,s)=>{y2(n,r,S2(s))},i),e&&(e.finalized_=!1),n}var c9=new l9;c9.produce;var d9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},w2=ui({name:"legend",initialState:d9,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Tt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:i}=e.payload,r=lr(t).payload.indexOf(n);r>-1&&(t.payload[r]=i)},prepare:Tt()},removeLegendPayload:{reducer(t,e){var n=lr(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Tt()}}}),{setLegendSize:Woe,setLegendSettings:Xoe,addLegendPayload:f9,replaceLegendPayload:h9,removeLegendPayload:p9}=w2.actions,m9=w2.reducer;function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nb.apply(null,arguments)}function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function t0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(i){g9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function g9(t,e,n){return(e=v9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v9(t){var e=y9(t,"string");return typeof e=="symbol"?e:e+""}function y9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b9(t){return Array.isArray(t)&&kn(t[0])&&kn(t[1])?t.join(" ~ "):t}var A9=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:s,formatter:a,itemSorter:l,wrapperClassName:c,labelClassName:d,label:f,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(s&&s.length){var R={padding:0,margin:0},I=(l?Op(s,l):s).map((O,F)=>{if(O.type==="none")return null;var z=O.formatter||a||b9,{value:$,name:G}=O,X=$,le=G;if(z){var oe=z($,G,O,F,s);if(Array.isArray(oe))[X,le]=oe;else if(oe!=null)X=oe;else return null}var pe=t0({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},i);return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:pe},kn(le)?P.createElement("span",{className:"recharts-tooltip-item-name"},le):null,kn(le)?P.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,P.createElement("span",{className:"recharts-tooltip-item-value"},X),P.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},S=t0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=t0({margin:0},r),E=!pn(f),x=E?f:"",C=ot("recharts-default-tooltip",c),T=ot("recharts-tooltip-label",d);E&&p&&s!==void 0&&s!==null&&(x=p(f,s));var N=g?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",Nb({className:C,style:S},N),P.createElement("p",{className:T,style:w},P.isValidElement(x)?x:"".concat(x)),y())},Xu="recharts-tooltip-wrapper",S9={visibility:"hidden"};function w9(t){var{coordinate:e,translateX:n,translateY:i}=t;return ot(Xu,{["".concat(Xu,"-right")]:Ee(n)&&e&&Ee(e.x)&&n>=e.x,["".concat(Xu,"-left")]:Ee(n)&&e&&Ee(e.x)&&n<e.x,["".concat(Xu,"-bottom")]:Ee(i)&&e&&Ee(e.y)&&i>=e.y,["".concat(Xu,"-top")]:Ee(i)&&e&&Ee(e.y)&&i<e.y})}function dP(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=t;if(s&&Ee(s[i]))return s[i];var f=n[i]-l-(r>0?r:0),p=n[i]+r;if(e[i])return a[i]?f:p;var g=c[i];if(g==null)return 0;if(a[i]){var y=f,S=g;return y<S?Math.max(p,g):Math.max(f,g)}if(d==null)return 0;var w=p+l,E=g+d;return w>E?Math.max(f,g):Math.max(p,g)}function _9(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function E9(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:c}=t,d,f,p;return a.height>0&&a.width>0&&n?(f=dP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),p=dP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),d=_9({translateX:f,translateY:p,useTranslate3d:l})):d=S9,{cssProperties:d,cssClasses:w9({translateX:f,translateY:p,coordinate:n})}}function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(i){Ib(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ib(t,e,n){return(e=x9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x9(t){var e=T9(t,"string");return typeof e=="symbol"?e:e+""}function T9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class C9 extends P.PureComponent{constructor(){super(...arguments),Ib(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ib(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:a,hasPayload:l,isAnimationActive:c,offset:d,position:f,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:S,lastBoundingBox:w,innerRef:E,hasPortalFromProps:x}=this.props,{cssClasses:C,cssProperties:T}=E9({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:y}),N=x?{}:jf(jf({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),R=jf(jf({},N),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},S);return P.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:R,ref:E},s)}}var _2=()=>{var t;return(t=_e(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Db(){return Db=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Db.apply(null,arguments)}function hP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hP(Object(n),!0).forEach(function(i){M9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function M9(t,e,n){return(e=P9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P9(t){var e=R9(t,"string");return typeof e=="symbol"?e:e+""}function R9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mP={curveBasisClosed:P8,curveBasisOpen:R8,curveBasis:M8,curveBumpX:p8,curveBumpY:m8,curveLinearClosed:N8,curveLinear:Np,curveMonotoneX:I8,curveMonotoneY:D8,curveNatural:O8,curveStep:k8,curveStepAfter:U8,curveStepBefore:L8},Hh=t=>Ct(t.x)&&Ct(t.y),gP=t=>t.base!=null&&Hh(t.base)&&Hh(t),Ju=t=>t.x,Qu=t=>t.y,N9=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Gc(t));return(n==="curveMonotone"||n==="curveBump")&&e?mP["".concat(n).concat(e==="vertical"?"Y":"X")]:mP[n]||Np},I9=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:s=!1}=t,a=N9(e,r),l=s?n.filter(Hh):n,c;if(Array.isArray(i)){var d=n.map((y,S)=>pP(pP({},y),{},{base:i[S]}));r==="vertical"?c=Bf().y(Qu).x1(Ju).x0(y=>y.base.x):c=Bf().x(Ju).y1(Qu).y0(y=>y.base.y);var f=c.defined(gP).curve(a),p=s?d.filter(gP):d;return f(p)}r==="vertical"&&Ee(i)?c=Bf().y(Qu).x1(Ju).x0(i):Ee(i)?c=Bf().x(Ju).y1(Qu).y0(i):c=QD().x(Ju).y(Qu);var g=c.defined(Hh).curve(a);return g(l)},E2=t=>{var{className:e,points:n,path:i,pathRef:r}=t,s=Kc();if((!n||!n.length)&&!i)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=n&&n.length?I9(a):i;return P.createElement("path",Db({},Or(t),FA(t),{className:ot("recharts-curve",e),d:l===null?void 0:l,ref:r}))},D9=["x","y","top","left","width","height","className"];function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ob.apply(null,arguments)}function vP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function O9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vP(Object(n),!0).forEach(function(i){k9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function k9(t,e,n){return(e=L9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L9(t){var e=U9(t,"string");return typeof e=="symbol"?e:e+""}function U9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B9(t,e){if(t==null)return{};var n,i,r=F9(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function F9(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var z9=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),H9=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:a=0,className:l}=t,c=B9(t,D9),d=O9({x:e,y:n,top:i,left:r,width:s,height:a},c);return!Ee(e)||!Ee(n)||!Ee(s)||!Ee(a)||!Ee(i)||!Ee(r)?null:P.createElement("path",Ob({},Pn(d),{className:ot("recharts-cross",l),d:z9(e,n,s,a,i,r)}))};function G9(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function bP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(i){q9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function q9(t,e,n){return(e=V9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V9(t){var e=$9(t,"string");return typeof e=="symbol"?e:e+""}function $9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j9=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),x2=(t,e,n)=>t.map(i=>"".concat(j9(i)," ").concat(e,"ms ").concat(n)).join(","),Y9=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Ec=(t,e)=>Object.keys(e).reduce((n,i)=>bP(bP({},n),{},{[i]:t(i,e[i])}),{});function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(i){K9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function K9(t,e,n){return(e=W9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W9(t){var e=X9(t,"string");return typeof e=="symbol"?e:e+""}function X9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gh=(t,e,n)=>t+(e-t)*n,kb=t=>{var{from:e,to:n}=t;return e!==n},T2=(t,e,n)=>{var i=Ec((r,s)=>{if(kb(s)){var[a,l]=t(s.from,s.to,s.velocity);return Zt(Zt({},s),{},{from:a,velocity:l})}return s},e);return n<1?Ec((r,s)=>kb(s)&&i[r]!=null?Zt(Zt({},s),{},{velocity:Gh(s.velocity,i[r].velocity,n),from:Gh(s.from,i[r].from,n)}):s,e):T2(t,i,n-1)};function J9(t,e,n,i,r,s){var a,l=i.reduce((g,y)=>Zt(Zt({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>Ec((g,y)=>y.from,l),d=()=>!Object.values(l).filter(kb).length,f=null,p=g=>{a||(a=g);var y=g-a,S=y/n.dt;l=T2(n,l,S),r(Zt(Zt(Zt({},t),e),c())),a=g,d()||(f=s.setTimeout(p))};return()=>(f=s.setTimeout(p),()=>{var g;(g=f)===null||g===void 0||g()})}function Q9(t,e,n,i,r,s,a){var l=null,c=r.reduce((p,g)=>{var y=t[g],S=e[g];return y==null||S==null?p:Zt(Zt({},p),{},{[g]:[y,S]})},{}),d,f=p=>{d||(d=p);var g=(p-d)/i,y=Ec((w,E)=>Gh(...E,n(g)),c);if(s(Zt(Zt(Zt({},t),e),y)),g<1)l=a.setTimeout(f);else{var S=Ec((w,E)=>Gh(...E,n(1)),c);s(Zt(Zt(Zt({},t),e),S))}};return()=>(l=a.setTimeout(f),()=>{var p;(p=l)===null||p===void 0||p()})}const Z9=(t,e,n,i,r,s)=>{var a=Y9(t,e);return n==null?()=>(r(Zt(Zt({},t),e)),()=>{}):n.isStepper===!0?J9(t,e,n,a,r,s):Q9(t,e,n,i,a,r,s)};var qh=1e-4,C2=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],M2=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),SP=(t,e)=>n=>{var i=C2(t,e);return M2(i,n)},e7=(t,e)=>n=>{var i=C2(t,e),r=[...i.map((s,a)=>s*a).slice(1),0];return M2(r,n)},t7=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(s=>parseFloat(s));return[r[0],r[1],r[2],r[3]]},n7=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=t7(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},i7=(t,e,n,i)=>{var r=SP(t,n),s=SP(e,i),a=e7(t,n),l=d=>d>1?1:d<0?0:d,c=d=>{for(var f=d>1?1:d,p=f,g=0;g<8;++g){var y=r(p)-f,S=a(p);if(Math.abs(y-f)<qh||S<qh)return s(p);p=l(p-y/S)}return s(p)};return c.isStepper=!1,c},wP=function(){return i7(...n7(...arguments))},r7=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(a,l,c)=>{var d=-(a-l)*n,f=c*i,p=c+(d-f)*r/1e3,g=c*r/1e3+a;return Math.abs(g-l)<qh&&Math.abs(p)<qh?[l,0]:[g,p]};return s.isStepper=!0,s.dt=r,s},s7=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return wP(t);case"spring":return r7();default:if(t.split("(")[0]==="cubic-bezier")return wP(t)}return typeof t=="function"?t:null};function a7(t){var e,n=()=>null,i=!1,r=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var l=a,[c,...d]=l;if(typeof c=="number"){r=t.setTimeout(s.bind(null,d),c);return}s(c),r=t.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,r&&(r(),r=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class o7{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=a=>{a-i>=n?e(a):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{r!=null&&cancelAnimationFrame(r)}}}function l7(){return a7(new o7)}var u7=P.createContext(l7);function c7(t,e){var n=P.useContext(u7);return P.useMemo(()=>e??n(t),[t,e,n])}var d7=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qp={isSsr:d7()},f7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},_P={t:0},n0={t:1};function JA(t){var e=Ln(t,f7),{isActive:n,canBegin:i,duration:r,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:c,children:d}=e,f=n==="auto"?!Qp.isSsr:n,p=c7(e.animationId,e.animationManager),[g,y]=P.useState(f?_P:n0),S=P.useRef(null);return P.useEffect(()=>{f||y(n0)},[f]),P.useEffect(()=>{if(!f||!i)return qc;var w=Z9(_P,n0,s7(s),r,y,p.getTimeoutController()),E=()=>{S.current=w()};return p.start([c,a,E,r,l]),()=>{p.stop(),S.current&&S.current(),l()}},[f,i,r,s,a,c,l,p]),d(g.t)}function QA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=P.useRef(vc(e)),i=P.useRef(t);return i.current!==t&&(n.current=vc(e),i.current=t),n.current}var h7=["radius"],p7=["radius"],EP,xP,TP,CP,MP,PP,RP,NP,IP,DP;function OP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(n),!0).forEach(function(i){m7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function m7(t,e,n){return(e=g7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g7(t){var e=v7(t,"string");return typeof e=="symbol"?e:e+""}function v7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vh.apply(null,arguments)}function LP(t,e){if(t==null)return{};var n,i,r=y7(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function xr(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var UP=(t,e,n,i,r)=>{var s=aa(n),a=aa(i),l=Math.min(Math.abs(s)/2,Math.abs(a)/2),c=a>=0?1:-1,d=s>=0?1:-1,f=a>=0&&s>=0||a<0&&s<0?1:0,p;if(l>0&&r instanceof Array){for(var g=[0,0,0,0],y=0,S=4;y<S;y++)g[y]=r[y]>l?l:r[y];p=Dt(EP||(EP=xr(["M",",",""])),t,e+c*g[0]),g[0]>0&&(p+=Dt(xP||(xP=xr(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+d*g[0],e)),p+=Dt(TP||(TP=xr(["L ",",",""])),t+n-d*g[1],e),g[1]>0&&(p+=Dt(CP||(CP=xr(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),p+=Dt(MP||(MP=xr(["L ",",",""])),t+n,e+i-c*g[2]),g[2]>0&&(p+=Dt(PP||(PP=xr(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-d*g[2],e+i)),p+=Dt(RP||(RP=xr(["L ",",",""])),t+d*g[3],e+i),g[3]>0&&(p+=Dt(NP||(NP=xr(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+i-c*g[3])),p+="Z"}else if(l>0&&r===+r&&r>0){var w=Math.min(l,r);p=Dt(IP||(IP=xr(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*w,w,w,f,t+d*w,e,t+n-d*w,e,w,w,f,t+n,e+c*w,t+n,e+i-c*w,w,w,f,t+n-d*w,e+i,t+d*w,e+i,w,w,f,t,e+i-c*w)}else p=Dt(DP||(DP=xr(["M ",","," h "," v "," h "," Z"])),t,e,n,i,-n);return p},BP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZA=t=>{var e=Ln(t,BP),n=P.useRef(null),[i,r]=P.useState(-1);P.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var V=n.current.getTotalLength();V&&r(V)}catch{}},[]);var{x:s,y:a,width:l,height:c,radius:d,className:f}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:S,isUpdateAnimationActive:w}=e,E=P.useRef(l),x=P.useRef(c),C=P.useRef(s),T=P.useRef(a),N=P.useMemo(()=>({x:s,y:a,width:l,height:c,radius:d}),[s,a,l,c,d]),R=QA(N,"rectangle-");if(s!==+s||a!==+a||l!==+l||c!==+c||l===0||c===0)return null;var I=ot("recharts-rectangle",f);if(!w){var O=Pn(e),{radius:F}=O,z=LP(O,h7);return P.createElement("path",Vh({},z,{x:aa(s),y:aa(a),width:aa(l),height:aa(c),radius:typeof d=="number"?d:void 0,className:I,d:UP(s,a,l,c,d)}))}var $=E.current,G=x.current,X=C.current,le=T.current,oe="0px ".concat(i===-1?1:i,"px"),pe="".concat(i,"px 0px"),B=x2(["strokeDasharray"],g,typeof p=="string"?p:BP.animationEasing);return P.createElement(JA,{animationId:R,key:R,canBegin:i>0,duration:g,easing:p,isActive:w,begin:y},V=>{var re=oi($,l,V),ue=oi(G,c,V),Me=oi(X,s,V),L=oi(le,a,V);n.current&&(E.current=re,x.current=ue,C.current=Me,T.current=L);var K;S?V>0?K={transition:B,strokeDasharray:pe}:K={strokeDasharray:oe}:K={strokeDasharray:pe};var ie=Pn(e),{radius:ce}=ie,Ae=LP(ie,p7);return P.createElement("path",Vh({},Ae,{radius:typeof d=="number"?d:void 0,className:I,d:UP(Me,L,re,ue,d),ref:n,style:kP(kP({},K),e.style)}))})};function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(i){b7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function b7(t,e,n){return(e=A7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A7(t){var e=S7(t,"string");return typeof e=="symbol"?e:e+""}function S7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $h=Math.PI/180,w7=t=>t*180/Math.PI,Tn=(t,e,n,i)=>({x:t+Math.cos(-$h*i)*n,y:e+Math.sin(-$h*i)*n}),_7=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},E7=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},x7=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,a=E7({x:n,y:i},{x:r,y:s});if(a<=0)return{radius:a,angle:0};var l=(n-r)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:w7(c),angleInRadian:c}},T7=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},C7=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(r,s);return t+a*360},M7=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:s}=x7({x:n,y:i},e),{innerRadius:a,outerRadius:l}=e;if(r<a||r>l||r===0)return null;var{startAngle:c,endAngle:d}=T7(e),f=s,p;if(c<=d){for(;f>d;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=d}else{for(;f>c;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=c}return p?zP(zP({},e),{},{radius:r,angle:C7(f,e)}):null};function P2(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,a=Tn(e,n,i,r),l=Tn(e,n,i,s);return{points:[a,l],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}var HP,GP,qP,VP,$P,jP,YP;function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lb.apply(null,arguments)}function ja(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var P7=(t,e)=>{var n=Gi(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},Yf=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:c}=t,d=l*(a?1:-1)+i,f=Math.asin(l/d)/$h,p=c?r:r+s*f,g=Tn(e,n,d,p),y=Tn(e,n,i,p),S=c?r-s*f:r,w=Tn(e,n,d*Math.cos(f*$h),S);return{center:g,circleTangency:y,lineTangency:w,theta:f}},R2=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a}=t,l=P7(s,a),c=s+l,d=Tn(e,n,r,s),f=Tn(e,n,r,c),p=Dt(HP||(HP=ja(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(s>c),f.x,f.y);if(i>0){var g=Tn(e,n,i,s),y=Tn(e,n,i,c);p+=Dt(GP||(GP=ja(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,i,i,+(Math.abs(l)>180),+(s<=c),g.x,g.y)}else p+=Dt(qP||(qP=ja(["L ",","," Z"])),e,n);return p},R7=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d}=t,f=Gi(d-c),{circleTangency:p,lineTangency:g,theta:y}=Yf({cx:e,cy:n,radius:r,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),{circleTangency:S,lineTangency:w,theta:E}=Yf({cx:e,cy:n,radius:r,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),x=l?Math.abs(c-d):Math.abs(c-d)-y-E;if(x<0)return a?Dt(VP||(VP=ja(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,s,s,s*2,s,s,-s*2):R2({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:c,endAngle:d});var C=Dt($P||($P=ja(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,s,s,+(f<0),p.x,p.y,r,r,+(x>180),+(f<0),S.x,S.y,s,s,+(f<0),w.x,w.y);if(i>0){var{circleTangency:T,lineTangency:N,theta:R}=Yf({cx:e,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:O,theta:F}=Yf({cx:e,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),z=l?Math.abs(c-d):Math.abs(c-d)-R-F;if(z<0&&s===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+=Dt(jP||(jP=ja(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),O.x,O.y,s,s,+(f<0),I.x,I.y,i,i,+(z>180),+(f>0),T.x,T.y,s,s,+(f<0),N.x,N.y)}else C+=Dt(YP||(YP=ja(["L",",","Z"])),e,n);return C},N7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},N2=t=>{var e=Ln(t,N7),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f,className:p}=e;if(s<r||d===f)return null;var g=ot("recharts-sector",p),y=s-r,S=fa(a,y,0,!0),w;return S>0&&Math.abs(d-f)<360?w=R7({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(S,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f}):w=R2({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:d,endAngle:f}),P.createElement("path",Lb({},Pn(e),{className:g,d:w}))};function I7(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(pO(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:s,outerRadius:a,angle:l}=e,c=Tn(i,r,s,l),d=Tn(i,r,a,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return P2(e)}}var i0={},r0={},s0={},KP;function D7(){return KP||(KP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xO();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(s0)),s0}var WP;function O7(){return WP||(WP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D7();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(r0)),r0}var XP;function k7(){return XP||(XP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TO(),n=O7();function i(r,s,a){a&&typeof a!="number"&&e.isIterateeCall(r,s,a)&&(s=a=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),a=a===void 0?r<s?1:-1:n.toFinite(a);const l=Math.max(Math.ceil((s-r)/(a||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=a;return c}t.range=i})(i0)),i0}var a0,JP;function L7(){return JP||(JP=1,a0=k7().range),a0}var U7=L7();const I2=Br(U7);function oa(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function B7(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eS(t){let e,n,i;t.length!==2?(e=oa,n=(l,c)=>oa(t(l),c),i=(l,c)=>t(l)-c):(e=t===oa||t===B7?t:F7,n=t,i=t);function r(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function a(l,c,d=0,f=l.length){const p=r(l,c,d,f-1);return p>d&&i(l[p-1],c)>-i(l[p],c)?p-1:p}return{left:r,center:a,right:s}}function F7(){return 0}function D2(t){return t===null?NaN:+t}function*z7(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const H7=eS(oa),Xc=H7.right;eS(D2).center;class QP extends Map{constructor(e,n=V7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(ZP(this,e))}has(e){return super.has(ZP(this,e))}set(e,n){return super.set(G7(this,e),n)}delete(e){return super.delete(q7(this,e))}}function ZP({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function G7({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function q7({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function V7(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $7(t=oa){if(t===oa)return O2;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function O2(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const j7=Math.sqrt(50),Y7=Math.sqrt(10),K7=Math.sqrt(2);function jh(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=j7?10:s>=Y7?5:s>=K7?2:1;let l,c,d;return r<0?(d=Math.pow(10,-r)/a,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,r)*a,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?jh(t,e,n*2):[l,c,d]}function Ub(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?jh(e,t,n):jh(t,e,n);if(!(s>=r))return[];const l=s-r+1,c=new Array(l);if(i)if(a<0)for(let d=0;d<l;++d)c[d]=(s-d)/-a;else for(let d=0;d<l;++d)c[d]=(s-d)*a;else if(a<0)for(let d=0;d<l;++d)c[d]=(r+d)/-a;else for(let d=0;d<l;++d)c[d]=(r+d)*a;return c}function Bb(t,e,n){return e=+e,t=+t,n=+n,jh(t,e,n)[2]}function Fb(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Bb(e,t,n):Bb(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function eR(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function tR(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function k2(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?O2:$7(r);i>n;){if(i-n>600){const c=i-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),y=Math.max(n,Math.floor(e-d*p/c+g)),S=Math.min(i,Math.floor(e+(c-d)*p/c+g));k2(t,e,y,S,r)}const s=t[e];let a=n,l=i;for(Zu(t,n,e),r(t[i],s)>0&&Zu(t,n,i);a<l;){for(Zu(t,a,l),++a,--l;r(t[a],s)<0;)++a;for(;r(t[l],s)>0;)--l}r(t[n],s)===0?Zu(t,n,l):(++l,Zu(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function Zu(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function W7(t,e,n){if(t=Float64Array.from(z7(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return tR(t);if(e>=1)return eR(t);var i,r=(i-1)*e,s=Math.floor(r),a=eR(k2(t,s).subarray(0,s+1)),l=tR(t.subarray(s+1));return a+(l-a)*(r-s)}}function X7(t,e,n=D2){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(r-s)}}function J7(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Xi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Cs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const zb=Symbol("implicit");function tS(){var t=new QP,e=[],n=[],i=zb;function r(s){let a=t.get(s);if(a===void 0){if(i!==zb)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new QP;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return tS(e,n).unknown(i)},Xi.apply(r,arguments),r}function nS(){var t=tS().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,y=r<i,S=y?r:i,w=y?i:r;s=(w-S)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),S+=(w-S-s*(g-c))*f,a=s*(1-c),l&&(S=Math.round(S),a=Math.round(a));var E=J7(g).map(function(x){return S+s*x});return n(y?E.reverse():E)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,p()):[i,r]},t.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,l=!0,p()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return nS(e(),[i,r]).round(l).paddingInner(c).paddingOuter(d).align(f)},Xi.apply(p(),arguments)}function L2(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return L2(e())},t}function Q7(){return L2(nS.apply(null,arguments).paddingInner(1))}function iS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function U2(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Jc(){}var xc=.7,Yh=1/xc,Ml="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z7=/^#([0-9a-f]{3,8})$/,eX=new RegExp(`^rgb\\(${Ml},${Ml},${Ml}\\)$`),tX=new RegExp(`^rgb\\(${Nr},${Nr},${Nr}\\)$`),nX=new RegExp(`^rgba\\(${Ml},${Ml},${Ml},${Tc}\\)$`),iX=new RegExp(`^rgba\\(${Nr},${Nr},${Nr},${Tc}\\)$`),rX=new RegExp(`^hsl\\(${Tc},${Nr},${Nr}\\)$`),sX=new RegExp(`^hsla\\(${Tc},${Nr},${Nr},${Tc}\\)$`),nR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iS(Jc,Cc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:iR,formatHex:iR,formatHex8:aX,formatHsl:oX,formatRgb:rR,toString:rR});function iR(){return this.rgb().formatHex()}function aX(){return this.rgb().formatHex8()}function oX(){return B2(this).formatHsl()}function rR(){return this.rgb().formatRgb()}function Cc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Z7.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sR(e):n===3?new li(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Kf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Kf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eX.exec(t))?new li(e[1],e[2],e[3],1):(e=tX.exec(t))?new li(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nX.exec(t))?Kf(e[1],e[2],e[3],e[4]):(e=iX.exec(t))?Kf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rX.exec(t))?lR(e[1],e[2]/100,e[3]/100,1):(e=sX.exec(t))?lR(e[1],e[2]/100,e[3]/100,e[4]):nR.hasOwnProperty(t)?sR(nR[t]):t==="transparent"?new li(NaN,NaN,NaN,0):null}function sR(t){return new li(t>>16&255,t>>8&255,t&255,1)}function Kf(t,e,n,i){return i<=0&&(t=e=n=NaN),new li(t,e,n,i)}function lX(t){return t instanceof Jc||(t=Cc(t)),t?(t=t.rgb(),new li(t.r,t.g,t.b,t.opacity)):new li}function Hb(t,e,n,i){return arguments.length===1?lX(t):new li(t,e,n,i??1)}function li(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}iS(li,Hb,U2(Jc,{brighter(t){return t=t==null?Yh:Math.pow(Yh,t),new li(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xc:Math.pow(xc,t),new li(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new li(eo(this.r),eo(this.g),eo(this.b),Kh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aR,formatHex:aR,formatHex8:uX,formatRgb:oR,toString:oR}));function aR(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}`}function uX(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}${Ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function oR(){const t=Kh(this.opacity);return`${t===1?"rgb(":"rgba("}${eo(this.r)}, ${eo(this.g)}, ${eo(this.b)}${t===1?")":`, ${t})`}`}function Kh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ya(t){return t=eo(t),(t<16?"0":"")+t.toString(16)}function lR(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new sr(t,e,n,i)}function B2(t){if(t instanceof sr)return new sr(t.h,t.s,t.l,t.opacity);if(t instanceof Jc||(t=Cc(t)),!t)return new sr;if(t instanceof sr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,c=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+r:2-s-r,a*=60):l=c>0&&c<1?0:a,new sr(a,l,c,t.opacity)}function cX(t,e,n,i){return arguments.length===1?B2(t):new sr(t,e,n,i??1)}function sr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}iS(sr,cX,U2(Jc,{brighter(t){return t=t==null?Yh:Math.pow(Yh,t),new sr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xc:Math.pow(xc,t),new sr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new li(o0(t>=240?t-240:t+120,r,i),o0(t,r,i),o0(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new sr(uR(this.h),Wf(this.s),Wf(this.l),Kh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kh(this.opacity);return`${t===1?"hsl(":"hsla("}${uR(this.h)}, ${Wf(this.s)*100}%, ${Wf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uR(t){return t=(t||0)%360,t<0?t+360:t}function Wf(t){return Math.max(0,Math.min(1,t||0))}function o0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const rS=t=>()=>t;function dX(t,e){return function(n){return t+n*e}}function fX(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function hX(t){return(t=+t)==1?F2:function(e,n){return n-e?fX(e,n,t):rS(isNaN(e)?n:e)}}function F2(t,e){var n=e-t;return n?dX(t,n):rS(isNaN(t)?e:t)}const cR=(function t(e){var n=hX(e);function i(r,s){var a=n((r=Hb(r)).r,(s=Hb(s)).r),l=n(r.g,s.g),c=n(r.b,s.b),d=F2(r.opacity,s.opacity);return function(f){return r.r=a(f),r.g=l(f),r.b=c(f),r.opacity=d(f),r+""}}return i.gamma=t,i})(1);function pX(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function mX(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gX(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=zl(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<i;++a)s[a]=r[a](l);return s}}function vX(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Wh(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yX(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=zl(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Gb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l0=new RegExp(Gb.source,"g");function bX(t){return function(){return t}}function AX(t){return function(e){return t(e)+""}}function SX(t,e){var n=Gb.lastIndex=l0.lastIndex=0,i,r,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(i=Gb.exec(t))&&(r=l0.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,c.push({i:a,x:Wh(i,r)})),n=l0.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?AX(c[0].x):bX(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function zl(t,e){var n=typeof e,i;return e==null||n==="boolean"?rS(e):(n==="number"?Wh:n==="string"?(i=Cc(e))?(e=i,cR):SX:e instanceof Cc?cR:e instanceof Date?vX:mX(e)?pX:Array.isArray(e)?gX:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yX:Wh)(t,e)}function sS(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function wX(t,e){e===void 0&&(e=t,t=zl);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[l](a-l)}}function _X(t){return function(){return t}}function Xh(t){return+t}var dR=[0,1];function $n(t){return t}function qb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:_X(isNaN(e)?NaN:.5)}function EX(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function xX(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=qb(r,i),s=n(a,s)):(i=qb(i,r),s=n(s,a)),function(l){return s(i(l))}}function TX(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=qb(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=Xc(t,l,1,i)-1;return s[c](r[c](l))}}function Qc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Zp(){var t=dR,e=dR,n=zl,i,r,s,a=$n,l,c,d;function f(){var g=Math.min(t.length,e.length);return a!==$n&&(a=EX(t[0],t[g-1])),l=g>2?TX:xX,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(i),e,n)))(i(a(g)))}return p.invert=function(g){return a(r((d||(d=l(e,t.map(i),Wh)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Xh),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=sS,f()},p.clamp=function(g){return arguments.length?(a=g?!0:$n,f()):a!==$n},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,y){return i=g,r=y,f()}}function aS(){return Zp()($n,$n)}function CX(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jh(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Dl(t){return t=Jh(Math.abs(t)),t?t[1]:NaN}function MX(t,e){return function(n,i){for(var r=n.length,s=[],a=0,l=t[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function PX(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var RX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mc(t){if(!(e=RX.exec(t)))throw new Error("invalid format: "+t);var e;return new oS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mc.prototype=oS.prototype;function oS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NX(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var z2;function IX(t,e){var n=Jh(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(z2=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Jh(t,Math.max(0,e+s-1))[0]}function fR(t,e){var n=Jh(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const hR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:CX,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fR(t*100,e),r:fR,s:IX,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pR(t){return t}var mR=Array.prototype.map,gR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function DX(t){var e=t.grouping===void 0||t.thousands===void 0?pR:MX(mR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?pR:PX(mR.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Mc(p);var g=p.fill,y=p.align,S=p.sign,w=p.symbol,E=p.zero,x=p.width,C=p.comma,T=p.precision,N=p.trim,R=p.type;R==="n"?(C=!0,R="g"):hR[R]||(T===void 0&&(T=12),N=!0,R="g"),(E||g==="0"&&y==="=")&&(E=!0,g="0",y="=");var I=w==="$"?n:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",O=w==="$"?i:/[%p]/.test(R)?a:"",F=hR[R],z=/[defgprs%]/.test(R);T=T===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function $(G){var X=I,le=O,oe,pe,B;if(R==="c")le=F(G)+le,G="";else{G=+G;var V=G<0||1/G<0;if(G=isNaN(G)?c:F(Math.abs(G),T),N&&(G=NX(G)),V&&+G==0&&S!=="+"&&(V=!1),X=(V?S==="("?S:l:S==="-"||S==="("?"":S)+X,le=(R==="s"?gR[8+z2/3]:"")+le+(V&&S==="("?")":""),z){for(oe=-1,pe=G.length;++oe<pe;)if(B=G.charCodeAt(oe),48>B||B>57){le=(B===46?r+G.slice(oe+1):G.slice(oe))+le,G=G.slice(0,oe);break}}}C&&!E&&(G=e(G,1/0));var re=X.length+G.length+le.length,ue=re<x?new Array(x-re+1).join(g):"";switch(C&&E&&(G=e(ue+G,ue.length?x-le.length:1/0),ue=""),y){case"<":G=X+G+le+ue;break;case"=":G=X+ue+G+le;break;case"^":G=ue.slice(0,re=ue.length>>1)+X+G+le+ue.slice(re);break;default:G=ue+X+G+le;break}return s(G)}return $.toString=function(){return p+""},$}function f(p,g){var y=d((p=Mc(p),p.type="f",p)),S=Math.max(-8,Math.min(8,Math.floor(Dl(g)/3)))*3,w=Math.pow(10,-S),E=gR[8+S/3];return function(x){return y(w*x)+E}}return{format:d,formatPrefix:f}}var Xf,lS,H2;OX({thousands:",",grouping:[3],currency:["$",""]});function OX(t){return Xf=DX(t),lS=Xf.format,H2=Xf.formatPrefix,Xf}function kX(t){return Math.max(0,-Dl(Math.abs(t)))}function LX(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dl(e)/3)))*3-Dl(Math.abs(t)))}function UX(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Dl(e)-Dl(t))+1}function G2(t,e,n,i){var r=Fb(t,e,n),s;switch(i=Mc(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=LX(r,a))&&(i.precision=s),H2(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=UX(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=kX(r))&&(i.precision=s-(i.type==="%")*2);break}}return lS(i)}function ya(t){var e=t.domain;return t.ticks=function(n){var i=e();return Ub(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return G2(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],l=i[s],c,d,f=10;for(l<a&&(d=a,a=l,l=d,d=r,r=s,s=d);f-- >0;){if(d=Bb(a,l,n),d===c)return i[r]=a,i[s]=l,e(i);if(d>0)a=Math.floor(a/d)*d,l=Math.ceil(l/d)*d;else if(d<0)a=Math.ceil(a*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function q2(){var t=aS();return t.copy=function(){return Qc(t,q2())},Xi.apply(t,arguments),ya(t)}function V2(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Xh),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return V2(t).unknown(e)},t=arguments.length?Array.from(t,Xh):[0,1],ya(n)}function $2(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function vR(t){return Math.log(t)}function yR(t){return Math.exp(t)}function BX(t){return-Math.log(-t)}function FX(t){return-Math.exp(-t)}function zX(t){return isFinite(t)?+("1e"+t):t<0?0:t}function HX(t){return t===10?zX:t===Math.E?Math.exp:e=>Math.pow(t,e)}function GX(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function bR(t){return(e,n)=>-t(-e,n)}function uS(t){const e=t(vR,yR),n=e.domain;let i=10,r,s;function a(){return r=GX(i),s=HX(i),n()[0]<0?(r=bR(r),s=bR(s),t(BX,FX)):t(vR,yR),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=r(d),y=r(f),S,w;const E=l==null?10:+l;let x=[];if(!(i%1)&&y-g<E){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(S=1;S<i;++S)if(w=g<0?S/s(-g):S*s(g),!(w<d)){if(w>f)break;x.push(w)}}else for(;g<=y;++g)for(S=i-1;S>=1;--S)if(w=g>0?S/s(-g):S*s(g),!(w<d)){if(w>f)break;x.push(w)}x.length*2<E&&(x=Ub(d,f,E))}else x=Ub(g,y,Math.min(y-g,E)).map(s);return p?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Mc(c)).precision==null&&(c.trim=!0),c=lS(c)),l===1/0)return c;const d=Math.max(1,i*l/e.ticks().length);return f=>{let p=f/s(Math.round(r(f)));return p*i<i-.5&&(p*=i),p<=d?c(f):""}},e.nice=()=>n($2(n(),{floor:l=>s(Math.floor(r(l))),ceil:l=>s(Math.ceil(r(l)))})),e}function j2(){const t=uS(Zp()).domain([1,10]);return t.copy=()=>Qc(t,j2()).base(t.base()),Xi.apply(t,arguments),t}function AR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function SR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cS(t){var e=1,n=t(AR(e),SR(e));return n.constant=function(i){return arguments.length?t(AR(e=+i),SR(e)):e},ya(n)}function Y2(){var t=cS(Zp());return t.copy=function(){return Qc(t,Y2()).constant(t.constant())},Xi.apply(t,arguments)}function wR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function qX(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function VX(t){return t<0?-t*t:t*t}function dS(t){var e=t($n,$n),n=1;function i(){return n===1?t($n,$n):n===.5?t(qX,VX):t(wR(n),wR(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},ya(e)}function fS(){var t=dS(Zp());return t.copy=function(){return Qc(t,fS()).exponent(t.exponent())},Xi.apply(t,arguments),t}function $X(){return fS.apply(null,arguments).exponent(.5)}function _R(t){return Math.sign(t)*t*t}function jX(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function K2(){var t=aS(),e=[0,1],n=!1,i;function r(s){var a=jX(t(s));return isNaN(a)?i:n?Math.round(a):a}return r.invert=function(s){return t.invert(_R(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,Xh)).map(_R)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return K2(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Xi.apply(r,arguments),ya(r)}function W2(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=X7(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?i:e[Xc(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(oa),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return W2().domain(t).range(e).unknown(i)},Xi.apply(s,arguments)}function X2(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function a(c){return c!=null&&c<=c?r[Xc(i,c,0,n)]:s}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},a.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,i[0]]:d>=n?[i[n-1],e]:[i[d-1],i[d]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return i.slice()},a.copy=function(){return X2().domain([t,e]).range(r).unknown(s)},Xi.apply(ya(a),arguments)}function J2(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[Xc(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return J2().domain(t).range(e).unknown(n)},Xi.apply(r,arguments)}const u0=new Date,c0=new Date;function tn(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),l=r.ceil(s);return s-a<l-s?a:l},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,l)=>{const c=[];if(s=r.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<a);return c},r.filter=s=>tn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(u0.setTime(+s),c0.setTime(+a),t(u0),t(c0),Math.floor(n(u0,c0))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const Qh=tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Qh.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Qh);Qh.range;const fs=1e3,qi=fs*60,hs=qi*60,bs=hs*24,hS=bs*7,ER=bs*30,d0=bs*365,Ka=tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getUTCSeconds());Ka.range;const pS=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fs)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getMinutes());pS.range;const mS=tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*qi)},(t,e)=>(e-t)/qi,t=>t.getUTCMinutes());mS.range;const gS=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fs-t.getMinutes()*qi)},(t,e)=>{t.setTime(+t+e*hs)},(t,e)=>(e-t)/hs,t=>t.getHours());gS.range;const vS=tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hs)},(t,e)=>(e-t)/hs,t=>t.getUTCHours());vS.range;const Zc=tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qi)/bs,t=>t.getDate()-1);Zc.range;const em=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bs,t=>t.getUTCDate()-1);em.range;const Q2=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bs,t=>Math.floor(t/bs));Q2.range;function mo(t){return tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*qi)/hS)}const tm=mo(0),Zh=mo(1),YX=mo(2),KX=mo(3),Ol=mo(4),WX=mo(5),XX=mo(6);tm.range;Zh.range;YX.range;KX.range;Ol.range;WX.range;XX.range;function go(t){return tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/hS)}const nm=go(0),ep=go(1),JX=go(2),QX=go(3),kl=go(4),ZX=go(5),eJ=go(6);nm.range;ep.range;JX.range;QX.range;kl.range;ZX.range;eJ.range;const yS=tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());yS.range;const bS=tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());bS.range;const As=tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());As.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});As.range;const Ss=tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ss.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ss.range;function Z2(t,e,n,i,r,s){const a=[[Ka,1,fs],[Ka,5,5*fs],[Ka,15,15*fs],[Ka,30,30*fs],[s,1,qi],[s,5,5*qi],[s,15,15*qi],[s,30,30*qi],[r,1,hs],[r,3,3*hs],[r,6,6*hs],[r,12,12*hs],[i,1,bs],[i,2,2*bs],[n,1,hS],[e,1,ER],[e,3,3*ER],[t,1,d0]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),S=y?y.range(d,+f+1):[];return g?S.reverse():S}function c(d,f,p){const g=Math.abs(f-d)/p,y=eS(([,,E])=>E).right(a,g);if(y===a.length)return t.every(Fb(d/d0,f/d0,p));if(y===0)return Qh.every(Math.max(Fb(d,f,p),1));const[S,w]=a[g/a[y-1][2]<a[y][2]/g?y-1:y];return S.every(w)}return[l,c]}const[tJ,nJ]=Z2(Ss,bS,nm,Q2,vS,mS),[iJ,rJ]=Z2(As,yS,tm,Zc,gS,pS);function f0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function h0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ec(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function sJ(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,d=tc(r),f=nc(r),p=tc(s),g=nc(s),y=tc(a),S=nc(a),w=tc(l),E=nc(l),x=tc(c),C=nc(c),T={a:V,A:re,b:ue,B:Me,c:null,d:RR,e:RR,f:MJ,g:BJ,G:zJ,H:xJ,I:TJ,j:CJ,L:ek,m:PJ,M:RJ,p:L,q:K,Q:DR,s:OR,S:NJ,u:IJ,U:DJ,V:OJ,w:kJ,W:LJ,x:null,X:null,y:UJ,Y:FJ,Z:HJ,"%":IR},N={a:ie,A:ce,b:Ae,B:xe,c:null,d:NR,e:NR,f:$J,g:tQ,G:iQ,H:GJ,I:qJ,j:VJ,L:nk,m:jJ,M:YJ,p:me,q:lt,Q:DR,s:OR,S:KJ,u:WJ,U:XJ,V:JJ,w:QJ,W:ZJ,x:null,X:null,y:eQ,Y:nQ,Z:rQ,"%":IR},R={a:$,A:G,b:X,B:le,c:oe,d:MR,e:MR,f:SJ,g:CR,G:TR,H:PR,I:PR,j:vJ,L:AJ,m:gJ,M:yJ,p:z,q:mJ,Q:_J,s:EJ,S:bJ,u:cJ,U:dJ,V:fJ,w:uJ,W:hJ,x:pe,X:B,y:CR,Y:TR,Z:pJ,"%":wJ};T.x=I(n,T),T.X=I(i,T),T.c=I(e,T),N.x=I(n,N),N.X=I(i,N),N.c=I(e,N);function I(Z,Re){return function(Ie){var ae=[],ht=-1,ze=0,kt=Z.length,Lt,Ji,hr;for(Ie instanceof Date||(Ie=new Date(+Ie));++ht<kt;)Z.charCodeAt(ht)===37&&(ae.push(Z.slice(ze,ht)),(Ji=xR[Lt=Z.charAt(++ht)])!=null?Lt=Z.charAt(++ht):Ji=Lt==="e"?" ":"0",(hr=Re[Lt])&&(Lt=hr(Ie,Ji)),ae.push(Lt),ze=ht+1);return ae.push(Z.slice(ze,ht)),ae.join("")}}function O(Z,Re){return function(Ie){var ae=ec(1900,void 0,1),ht=F(ae,Z,Ie+="",0),ze,kt;if(ht!=Ie.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Re&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(ze=h0(ec(ae.y,0,1)),kt=ze.getUTCDay(),ze=kt>4||kt===0?ep.ceil(ze):ep(ze),ze=em.offset(ze,(ae.V-1)*7),ae.y=ze.getUTCFullYear(),ae.m=ze.getUTCMonth(),ae.d=ze.getUTCDate()+(ae.w+6)%7):(ze=f0(ec(ae.y,0,1)),kt=ze.getDay(),ze=kt>4||kt===0?Zh.ceil(ze):Zh(ze),ze=Zc.offset(ze,(ae.V-1)*7),ae.y=ze.getFullYear(),ae.m=ze.getMonth(),ae.d=ze.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),kt="Z"in ae?h0(ec(ae.y,0,1)).getUTCDay():f0(ec(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(kt+5)%7:ae.w+ae.U*7-(kt+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,h0(ae)):f0(ae)}}function F(Z,Re,Ie,ae){for(var ht=0,ze=Re.length,kt=Ie.length,Lt,Ji;ht<ze;){if(ae>=kt)return-1;if(Lt=Re.charCodeAt(ht++),Lt===37){if(Lt=Re.charAt(ht++),Ji=R[Lt in xR?Re.charAt(ht++):Lt],!Ji||(ae=Ji(Z,Ie,ae))<0)return-1}else if(Lt!=Ie.charCodeAt(ae++))return-1}return ae}function z(Z,Re,Ie){var ae=d.exec(Re.slice(Ie));return ae?(Z.p=f.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function $(Z,Re,Ie){var ae=y.exec(Re.slice(Ie));return ae?(Z.w=S.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function G(Z,Re,Ie){var ae=p.exec(Re.slice(Ie));return ae?(Z.w=g.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function X(Z,Re,Ie){var ae=x.exec(Re.slice(Ie));return ae?(Z.m=C.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function le(Z,Re,Ie){var ae=w.exec(Re.slice(Ie));return ae?(Z.m=E.get(ae[0].toLowerCase()),Ie+ae[0].length):-1}function oe(Z,Re,Ie){return F(Z,e,Re,Ie)}function pe(Z,Re,Ie){return F(Z,n,Re,Ie)}function B(Z,Re,Ie){return F(Z,i,Re,Ie)}function V(Z){return a[Z.getDay()]}function re(Z){return s[Z.getDay()]}function ue(Z){return c[Z.getMonth()]}function Me(Z){return l[Z.getMonth()]}function L(Z){return r[+(Z.getHours()>=12)]}function K(Z){return 1+~~(Z.getMonth()/3)}function ie(Z){return a[Z.getUTCDay()]}function ce(Z){return s[Z.getUTCDay()]}function Ae(Z){return c[Z.getUTCMonth()]}function xe(Z){return l[Z.getUTCMonth()]}function me(Z){return r[+(Z.getUTCHours()>=12)]}function lt(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var Re=I(Z+="",T);return Re.toString=function(){return Z},Re},parse:function(Z){var Re=O(Z+="",!1);return Re.toString=function(){return Z},Re},utcFormat:function(Z){var Re=I(Z+="",N);return Re.toString=function(){return Z},Re},utcParse:function(Z){var Re=O(Z+="",!0);return Re.toString=function(){return Z},Re}}}var xR={"-":"",_:" ",0:"0"},gn=/^\s*\d+/,aJ=/^%/,oJ=/[\\^$*+?|[\]().{}]/g;function Ze(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function lJ(t){return t.replace(oJ,"\\$&")}function tc(t){return new RegExp("^(?:"+t.map(lJ).join("|")+")","i")}function nc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function uJ(t,e,n){var i=gn.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function cJ(t,e,n){var i=gn.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function dJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function fJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function hJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function TR(t,e,n){var i=gn.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function CR(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function pJ(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function mJ(t,e,n){var i=gn.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function gJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function MR(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function vJ(t,e,n){var i=gn.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function PR(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function yJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function bJ(t,e,n){var i=gn.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function AJ(t,e,n){var i=gn.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function SJ(t,e,n){var i=gn.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function wJ(t,e,n){var i=aJ.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function _J(t,e,n){var i=gn.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function EJ(t,e,n){var i=gn.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function RR(t,e){return Ze(t.getDate(),e,2)}function xJ(t,e){return Ze(t.getHours(),e,2)}function TJ(t,e){return Ze(t.getHours()%12||12,e,2)}function CJ(t,e){return Ze(1+Zc.count(As(t),t),e,3)}function ek(t,e){return Ze(t.getMilliseconds(),e,3)}function MJ(t,e){return ek(t,e)+"000"}function PJ(t,e){return Ze(t.getMonth()+1,e,2)}function RJ(t,e){return Ze(t.getMinutes(),e,2)}function NJ(t,e){return Ze(t.getSeconds(),e,2)}function IJ(t){var e=t.getDay();return e===0?7:e}function DJ(t,e){return Ze(tm.count(As(t)-1,t),e,2)}function tk(t){var e=t.getDay();return e>=4||e===0?Ol(t):Ol.ceil(t)}function OJ(t,e){return t=tk(t),Ze(Ol.count(As(t),t)+(As(t).getDay()===4),e,2)}function kJ(t){return t.getDay()}function LJ(t,e){return Ze(Zh.count(As(t)-1,t),e,2)}function UJ(t,e){return Ze(t.getFullYear()%100,e,2)}function BJ(t,e){return t=tk(t),Ze(t.getFullYear()%100,e,2)}function FJ(t,e){return Ze(t.getFullYear()%1e4,e,4)}function zJ(t,e){var n=t.getDay();return t=n>=4||n===0?Ol(t):Ol.ceil(t),Ze(t.getFullYear()%1e4,e,4)}function HJ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ze(e/60|0,"0",2)+Ze(e%60,"0",2)}function NR(t,e){return Ze(t.getUTCDate(),e,2)}function GJ(t,e){return Ze(t.getUTCHours(),e,2)}function qJ(t,e){return Ze(t.getUTCHours()%12||12,e,2)}function VJ(t,e){return Ze(1+em.count(Ss(t),t),e,3)}function nk(t,e){return Ze(t.getUTCMilliseconds(),e,3)}function $J(t,e){return nk(t,e)+"000"}function jJ(t,e){return Ze(t.getUTCMonth()+1,e,2)}function YJ(t,e){return Ze(t.getUTCMinutes(),e,2)}function KJ(t,e){return Ze(t.getUTCSeconds(),e,2)}function WJ(t){var e=t.getUTCDay();return e===0?7:e}function XJ(t,e){return Ze(nm.count(Ss(t)-1,t),e,2)}function ik(t){var e=t.getUTCDay();return e>=4||e===0?kl(t):kl.ceil(t)}function JJ(t,e){return t=ik(t),Ze(kl.count(Ss(t),t)+(Ss(t).getUTCDay()===4),e,2)}function QJ(t){return t.getUTCDay()}function ZJ(t,e){return Ze(ep.count(Ss(t)-1,t),e,2)}function eQ(t,e){return Ze(t.getUTCFullYear()%100,e,2)}function tQ(t,e){return t=ik(t),Ze(t.getUTCFullYear()%100,e,2)}function nQ(t,e){return Ze(t.getUTCFullYear()%1e4,e,4)}function iQ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?kl(t):kl.ceil(t),Ze(t.getUTCFullYear()%1e4,e,4)}function rQ(){return"+0000"}function IR(){return"%"}function DR(t){return+t}function OR(t){return Math.floor(+t/1e3)}var al,rk,sk;sQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sQ(t){return al=sJ(t),rk=al.format,al.parse,sk=al.utcFormat,al.utcParse,al}function aQ(t){return new Date(t)}function oQ(t){return t instanceof Date?+t:+new Date(+t)}function AS(t,e,n,i,r,s,a,l,c,d){var f=aS(),p=f.invert,g=f.domain,y=d(".%L"),S=d(":%S"),w=d("%I:%M"),E=d("%I %p"),x=d("%a %d"),C=d("%b %d"),T=d("%B"),N=d("%Y");function R(I){return(c(I)<I?y:l(I)<I?S:a(I)<I?w:s(I)<I?E:i(I)<I?r(I)<I?x:C:n(I)<I?T:N)(I)}return f.invert=function(I){return new Date(p(I))},f.domain=function(I){return arguments.length?g(Array.from(I,oQ)):g().map(aQ)},f.ticks=function(I){var O=g();return t(O[0],O[O.length-1],I??10)},f.tickFormat=function(I,O){return O==null?R:d(O)},f.nice=function(I){var O=g();return(!I||typeof I.range!="function")&&(I=e(O[0],O[O.length-1],I??10)),I?g($2(O,I)):f},f.copy=function(){return Qc(f,AS(t,e,n,i,r,s,a,l,c,d))},f}function lQ(){return Xi.apply(AS(iJ,rJ,As,yS,tm,Zc,gS,pS,Ka,rk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uQ(){return Xi.apply(AS(tJ,nJ,Ss,bS,nm,em,vS,mS,Ka,sk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function im(){var t=0,e=1,n,i,r,s,a=$n,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:a(r===0?.5:(p=(s(p)-n)*r,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(a=p,d):a};function f(p){return function(g){var y,S;return arguments.length?([y,S]=g,a=p(y,S),d):[a(0),a(1)]}}return d.range=f(zl),d.rangeRound=f(sS),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),d}}function ba(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ak(){var t=ya(im()($n));return t.copy=function(){return ba(t,ak())},Cs.apply(t,arguments)}function ok(){var t=uS(im()).domain([1,10]);return t.copy=function(){return ba(t,ok()).base(t.base())},Cs.apply(t,arguments)}function lk(){var t=cS(im());return t.copy=function(){return ba(t,lk()).constant(t.constant())},Cs.apply(t,arguments)}function SS(){var t=dS(im());return t.copy=function(){return ba(t,SS()).exponent(t.exponent())},Cs.apply(t,arguments)}function cQ(){return SS.apply(null,arguments).exponent(.5)}function uk(){var t=[],e=$n;function n(i){if(i!=null&&!isNaN(i=+i))return e((Xc(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(oa),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>W7(t,s/i))},n.copy=function(){return uk(e).domain(t)},Cs.apply(n,arguments)}function rm(){var t=0,e=.5,n=1,i=1,r,s,a,l,c,d=$n,f,p=!1,g;function y(w){return isNaN(w=+w)?g:(w=.5+((w=+f(w))-s)*(i*w<i*s?l:c),d(p?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([t,e,n]=w,r=f(t=+t),s=f(e=+e),a=f(n=+n),l=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,y):[t,e,n]},y.clamp=function(w){return arguments.length?(p=!!w,y):p},y.interpolator=function(w){return arguments.length?(d=w,y):d};function S(w){return function(E){var x,C,T;return arguments.length?([x,C,T]=E,d=wX(w,[x,C,T]),y):[d(0),d(.5),d(1)]}}return y.range=S(zl),y.rangeRound=S(sS),y.unknown=function(w){return arguments.length?(g=w,y):g},function(w){return f=w,r=w(t),s=w(e),a=w(n),l=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,y}}function ck(){var t=ya(rm()($n));return t.copy=function(){return ba(t,ck())},Cs.apply(t,arguments)}function dk(){var t=uS(rm()).domain([.1,1,10]);return t.copy=function(){return ba(t,dk()).base(t.base())},Cs.apply(t,arguments)}function fk(){var t=cS(rm());return t.copy=function(){return ba(t,fk()).constant(t.constant())},Cs.apply(t,arguments)}function wS(){var t=dS(rm());return t.copy=function(){return ba(t,wS()).exponent(t.exponent())},Cs.apply(t,arguments)}function dQ(){return wS.apply(null,arguments).exponent(.5)}const uc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nS,scaleDiverging:ck,scaleDivergingLog:dk,scaleDivergingPow:wS,scaleDivergingSqrt:dQ,scaleDivergingSymlog:fk,scaleIdentity:V2,scaleImplicit:zb,scaleLinear:q2,scaleLog:j2,scaleOrdinal:tS,scalePoint:Q7,scalePow:fS,scaleQuantile:W2,scaleQuantize:X2,scaleRadial:K2,scaleSequential:ak,scaleSequentialLog:ok,scaleSequentialPow:SS,scaleSequentialQuantile:uk,scaleSequentialSqrt:cQ,scaleSequentialSymlog:lk,scaleSqrt:$X,scaleSymlog:Y2,scaleThreshold:J2,scaleTime:lQ,scaleUtc:uQ,tickFormat:G2},Symbol.toStringTag,{value:"Module"}));var Aa=t=>t.chartData,fQ=Q([Aa],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),_S=(t,e,n,i)=>i?fQ(t):Aa(t);function ha(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ct(e)&&Ct(n))return!0}return!1}function kR(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function hk(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(Ct(n))r=n;else if(typeof n=="function")return;if(Ct(i))s=i;else if(typeof i=="function")return;var a=[r,s];if(ha(a))return a}}function hQ(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(ha(i))return kR(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,a,l;if(r==="auto")e!=null&&(a=Math.min(...e));else if(Ee(r))a=r;else if(typeof r=="function")try{e!=null&&(a=r(e?.[0]))}catch{}else if(typeof r=="string"&&KM.test(r)){var c=KM.exec(r);if(c==null||c[1]==null||e==null)a=void 0;else{var d=+c[1];a=e[0]-d}}else a=e?.[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Ee(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e?.[1]))}catch{}else if(typeof s=="string"&&WM.test(s)){var f=WM.exec(s);if(f==null||f[1]==null||e==null)l=void 0;else{var p=+f[1];l=e[1]+p}}else l=e?.[1];var g=[a,l];if(ha(g))return e==null?g:kR(g,e,n)}}}var Hl=1e9,pQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xS,Mt=!0,Wi="[DecimalError] ",to=Wi+"Invalid argument: ",ES=Wi+"Exponent out of range: ",Gl=Math.floor,Va=Math.pow,mQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wi,hn=1e7,At=7,pk=9007199254740991,tp=Gl(pk/At),ve={};ve.absoluteValue=ve.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ve.comparedTo=ve.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};ve.decimalPlaces=ve.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*At;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ve.dividedBy=ve.div=function(t){return ps(this,new this.constructor(t))};ve.dividedToIntegerBy=ve.idiv=function(t){var e=this,n=e.constructor;return gt(ps(e,new n(t),0,1),n.precision)};ve.equals=ve.eq=function(t){return!this.cmp(t)};ve.exponent=function(){return Wt(this)};ve.greaterThan=ve.gt=function(t){return this.cmp(t)>0};ve.greaterThanOrEqualTo=ve.gte=function(t){return this.cmp(t)>=0};ve.isInteger=ve.isint=function(){return this.e>this.d.length-2};ve.isNegative=ve.isneg=function(){return this.s<0};ve.isPositive=ve.ispos=function(){return this.s>0};ve.isZero=function(){return this.s===0};ve.lessThan=ve.lt=function(t){return this.cmp(t)<0};ve.lessThanOrEqualTo=ve.lte=function(t){return this.cmp(t)<1};ve.logarithm=ve.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(wi))throw Error(Wi+"NaN");if(n.s<1)throw Error(Wi+(n.s?"NaN":"-Infinity"));return n.eq(wi)?new i(0):(Mt=!1,e=ps(Pc(n,s),Pc(t,s),s),Mt=!0,gt(e,r))};ve.minus=ve.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vk(e,t):mk(e,(t.s=-t.s,t))};ve.modulo=ve.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Wi+"NaN");return n.s?(Mt=!1,e=ps(n,t,0,1).times(t),Mt=!0,n.minus(e)):gt(new i(n),r)};ve.naturalExponential=ve.exp=function(){return gk(this)};ve.naturalLogarithm=ve.ln=function(){return Pc(this)};ve.negated=ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ve.plus=ve.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?mk(e,t):vk(e,(t.s=-t.s,t))};ve.precision=ve.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(to+t);if(e=Wt(r)+1,i=r.d.length-1,n=i*At+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};ve.squareRoot=ve.sqrt=function(){var t,e,n,i,r,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wi+"NaN")}for(t=Wt(l),Mt=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Pr(l.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=Gl((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new c(e)):i=new c(r.toString()),n=c.precision,r=a=n+3;;)if(s=i,i=s.plus(ps(l,s,a+2)).times(.5),Pr(s.d).slice(0,a)===(e=Pr(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),r==a&&e=="4999"){if(gt(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(e!="9999")break;a+=4}return Mt=!0,gt(i,n)};ve.times=ve.mul=function(t){var e,n,i,r,s,a,l,c,d,f=this,p=f.constructor,g=f.d,y=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=y.length,c<d&&(s=g,g=y,y=s,a=c,c=d,d=a),s=[],a=c+d,i=a;i--;)s.push(0);for(i=d;--i>=0;){for(e=0,r=c+i;r>i;)l=s[r]+y[i]*g[r-i-1]+e,s[r--]=l%hn|0,e=l/hn|0;s[r]=(s[r]+e)%hn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Mt?gt(t,p.precision):t};ve.toDecimalPlaces=ve.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Ur(t,0,Hl),e===void 0?e=i.rounding:Ur(e,0,8),gt(n,t+Wt(n)+1,e))};ve.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=lo(i,!0):(Ur(t,0,Hl),e===void 0?e=r.rounding:Ur(e,0,8),i=gt(new r(i),t+1,e),n=lo(i,!0,t+1)),n};ve.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?lo(r):(Ur(t,0,Hl),e===void 0?e=s.rounding:Ur(e,0,8),i=gt(new s(r),t+Wt(r)+1,e),n=lo(i.abs(),!1,t+Wt(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};ve.toInteger=ve.toint=function(){var t=this,e=t.constructor;return gt(new e(t),Wt(t)+1,e.rounding)};ve.toNumber=function(){return+this};ve.toPower=ve.pow=function(t){var e,n,i,r,s,a,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(wi);if(l=new c(l),!l.s){if(t.s<1)throw Error(Wi+"Infinity");return l}if(l.eq(wi))return l;if(i=c.precision,t.eq(wi))return gt(l,i);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=f<0?-f:f)<=pk){for(r=new c(wi),e=Math.ceil(i/At+4),Mt=!1;n%2&&(r=r.times(l),UR(r.d,e)),n=Gl(n/2),n!==0;)l=l.times(l),UR(l.d,e);return Mt=!0,t.s<0?new c(wi).div(r):gt(r,i)}}else if(s<0)throw Error(Wi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Mt=!1,r=t.times(Pc(l,i+d)),Mt=!0,r=gk(r),r.s=s,r};ve.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=Wt(r),i=lo(r,n<=s.toExpNeg||n>=s.toExpPos)):(Ur(t,1,Hl),e===void 0?e=s.rounding:Ur(e,0,8),r=gt(new s(r),t,e),n=Wt(r),i=lo(r,t<=n||n<=s.toExpNeg,t)),i};ve.toSignificantDigits=ve.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Ur(t,1,Hl),e===void 0?e=i.rounding:Ur(e,0,8)),gt(new i(n),t,e)};ve.toString=ve.valueOf=ve.val=ve.toJSON=ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Wt(t),n=t.constructor;return lo(t,e<=n.toExpNeg||e>=n.toExpPos)};function mk(t,e){var n,i,r,s,a,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Mt?gt(e,p):e;if(c=t.d,d=e.d,a=t.e,r=e.e,c=c.slice(),s=a-r,s){for(s<0?(i=c,s=-s,l=d.length):(i=d,r=a,l=c.length),a=Math.ceil(p/At),l=a>l?a+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,i=d,d=c,c=i),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/hn|0,c[s]%=hn;for(n&&(c.unshift(n),++r),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=r,Mt?gt(e,p):e}function Ur(t,e,n){if(t!==~~t||t<e||t>n)throw Error(to+t)}function Pr(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=At-i.length,n&&(s+=ta(n)),s+=i;a=t[e],i=a+"",n=At-i.length,n&&(s+=ta(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var ps=(function(){function t(i,r){var s,a=0,l=i.length;for(i=i.slice();l--;)s=i[l]*r+a,i[l]=s%hn|0,a=s/hn|0;return a&&i.unshift(a),i}function e(i,r,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=r[l]){c=i[l]>r[l]?1:-1;break}return c}function n(i,r,s){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*hn+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a){var l,c,d,f,p,g,y,S,w,E,x,C,T,N,R,I,O,F,z=i.constructor,$=i.s==r.s?1:-1,G=i.d,X=r.d;if(!i.s)return new z(i);if(!r.s)throw Error(Wi+"Division by zero");for(c=i.e-r.e,O=X.length,R=G.length,y=new z($),S=y.d=[],d=0;X[d]==(G[d]||0);)++d;if(X[d]>(G[d]||0)&&--c,s==null?C=s=z.precision:a?C=s+(Wt(i)-Wt(r))+1:C=s,C<0)return new z(0);if(C=C/At+2|0,d=0,O==1)for(f=0,X=X[0],C++;(d<R||f)&&C--;d++)T=f*hn+(G[d]||0),S[d]=T/X|0,f=T%X|0;else{for(f=hn/(X[0]+1)|0,f>1&&(X=t(X,f),G=t(G,f),O=X.length,R=G.length),N=O,w=G.slice(0,O),E=w.length;E<O;)w[E++]=0;F=X.slice(),F.unshift(0),I=X[0],X[1]>=hn/2&&++I;do f=0,l=e(X,w,O,E),l<0?(x=w[0],O!=E&&(x=x*hn+(w[1]||0)),f=x/I|0,f>1?(f>=hn&&(f=hn-1),p=t(X,f),g=p.length,E=w.length,l=e(p,w,g,E),l==1&&(f--,n(p,O<g?F:X,g))):(f==0&&(l=f=1),p=X.slice()),g=p.length,g<E&&p.unshift(0),n(w,p,E),l==-1&&(E=w.length,l=e(X,w,O,E),l<1&&(f++,n(w,O<E?F:X,E))),E=w.length):l===0&&(f++,w=[0]),S[d++]=f,l&&w[0]?w[E++]=G[N]||0:(w=[G[N]],E=1);while((N++<R||w[0]!==void 0)&&C--)}return S[0]||S.shift(),y.e=c,gt(y,a?s+Wt(y)+1:s)}})();function gk(t,e){var n,i,r,s,a,l,c=0,d=0,f=t.constructor,p=f.precision;if(Wt(t)>16)throw Error(ES+Wt(t));if(!t.s)return new f(wi);for(Mt=!1,l=p,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(i=Math.log(Va(2,d))/Math.LN10*2+5|0,l+=i,n=r=s=new f(wi),f.precision=l;;){if(r=gt(r.times(t),l),n=n.times(++c),a=s.plus(ps(r,n,l)),Pr(a.d).slice(0,l)===Pr(s.d).slice(0,l)){for(;d--;)s=gt(s.times(s),l);return f.precision=p,e==null?(Mt=!0,gt(s,p)):s}s=a}}function Wt(t){for(var e=t.e*At,n=t.d[0];n>=10;n/=10)e++;return e}function p0(t,e,n){if(e>t.LN10.sd())throw Mt=!0,n&&(t.precision=n),Error(Wi+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function ta(t){for(var e="";t--;)e+="0";return e}function Pc(t,e){var n,i,r,s,a,l,c,d,f,p=1,g=10,y=t,S=y.d,w=y.constructor,E=w.precision;if(y.s<1)throw Error(Wi+(y.s?"NaN":"-Infinity"));if(y.eq(wi))return new w(0);if(e==null?(Mt=!1,d=E):d=e,y.eq(10))return e==null&&(Mt=!0),p0(w,d);if(d+=g,w.precision=d,n=Pr(S),i=n.charAt(0),s=Wt(y),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(t),n=Pr(y.d),i=n.charAt(0),p++;s=Wt(y),i>1?(y=new w("0."+n),s++):y=new w(i+"."+n.slice(1))}else return c=p0(w,d+2,E).times(s+""),y=Pc(new w(i+"."+n.slice(1)),d-g).plus(c),w.precision=E,e==null?(Mt=!0,gt(y,E)):y;for(l=a=y=ps(y.minus(wi),y.plus(wi),d),f=gt(y.times(y),d),r=3;;){if(a=gt(a.times(f),d),c=l.plus(ps(a,new w(r),d)),Pr(c.d).slice(0,d)===Pr(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(p0(w,d+2,E).times(s+""))),l=ps(l,new w(p),d),w.precision=E,e==null?(Mt=!0,gt(l,E)):l;l=c,r+=2}}function LR(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=Gl(n/At),t.d=[],i=(n+1)%At,n<0&&(i+=At),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=At;i<r;)t.d.push(+e.slice(i,i+=At));e=e.slice(i),i=At-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Mt&&(t.e>tp||t.e<-tp))throw Error(ES+n)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,n){var i,r,s,a,l,c,d,f,p=t.d;for(a=1,s=p[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=At,r=e,d=p[f=0];else{if(f=Math.ceil((i+1)/At),s=p.length,f>=s)return t;for(d=s=p[f],a=1;s>=10;s/=10)a++;i%=At,r=i-At+a}if(n!==void 0&&(s=Va(10,a-r-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(i>0?r>0?d/Va(10,a-r):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=Wt(t),p.length=1,e=e-s-1,p[0]=Va(10,(At-e%At)%At),t.e=Gl(-e/At)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=f,s=1,f--):(p.length=f+1,s=Va(10,At-i),p[f]=r>0?(d/Va(10,a-r)%Va(10,r)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==hn&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=hn)break;p[f--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(Mt&&(t.e>tp||t.e<-tp))throw Error(ES+Wt(t));return t}function vk(t,e){var n,i,r,s,a,l,c,d,f,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Mt?gt(e,y):e;if(c=t.d,p=e.d,i=e.e,d=t.e,c=c.slice(),a=d-i,a){for(f=a<0,f?(n=c,a=-a,l=p.length):(n=p,i=d,l=c.length),r=Math.max(Math.ceil(y/At),l)+2,a>r&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for(r=c.length,l=p.length,f=r<l,f&&(l=r),r=0;r<l;r++)if(c[r]!=p[r]){f=c[r]<p[r];break}a=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,r=p.length-l;r>0;--r)c[l++]=0;for(r=p.length;r>a;){if(c[--r]<p[r]){for(s=r;s&&c[--s]===0;)c[s]=hn-1;--c[s],c[r]+=hn}c[r]-=p[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,Mt?gt(e,y):e):new g(0)}function lo(t,e,n){var i,r=Wt(t),s=Pr(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+ta(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+ta(-r-1)+s,n&&(i=n-a)>0&&(s+=ta(i))):r>=a?(s+=ta(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+ta(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=ta(i))),t.s<0?"-"+s:s}function UR(t,e){if(t.length>e)return t.length=e,!0}function yk(t){var e,n,i;function r(s){var a=this;if(!(a instanceof r))return new r(s);if(a.constructor=r,s instanceof r){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(to+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return LR(a,s.toString())}else if(typeof s!="string")throw Error(to+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,mQ.test(s))LR(a,s);else throw Error(to+s)}if(r.prototype=ve,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=yk,r.config=r.set=gQ,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function gQ(t){if(!t||typeof t!="object")throw Error(Wi+"Object expected");var e,n,i,r=["precision",1,Hl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(Gl(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(to+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(to+n+": "+i);return this}var xS=yk(pQ);wi=new xS(1);const at=xS;var vQ=t=>t,bk={},Ak=t=>t===bk,BR=t=>function e(){return arguments.length===0||arguments.length===1&&Ak(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Sk=(t,e)=>t===1?e:BR(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=i.filter(a=>a!==bk).length;return s>=t?e(...i):Sk(t-s,BR(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var d=i.map(f=>Ak(f)?l.shift():f);return e(...d,...l)}))}),yQ=t=>Sk(t.length,t),Vb=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},bQ=yQ((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),AQ=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return vQ;var r=n.reverse(),s=r[0],a=r.slice(1);return function(){return a.reduce((l,c)=>c(l),s(...arguments))}};function wk(t){var e;return t===0?e=1:e=Math.floor(new at(t).abs().log(10).toNumber())+1,e}function _k(t,e,n){for(var i=new at(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}var Ek=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},xk=(t,e,n)=>{if(t.lte(0))return new at(0);var i=wk(t.toNumber()),r=new at(10).pow(i),s=t.div(r),a=i!==1?.05:.1,l=new at(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=l.mul(r);return e?new at(c.toNumber()):new at(Math.ceil(c.toNumber()))},SQ=(t,e,n)=>{var i=new at(1),r=new at(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new at(10).pow(wk(t)-1),r=new at(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new at(Math.floor(t)))}else t===0?r=new at(Math.floor((e-1)/2)):n||(r=new at(Math.floor(t)));var a=Math.floor((e-1)/2),l=AQ(bQ(c=>r.add(new at(c-a).mul(i)).toNumber()),Vb);return l(0,e)},Tk=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new at(0),tickMin:new at(0),tickMax:new at(0)};var a=xk(new at(n).sub(e).div(i-1),r,s),l;e<=0&&n>=0?l=new at(0):(l=new at(e).add(n).div(2),l=l.sub(new at(l).mod(a)));var c=Math.ceil(l.sub(e).div(a).toNumber()),d=Math.ceil(new at(n).sub(l).div(a).toNumber()),f=c+d+1;return f>i?Tk(e,n,i,r,s+1):(f<i&&(d=n>0?d+(i-f):d,c=n>0?c:c+(i-f)),{step:a,tickMin:l.sub(new at(c).mul(a)),tickMax:l.add(new at(d).mul(a))})},wQ=function(e){var[n,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[l,c]=Ek([n,i]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...Vb(0,r-1).map(()=>1/0)]:[...Vb(0,r-1).map(()=>-1/0),c];return n>i?d.reverse():d}if(l===c)return SQ(l,r,s);var{step:f,tickMin:p,tickMax:g}=Tk(l,c,a,s,0),y=_k(p,g.add(new at(.1).mul(f)),f);return n>i?y.reverse():y},_Q=function(e,n){var[i,r]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=Ek([i,r]);if(a===-1/0||l===1/0)return[i,r];if(a===l)return[a];var c=Math.max(n,2),d=xk(new at(l).sub(a).div(c-1),s,0),f=[..._k(new at(a),new at(l),d),l];return s===!1&&(f=f.map(p=>Math.round(p))),i>r?f.reverse():f},EQ=t=>t.rootProps.barCategoryGap,sm=t=>t.rootProps.stackOffset,Ck=t=>t.rootProps.reverseStackOrder,TS=t=>t.options.chartName,CS=t=>t.rootProps.syncId,Mk=t=>t.rootProps.syncMethod,MS=t=>t.options.eventEmitter,Cn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},cs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Si={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},am=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},xQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:cs.angleAxisId,includeHidden:!1,name:void 0,reversed:cs.reversed,scale:cs.scale,tick:cs.tick,tickCount:void 0,ticks:void 0,type:cs.type,unit:void 0},TQ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:Si.type,unit:void 0},CQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:cs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:cs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:cs.scale,tick:cs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},MQ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:"category",unit:void 0},PS=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?CQ:xQ,RS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?MQ:TQ,om=t=>t.polarOptions,NS=Q([xs,Ts,Rn],_7),Pk=Q([om,NS],(t,e)=>{if(t!=null)return fa(t.innerRadius,e,0)}),Rk=Q([om,NS],(t,e)=>{if(t!=null)return fa(t.outerRadius,e,e*.8)}),PQ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Nk=Q([om],PQ);Q([PS,Nk],am);var Ik=Q([NS,Pk,Rk],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Q([RS,Ik],am);var Dk=Q([St,om,Pk,Rk,xs,Ts],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:a,cy:l,startAngle:c,endAngle:d}=e;return{cx:fa(a,r,r/2),cy:fa(l,s,s/2),innerRadius:n,outerRadius:i,startAngle:c,endAngle:d,clockWise:!1}}}),nn=(t,e)=>e,lm=(t,e,n)=>n;function Ok(t){return t?.id}function kk(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:s}=n,a=new Map;return t.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:i;if(!(d==null||d.length===0)){var f=Ok(l);d.forEach((p,g)=>{var y=s==null||r?g:String(Mn(p,s,null)),S=Mn(p,l.dataKey,0),w;a.has(y)?w=a.get(y):w={},Object.assign(w,{[f]:S}),a.set(y,w)})}}),Array.from(a.values())}function IS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var um=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function cm(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function RQ(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var rn=t=>{var e=St(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ql=t=>t.tooltip.settings.axisId;function FR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(n),!0).forEach(function(i){NQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function NQ(t,e,n){return(e=IQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IQ(t){var e=DQ(t,"string");return typeof e=="symbol"?e:e+""}function DQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $b=[0,"auto"],dn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Lk=(t,e)=>t.cartesianAxis.xAxis[e],Fr=(t,e)=>{var n=Lk(t,e);return n??dn},fn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:$b,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:jc},Uk=(t,e)=>t.cartesianAxis.yAxis[e],zr=(t,e)=>{var n=Uk(t,e);return n??fn},OQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DS=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??OQ},Wn=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);case"zAxis":return DS(t,n);case"angleAxis":return PS(t,n);case"radiusAxis":return RS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},kQ=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ed=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);case"angleAxis":return PS(t,n);case"radiusAxis":return RS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Bk=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Fk(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var zk=t=>t.graphicalItems.cartesianItems,LQ=Q([nn,lm],Fk),Hk=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),td=Q([zk,Wn,LQ],Hk,{memoizeOptions:{resultEqualityCheck:cm}}),Gk=Q([td],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(IS)),qk=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),UQ=Q([td],qk),Vk=t=>t.map(e=>e.data).filter(Boolean).flat(1),BQ=Q([td],Vk,{memoizeOptions:{resultEqualityCheck:cm}}),$k=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},OS=Q([BQ,_S],$k),jk=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:Mn(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:Mn(r,i)}))):t.map(i=>({value:i})),dm=Q([OS,Wn,td],jk);function Yk(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ch(t){if(kn(t)||t instanceof Date){var e=Number(t);if(Ct(e))return e}}function zR(t){if(Array.isArray(t)){var e=[ch(t[0]),ch(t[1])];return ha(e)?e:void 0}var n=ch(t);if(n!=null)return[n,n]}function ws(t){return t.map(ch).filter(X8)}function FQ(t,e,n){return!n||typeof e!="number"||Yi(e)?[]:n.length?ws(n.flatMap(i=>{var r=Mn(t,i.dataKey),s,a;if(Array.isArray(r)?[s,a]=r:s=a=r,!(!Ct(s)||!Ct(a)))return[e-s,e+a]})):[]}var sn=t=>{var e=rn(t),n=ql(t);return ed(t,e,n)},nd=Q([sn],t=>t?.dataKey),zQ=Q([Gk,_S,sn],kk),Kk=(t,e,n,i)=>{var r={},s=e.reduce((a,l)=>{if(l.stackId==null)return a;var c=a[l.stackId];return c==null&&(c=[]),c.push(l),a[l.stackId]=c,a},r);return Object.fromEntries(Object.entries(s).map(a=>{var[l,c]=a,d=i?[...c].reverse():c,f=d.map(Ok);return[l,{stackedData:mW(t,f,n),graphicalItems:d}]}))},HQ=Q([zQ,Gk,sm,Ck],Kk),Wk=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(i==null&&n!=="zAxis"){var a=yW(t,r,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},GQ=Q([Wn],t=>t.allowDataOverflow),kS=t=>{var e;if(t==null||!("domain"in t))return $b;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=ws(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:$b},Xk=Q([Wn],kS),Jk=Q([Xk,GQ],hk),qQ=Q([HQ,Aa,nn,Jk],Wk,{memoizeOptions:{resultEqualityCheck:um}}),LS=t=>t.errorBars,VQ=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>Yk(n,i)),ip=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},Qk=(t,e,n,i,r)=>{var s,a;if(n.length>0&&t.forEach(l=>{n.forEach(c=>{var d,f,p=(d=i[c.id])===null||d===void 0?void 0:d.filter(x=>Yk(r,x)),g=Mn(l,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),y=FQ(l,g,p);if(y.length>=2){var S=Math.min(...y),w=Math.max(...y);(s==null||S<s)&&(s=S),(a==null||w>a)&&(a=w)}var E=zR(g);E!=null&&(s=s==null?E[0]:Math.min(s,E[0]),a=a==null?E[1]:Math.max(a,E[1]))})}),e?.dataKey!=null&&t.forEach(l=>{var c=zR(Mn(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),a=a==null?c[1]:Math.max(a,c[1]))}),Ct(s)&&Ct(a))return[s,a]},$Q=Q([OS,Wn,UQ,LS,nn],Qk,{memoizeOptions:{resultEqualityCheck:um}});function jQ(t){var{value:e}=t;if(kn(e)||e instanceof Date)return e}var YQ=(t,e,n)=>{var i=t.map(jQ).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&cO(i))?I2(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},Zk=t=>t.referenceElements.dots,Vl=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),KQ=Q([Zk,nn,lm],Vl),eL=t=>t.referenceElements.areas,WQ=Q([eL,nn,lm],Vl),tL=t=>t.referenceElements.lines,XQ=Q([tL,nn,lm],Vl),nL=(t,e)=>{if(t!=null){var n=ws(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},JQ=Q(KQ,nn,nL),iL=(t,e)=>{if(t!=null){var n=ws(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},QQ=Q([WQ,nn],iL);function ZQ(t){var e;if(t.x!=null)return ws([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:ws(n)}function eZ(t){var e;if(t.y!=null)return ws([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:ws(n)}var rL=(t,e)=>{if(t!=null){var n=t.flatMap(i=>e==="xAxis"?ZQ(i):eZ(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},tZ=Q([XQ,nn],rL),nZ=Q(JQ,tZ,QQ,(t,e,n)=>ip(t,n,e)),sL=(t,e,n,i,r,s,a,l)=>{if(n!=null)return n;var c=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",d=c?ip(i,s,r):ip(s,r);return hQ(e,d,t.allowDataOverflow)},iZ=Q([Wn,Xk,Jk,qQ,$Q,nZ,St,nn],sL,{memoizeOptions:{resultEqualityCheck:um}}),rZ=[0,1],aL=(t,e,n,i,r,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:l,type:c}=t,d=va(e,s);if(d&&l==null){var f;return I2(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?YQ(i,t,d):r==="expand"?rZ:a}},US=Q([Wn,St,OS,dm,sm,nn,iZ],aL),oL=(t,e,n,i,r)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Gc(s));return l in uc?l:"point"}}},id=Q([Wn,St,Bk,TS,nn],oL);function sZ(t){if(t!=null){if(t in uc)return uc[t]();var e="scale".concat(Gc(t));if(e in uc)return uc[e]()}}function BS(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=sZ(e);if(r!=null){var s=r.domain(n).range(i);return dW(s),s}}}var lL=(t,e,n)=>{var i=kS(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&ha(t))return wQ(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ha(t))return _Q(t,e.tickCount,e.allowDecimals)}},FS=Q([US,ed,id],lL),uL=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&ha(e)&&Array.isArray(n)&&n.length>0){var r=e[0],s=n[0],a=e[1],l=n[n.length-1];return[Math.min(r,s),Math.max(a,l)]}return e},aZ=Q([Wn,US,FS,nn],uL),oZ=Q(dm,Wn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(ws(t.map(p=>p.value))).sort((p,g)=>p-g),r=i[0],s=i[i.length-1];if(r==null||s==null)return 1/0;var a=s-r;if(a===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],d=i[l+1];if(!(c==null||d==null)){var f=d-c;n=Math.min(n,f)}}return n/a}}),cL=Q(oZ,St,EQ,Rn,(t,e,n,i,r)=>r,(t,e,n,i,r)=>{if(!Ct(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var a=fa(n,t*s),l=t*s/2;return l-a-(l-a)/s*a}return 0}),lZ=(t,e,n)=>{var i=Fr(t,e);return i==null||typeof i.padding!="string"?0:cL(t,"xAxis",e,n,i.padding)},uZ=(t,e,n)=>{var i=zr(t,e);return i==null||typeof i.padding!="string"?0:cL(t,"yAxis",e,n,i.padding)},cZ=Q(Fr,lZ,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),dZ=Q(zr,uZ,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),fZ=Q([Rn,cZ,Yp,jp,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),hZ=Q([Rn,St,dZ,Yp,jp,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:a}=r;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),rd=(t,e,n,i)=>{var r;switch(e){case"xAxis":return fZ(t,n,i);case"yAxis":return hZ(t,n,i);case"zAxis":return(r=DS(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return Nk(t);case"radiusAxis":return Ik(t,n);default:return}},dL=Q([Wn,rd],am),pa=Q([Wn,id,aZ,dL],BS);Q([td,LS,nn],VQ);function fL(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var fm=(t,e)=>e,hm=(t,e,n)=>n,pZ=Q(Vp,fm,hm,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(fL)),mZ=Q($p,fm,hm,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(fL)),hL=(t,e)=>({width:t.width,height:e.height}),gZ=(t,e)=>{var n=typeof e.width=="number"?e.width:jc;return{width:n,height:t.height}},vZ=Q(Rn,Fr,hL),yZ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},bZ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},AZ=Q(Ts,Rn,pZ,fm,hm,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var c=hL(e,l);a==null&&(a=yZ(e,i,t));var d=i==="top"&&!r||i==="bottom"&&r;s[l.id]=a-Number(d)*c.height,a+=(d?-1:1)*c.height}),s}),SZ=Q(xs,Rn,mZ,fm,hm,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var c=gZ(e,l);a==null&&(a=bZ(e,i,t));var d=i==="left"&&!r||i==="right"&&r;s[l.id]=a-Number(d)*c.width,a+=(d?-1:1)*c.width}),s}),wZ=(t,e)=>{var n=Fr(t,e);if(n!=null)return AZ(t,n.orientation,n.mirror)},_Z=Q([Rn,Fr,wZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),EZ=(t,e)=>{var n=zr(t,e);if(n!=null)return SZ(t,n.orientation,n.mirror)},xZ=Q([Rn,zr,EZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),TZ=Q(Rn,zr,(t,e)=>{var n=typeof e.width=="number"?e.width:jc;return{width:n,height:t.height}}),pL=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:a}=n,l=va(t,i),c=e.map(d=>d.value);if(a&&l&&s==="category"&&r&&cO(c))return c}},zS=Q([St,dm,Wn,nn],pL),mL=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,a=va(t,i);if(a&&(r==="number"||s!=="auto"))return e.map(l=>l.value)}},HS=Q([St,dm,ed,nn],mL),HR=Q([St,kQ,id,pa,zS,HS,rd,FS,nn],(t,e,n,i,r,s,a,l,c)=>{if(e!=null){var d=va(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:r,isCategorical:d,niceTicks:l,range:a,realScaleType:n,scale:i}}}),CZ=(t,e,n,i,r,s,a,l,c)=>{if(!(e==null||i==null)){var d=va(t,c),{type:f,ticks:p,tickCount:g}=e,y=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,S=f==="category"&&i.bandwidth?i.bandwidth()/y:0;S=c==="angleAxis"&&s!=null&&s.length>=2?Gi(s[0]-s[1])*2*S:S;var w=p||r;if(w){var E=w.map((x,C)=>{var T=a?a.indexOf(x):x;return{index:C,coordinate:i(T)+S,value:x,offset:S}});return E.filter(x=>Ct(x.coordinate))}return d&&l?l.map((x,C)=>({coordinate:i(x)+S,value:x,index:C,offset:S})).filter(x=>Ct(x.coordinate)):i.ticks?i.ticks(g).map(x=>({coordinate:i(x)+S,value:x,offset:S})):i.domain().map((x,C)=>({coordinate:i(x)+S,value:a?a[x]:x,index:C,offset:S}))}},gL=Q([St,ed,id,pa,FS,rd,zS,HS,nn],CZ),MZ=(t,e,n,i,r,s,a)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var l=va(t,a),{tickCount:c}=e,d=0;return d=a==="angleAxis"&&i?.length>=2?Gi(i[0]-i[1])*2*d:d,l&&s?s.map((f,p)=>({coordinate:n(f)+d,value:f,index:p,offset:d})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+d,value:f,offset:d})):n.domain().map((f,p)=>({coordinate:n(f)+d,value:r?r[f]:f,index:p,offset:d}))}},vL=Q([St,ed,pa,rd,zS,HS,nn],MZ),yL=Q(Wn,pa,(t,e)=>{if(!(t==null||e==null))return np(np({},t),{},{scale:e})}),PZ=Q([Wn,id,US,dL],BS);Q((t,e,n)=>DS(t,n),PZ,(t,e)=>{if(!(t==null||e==null))return np(np({},t),{},{scale:e})});var RZ=Q([St,Vp,$p],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bL=t=>t.options.defaultTooltipEventType,AL=t=>t.options.validateTooltipEventTypes;function SL(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function GS(t,e){var n=bL(t),i=AL(t);return SL(e,n,i)}function NZ(t){return _e(e=>GS(e,t))}var wL=(t,e)=>{var n,i=Number(e);if(!(Yi(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},IZ=t=>t.tooltip.settings,ra={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},DZ={itemInteraction:{click:ra,hover:ra},axisInteraction:{click:ra,hover:ra},keyboardInteraction:ra,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_L=ui({name:"tooltip",initialState:DZ,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Tt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:i}=e.payload,r=lr(t).tooltipItemPayloads.indexOf(n);r>-1&&(t.tooltipItemPayloads[r]=i)},prepare:Tt()},removeTooltipEntrySettings:{reducer(t,e){var n=lr(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Tt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:OZ,replaceTooltipEntrySettings:kZ,removeTooltipEntrySettings:LZ,setTooltipSettingsState:UZ,setActiveMouseOverItemIndex:BZ,mouseLeaveItem:Joe,mouseLeaveChart:EL,setActiveClickItemIndex:Qoe,setMouseOverAxisIndex:xL,setMouseClickAxisIndex:FZ,setSyncInteraction:jb,setKeyboardInteraction:Yb}=_L.actions,zZ=_L.reducer;function GR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GR(Object(n),!0).forEach(function(i){HZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function HZ(t,e,n){return(e=GZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GZ(t){var e=qZ(t,"string");return typeof e=="symbol"?e:e+""}function qZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VZ(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $Z(t){return t.index!=null}var TL=(t,e,n,i)=>{if(e==null)return ra;var r=VZ(t,e,n);if(r==null)return ra;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if($Z(r)){if(s)return Jf(Jf({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return Jf(Jf({},ra),{},{coordinate:r.coordinate})};function jZ(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function YZ(t,e){var n=jZ(t),i=e[0],r=e[1];if(n===void 0)return!1;var s=Math.min(i,r),a=Math.max(i,r);return n>=s&&n<=a}function KZ(t,e,n){if(n==null||e==null)return!0;var i=Mn(t,e);return i==null||!ha(n)?!0:YZ(i,n)}var qS=(t,e,n,i)=>{var r=t?.index;if(r==null)return null;var s=Number(r);if(!Ct(s))return r;var a=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(a,Math.min(s,l)),d=e[c];return d==null||KZ(d,n,i)?String(c):null},CL=(t,e,n,i,r,s,a,l)=>{if(!(s==null||l==null)){var c=a[0],d=c==null?void 0:l(c.positions,s);if(d!=null)return d;var f=r?.[Number(s)];if(f)return n==="horizontal"?{x:f.coordinate,y:(i.top+e)/2}:{x:(i.left+t)/2,y:f.coordinate}}},ML=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=t.itemInteraction.hover.graphicalItemId:r=t.itemInteraction.click.graphicalItemId,r==null&&i!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},sd=t=>t.options.tooltipPayloadSearcher,$l=t=>t.tooltip;function qR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function VR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(n),!0).forEach(function(i){WZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function WZ(t,e,n){return(e=XZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XZ(t){var e=JZ(t,"string");return typeof e=="symbol"?e:e+""}function JZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QZ(t,e){return t??e}var PL=(t,e,n,i,r,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:f}=n,p=[];return t.reduce((g,y)=>{var S,{dataDefinedOnItem:w,settings:E}=y,x=QZ(w,l),C=Array.isArray(x)?i2(x,d,f):x,T=(S=E?.dataKey)!==null&&S!==void 0?S:i,N=E?.nameKey,R;if(i&&Array.isArray(C)&&!Array.isArray(C[0])&&a==="axis"?R=dO(C,i,r):R=s(C,e,c,N),Array.isArray(R))R.forEach(O=>{var F=VR(VR({},E),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});g.push(XM({tooltipEntrySettings:F,dataKey:O.dataKey,payload:O.payload,value:Mn(O.payload,O.dataKey),name:O.name}))});else{var I;g.push(XM({tooltipEntrySettings:E,dataKey:T,payload:R,value:Mn(R,T),name:(I=Mn(R,N))!==null&&I!==void 0?I:E?.name}))}return g},p)}},VS=Q([sn,St,Bk,TS,rn],oL),ZZ=Q([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),eee=Q([rn,ql],Fk),jl=Q([ZZ,sn,eee],Hk,{memoizeOptions:{resultEqualityCheck:cm}}),tee=Q([jl],t=>t.filter(IS)),nee=Q([jl],Vk,{memoizeOptions:{resultEqualityCheck:cm}}),Yl=Q([nee,Aa],$k),iee=Q([tee,Aa,sn],kk),$S=Q([Yl,sn,jl],jk),RL=Q([sn],kS),ree=Q([sn],t=>t.allowDataOverflow),NL=Q([RL,ree],hk),see=Q([jl],t=>t.filter(IS)),aee=Q([iee,see,sm,Ck],Kk),oee=Q([aee,Aa,rn,NL],Wk),lee=Q([jl],qk),uee=Q([Yl,sn,lee,LS,rn],Qk,{memoizeOptions:{resultEqualityCheck:um}}),cee=Q([Zk,rn,ql],Vl),dee=Q([cee,rn],nL),fee=Q([eL,rn,ql],Vl),hee=Q([fee,rn],iL),pee=Q([tL,rn,ql],Vl),mee=Q([pee,rn],rL),gee=Q([dee,mee,hee],ip),vee=Q([sn,RL,NL,oee,uee,gee,St,rn],sL),ad=Q([sn,St,Yl,$S,sm,rn,vee],aL),yee=Q([ad,sn,VS],lL),bee=Q([sn,ad,yee,rn],uL),IL=t=>{var e=rn(t),n=ql(t),i=!1;return rd(t,e,n,i)},DL=Q([sn,IL],am),OL=Q([sn,VS,bee,DL],BS),Aee=Q([St,$S,sn,rn],pL),See=Q([St,$S,sn,rn],mL),wee=(t,e,n,i,r,s,a,l)=>{if(e){var{type:c}=e,d=va(t,l);if(i){var f=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=c==="category"&&i.bandwidth?i.bandwidth()/f:0;return p=l==="angleAxis"&&r!=null&&r?.length>=2?Gi(r[0]-r[1])*2*p:p,d&&a?a.map((g,y)=>({coordinate:i(g)+p,value:g,index:y,offset:p})):i.domain().map((g,y)=>({coordinate:i(g)+p,value:s?s[g]:g,index:y,offset:p}))}}},Ms=Q([St,sn,VS,OL,IL,Aee,See,rn],wee),jS=Q([bL,AL,IZ],(t,e,n)=>SL(n.shared,t,e)),kL=t=>t.tooltip.settings.trigger,YS=t=>t.tooltip.settings.defaultIndex,od=Q([$l,jS,kL,YS],TL),Rc=Q([od,Yl,nd,ad],qS),LL=Q([Ms,Rc],wL),_ee=Q([od],t=>{if(t)return t.dataKey});Q([od],t=>{if(t)return t.graphicalItemId});var UL=Q([$l,jS,kL,YS],ML),Eee=Q([xs,Ts,St,Rn,Ms,YS,UL,sd],CL),xee=Q([od,Eee],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Tee=Q([od],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),Cee=Q([UL,Rc,Aa,nd,LL,sd,jS],PL),Mee=Q([Cee],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function $R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function jR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$R(Object(n),!0).forEach(function(i){Pee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pee(t,e,n){return(e=Ree(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ree(t){var e=Nee(t,"string");return typeof e=="symbol"?e:e+""}function Nee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iee=()=>_e(sn),Dee=()=>{var t=Iee(),e=_e(Ms),n=_e(OL);return Lh(!t||!n?void 0:jR(jR({},t),{},{scale:n}),e)};function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ol(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(i){Oee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Oee(t,e,n){return(e=kee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kee(t){var e=Lee(t,"string");return typeof e=="symbol"?e:e+""}function Lee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uee=(t,e,n,i)=>{var r=e.find(s=>s&&s.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},Bee=(t,e,n,i)=>{var r=e.find(d=>d&&d.index===n);if(r){if(t==="centric"){var s=r.coordinate,{radius:a}=i;return ol(ol(ol({},i),Tn(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=r.coordinate,{angle:c}=i;return ol(ol(ol({},i),Tn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Fee(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var BL=(t,e,n,i,r)=>{var s,a=(s=e?.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<a;l++){var c,d,f,p,g,y=l>0?(c=n[l-1])===null||c===void 0?void 0:c.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,S=(f=n[l])===null||f===void 0?void 0:f.coordinate,w=l>=a-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(g=n[l+1])===null||g===void 0?void 0:g.coordinate,E=void 0;if(!(y==null||S==null||w==null))if(Gi(S-y)!==Gi(w-S)){var x=[];if(Gi(w-S)===Gi(r[1]-r[0])){E=w;var C=S+r[1]-r[0];x[0]=Math.min(C,(C+y)/2),x[1]=Math.max(C,(C+y)/2)}else{E=y;var T=w+r[1]-r[0];x[0]=Math.min(S,(T+S)/2),x[1]=Math.max(S,(T+S)/2)}var N=[Math.min(S,(E+S)/2),Math.max(S,(E+S)/2)];if(t>N[0]&&t<=N[1]||t>=x[0]&&t<=x[1]){var R;return(R=n[l])===null||R===void 0?void 0:R.index}}else{var I=Math.min(y,w),O=Math.max(y,w);if(t>(I+S)/2&&t<=(O+S)/2){var F;return(F=n[l])===null||F===void 0?void 0:F.index}}}else if(e)for(var z=0;z<a;z++){var $=e[z];if($!=null){var G=e[z+1],X=e[z-1];if(z===0&&G!=null&&t<=($.coordinate+G.coordinate)/2||z===a-1&&X!=null&&t>($.coordinate+X.coordinate)/2||z>0&&z<a-1&&X!=null&&G!=null&&t>($.coordinate+X.coordinate)/2&&t<=($.coordinate+G.coordinate)/2)return $.index}}return-1},zee=()=>_e(TS),KS=(t,e)=>e,FL=(t,e,n)=>n,WS=(t,e,n,i)=>i,Hee=Q(Ms,t=>Op(t,e=>e.coordinate)),XS=Q([$l,KS,FL,WS],TL),JS=Q([XS,Yl,nd,ad],qS),Gee=(t,e,n)=>{if(e!=null){var i=$l(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},zL=Q([$l,KS,FL,WS],ML),rp=Q([xs,Ts,St,Rn,Ms,WS,zL,sd],CL),qee=Q([XS,rp],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),HL=Q([Ms,JS],wL),Vee=Q([zL,JS,Aa,nd,HL,sd,KS],PL),$ee=Q([XS,JS],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),jee=(t,e,n,i,r,s,a)=>{if(!(!t||!n||!i||!r)&&Fee(t,a)){var l=bW(t,e),c=BL(l,s,r,n,i),d=Uee(e,r,c,t);return{activeIndex:String(c),activeCoordinate:d}}},Yee=(t,e,n,i,r,s,a)=>{if(!(!t||!i||!r||!s||!n)){var l=M7(t,n);if(l){var c=AW(l,e),d=BL(c,a,s,i,r),f=Bee(e,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}},Kee=(t,e,n,i,r,s,a,l)=>{if(!(!t||!e||!i||!r||!s))return e==="horizontal"||e==="vertical"?jee(t,e,i,r,s,a,l):Yee(t,e,n,i,r,s,a)},Wee=Q(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElement:i.element}}),Xee=Q(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Cn)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:RQ}});function KR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function WR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(n),!0).forEach(function(i){Jee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Jee(t,e,n){return(e=Qee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qee(t){var e=Zee(t,"string");return typeof e=="symbol"?e:e+""}function Zee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ete={},tte={zIndexMap:Object.values(Cn).reduce((t,e)=>WR(WR({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),ete)},nte=new Set(Object.values(Cn));function ite(t){return nte.has(t)}var GL=ui({name:"zIndex",initialState:tte,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!ite(n)&&delete t.zIndexMap[n])},prepare:Tt()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElement=i:t.zIndexMap[n].element=i:t.zIndexMap[n]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:Tt()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Tt()}}}),{registerZIndexPortal:rte,unregisterZIndexPortal:ste,registerZIndexPortalElement:ate,unregisterZIndexPortalElement:ote}=GL.actions,lte=GL.reducer;function fr(t){var{zIndex:e,children:n}=t,i=ZW(),r=i&&e!==void 0&&e!==0,s=Un(),a=Xt();P.useLayoutEffect(()=>r?(a(rte({zIndex:e})),()=>{a(ste({zIndex:e}))}):qc,[a,e,r]);var l=_e(c=>Wee(c,e,s));return r?l?jD.createPortal(n,l):null:n}function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kb.apply(null,arguments)}function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(i){ute(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ute(t,e,n){return(e=cte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cte(t){var e=dte(t,"string");return typeof e=="symbol"?e:e+""}function dte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fte(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return P.isValidElement(e)?P.cloneElement(e,i):P.createElement(n,i)}function hte(t){var e,{coordinate:n,payload:i,index:r,offset:s,tooltipAxisBandSize:a,layout:l,cursor:c,tooltipEventType:d,chartName:f}=t,p=n,g=i,y=r;if(!c||!p||f!=="ScatterChart"&&d!=="axis")return null;var S,w,E;if(f==="ScatterChart")S=p,w=H9,E=Cn.cursorLine;else if(f==="BarChart")S=G9(l,p,s,a),w=ZA,E=Cn.cursorRectangle;else if(l==="radial"&&pO(p)){var{cx:x,cy:C,radius:T,startAngle:N,endAngle:R}=P2(p);S={cx:x,cy:C,startAngle:N,endAngle:R,innerRadius:T,outerRadius:T},w=N2,E=Cn.cursorLine}else S={points:I7(l,p,s)},w=E2,E=Cn.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,O=Qf(Qf(Qf(Qf({stroke:"#ccc",pointerEvents:"none"},s),S),Pp(c)),{},{payload:g,payloadIndex:y,className:ot("recharts-tooltip-cursor",I)});return P.createElement(fr,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},P.createElement(fte,{cursor:c,cursorComp:w,cursorProps:O}))}function pte(t){var e=Dee(),n=h2(),i=Kc(),r=zee();return e==null||n==null||i==null||r==null?null:P.createElement(hte,Kb({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var qL=P.createContext(null),mte=()=>P.useContext(qL),m0={exports:{}},JR;function gte(){return JR||(JR=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new r(f,p||c,g),S=n?n+d:d;return c._events[S]?c._events[S].fn?c._events[S]=[c._events[S],y]:c._events[S].push(y):(c._events[S]=y,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,S=new Array(y);g<y;g++)S[g]=p[g].fn;return S},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,y,S){var w=n?n+d:d;if(!this._events[w])return!1;var E=this._events[w],x=arguments.length,C,T;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),x){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,f),!0;case 3:return E.fn.call(E.context,f,p),!0;case 4:return E.fn.call(E.context,f,p,g),!0;case 5:return E.fn.call(E.context,f,p,g,y),!0;case 6:return E.fn.call(E.context,f,p,g,y,S),!0}for(T=1,C=new Array(x-1);T<x;T++)C[T-1]=arguments[T];E.fn.apply(E.context,C)}else{var N=E.length,R;for(T=0;T<N;T++)switch(E[T].once&&this.removeListener(d,E[T].fn,void 0,!0),x){case 1:E[T].fn.call(E[T].context);break;case 2:E[T].fn.call(E[T].context,f);break;case 3:E[T].fn.call(E[T].context,f,p);break;case 4:E[T].fn.call(E[T].context,f,p,g);break;default:if(!C)for(R=1,C=new Array(x-1);R<x;R++)C[R-1]=arguments[R];E[T].fn.apply(E[T].context,C)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var y=n?n+d:d;if(!this._events[y])return this;if(!f)return a(this,y),this;var S=this._events[y];if(S.fn)S.fn===f&&(!g||S.once)&&(!p||S.context===p)&&a(this,y);else{for(var w=0,E=[],x=S.length;w<x;w++)(S[w].fn!==f||g&&!S[w].once||p&&S[w].context!==p)&&E.push(S[w]);E.length?this._events[y]=E.length===1?E[0]:E:a(this,y)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(m0)),m0.exports}var vte=gte();const yte=Br(vte);var Nc=new yte,Wb="recharts.syncEvent.tooltip",QR="recharts.syncEvent.brush";function bte(t,e){if(e){var n=Number.parseInt(e,10);if(!Yi(n))return t?.[n]}}var Ate={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},VL=ui({name:"options",initialState:Ate,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ste=VL.reducer,{createEventEmitter:wte}=VL.actions;function _te(t){return t.tooltip.syncInteraction}var Ete={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},$L=ui({name:"chartData",initialState:Ete,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:ZR,setDataStartEndIndexes:xte,setComputedData:Zoe}=$L.actions,Tte=$L.reducer,Cte=["x","y"];function eN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eN(Object(n),!0).forEach(function(i){Mte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mte(t,e,n){return(e=Pte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pte(t){var e=Rte(t,"string");return typeof e=="symbol"?e:e+""}function Rte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nte(t,e){if(t==null)return{};var n,i,r=Ite(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ite(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Dte(){var t=_e(CS),e=_e(MS),n=Xt(),i=_e(Mk),r=_e(Ms),s=Kc(),a=Yc(),l=_e(c=>c.rootProps.className);P.useEffect(()=>{if(t==null)return qc;var c=(d,f,p)=>{if(e!==p&&t===d){if(i==="index"){var g;if(a&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var y=f.payload.coordinate,{x:S,y:w}=y,E=Nte(y,Cte),{x,y:C,width:T,height:N}=f.payload.sourceViewBox,R=ll(ll({},E),{},{x:a.x+(T?(S-x)/T:0)*a.width,y:a.y+(N?(w-C)/N:0)*a.height});n(ll(ll({},f),{},{payload:ll(ll({},f.payload),{},{coordinate:R})}))}else n(f);return}if(r!=null){var I;if(typeof i=="function"){var O={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},F=i(r,O);I=r[F]}else i==="value"&&(I=r.find(B=>String(B.value)===f.payload.label));var{coordinate:z}=f.payload;if(I==null||f.payload.active===!1||z==null||a==null){n(jb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:G}=z,X=Math.min($,a.x+a.width),le=Math.min(G,a.y+a.height),oe={x:s==="horizontal"?I.coordinate:X,y:s==="horizontal"?le:I.coordinate},pe=jb({active:f.payload.active,coordinate:oe,dataKey:f.payload.dataKey,index:String(I.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(pe)}}};return Nc.on(Wb,c),()=>{Nc.off(Wb,c)}},[l,n,e,t,i,r,s,a])}function Ote(){var t=_e(CS),e=_e(MS),n=Xt();P.useEffect(()=>{if(t==null)return qc;var i=(r,s,a)=>{e!==a&&t===r&&n(xte(s))};return Nc.on(QR,i),()=>{Nc.off(QR,i)}},[n,e,t])}function kte(){var t=Xt();P.useEffect(()=>{t(wte())},[t]),Dte(),Ote()}function Lte(t,e,n,i,r,s){var a=_e(y=>Gee(y,t,e)),l=_e(MS),c=_e(CS),d=_e(Mk),f=_e(_te),p=f?.active,g=Yc();P.useEffect(()=>{if(!p&&c!=null&&l!=null){var y=jb({active:s,coordinate:n,dataKey:a,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:g,graphicalItemId:void 0});Nc.emit(Wb,c,y,l)}},[p,n,a,r,i,l,c,d,s,g])}function tN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tN(Object(n),!0).forEach(function(i){Ute(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ute(t,e,n){return(e=Bte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bte(t){var e=Fte(t,"string");return typeof e=="symbol"?e:e+""}function Fte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zte(t){return t.dataKey}function Hte(t,e){return P.isValidElement(t)?P.cloneElement(t,e):typeof t=="function"?P.createElement(t,e):P.createElement(A9,e)}var iN=[],Gte={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function qte(t){var e,n,i=Ln(t,Gte),{active:r,allowEscapeViewBox:s,animationDuration:a,animationEasing:l,content:c,filterNull:d,isAnimationActive:f,offset:p,payloadUniqBy:g,position:y,reverseDirection:S,useTranslate3d:w,wrapperStyle:E,cursor:x,shared:C,trigger:T,defaultIndex:N,portal:R,axisId:I}=i,O=Xt(),F=typeof N=="number"?String(N):N;P.useEffect(()=>{O(UZ({shared:C,trigger:T,axisId:I,active:r,defaultIndex:F}))},[O,C,T,I,r,F]);var z=Yc(),$=_2(),G=NZ(C),{activeIndex:X,isActive:le}=(e=_e(me=>$ee(me,G,T,F)))!==null&&e!==void 0?e:{},oe=_e(me=>Vee(me,G,T,F)),pe=_e(me=>HL(me,G,T,F)),B=_e(me=>qee(me,G,T,F)),V=oe,re=mte(),ue=(n=r??le)!==null&&n!==void 0?n:!1,[Me,L]=aK([V,ue]),K=G==="axis"?pe:void 0;Lte(G,T,B,K,X,ue);var ie=R??re;if(ie==null||z==null||G==null)return null;var ce=V??iN;ue||(ce=iN),d&&ce.length&&(ce=IY(ce.filter(me=>me.value!=null&&(me.hide!==!0||i.includeHidden)),g,zte));var Ae=ce.length>0,xe=P.createElement(C9,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:ue,coordinate:B,hasPayload:Ae,offset:p,position:y,reverseDirection:S,useTranslate3d:w,viewBox:z,wrapperStyle:E,lastBoundingBox:Me,innerRef:L,hasPortalFromProps:!!R},Hte(c,nN(nN({},i),{},{payload:ce,label:K,active:ue,activeIndex:X,coordinate:B,accessibilityLayer:$})));return P.createElement(P.Fragment,null,jD.createPortal(xe,ie),ue&&P.createElement(pte,{cursor:x,tooltipEventType:G,coordinate:B,payload:ce,index:X}))}function Vte(t,e,n){return(e=$te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $te(t){var e=jte(t,"string");return typeof e=="symbol"?e:e+""}function jte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Yte{constructor(e){Vte(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function rN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Kte(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rN(Object(n),!0).forEach(function(i){Wte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Wte(t,e,n){return(e=Xte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xte(t){var e=Jte(t,"string");return typeof e=="symbol"?e:e+""}function Jte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qte={cacheSize:2e3,enableCache:!0},jL=Kte({},Qte),sN=new Yte(jL.cacheSize),Zte={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aN="recharts_measurement_span";function ene(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(l)}var oN=(t,e)=>{try{var n=document.getElementById(aN);n||(n=document.createElement("span"),n.setAttribute("id",aN),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Zte,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},dc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Qp.isSsr)return{width:0,height:0};if(!jL.enableCache)return oN(e,n);var i=ene(e,n),r=sN.get(i);if(r)return r;var s=oN(e,n);return sN.set(i,s),s},YL;function tne(t,e,n){return(e=nne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nne(t){var e=ine(t,"string");return typeof e=="symbol"?e:e+""}function ine(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rne=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ane={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},one=["cm","mm","pt","pc","in","Q","px"];function lne(t){return one.includes(t)}var Al="NaN";function une(t,e){return t*ane[e]}class En{static parse(e){var n,[,i,r]=(n=sne.exec(e))!==null&&n!==void 0?n:[];return i==null?En.NaN:new En(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Yi(e)&&(this.unit=""),n!==""&&!rne.test(n)&&(this.num=NaN,this.unit=""),lne(n)&&(this.num=une(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new En(NaN,""):new En(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new En(NaN,""):new En(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new En(NaN,""):new En(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new En(NaN,""):new En(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Yi(this.num)}}YL=En;tne(En,"NaN",new YL(NaN,""));function KL(t){if(t==null||t.includes(Al))return Al;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=lN.exec(e))!==null&&n!==void 0?n:[],a=En.parse(i??""),l=En.parse(s??""),c=r==="*"?a.multiply(l):a.divide(l);if(c.isNaN())return Al;e=e.replace(lN,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,f,p,g]=(d=uN.exec(e))!==null&&d!==void 0?d:[],y=En.parse(f??""),S=En.parse(g??""),w=p==="+"?y.add(S):y.subtract(S);if(w.isNaN())return Al;e=e.replace(uN,w.toString())}return e}var cN=/\(([^()]*)\)/;function cne(t){for(var e=t,n;(n=cN.exec(e))!=null;){var[,i]=n;e=e.replace(cN,KL(i))}return e}function dne(t){var e=t.replace(/\s+/g,"");return e=cne(e),e=KL(e),e}function fne(t){try{return dne(t)}catch{return Al}}function g0(t){var e=fne(t.slice(5,-1));return e===Al?"":e}var hne=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],pne=["dx","dy","angle","className","breakAll"];function Xb(){return Xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xb.apply(null,arguments)}function dN(t,e){if(t==null)return{};var n,i,r=mne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var WL=/[ \f\n\r\t\v\u2028\u2029]+/,XL=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];pn(e)||(n?r=e.toString().split(""):r=e.toString().split(WL));var s=r.map(l=>({word:l,width:dc(l,i).width})),a=n?0:dc("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function gne(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var JL=(t,e,n,i)=>t.reduce((r,s)=>{var{word:a,width:l}=s,c=r[r.length-1];if(c&&l!=null&&(e==null||i||c.width+l+n<Number(e)))c.words.push(a),c.width+=l+n;else{var d={words:[a],width:l};r.push(d)}return r},[]),QL=t=>t.reduce((e,n)=>e.width>n.width?e:n),vne="",fN=(t,e,n,i,r,s,a,l)=>{var c=t.slice(0,e),d=XL({breakAll:n,style:i,children:c+vne});if(!d)return[!1,[]];var f=JL(d.wordsWithComputedWidth,s,a,l),p=f.length>r||QL(f).width>Number(s);return[p,f]},yne=(t,e,n,i,r)=>{var{maxLines:s,children:a,style:l,breakAll:c}=t,d=Ee(s),f=String(a),p=JL(e,i,n,r);if(!d||r)return p;var g=p.length>s||QL(p).width>Number(i);if(!g)return p;for(var y=0,S=f.length-1,w=0,E;y<=S&&w<=f.length-1;){var x=Math.floor((y+S)/2),C=x-1,[T,N]=fN(f,C,c,l,s,i,n,r),[R]=fN(f,x,c,l,s,i,n,r);if(!T&&!R&&(y=x+1),T&&R&&(S=x-1),!T&&R){E=N;break}w++}return E||p},hN=t=>{var e=pn(t)?[]:t.toString().split(WL);return[{words:e,width:void 0}]},bne=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:a}=t;if((e||n)&&!Qp.isSsr){var l,c,d=XL({breakAll:s,children:i,style:r});if(d){var{wordsWithComputedWidth:f,spaceWidth:p}=d;l=f,c=p}else return hN(i);return yne({breakAll:s,children:i,maxLines:a,style:r},l,c,e,!!n)}return hN(i)},ZL="#808080",Ane={angle:0,breakAll:!1,capHeight:"0.71em",fill:ZL,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},QS=P.forwardRef((t,e)=>{var n=Ln(t,Ane),{x:i,y:r,lineHeight:s,capHeight:a,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:f}=n,p=dN(n,hne),g=P.useMemo(()=>bne({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:y,dy:S,angle:w,className:E,breakAll:x}=p,C=dN(p,pne);if(!kn(i)||!kn(r)||g.length===0)return null;var T=Number(i)+(Ee(y)?y:0),N=Number(r)+(Ee(S)?S:0);if(!Ct(T)||!Ct(N))return null;var R;switch(f){case"start":R=g0("calc(".concat(a,")"));break;case"middle":R=g0("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:R=g0("calc(".concat(g.length-1," * -").concat(s,")"));break}var I=[];if(c){var O=g[0].width,{width:F}=p;I.push("scale(".concat(Ee(F)&&Ee(O)?F/O:1,")"))}return w&&I.push("rotate(".concat(w,", ").concat(T,", ").concat(N,")")),I.length&&(C.transform=I.join(" ")),P.createElement("text",Xb({},Pn(C),{ref:e,x:T,y:N,className:ot("recharts-text",E),textAnchor:d,fill:l.includes("url")?ZL:l}),g.map((z,$)=>{var G=z.words.join(x?"":" ");return P.createElement("tspan",{x:T,dy:$===0?R:s,key:"".concat(G,"-").concat($)},G)}))});QS.displayName="Text";var Sne=["labelRef"],wne=["content"];function pN(t,e){if(t==null)return{};var n,i,r=_ne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _ne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function mN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mN(Object(n),!0).forEach(function(i){Ene(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ene(t,e,n){return(e=xne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xne(t){var e=Tne(t,"string");return typeof e=="symbol"?e:e+""}function Tne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ds(){return ds=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ds.apply(null,arguments)}var eU=P.createContext(null),ZS=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a,children:l}=t,c=P.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a}),[e,n,i,r,s,a]);return P.createElement(eU.Provider,{value:c},l)},tU=()=>{var t=P.useContext(eU),e=Yc();return t||f2(e)},Cne=P.createContext(null),Mne=()=>{var t=P.useContext(Cne),e=_e(Dk);return t||e},Pne=t=>{var{value:e,formatter:n}=t,i=pn(t.children)?e:t.children;return typeof n=="function"?n(i):i},ew=t=>t!=null&&typeof t=="function",Rne=(t,e)=>{var n=Gi(e-t),i=Math.min(Math.abs(e-t),360);return n*i},Nne=(t,e,n,i,r)=>{var{offset:s,className:a}=t,{cx:l,cy:c,innerRadius:d,outerRadius:f,startAngle:p,endAngle:g,clockWise:y}=r,S=(d+f)/2,w=Rne(p,g),E=w>=0?1:-1,x,C;switch(e){case"insideStart":x=p+E*s,C=y;break;case"insideEnd":x=g-E*s,C=!y;break;case"end":x=g+E*s,C=y;break;default:throw new Error("Unsupported position ".concat(e))}C=w<=0?C:!C;var T=Tn(l,c,S,x),N=Tn(l,c,S,x+(C?1:-1)*359),R="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(C?0:1,`,
    `).concat(N.x,",").concat(N.y),I=pn(t.id)?vc("recharts-radial-line-"):t.id;return P.createElement("text",ds({},i,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",a)}),P.createElement("defs",null,P.createElement("path",{id:I,d:R})),P.createElement("textPath",{xlinkHref:"#".concat(I)},n))},Ine=(t,e,n)=>{var{cx:i,cy:r,innerRadius:s,outerRadius:a,startAngle:l,endAngle:c}=t,d=(l+c)/2;if(n==="outside"){var{x:f,y:p}=Tn(i,r,a+e,d);return{x:f,y:p,textAnchor:f>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var g=(s+a)/2,{x:y,y:S}=Tn(i,r,g,d);return{x:y,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Jb=t=>"cx"in t&&Ee(t.cx),Dne=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,s;n!=null&&!Jb(n)&&(s=n);var{x:a,y:l,upperWidth:c,lowerWidth:d,height:f}=e,p=a,g=a+(c-d)/2,y=(p+g)/2,S=(c+d)/2,w=p+c/2,E=f>=0?1:-1,x=E*i,C=E>0?"end":"start",T=E>0?"start":"end",N=c>=0?1:-1,R=N*i,I=N>0?"end":"start",O=N>0?"start":"end";if(r==="top"){var F={x:p+c/2,y:l-x,textAnchor:"middle",verticalAnchor:C};return zt(zt({},F),s?{height:Math.max(l-s.y,0),width:c}:{})}if(r==="bottom"){var z={x:g+d/2,y:l+f+x,textAnchor:"middle",verticalAnchor:T};return zt(zt({},z),s?{height:Math.max(s.y+s.height-(l+f),0),width:d}:{})}if(r==="left"){var $={x:y-R,y:l+f/2,textAnchor:I,verticalAnchor:"middle"};return zt(zt({},$),s?{width:Math.max($.x-s.x,0),height:f}:{})}if(r==="right"){var G={x:y+S+R,y:l+f/2,textAnchor:O,verticalAnchor:"middle"};return zt(zt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:f}:{})}var X=s?{width:S,height:f}:{};return r==="insideLeft"?zt({x:y+R,y:l+f/2,textAnchor:O,verticalAnchor:"middle"},X):r==="insideRight"?zt({x:y+S-R,y:l+f/2,textAnchor:I,verticalAnchor:"middle"},X):r==="insideTop"?zt({x:p+c/2,y:l+x,textAnchor:"middle",verticalAnchor:T},X):r==="insideBottom"?zt({x:g+d/2,y:l+f-x,textAnchor:"middle",verticalAnchor:C},X):r==="insideTopLeft"?zt({x:p+R,y:l+x,textAnchor:O,verticalAnchor:T},X):r==="insideTopRight"?zt({x:p+c-R,y:l+x,textAnchor:I,verticalAnchor:T},X):r==="insideBottomLeft"?zt({x:g+R,y:l+f-x,textAnchor:O,verticalAnchor:C},X):r==="insideBottomRight"?zt({x:g+d-R,y:l+f-x,textAnchor:I,verticalAnchor:C},X):r&&typeof r=="object"&&(Ee(r.x)||vs(r.x))&&(Ee(r.y)||vs(r.y))?zt({x:a+fa(r.x,S),y:l+fa(r.y,f),textAnchor:"end",verticalAnchor:"end"},X):zt({x:w,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},X)},One={angle:0,offset:5,zIndex:Cn.label,position:"middle",textBreakAll:!1};function na(t){var e=Ln(t,One),{viewBox:n,position:i,value:r,children:s,content:a,className:l="",textBreakAll:c,labelRef:d}=e,f=Mne(),p=tU(),g=i==="center"?p:f??p,y,S,w;if(n==null?y=g:Jb(n)?y=n:y=f2(n),!y||pn(r)&&pn(s)&&!P.isValidElement(a)&&typeof a!="function")return null;var E=zt(zt({},e),{},{viewBox:y});if(P.isValidElement(a)){var{labelRef:x}=E,C=pN(E,Sne);return P.cloneElement(a,C)}if(typeof a=="function"){var{content:T}=E,N=pN(E,wne);if(S=P.createElement(a,N),P.isValidElement(S))return S}else S=Pne(e);var R=Pn(e);if(Jb(y)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Nne(e,i,S,R,y);w=Ine(y,e.offset,e.position)}else w=Dne(e,y);return P.createElement(fr,{zIndex:e.zIndex},P.createElement(QS,ds({ref:d,className:ot("recharts-label",l)},R,w,{textAnchor:gne(R.textAnchor)?R.textAnchor:w.textAnchor,breakAll:c}),S))}na.displayName="Label";var kne=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?P.createElement(na,ds({key:"label-implicit"},i)):kn(t)?P.createElement(na,ds({key:"label-implicit",value:t},i)):P.isValidElement(t)?t.type===na?P.cloneElement(t,zt({key:"label-implicit"},i)):P.createElement(na,ds({key:"label-implicit",content:t},i)):ew(t)?P.createElement(na,ds({key:"label-implicit",content:t},i)):t&&typeof t=="object"?P.createElement(na,ds({},t,{key:"label-implicit"},i)):null};function tw(t){var{label:e,labelRef:n}=t,i=tU();return kne(e,i,n)||null}var v0={},y0={},gN;function Lne(){return gN||(gN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(y0)),y0}var b0={},vN;function Une(){return vN||(vN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(b0)),b0}var yN;function Bne(){return yN||(yN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lne(),n=Une(),i=zA();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r})(v0)),v0}var A0,bN;function Fne(){return bN||(bN=1,A0=Bne().last),A0}var zne=Fne();const Hne=Br(zne);var Gne=["valueAccessor"],qne=["dataKey","clockWise","id","textBreakAll","zIndex"];function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sp.apply(null,arguments)}function AN(t,e){if(t==null)return{};var n,i,r=Vne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var $ne=t=>Array.isArray(t.value)?Hne(t.value):t.value,nU=P.createContext(void 0),jne=nU.Provider,iU=P.createContext(void 0);iU.Provider;function Yne(){return P.useContext(nU)}function Kne(){return P.useContext(iU)}function dh(t){var{valueAccessor:e=$ne}=t,n=AN(t,Gne),{dataKey:i,clockWise:r,id:s,textBreakAll:a,zIndex:l}=n,c=AN(n,qne),d=Yne(),f=Kne(),p=d||f;return!p||!p.length?null:P.createElement(fr,{zIndex:l??Cn.label},P.createElement(kr,{className:"recharts-label-list"},p.map((g,y)=>{var S,w=pn(i)?e(g,y):Mn(g&&g.payload,i),E=pn(s)?{}:{id:"".concat(s,"-").concat(y)};return P.createElement(na,sp({key:"label-".concat(y)},Pn(g),c,E,{fill:(S=n.fill)!==null&&S!==void 0?S:g.fill,parentViewBox:g.parentViewBox,value:w,textBreakAll:a,viewBox:g.viewBox,index:y,zIndex:0}))})))}dh.displayName="LabelList";function Wne(t){var{label:e}=t;return e?e===!0?P.createElement(dh,{key:"labelList-implicit"}):P.isValidElement(e)||ew(e)?P.createElement(dh,{key:"labelList-implicit",content:e}):typeof e=="object"?P.createElement(dh,sp({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qb.apply(null,arguments)}var rU=t=>{var{cx:e,cy:n,r:i,className:r}=t,s=ot("recharts-dot",r);return Ee(e)&&Ee(n)&&Ee(i)?P.createElement("circle",Qb({},Or(t),FA(t),{className:s,cx:e,cy:n,r:i})):null},Xne={radiusAxis:{},angleAxis:{}},sU=ui({name:"polarAxis",initialState:Xne,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:ele,removeRadiusAxis:tle,addAngleAxis:nle,removeAngleAxis:ile}=sU.actions,Jne=sU.reducer,aU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,S0={},SN;function Qne(){return SN||(SN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e})(S0)),S0}var w0,wN;function Zne(){return wN||(wN=1,w0=Qne().isPlainObject),w0}var eie=Zne();const tie=Br(eie);var _N,EN,xN,TN,CN;function MN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function PN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MN(Object(n),!0).forEach(function(i){nie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nie(t,e,n){return(e=iie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iie(t){var e=rie(t,"string");return typeof e=="symbol"?e:e+""}function rie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ap.apply(null,arguments)}function ic(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var RN=(t,e,n,i,r)=>{var s=n-i,a;return a=Dt(_N||(_N=ic(["M ",",",""])),t,e),a+=Dt(EN||(EN=ic(["L ",",",""])),t+n,e),a+=Dt(xN||(xN=ic(["L ",",",""])),t+n-s/2,e+r),a+=Dt(TN||(TN=ic(["L ",",",""])),t+n-s/2-i,e+r),a+=Dt(CN||(CN=ic(["L ",","," Z"])),t,e),a},sie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aie=t=>{var e=Ln(t,sie),{x:n,y:i,upperWidth:r,lowerWidth:s,height:a,className:l}=e,{animationEasing:c,animationDuration:d,animationBegin:f,isUpdateAnimationActive:p}=e,g=P.useRef(null),[y,S]=P.useState(-1),w=P.useRef(r),E=P.useRef(s),x=P.useRef(a),C=P.useRef(n),T=P.useRef(i),N=QA(t,"trapezoid-");if(P.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var oe=g.current.getTotalLength();oe&&S(oe)}catch{}},[]),n!==+n||i!==+i||r!==+r||s!==+s||a!==+a||r===0&&s===0||a===0)return null;var R=ot("recharts-trapezoid",l);if(!p)return P.createElement("g",null,P.createElement("path",ap({},Pn(e),{className:R,d:RN(n,i,r,s,a)})));var I=w.current,O=E.current,F=x.current,z=C.current,$=T.current,G="0px ".concat(y===-1?1:y,"px"),X="".concat(y,"px 0px"),le=x2(["strokeDasharray"],d,c);return P.createElement(JA,{animationId:N,key:N,canBegin:y>0,duration:d,easing:c,isActive:p,begin:f},oe=>{var pe=oi(I,r,oe),B=oi(O,s,oe),V=oi(F,a,oe),re=oi(z,n,oe),ue=oi($,i,oe);g.current&&(w.current=pe,E.current=B,x.current=V,C.current=re,T.current=ue);var Me=oe>0?{transition:le,strokeDasharray:X}:{strokeDasharray:G};return P.createElement("path",ap({},Pn(e),{className:R,d:RN(re,ue,pe,B,V),ref:g,style:PN(PN({},Me),e.style)}))})},oie=["option","shapeType","activeClassName"];function lie(t,e){if(t==null)return{};var n,i,r=uie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function NN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(n),!0).forEach(function(i){cie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cie(t,e,n){return(e=die(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function die(t){var e=fie(t,"string");return typeof e=="symbol"?e:e+""}function fie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hie(t,e){return op(op({},e),t)}function pie(t,e){return t==="symbols"}function IN(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return P.createElement(ZA,n);case"trapezoid":return P.createElement(aie,n);case"sector":return P.createElement(N2,n);case"symbols":if(pie(e))return P.createElement(hO,n);break;case"curve":return P.createElement(E2,n);default:return null}}function mie(t){return P.isValidElement(t)?t.props:t}function gie(t){var{option:e,shapeType:n,activeClassName:i="recharts-active-shape"}=t,r=lie(t,oie),s;if(P.isValidElement(e))s=P.cloneElement(e,op(op({},r),mie(e)));else if(typeof e=="function")s=e(r,r.index);else if(tie(e)&&typeof e!="boolean"){var a=hie(e,r);s=P.createElement(IN,{shapeType:n,elementProps:a})}else{var l=r;s=P.createElement(IN,{shapeType:n,elementProps:l})}return r.isActive?P.createElement(kr,{className:i},s):s}function vie(t){var{tooltipEntrySettings:e}=t,n=Xt(),i=Un(),r=P.useRef(null);return P.useLayoutEffect(()=>{i||(r.current===null?n(OZ(e)):r.current!==e&&n(kZ({prev:r.current,next:e})),r.current=e)},[e,n,i]),P.useLayoutEffect(()=>()=>{r.current&&(n(LZ(r.current)),r.current=null)},[n]),null}function yie(t){var{legendPayload:e}=t,n=Xt(),i=Un(),r=P.useRef(null);return P.useLayoutEffect(()=>{i||(r.current===null?n(f9(e)):r.current!==e&&n(h9({prev:r.current,next:e})),r.current=e)},[n,i,e]),P.useLayoutEffect(()=>()=>{r.current&&(n(p9(r.current)),r.current=null)},[n]),null}var _0,bie=()=>{var[t]=P.useState(()=>vc("uid-"));return t},Aie=(_0=r3.useId)!==null&&_0!==void 0?_0:bie;function Sie(t,e){var n=Aie();return e||(t?"".concat(t,"-").concat(n):n)}var wie=P.createContext(void 0),_ie=t=>{var{id:e,type:n,children:i}=t,r=Sie("recharts-".concat(n),e);return P.createElement(wie.Provider,{value:r},i(r))},Eie={cartesianItems:[],polarItems:[]},oU=ui({name:"graphicalItems",initialState:Eie,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Tt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=lr(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:Tt()},removeCartesianGraphicalItem:{reducer(t,e){var n=lr(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Tt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Tt()},removePolarGraphicalItem:{reducer(t,e){var n=lr(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Tt()}}}),{addCartesianGraphicalItem:xie,replaceCartesianGraphicalItem:Tie,removeCartesianGraphicalItem:Cie,addPolarGraphicalItem:rle,removePolarGraphicalItem:sle}=oU.actions,Mie=oU.reducer,Pie=t=>{var e=Xt(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?e(xie(t)):n.current!==t&&e(Tie({prev:n.current,next:t})),n.current=t},[e,t]),P.useLayoutEffect(()=>()=>{n.current&&(e(Cie(n.current)),n.current=null)},[e]),null},Rie=P.memo(Pie),Nie=["points"];function DN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function E0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(n),!0).forEach(function(i){Iie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Iie(t,e,n){return(e=Die(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Die(t){var e=Oie(t,"string");return typeof e=="symbol"?e:e+""}function Oie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lp.apply(null,arguments)}function kie(t,e){if(t==null)return{};var n,i,r=Lie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Uie(t){var{option:e,dotProps:n,className:i}=t;if(P.isValidElement(e))return P.cloneElement(e,n);if(typeof e=="function")return e(n);var r=ot(i,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,l=kie(s,Nie);return P.createElement(rU,lp({},l,{className:r}))}function Bie(t,e){return t==null?!1:e?!0:t.length===1}function Fie(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:s,baseProps:a,needClip:l,clipPathId:c,zIndex:d=Cn.scatter}=t;if(!Bie(e,n))return null;var f=aU(n),p=i8(n),g=e.map((S,w)=>{var E,x,C=E0(E0(E0({r:3},a),p),{},{index:w,cx:(E=S.x)!==null&&E!==void 0?E:void 0,cy:(x=S.y)!==null&&x!==void 0?x:void 0,dataKey:s,value:S.value,payload:S.payload,points:e});return P.createElement(Uie,{key:"dot-".concat(w),option:n,dotProps:C,className:r})}),y={};return l&&c!=null&&(y.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),P.createElement(fr,{zIndex:d},P.createElement(kr,lp({className:i},y),g))}function ON(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(n),!0).forEach(function(i){zie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ON(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zie(t,e,n){return(e=Hie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hie(t){var e=Gie(t,"string");return typeof e=="symbol"?e:e+""}function Gie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qie={xAxis:{},yAxis:{},zAxis:{}},lU=ui({name:"cartesianAxis",initialState:qie,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Tt()},replaceXAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.xAxis[n.id],t.xAxis[i.id]=i)},prepare:Tt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Tt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Tt()},replaceYAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.yAxis[n.id],t.yAxis[i.id]=i)},prepare:Tt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Tt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Tt()},replaceZAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.zAxis[n.id],t.zAxis[i.id]=i)},prepare:Tt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Tt()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-s[0])<=1)return;var a=[...s,i].slice(-3);t.yAxis[n]=kN(kN({},t.yAxis[n]),{},{width:i,widthHistory:a})}}}}),{addXAxis:Vie,replaceXAxis:$ie,removeXAxis:jie,addYAxis:Yie,replaceYAxis:Kie,removeYAxis:Wie,addZAxis:ale,replaceZAxis:ole,removeZAxis:lle,updateYAxisWidth:Xie}=lU.actions,Jie=lU.reducer,Qie=Q([Rn],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Zie=Q([Qie,xs,Ts],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),nw=()=>_e(Zie),ere=()=>_e(Mee);function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function x0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(i){tre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tre(t,e,n){return(e=nre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nre(t){var e=ire(t,"string");return typeof e=="symbol"?e:e+""}function ire(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rre=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:s,clipPath:a}=t;if(r===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=x0(x0(x0({},l),Pp(r)),FA(r)),d;return P.isValidElement(r)?d=P.cloneElement(r,c):typeof r=="function"?d=r(c):d=P.createElement(rU,c),P.createElement(kr,{className:"recharts-active-dot",clipPath:a},d)};function sre(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,clipPath:s,zIndex:a=Cn.activeDot}=t,l=_e(Rc),c=ere();if(e==null||c==null)return null;var d=e.find(f=>c.includes(f.payload));return pn(d)?null:P.createElement(fr,{zIndex:a},P.createElement(rre,{point:d,childIndex:Number(l),mainColor:n,dataKey:r,activeDot:i,clipPath:s}))}var are=t=>{var{chartData:e}=t,n=Xt(),i=Un();return P.useEffect(()=>i?()=>{}:(n(ZR(e)),()=>{n(ZR(void 0))}),[e,n,i]),null},UN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},uU=ui({name:"brush",initialState:UN,reducers:{setBrushSettings(t,e){return e.payload==null?UN:e.payload}}}),{setBrushSettings:ule}=uU.actions,ore=uU.reducer;function BN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Zf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BN(Object(n),!0).forEach(function(i){cU(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cU(t,e,n){return(e=lre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lre(t){var e=ure(t,"string");return typeof e=="symbol"?e:e+""}function ure(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dU=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return{x:Math.min(n,r),y:Math.min(i,s),width:Math.abs(r-n),height:Math.abs(s-i)}},cre=t=>{var{x1:e,y1:n,x2:i,y2:r}=t;return dU({x:e,y:n},{x:i,y:r})};class pm{static create(e){return new pm(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}cU(pm,"EPS",1e-4);var fU=t=>{var e=Object.keys(t).reduce((n,i)=>Zf(Zf({},n),{},{[i]:pm.create(t[i])}),{});return Zf(Zf({},e),{},{apply(n){var{bandAware:i,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(s=>{var[a,l]=s;return[a,e[a].apply(l,{bandAware:i,position:r})]}))},isInRange(n){return Object.keys(n).every(i=>e[i].isInRange(n[i]))}})};function dre(t){return(t%180+180)%180}var fre=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=dre(r),a=s*Math.PI/180,l=Math.atan(i/n),c=a>l&&a<Math.PI-l?i/Math.sin(a):n/Math.cos(a);return Math.abs(c)},hre={dots:[],areas:[],lines:[]},hU=ui({name:"referenceElements",initialState:hre,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=lr(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=lr(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=lr(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:cle,removeDot:dle,addArea:pre,removeArea:mre,addLine:gre,removeLine:vre}=hU.actions,yre=hU.reducer,pU=P.createContext(void 0),bre=t=>{var{children:e}=t,[n]=P.useState("".concat(vc("recharts"),"-clip")),i=nw();if(i==null)return null;var{x:r,y:s,width:a,height:l}=i;return P.createElement(pU.Provider,{value:n},P.createElement("defs",null,P.createElement("clipPath",{id:n},P.createElement("rect",{x:r,y:s,height:l,width:a}))),e)},mU=()=>P.useContext(pU);function FN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function zN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(n),!0).forEach(function(i){Are(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Are(t,e,n){return(e=Sre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sre(t){var e=wre(t,"string");return typeof e=="symbol"?e:e+""}function wre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},up.apply(null,arguments)}var _re=(t,e)=>{var n;if(P.isValidElement(t))n=P.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!Ct(e.x1)||!Ct(e.y1)||!Ct(e.x2)||!Ct(e.y2))return null;n=P.createElement("line",up({},e,{className:"recharts-reference-line-line"}))}return n},Ere=(t,e,n,i,r,s)=>{var{x:a,width:l}=s,c=r.y.apply(t,{position:n});if(Yi(c)||e==="discard"&&!r.y.isInRange(c))return null;var d=[{x:a+l,y:c},{x:a,y:c}];return i==="left"?d.reverse():d},xre=(t,e,n,i,r,s)=>{var{y:a,height:l}=s,c=r.x.apply(t,{position:n});if(Yi(c)||e==="discard"&&!r.x.isInRange(c))return null;var d=[{x:c,y:a+l},{x:c,y:a}];return i==="top"?d.reverse():d},Tre=(t,e,n,i)=>{var r=t.map(s=>i.apply(s,{position:n}));return e==="discard"&&r.some(s=>!i.isInRange(s))?null:r},Cre=(t,e,n,i,r,s)=>{var{x:a,y:l,segment:c,ifOverflow:d}=s,f=kn(a),p=kn(l);return p?Ere(l,d,n,r,t,e):f?xre(a,d,n,i,t,e):c!=null&&c.length===2?Tre(c,d,n,t):null};function Mre(t){var e=Xt();return P.useEffect(()=>(e(gre(t)),()=>{e(vre(t))})),null}function Pre(t){var{xAxisId:e,yAxisId:n,shape:i,className:r,ifOverflow:s}=t,a=Un(),l=mU(),c=_e(I=>Fr(I,e)),d=_e(I=>zr(I,n)),f=_e(I=>pa(I,"xAxis",e,a)),p=_e(I=>pa(I,"yAxis",n,a)),g=Yc();if(!l||!g||c==null||d==null||f==null||p==null)return null;var y=fU({x:f,y:p}),S=Cre(y,g,t.position,c.orientation,d.orientation,t);if(!S)return null;var[{x:w,y:E},{x,y:C}]=S,T=s==="hidden"?"url(#".concat(l,")"):void 0,N=zN(zN({clipPath:T},Pn(t)),{},{x1:w,y1:E,x2:x,y2:C}),R=cre({x1:w,y1:E,x2:x,y2:C});return P.createElement(fr,{zIndex:t.zIndex},P.createElement(kr,{className:ot("recharts-reference-line",r)},_re(i,N),P.createElement(ZS,up({},R,{lowerWidth:R.width,upperWidth:R.width}),P.createElement(tw,{label:t.label}),t.children)))}var Rre={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Cn.line};function Zb(t){var e=Ln(t,Rre);return P.createElement(P.Fragment,null,P.createElement(Mre,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),P.createElement(Pre,e))}Zb.displayName="ReferenceLine";function HN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function GN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(n),!0).forEach(function(i){Nre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Nre(t,e,n){return(e=Ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ire(t){var e=Dre(t,"string");return typeof e=="symbol"?e:e+""}function Dre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cp.apply(null,arguments)}var Ore=(t,e,n,i,r,s,a)=>{var{x1:l,x2:c,y1:d,y2:f}=a;if(r==null||s==null)return null;var p=fU({x:r,y:s}),g={x:t?p.x.apply(l,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(d,{position:"start"}):p.y.rangeMin},y={x:e?p.x.apply(c,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(f,{position:"end"}):p.y.rangeMax};return a.ifOverflow==="discard"&&(!p.isInRange(g)||!p.isInRange(y))?null:dU(g,y)},kre=(t,e)=>{var n;return P.isValidElement(t)?n=P.cloneElement(t,e):typeof t=="function"?n=t(e):n=P.createElement(ZA,cp({},e,{className:"recharts-reference-area-rect"})),n};function Lre(t){var e=Xt();return P.useEffect(()=>(e(pre(t)),()=>{e(mre(t))})),null}function Ure(t){var{x1:e,x2:n,y1:i,y2:r,className:s,shape:a,xAxisId:l,yAxisId:c}=t,d=mU(),f=Un(),p=_e(N=>pa(N,"xAxis",l,f)),g=_e(N=>pa(N,"yAxis",c,f));if(p==null||g==null)return null;var y=kn(e),S=kn(n),w=kn(i),E=kn(r);if(!y&&!S&&!w&&!E&&!a)return null;var x=Ore(y,S,w,E,p,g,t);if(!x&&!a)return null;var C=t.ifOverflow==="hidden",T=C?"url(#".concat(d,")"):void 0;return P.createElement(fr,{zIndex:t.zIndex},P.createElement(kr,{className:ot("recharts-reference-area",s)},kre(a,GN(GN({clipPath:T},Pn(t)),x)),x!=null&&P.createElement(ZS,cp({},x,{lowerWidth:x.width,upperWidth:x.width}),P.createElement(tw,{label:t.label}),t.children)))}var Bre={ifOverflow:"discard",xAxisId:0,yAxisId:0,radius:0,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1,zIndex:Cn.area};function gU(t){var e=Ln(t,Bre);return P.createElement(P.Fragment,null,P.createElement(Lre,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),P.createElement(Ure,e))}gU.displayName="ReferenceArea";function vU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e){var r=t[i];r!==void 0&&n.push(r)}return n}function Fre(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return fre(i,n)}function zre(t,e,n){var i=n==="width",{x:r,y:s,width:a,height:l}=t;return e===1?{start:i?r:s,end:i?r+a:s+l}:{start:i?r+a:s+l,end:i?r:s}}function Ic(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-r)<=0}function Hre(t,e){return vU(t,e+1)}function Gre(t,e,n,i,r){for(var s=(i||[]).slice(),{start:a,end:l}=e,c=0,d=1,f=a,p=function(){var S=i?.[c];if(S===void 0)return{v:vU(i,d)};var w=c,E,x=()=>(E===void 0&&(E=n(S,w)),E),C=S.coordinate,T=c===0||Ic(t,C,x,f,l);T||(c=0,f=a,d+=1),T&&(f=C+t*(x()/2+r),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function qre(t,e,n,i,r){var s=(i||[]).slice(),a=s.length;if(a===0)return[];for(var{start:l,end:c}=e,d=1;d<=a;d++){for(var f=(a-1)%d,p=l,g=!0,y=function(){var C=i[S],T=S,N,R=()=>(N===void 0&&(N=n(C,T)),N),I=C.coordinate,O=S===f||Ic(t,I,R,p,c);if(!O)return g=!1,1;O&&(p=I+t*(R()/2+r))},S=f;S<a&&!y();S+=d);if(g){for(var w=[],E=f;E<a;E+=d)w.push(i[E]);return w}}return[]}function qN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(n),!0).forEach(function(i){Vre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Vre(t,e,n){return(e=$re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $re(t){var e=jre(t,"string");return typeof e=="symbol"?e:e+""}function jre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yre(t,e,n,i,r){for(var s=(i||[]).slice(),a=s.length,{start:l}=e,{end:c}=e,d=function(g){var y=s[g],S,w=()=>(S===void 0&&(S=n(y,g)),S);if(g===a-1){var E=t*(y.coordinate+t*w()/2-c);s[g]=y=In(In({},y),{},{tickCoord:E>0?y.coordinate-E*t:y.coordinate})}else s[g]=y=In(In({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var x=Ic(t,y.tickCoord,w,l,c);x&&(c=y.tickCoord-t*(w()/2+r),s[g]=In(In({},y),{},{isShow:!0}))}},f=a-1;f>=0;f--)d(f);return s}function Kre(t,e,n,i,r,s){var a=(i||[]).slice(),l=a.length,{start:c,end:d}=e;if(s){var f=i[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);if(a[l-1]=f=In(In({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var y=Ic(t,f.tickCoord,()=>p,c,d);y&&(d=f.tickCoord-t*(p/2+r),a[l-1]=In(In({},f),{},{isShow:!0}))}}for(var S=s?l-1:l,w=function(C){var T=a[C],N,R=()=>(N===void 0&&(N=n(T,C)),N);if(C===0){var I=t*(T.coordinate-t*R()/2-c);a[C]=T=In(In({},T),{},{tickCoord:I<0?T.coordinate-I*t:T.coordinate})}else a[C]=T=In(In({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var O=Ic(t,T.tickCoord,R,c,d);O&&(c=T.tickCoord+t*(R()/2+r),a[C]=In(In({},T),{},{isShow:!0}))}},E=0;E<S;E++)w(E);return a}function iw(t,e,n){var{tick:i,ticks:r,viewBox:s,minTickGap:a,orientation:l,interval:c,tickFormatter:d,unit:f,angle:p}=t;if(!r||!r.length||!i)return[];if(Ee(c)||Qp.isSsr){var g;return(g=Hre(r,Ee(c)?c:0))!==null&&g!==void 0?g:[]}var y=[],S=l==="top"||l==="bottom"?"width":"height",w=f&&S==="width"?dc(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(T,N)=>{var R=typeof d=="function"?d(T.value,N):T.value;return S==="width"?Fre(dc(R,{fontSize:e,letterSpacing:n}),w,p):dc(R,{fontSize:e,letterSpacing:n})[S]},x=r.length>=2?Gi(r[1].coordinate-r[0].coordinate):1,C=zre(s,x,S);return c==="equidistantPreserveStart"?Gre(x,C,E,r,a):c==="equidistantPreserveEnd"?qre(x,C,E,r,a):(c==="preserveStart"||c==="preserveStartEnd"?y=Kre(x,C,E,r,a,c==="preserveStartEnd"):y=Yre(x,C,E,r,a),y.filter(T=>T.isShow))}var Wre=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>a&&(a=p.width)}});var l=n?n.getBoundingClientRect().width:0,c=r+s,d=a+c+l+(n?i:0);return Math.round(d)}return 0},Xre=["axisLine","width","height","className","hide","ticks","axisType"];function Jre(t,e){if(t==null)return{};var n,i,r=Qre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qre(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function uo(){return uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uo.apply(null,arguments)}function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(i){Zre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Zre(t,e,n){return(e=ese(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ese(t){var e=tse(t,"string");return typeof e=="symbol"?e:e+""}function tse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ms={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Cn.axis};function nse(t){var{x:e,y:n,width:i,height:r,orientation:s,mirror:a,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var d=Kt(Kt(Kt({},c),Or(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!a||s==="bottom"&&a);d=Kt(Kt({},d),{},{x1:e,y1:n+f*r,x2:e+i,y2:n+f*r})}else{var p=+(s==="left"&&!a||s==="right"&&a);d=Kt(Kt({},d),{},{x1:e+p*i,y1:n,x2:e+p*i,y2:n+r})}return P.createElement("line",uo({},d,{className:ot("recharts-cartesian-axis-line",Dp(l,"className"))}))}function ise(t,e,n,i,r,s,a,l,c){var d,f,p,g,y,S,w=l?-1:1,E=t.tickSize||a,x=Ee(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=f=t.coordinate,g=n+ +!l*r,p=g-w*E,S=p-w*c,y=x;break;case"left":p=g=t.coordinate,f=e+ +!l*i,d=f-w*E,y=d-w*c,S=x;break;case"right":p=g=t.coordinate,f=e+ +l*i,d=f+w*E,y=d+w*c,S=x;break;default:d=f=t.coordinate,g=n+ +l*r,p=g+w*E,S=p+w*c,y=x;break}return{line:{x1:d,y1:p,x2:f,y2:g},tick:{x:y,y:S}}}function rse(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function sse(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ase(t){var{option:e,tickProps:n,value:i}=t,r,s=ot(n.className,"recharts-cartesian-axis-tick-value");if(P.isValidElement(e))r=P.cloneElement(e,Kt(Kt({},n),{},{className:s}));else if(typeof e=="function")r=e(Kt(Kt({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=ot(a,e?.className)),r=P.createElement(QS,uo({},n,{className:a}),i)}return r}var ose=P.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:s,tickFormatter:a,unit:l,padding:c,tickTextProps:d,orientation:f,mirror:p,x:g,y,width:S,height:w,tickSize:E,tickMargin:x,fontSize:C,letterSpacing:T,getTicksConfig:N,events:R,axisType:I}=t,O=iw(Kt(Kt({},N),{},{ticks:n}),C,T),F=rse(f,p),z=sse(f,p),$=Or(N),G=Pp(i),X={};typeof r=="object"&&(X=r);var le=Kt(Kt({},$),{},{fill:"none"},X),oe=O.map(V=>Kt({entry:V},ise(V,g,y,S,w,f,E,p,x))),pe=oe.map(V=>{var{entry:re,line:ue}=V;return P.createElement(kr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},r&&P.createElement("line",uo({},le,ue,{className:ot("recharts-cartesian-axis-tick-line",Dp(r,"className"))})))}),B=oe.map((V,re)=>{var{entry:ue,tick:Me}=V,L=Kt(Kt(Kt(Kt({textAnchor:F,verticalAnchor:z},$),{},{stroke:"none",fill:s},G),Me),{},{index:re,payload:ue,visibleTicksCount:O.length,tickFormatter:a,padding:c},d);return P.createElement(kr,uo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ue.value,"-").concat(ue.coordinate,"-").concat(ue.tickCoord)},lY(R,ue,re)),i&&P.createElement(ase,{option:i,tickProps:L,value:"".concat(typeof a=="function"?a(ue.value,re):ue.value).concat(l||"")}))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},B.length>0&&P.createElement(fr,{zIndex:Cn.label},P.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},B)),pe.length>0&&P.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},pe))}),lse=P.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:s,hide:a,ticks:l,axisType:c}=t,d=Jre(t,Xre),[f,p]=P.useState(""),[g,y]=P.useState(""),S=P.useRef(null);P.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return Wre({ticks:S.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=P.useCallback(E=>{if(E){var x=E.getElementsByClassName("recharts-cartesian-axis-tick-value");S.current=x;var C=x[0];if(C){var T=window.getComputedStyle(C),N=T.fontSize,R=T.letterSpacing;(N!==f||R!==g)&&(p(N),y(R))}}},[f,g]);return a||i!=null&&i<=0||r!=null&&r<=0?null:P.createElement(fr,{zIndex:t.zIndex},P.createElement(kr,{className:ot("recharts-cartesian-axis",s)},P.createElement(nse,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Or(t)}),P.createElement(ose,{ref:w,axisType:c,events:d,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),P.createElement(ZS,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},P.createElement(tw,{label:t.label,labelRef:t.labelRef}),t.children)))}),rw=P.forwardRef((t,e)=>{var n=Ln(t,ms);return P.createElement(lse,uo({},n,{ref:e}))});rw.displayName="CartesianAxis";var use=["x1","y1","x2","y2","key"],cse=["offset"],dse=["xAxisId","yAxisId"],fse=["xAxisId","yAxisId"];function $N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(n),!0).forEach(function(i){hse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$N(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hse(t,e,n){return(e=pse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pse(t){var e=mse(t,"string");return typeof e=="symbol"?e:e+""}function mse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wa(){return Wa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wa.apply(null,arguments)}function dp(t,e){if(t==null)return{};var n,i,r=gse(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gse(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var vse=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:s,height:a,ry:l}=t;return P.createElement("rect",{x:i,y:r,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function yU(t){var{option:e,lineItemProps:n}=t,i;if(P.isValidElement(e))i=P.cloneElement(e,n);else if(typeof e=="function")i=e(n);else{var r,{x1:s,y1:a,x2:l,y2:c,key:d}=n,f=dp(n,use),p=(r=Or(f))!==null&&r!==void 0?r:{},{offset:g}=p,y=dp(p,cse);i=P.createElement("line",Wa({},y,{x1:s,y1:a,x2:l,y2:c,fill:"none",key:d}))}return i}function yse(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=dp(t,dse),c=r.map((d,f)=>{var p=Dn(Dn({},l),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(f),index:f});return P.createElement(yU,{key:"line-".concat(f),option:i,lineItemProps:p})});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function bse(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=dp(t,fse),c=r.map((d,f)=>{var p=Dn(Dn({},l),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(f),index:f});return P.createElement(yU,{option:i,lineItemProps:p,key:"line-".concat(f)})});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Ase(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:s,height:a,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var d=l.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==d[0]&&d.unshift(0);var f=d.map((p,g)=>{var y=!d[g+1],S=y?r+a-p:d[g+1]-p;if(S<=0)return null;var w=g%e.length;return P.createElement("rect",{key:"react-".concat(g),y:p,x:i,height:S,width:s,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Sse(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:s,width:a,height:l,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var d=c.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==d[0]&&d.unshift(0);var f=d.map((p,g)=>{var y=!d[g+1],S=y?r+a-p:d[g+1]-p;if(S<=0)return null;var w=g%n.length;return P.createElement("rect",{key:"react-".concat(g),x:p,y:s,width:S,height:l,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var wse=(t,e)=>{var{xAxis:n,width:i,height:r,offset:s}=t;return r2(iw(Dn(Dn(Dn({},ms),n),{},{ticks:s2(n),viewBox:{x:0,y:0,width:i,height:r}})),s.left,s.left+s.width,e)},_se=(t,e)=>{var{yAxis:n,width:i,height:r,offset:s}=t;return r2(iw(Dn(Dn(Dn({},ms),n),{},{ticks:s2(n),viewBox:{x:0,y:0,width:i,height:r}})),s.top,s.top+s.height,e)},Ese={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Cn.grid};function bU(t){var e=p2(),n=m2(),i=h2(),r=Dn(Dn({},Ln(t,Ese)),{},{x:Ee(t.x)?t.x:i.left,y:Ee(t.y)?t.y:i.top,width:Ee(t.width)?t.width:i.width,height:Ee(t.height)?t.height:i.height}),{xAxisId:s,yAxisId:a,x:l,y:c,width:d,height:f,syncWithTicks:p,horizontalValues:g,verticalValues:y}=r,S=Un(),w=_e(z=>HR(z,"xAxis",s,S)),E=_e(z=>HR(z,"yAxis",a,S));if(!Lr(d)||!Lr(f)||!Ee(l)||!Ee(c))return null;var x=r.verticalCoordinatesGenerator||wse,C=r.horizontalCoordinatesGenerator||_se,{horizontalPoints:T,verticalPoints:N}=r;if((!T||!T.length)&&typeof C=="function"){var R=g&&g.length,I=C({yAxis:E?Dn(Dn({},E),{},{ticks:R?g:E.ticks}):void 0,width:e??d,height:n??f,offset:i},R?!0:p);Uh(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(T=I)}if((!N||!N.length)&&typeof x=="function"){var O=y&&y.length,F=x({xAxis:w?Dn(Dn({},w),{},{ticks:O?y:w.ticks}):void 0,width:e??d,height:n??f,offset:i},O?!0:p);Uh(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(N=F)}return P.createElement(fr,{zIndex:r.zIndex},P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(vse,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),P.createElement(Ase,Wa({},r,{horizontalPoints:T})),P.createElement(Sse,Wa({},r,{verticalPoints:N})),P.createElement(yse,Wa({},r,{offset:i,horizontalPoints:T,xAxis:w,yAxis:E})),P.createElement(bse,Wa({},r,{offset:i,verticalPoints:N,xAxis:w,yAxis:E}))))}bU.displayName="CartesianGrid";var xse={},AU=ui({name:"errorBars",initialState:xse,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?r:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:fle,replaceErrorBar:hle,removeErrorBar:ple}=AU.actions,Tse=AU.reducer,Cse=["children"];function Mse(t,e){if(t==null)return{};var n,i,r=Pse(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pse(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Rse={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Nse=P.createContext(Rse);function Ise(t){var{children:e}=t,n=Mse(t,Cse);return P.createElement(Nse.Provider,{value:n},e)}function SU(t,e){var n,i,r=_e(d=>Fr(d,t)),s=_e(d=>zr(d,e)),a=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:dn.allowDataOverflow,l=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:fn.allowDataOverflow,c=a||l;return{needClip:c,needClipX:a,needClipY:l}}function Dse(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=nw(),{needClipX:s,needClipY:a,needClip:l}=SU(e,n);if(!l||!r)return null;var{x:c,y:d,width:f,height:p}=r;return P.createElement("clipPath",{id:"clipPath-".concat(i)},P.createElement("rect",{x:s?c:c-f/2,y:a?d:d-p/2,width:s?f:f*2,height:a?p:p*2}))}var wU=(t,e,n,i)=>yL(t,"xAxis",e,i),_U=(t,e,n,i)=>vL(t,"xAxis",e,i),EU=(t,e,n,i)=>yL(t,"yAxis",n,i),xU=(t,e,n,i)=>vL(t,"yAxis",n,i),Ose=Q([St,wU,EU,_U,xU],(t,e,n,i,r)=>va(t,"xAxis")?Lh(e,i,!1):Lh(n,r,!1)),kse=(t,e,n,i,r)=>r;function Lse(t){return t.type==="line"}var Use=Q([zk,kse],(t,e)=>t.filter(Lse).find(n=>n.id===e)),Bse=Q([St,wU,EU,_U,xU,Use,Ose,_S],(t,e,n,i,r,s,a,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:f}=l;if(!(s==null||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:p,data:g}=s,y;if(g!=null&&g.length>0?y=g:y=c?.slice(d,f+1),y!=null)return xae({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataKey:p,bandSize:a,displayedData:y})}});function Fse(t){var e=Pp(t),n=3,i=2;if(e!=null){var{r,strokeWidth:s}=e,a=Number(r),l=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(l)||l<0)&&(l=i),{r:a,strokeWidth:l}}return{r:n,strokeWidth:i}}var T0={exports:{}},C0={};var jN;function zse(){if(jN)return C0;jN=1;var t=Ll();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return C0.useSyncExternalStoreWithSelector=function(c,d,f,p,g){var y=r(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=a(function(){function E(R){if(!x){if(x=!0,C=R,R=p(R),g!==void 0&&S.hasValue){var I=S.value;if(g(I,R))return T=I}return T=R}if(I=T,n(C,R))return I;var O=p(R);return g!==void 0&&g(I,O)?(C=R,I):(C=R,T=O)}var x=!1,C,T,N=f===void 0?null:f;return[function(){return E(d())},N===null?void 0:function(){return E(N())}]},[d,f,p,g]);var w=i(c,y[0],y[1]);return s(function(){S.hasValue=!0,S.value=w},[w]),l(w),w},C0}var YN;function Hse(){return YN||(YN=1,T0.exports=zse()),T0.exports}Hse();function Gse(t){t()}function qse(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Gse(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var KN={notify(){},get:()=>[]};function Vse(t,e){let n,i=KN,r=0,s=!1;function a(w){f();const E=i.subscribe(w);let x=!1;return()=>{x||(x=!0,E(),p())}}function l(){i.notify()}function c(){S.onStateChange&&S.onStateChange()}function d(){return s}function f(){r++,n||(n=t.subscribe(c),i=qse())}function p(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=KN)}function g(){s||(s=!0,f())}function y(){s&&(s=!1,p())}const S={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>i};return S}var $se=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jse=$se(),Yse=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Kse=Yse(),Wse=()=>jse||Kse?P.useLayoutEffect:P.useEffect,Xse=Wse();function WN(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Jse(t,e){if(WN(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!WN(t[n[r]],e[n[r]]))return!1;return!0}var Qse=Symbol.for("react-redux-context"),Zse=typeof globalThis<"u"?globalThis:{};function eae(){if(!P.createContext)return{};const t=Zse[Qse]??=new Map;let e=t.get(P.createContext);return e||(e=P.createContext(null),t.set(P.createContext,e)),e}var tae=eae();function nae(t){const{children:e,context:n,serverState:i,store:r}=t,s=P.useMemo(()=>{const c=Vse(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),a=P.useMemo(()=>r.getState(),[r]);Xse(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=n||tae;return P.createElement(l.Provider,{value:s},e)}var iae=nae,rae=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function sae(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function sw(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var i of n)if(rae.has(i)){if(t[i]==null&&e[i]==null)continue;if(!Jse(t[i],e[i]))return!1}else if(!sae(t[i],e[i]))return!1;return!0}var aae=["id"],oae=["type","layout","connectNulls","needClip","shape"],lae=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Dc.apply(null,arguments)}function XN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XN(Object(n),!0).forEach(function(i){uae(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uae(t,e,n){return(e=cae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cae(t){var e=dae(t,"string");return typeof e=="symbol"?e:e+""}function dae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aw(t,e){if(t==null)return{};var n,i,r=fae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var hae=t=>{var{dataKey:e,name:n,stroke:i,legendType:r,hide:s}=t;return[{inactive:s,dataKey:e,type:r,color:i,value:a2(n,e),payload:t}]},pae=P.memo(t=>{var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:s,name:a,hide:l,unit:c,tooltipType:d,id:f}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:a2(a,e),hide:l,type:d,color:i,unit:c,graphicalItemId:f}};return P.createElement(vie,{tooltipEntrySettings:p})}),TU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function mae(t,e){for(var n=t.length%2!==0?[...t,0]:t,i=[],r=0;r<e;++r)i=[...i,...n];return i}var gae=(t,e,n)=>{var i=n.reduce((p,g)=>p+g);if(!i)return TU(e,t);for(var r=Math.floor(t/i),s=t%i,a=e-t,l=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>s){l=[...n.slice(0,c),s-d];break}var f=l.length%2===0?[0,a]:[a];return[...mae(n,r),...l,...f].map(p=>"".concat(p,"px")).join(", ")};function vae(t){var{clipPathId:e,points:n,props:i}=t,{dot:r,dataKey:s,needClip:a}=i,{id:l}=i,c=aw(i,aae),d=Or(c);return P.createElement(Fie,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:d,needClip:a,clipPathId:e})}function yae(t){var{showLabels:e,children:n,points:i}=t,r=P.useMemo(()=>i?.map(s=>{var a,l,c={x:(a=s.x)!==null&&a!==void 0?a:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Mr(Mr({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[i]);return P.createElement(jne,{value:e?r:void 0},n)}function JN(t){var{clipPathId:e,pathRef:n,points:i,strokeDasharray:r,props:s}=t,{type:a,layout:l,connectNulls:c,needClip:d,shape:f}=s,p=aw(s,oae),g=Mr(Mr({},Pn(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(e,")"):void 0,points:i,type:a,layout:l,connectNulls:c,strokeDasharray:r??s.strokeDasharray});return P.createElement(P.Fragment,null,i?.length>1&&P.createElement(gie,Dc({shapeType:"curve",option:f},g,{pathRef:n})),P.createElement(vae,{points:i,clipPathId:e,props:s}))}function bae(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Aae(t){var{clipPathId:e,props:n,pathRef:i,previousPointsRef:r,longestAnimatedLengthRef:s}=t,{points:a,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,animateNewValues:g,width:y,height:S,onAnimationEnd:w,onAnimationStart:E}=n,x=r.current,C=QA(a,"recharts-line-"),T=P.useRef(C),[N,R]=P.useState(!1),I=!N,O=P.useCallback(()=>{typeof w=="function"&&w(),R(!1)},[w]),F=P.useCallback(()=>{typeof E=="function"&&E(),R(!0)},[E]),z=bae(i.current),$=P.useRef(0);T.current!==C&&($.current=s.current,T.current=C);var G=$.current;return P.createElement(yae,{points:a,showLabels:I},n.children,P.createElement(JA,{animationId:C,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:O,onAnimationStart:F,key:C},X=>{var le=oi(G,z+G,X),oe=Math.min(le,z),pe;if(c)if(l){var B="".concat(l).split(/[,\s]+/gim).map(ue=>parseFloat(ue));pe=gae(oe,z,B)}else pe=TU(z,oe);else pe=l==null?void 0:String(l);if(X>0&&z>0&&(r.current=a,s.current=Math.max(s.current,oe)),x){var V=x.length/a.length,re=X===1?a:a.map((ue,Me)=>{var L=Math.floor(Me*V);if(x[L]){var K=x[L];return Mr(Mr({},ue),{},{x:oi(K.x,ue.x,X),y:oi(K.y,ue.y,X)})}return g?Mr(Mr({},ue),{},{x:oi(y*2,ue.x,X),y:oi(S/2,ue.y,X)}):Mr(Mr({},ue),{},{x:ue.x,y:ue.y})});return r.current=re,P.createElement(JN,{props:n,points:re,clipPathId:e,pathRef:i,strokeDasharray:pe})}return P.createElement(JN,{props:n,points:a,clipPathId:e,pathRef:i,strokeDasharray:pe})}),P.createElement(Wne,{label:n.label}))}function Sae(t){var{clipPathId:e,props:n}=t,i=P.useRef(null),r=P.useRef(0),s=P.useRef(null);return P.createElement(Aae,{props:n,clipPathId:e,previousPointsRef:i,longestAnimatedLengthRef:r,pathRef:s})}var wae=(t,e)=>{var n,i;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(i=t.y)!==null&&i!==void 0?i:void 0,value:t.value,errorVal:Mn(t.payload,e)}};class _ae extends P.Component{render(){var{hide:e,dot:n,points:i,className:r,xAxisId:s,yAxisId:a,top:l,left:c,width:d,height:f,id:p,needClip:g,zIndex:y}=this.props;if(e)return null;var S=ot("recharts-line",r),w=p,{r:E,strokeWidth:x}=Fse(n),C=aU(n),T=E*2+x,N=g?"url(#clipPath-".concat(C?"":"dots-").concat(w,")"):void 0;return P.createElement(fr,{zIndex:y},P.createElement(kr,{className:S},g&&P.createElement("defs",null,P.createElement(Dse,{clipPathId:w,xAxisId:s,yAxisId:a}),!C&&P.createElement("clipPath",{id:"clipPath-dots-".concat(w)},P.createElement("rect",{x:c-T/2,y:l-T/2,width:d+T,height:f+T}))),P.createElement(Ise,{xAxisId:s,yAxisId:a,data:i,dataPointFormatter:wae,errorBarOffset:0},P.createElement(Sae,{props:this.props,clipPathId:w}))),P.createElement(sre,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:N}))}}var CU={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Cn.line,type:"linear"};function Eae(t){var e=Ln(t,CU),{activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,connectNulls:l,dot:c,hide:d,isAnimationActive:f,label:p,legendType:g,xAxisId:y,yAxisId:S,id:w}=e,E=aw(e,lae),{needClip:x}=SU(y,S),C=nw(),T=Kc(),N=Un(),R=_e($=>Bse($,y,S,N,w));if(T!=="horizontal"&&T!=="vertical"||R==null||C==null)return null;var{height:I,width:O,x:F,y:z}=C;return P.createElement(_ae,Dc({},E,{id:w,connectNulls:l,dot:c,activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,isAnimationActive:f,hide:d,label:p,legendType:g,xAxisId:y,yAxisId:S,points:R,layout:T,height:I,width:O,left:F,top:z,needClip:x}))}function xae(t){var{layout:e,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:s,dataKey:a,bandSize:l,displayedData:c}=t;return c.map((d,f)=>{var p=Mn(d,a);if(e==="horizontal"){var g=YM({axis:n,ticks:r,bandSize:l,entry:d,index:f}),y=pn(p)?null:i.scale(p);return{x:g,y,value:p,payload:d}}var S=pn(p)?null:n.scale(p),w=YM({axis:i,ticks:s,bandSize:l,entry:d,index:f});return S==null||w==null?null:{x:S,y:w,value:p,payload:d}}).filter(Boolean)}function Tae(t){var e=Ln(t,CU),n=Un();return P.createElement(_ie,{id:e.id,type:"line"},i=>P.createElement(P.Fragment,null,P.createElement(yie,{legendPayload:hae(e)}),P.createElement(pae,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),P.createElement(Rie,{type:"line",id:i,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),P.createElement(Eae,Dc({},e,{id:i}))))}var MU=P.memo(Tae,sw);MU.displayName="Line";var Cae=["domain","range"],Mae=["domain","range"];function QN(t,e){if(t==null)return{};var n,i,r=Pae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function ZN(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function PU(t,e){if(t===e)return!0;var{domain:n,range:i}=t,r=QN(t,Cae),{domain:s,range:a}=e,l=QN(e,Mae);return!ZN(n,s)||!ZN(i,a)?!1:sw(r,l)}var Rae=["dangerouslySetInnerHTML","ticks","scale"],Nae=["id","scale"];function eA(){return eA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},eA.apply(null,arguments)}function eI(t,e){if(t==null)return{};var n,i,r=Iae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Iae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Dae(t){var e=Xt(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?e(Vie(t)):n.current!==t&&e($ie({prev:n.current,next:t})),n.current=t},[t,e]),P.useLayoutEffect(()=>()=>{n.current&&(e(jie(n.current)),n.current=null)},[e]),null}var Oae=t=>{var{xAxisId:e,className:n}=t,i=_e(l2),r=Un(),s="xAxis",a=_e(x=>gL(x,s,e,r)),l=_e(x=>vZ(x,e)),c=_e(x=>_Z(x,e)),d=_e(x=>Lk(x,e));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p,scale:g}=t,y=eI(t,Rae),{id:S,scale:w}=d,E=eI(d,Nae);return P.createElement(rw,eA({},y,E,{x:c.x,y:c.y,width:l.width,height:l.height,className:ot("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:a,axisType:s}))},kae={allowDataOverflow:dn.allowDataOverflow,allowDecimals:dn.allowDecimals,allowDuplicatedCategory:dn.allowDuplicatedCategory,angle:dn.angle,axisLine:ms.axisLine,height:dn.height,hide:!1,includeHidden:dn.includeHidden,interval:dn.interval,minTickGap:dn.minTickGap,mirror:dn.mirror,orientation:dn.orientation,padding:dn.padding,reversed:dn.reversed,scale:dn.scale,tick:dn.tick,tickCount:dn.tickCount,tickLine:ms.tickLine,tickSize:ms.tickSize,type:dn.type,xAxisId:0},Lae=t=>{var e=Ln(t,kae);return P.createElement(P.Fragment,null,P.createElement(Dae,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),P.createElement(Oae,e))},RU=P.memo(Lae,PU);RU.displayName="XAxis";var Uae=["dangerouslySetInnerHTML","ticks","scale"],Bae=["id","scale"];function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tA.apply(null,arguments)}function tI(t,e){if(t==null)return{};var n,i,r=Fae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function zae(t){var e=Xt(),n=P.useRef(null);return P.useLayoutEffect(()=>{n.current===null?e(Yie(t)):n.current!==t&&e(Kie({prev:n.current,next:t})),n.current=t},[t,e]),P.useLayoutEffect(()=>()=>{n.current&&(e(Wie(n.current)),n.current=null)},[e]),null}var Hae=t=>{var{yAxisId:e,className:n,width:i,label:r}=t,s=P.useRef(null),a=P.useRef(null),l=_e(l2),c=Un(),d=Xt(),f="yAxis",p=_e(I=>TZ(I,e)),g=_e(I=>xZ(I,e)),y=_e(I=>gL(I,f,e,c)),S=_e(I=>Uk(I,e));if(P.useLayoutEffect(()=>{if(!(i!=="auto"||!p||ew(r)||P.isValidElement(r)||S==null)){var I=s.current;if(I){var O=I.getCalculatedWidth();Math.round(p.width)!==Math.round(O)&&d(Xie({id:e,width:O}))}}},[y,p,d,r,e,i,S]),p==null||g==null||S==null)return null;var{dangerouslySetInnerHTML:w,ticks:E,scale:x}=t,C=tI(t,Uae),{id:T,scale:N}=S,R=tI(S,Bae);return P.createElement(rw,tA({},C,R,{ref:s,labelRef:a,x:g.x,y:g.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:p.width,height:p.height,className:ot("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:y,axisType:f}))},Gae={allowDataOverflow:fn.allowDataOverflow,allowDecimals:fn.allowDecimals,allowDuplicatedCategory:fn.allowDuplicatedCategory,angle:fn.angle,axisLine:ms.axisLine,hide:!1,includeHidden:fn.includeHidden,interval:fn.interval,minTickGap:fn.minTickGap,mirror:fn.mirror,orientation:fn.orientation,padding:fn.padding,reversed:fn.reversed,scale:fn.scale,tick:fn.tick,tickCount:fn.tickCount,tickLine:ms.tickLine,tickSize:ms.tickSize,type:fn.type,width:fn.width,yAxisId:0},qae=t=>{var e=Ln(t,Gae);return P.createElement(P.Fragment,null,P.createElement(zae,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),P.createElement(Hae,e))},NU=P.memo(qae,PU);NU.displayName="YAxis";var Vae=(t,e)=>e,ow=Q([Vae,St,Dk,rn,DL,Ms,Hee,Rn],Kee),lw=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},IU=Ki("mouseClick"),DU=$c();DU.startListening({actionCreator:IU,effect:(t,e)=>{var n=t.payload,i=ow(e.getState(),lw(n));i?.activeIndex!=null&&e.dispatch(FZ({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var nA=Ki("mouseMove"),OU=$c(),eh=null;OU.startListening({actionCreator:nA,effect:(t,e)=>{var n=t.payload;eh!==null&&cancelAnimationFrame(eh);var i=lw(n);eh=requestAnimationFrame(()=>{var r=e.getState(),s=GS(r,r.tooltip.settings.shared);if(s==="axis"){var a=ow(r,i);a?.activeIndex!=null?e.dispatch(xL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(EL())}eh=null})}});function $ae(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var nI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},kU=ui({name:"rootProps",initialState:nI,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:nI.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),jae=kU.reducer,{updateOptions:Yae}=kU.actions,LU=ui({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:mle}=LU.actions,Kae=LU.reducer,UU=Ki("keyDown"),BU=Ki("focus"),uw=$c();uw.startListening({actionCreator:UU,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=qS(r,Yl(n),nd(n),ad(n)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var c=Ms(n);if(s==="Enter"){var d=rp(n,"axis","hover",String(r.index));e.dispatch(Yb({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var f=RZ(n),p=f==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*p;if(!(c==null||y>=c.length||y<0)){var S=rp(n,"axis","hover",String(y));e.dispatch(Yb({active:!0,activeIndex:y.toString(),activeCoordinate:S}))}}}}}});uw.startListening({actionCreator:BU,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",a=rp(n,"axis","hover",String(s));e.dispatch(Yb({active:!0,activeIndex:s,activeCoordinate:a}))}}}});var zi=Ki("externalEvent"),FU=$c(),M0=new Map;FU.startListening({actionCreator:zi,effect:(t,e)=>{var{handler:n,reactEvent:i}=t.payload;if(n!=null){i.persist();var r=i.type,s=M0.get(r);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:xee(l),activeDataKey:_ee(l),activeIndex:Rc(l),activeLabel:LL(l),activeTooltipIndex:Rc(l),isTooltipActive:Tee(l)};n(c,i)}finally{M0.delete(r)}});M0.set(r,a)}}});var Wae=Q([$l],t=>t.tooltipItemPayloads),Xae=Q([Wae,sd,(t,e)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(l=>l.settings.graphicalItemId===i);if(r!=null){var{positions:s}=r;if(s!=null){var a=e(s,n);return a}}}),zU=Ki("touchMove"),HU=$c();HU.startListening({actionCreator:zU,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=GS(i,i.tooltip.settings.shared);if(r==="axis"){var s=n.touches[0];if(s==null)return;var a=ow(i,lw({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(xL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(r==="item"){var l,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(wW),p=(l=d.getAttribute(_W))!==null&&l!==void 0?l:void 0,g=jl(i).find(w=>w.id===p);if(f==null||g==null||p==null)return;var{dataKey:y}=g,S=Xae(i,f,p);e.dispatch(BZ({activeDataKey:y,activeIndex:f,activeCoordinate:S,activeGraphicalItemId:p}))}}}});var Jae=PO({brush:ore,cartesianAxis:Jie,chartData:Tte,errorBars:Tse,graphicalItems:Mie,layout:aW,legend:m9,options:Ste,polarAxis:Jne,polarOptions:Kae,referenceElements:yre,rootProps:jae,tooltip:zZ,zIndex:lte}),Qae=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return NK({reducer:Jae,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([DU.middleware,OU.middleware,uw.middleware,FU.middleware,HU.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(VO({type:"raf"}))},devTools:{serialize:{replacer:$ae},name:"recharts-".concat(n)}})};function Zae(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Un(),s=P.useRef(null);if(r)return n;s.current==null&&(s.current=Qae(e,i));var a=HA;return P.createElement(iae,{context:a,store:s.current},n)}function eoe(t){var{layout:e,margin:n}=t,i=Xt(),r=Un();return P.useEffect(()=>{r||(i(iW(e)),i(nW(n)))},[i,r,e,n]),null}var toe=P.memo(eoe,sw);function noe(t){var e=Xt();return P.useEffect(()=>{e(Yae(t))},[e,t]),null}function iI(t){var{zIndex:e,isPanorama:n}=t,i=P.useRef(null),r=Xt();return P.useLayoutEffect(()=>(i.current&&r(ate({zIndex:e,element:i.current,isPanorama:n})),()=>{r(ote({zIndex:e,isPanorama:n}))}),[r,e,n]),P.createElement("g",{tabIndex:-1,ref:i})}function rI(t){var{children:e,isPanorama:n}=t,i=_e(Xee);if(!i||i.length===0)return e;var r=i.filter(a=>a<0),s=i.filter(a=>a>0);return P.createElement(P.Fragment,null,r.map(a=>P.createElement(iI,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>P.createElement(iI,{key:a,zIndex:a,isPanorama:n})))}var ioe=["children"];function roe(t,e){if(t==null)return{};var n,i,r=soe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function soe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fp.apply(null,arguments)}var aoe={width:"100%",height:"100%",display:"block"},ooe=P.forwardRef((t,e)=>{var n=p2(),i=m2(),r=_2();if(!Lr(n)||!Lr(i))return null;var{children:s,otherAttributes:a,title:l,desc:c}=t,d,f;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=r?0:void 0,typeof a.role=="string"?f=a.role:f=r?"application":void 0),P.createElement($D,fp({},a,{title:l,desc:c,role:f,tabIndex:d,width:n,height:i,style:aoe,ref:e}),s)}),loe=t=>{var{children:e}=t,n=_e(Yp);if(!n)return null;var{width:i,height:r,y:s,x:a}=n;return P.createElement($D,{width:i,height:r,x:a,y:s},e)},sI=P.forwardRef((t,e)=>{var{children:n}=t,i=roe(t,ioe),r=Un();return r?P.createElement(loe,null,P.createElement(rI,{isPanorama:!0},n)):P.createElement(ooe,fp({ref:e},i),P.createElement(rI,{isPanorama:!1},n))});function uoe(){var t=Xt(),[e,n]=P.useState(null),i=_e(SW);return P.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;Ct(s)&&s!==i&&t(sW(s))}},[e,t,i]),n}function aI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function coe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(n),!0).forEach(function(i){doe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function doe(t,e,n){return(e=foe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function foe(t){var e=hoe(t,"string");return typeof e=="symbol"?e:e+""}function hoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},co.apply(null,arguments)}var poe=()=>(kte(),null);function hp(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var moe=P.forwardRef((t,e)=>{var n,i,r=P.useRef(null),[s,a]=P.useState({containerWidth:hp((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:hp((i=t.style)===null||i===void 0?void 0:i.height)}),l=P.useCallback((d,f)=>{a(p=>{var g=Math.round(d),y=Math.round(f);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),c=P.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=d.getBoundingClientRect();l(f,p);var g=S=>{var{width:w,height:E}=S[0].contentRect;l(w,E)},y=new ResizeObserver(g);y.observe(d),r.current=y}},[e,l]);return P.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),P.createElement(P.Fragment,null,P.createElement(Kp,{width:s.containerWidth,height:s.containerHeight}),P.createElement("div",co({ref:c},t)))}),goe=P.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,s]=P.useState({containerWidth:hp(n),containerHeight:hp(i)}),a=P.useCallback((c,d)=>{s(f=>{var p=Math.round(c),g=Math.round(d);return f.containerWidth===p&&f.containerHeight===g?f:{containerWidth:p,containerHeight:g}})},[]),l=P.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:d,height:f}=c.getBoundingClientRect();a(d,f)}},[e,a]);return P.createElement(P.Fragment,null,P.createElement(Kp,{width:r.containerWidth,height:r.containerHeight}),P.createElement("div",co({ref:l},t)))}),voe=P.forwardRef((t,e)=>{var{width:n,height:i}=t;return P.createElement(P.Fragment,null,P.createElement(Kp,{width:n,height:i}),P.createElement("div",co({ref:e},t)))}),yoe=P.forwardRef((t,e)=>{var{width:n,height:i}=t;return vs(n)||vs(i)?P.createElement(goe,co({},t,{ref:e})):P.createElement(voe,co({},t,{ref:e}))});function boe(t){return t===!0?moe:yoe}var Aoe=P.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:f,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:S,onTouchStart:w,style:E,width:x,responsive:C,dispatchTouchEvents:T=!0}=t,N=P.useRef(null),R=Xt(),[I,O]=P.useState(null),[F,z]=P.useState(null),$=uoe(),G=KA(),X=G?.width>0?G.width:x,le=G?.height>0?G.height:r,oe=P.useCallback(Z=>{$(Z),typeof e=="function"&&e(Z),O(Z),z(Z),Z!=null&&(N.current=Z)},[$,e,O,z]),pe=P.useCallback(Z=>{R(IU(Z)),R(zi({handler:s,reactEvent:Z}))},[R,s]),B=P.useCallback(Z=>{R(nA(Z)),R(zi({handler:d,reactEvent:Z}))},[R,d]),V=P.useCallback(Z=>{R(EL()),R(zi({handler:f,reactEvent:Z}))},[R,f]),re=P.useCallback(Z=>{R(nA(Z)),R(zi({handler:p,reactEvent:Z}))},[R,p]),ue=P.useCallback(()=>{R(BU())},[R]),Me=P.useCallback(Z=>{R(UU(Z.key))},[R]),L=P.useCallback(Z=>{R(zi({handler:a,reactEvent:Z}))},[R,a]),K=P.useCallback(Z=>{R(zi({handler:l,reactEvent:Z}))},[R,l]),ie=P.useCallback(Z=>{R(zi({handler:c,reactEvent:Z}))},[R,c]),ce=P.useCallback(Z=>{R(zi({handler:g,reactEvent:Z}))},[R,g]),Ae=P.useCallback(Z=>{R(zi({handler:w,reactEvent:Z}))},[R,w]),xe=P.useCallback(Z=>{T&&R(zU(Z)),R(zi({handler:S,reactEvent:Z}))},[R,T,S]),me=P.useCallback(Z=>{R(zi({handler:y,reactEvent:Z}))},[R,y]),lt=boe(C);return P.createElement(qL.Provider,{value:I},P.createElement(c8.Provider,{value:F},P.createElement(lt,{width:X??E?.width,height:le??E?.height,className:ot("recharts-wrapper",i),style:coe({position:"relative",cursor:"default",width:X,height:le},E),onClick:pe,onContextMenu:L,onDoubleClick:K,onFocus:ue,onKeyDown:Me,onMouseDown:ie,onMouseEnter:B,onMouseLeave:V,onMouseMove:re,onMouseUp:ce,onTouchEnd:me,onTouchMove:xe,onTouchStart:Ae,ref:oe},P.createElement(poe,null),n)))}),Soe=["width","height","responsive","children","className","style","compact","title","desc"];function woe(t,e){if(t==null)return{};var n,i,r=_oe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _oe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Eoe=P.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:s,className:a,style:l,compact:c,title:d,desc:f}=t,p=woe(t,Soe),g=Or(p);return c?P.createElement(P.Fragment,null,P.createElement(Kp,{width:n,height:i}),P.createElement(sI,{otherAttributes:g,title:d,desc:f},s)):P.createElement(Aoe,{className:a,style:l,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},P.createElement(sI,{otherAttributes:g,title:d,desc:f,ref:e},P.createElement(bre,null,s)))});function iA(){return iA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iA.apply(null,arguments)}var xoe={top:5,right:5,bottom:5,left:5},Toe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:xoe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Coe=P.forwardRef(function(e,n){var i,r=Ln(e.categoricalChartProps,Toe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=e,f={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return P.createElement(Zae,{preloadedState:{options:f},reduxStoreName:(i=d.id)!==null&&i!==void 0?i:s},P.createElement(are,{chartData:d.data}),P.createElement(toe,{layout:r.layout,margin:r.margin}),P.createElement(noe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),P.createElement(Eoe,iA({},r,{ref:n})))}),Moe=["axis"],Poe=P.forwardRef((t,e)=>P.createElement(Coe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Moe,tooltipPayloadSearcher:bte,categoricalChartProps:t,ref:e}));const Roe=t=>{if(t.length<2)return{status:"STABLE",direction:"flat",label:"Insufficient Data",color:"text-slate-500"};const e=[...t].sort((c,d)=>new Date(c.date).getTime()-new Date(d.date).getTime()),n=e[e.length-1],i=e[e.length-2],r=n.value-i.value,s=r>0?"up":r<0?"down":"flat",a=n.min,l=n.max;if(a!==void 0&&l!==void 0){const c=n.value>=a&&n.value<=l,d=i.value>=a&&i.value<=l;if(!d&&c)return{status:"IMPROVING",direction:s,label:"Back in Range",color:"text-green-600"};if(d&&!c)return{status:"WORSENING",direction:s,label:"Out of Range",color:"text-red-600"};if(c&&d)return{status:"STABLE",direction:s,label:"Stable in Range",color:"text-green-600"};if(!c&&!d){if(n.value>l&&r<0)return{status:"IMPROVING",direction:s,label:"Improving",color:"text-green-600"};if(n.value>l&&r>0)return{status:"WORSENING",direction:s,label:"Rising High",color:"text-red-600"};if(n.value<a&&r>0)return{status:"IMPROVING",direction:s,label:"Improving",color:"text-green-600"};if(n.value<a&&r<0)return{status:"WORSENING",direction:s,label:"Dropping Low",color:"text-red-600"}}}return{status:"UNKNOWN",direction:s,label:r>0?"Increasing":"Decreasing",color:"text-slate-500"}},oI=(t,e=!1)=>{if(!t)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[i,r,s]=t.split("-").map(Number),a=new Date(i,r-1,s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",...e?{year:"numeric"}:{}}).format(a)}const n=new Date(t);return isNaN(n.getTime())?t:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",...e?{year:"numeric"}:{}}).format(n)},Noe=({data:t,testName:e,onChipClick:n})=>{const[i,r]=P.useState(!1),s=P.useMemo(()=>Roe(t),[t]);if(t.length===0)return null;const a=[...t].sort((I,O)=>new Date(I.date).getTime()-new Date(O.date).getTime()),l=a[a.length-1],c=l?.unit||"",d=l?.min,f=l?.max,p=l?.description,g=Array.from(new Set(t.map(I=>I.rawName))).filter(Boolean),y=a.map(I=>I.value);d!==void 0&&y.push(d),f!==void 0&&y.push(f);const S=Math.min(...y),w=Math.max(...y),E=(w-S)*.1,x=[Math.floor(S-E),Math.ceil(w+E)];let C="text-slate-900",T="bg-slate-50",N="NORMAL";d!==void 0&&f!==void 0&&(l.value>f?(C="text-red-600",T="bg-red-50",N="HIGH"):l.value<d?(C="text-amber-600",T="bg-amber-50",N="LOW"):(C="text-green-600",T="bg-green-50"));const R=({active:I,payload:O,label:F})=>{if(I&&O&&O.length){const z=O[0].payload;return k.jsxs("div",{className:"bg-white p-2 border border-slate-200 shadow-lg rounded-lg text-xs z-50",children:[k.jsx("p",{className:"font-semibold mb-1",children:oI(F,!0)}),k.jsxs("p",{className:"text-blue-600 font-bold",children:[O[0].value," ",k.jsx("span",{className:"font-normal text-slate-500",children:c})]}),d!==void 0&&f!==void 0&&k.jsxs("p",{className:"text-slate-400 mt-1",children:["Ref: ",d," - ",f]}),k.jsxs("p",{className:"text-slate-500 mt-1 italic",children:["Source: ",z.rawName]})]})}return null};return k.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-full overflow-hidden transition-shadow hover:shadow-md relative",children:[i&&p&&k.jsxs("div",{className:"absolute top-12 left-4 right-4 bg-slate-800 text-white text-xs p-3 rounded-lg shadow-xl z-20 animate-in fade-in zoom-in-95 duration-200",children:[k.jsxs("div",{className:"font-semibold mb-1 text-slate-200",children:["About ",e]}),p,k.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-slate-800 transform rotate-45"})]}),k.jsxs("div",{className:"p-4 border-b border-slate-50 flex justify-between items-start",children:[k.jsxs("div",{className:"min-w-0 flex-1 mr-2",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("h3",{className:"text-sm font-semibold text-slate-700 truncate",title:e,children:e}),p&&k.jsx("button",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!i),className:"text-slate-400 hover:text-blue-500 transition-colors",children:k.jsx(K3,{className:"w-3.5 h-3.5"})})]}),k.jsxs("div",{className:"flex items-baseline mt-1 space-x-2",children:[k.jsxs("div",{children:[k.jsx("span",{className:`text-2xl font-bold ${C}`,children:l.value}),k.jsx("span",{className:"text-xs font-medium text-slate-400 ml-1",children:c})]}),s.status!=="STABLE"&&s.status!=="UNKNOWN"&&k.jsxs("div",{className:`flex items-center text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-slate-50 ${s.color}`,children:[s.direction==="up"?k.jsx(wz,{className:"w-3 h-3 mr-1"}):s.direction==="down"?k.jsx(Az,{className:"w-3 h-3 mr-1"}):k.jsx(tz,{className:"w-3 h-3 mr-1"}),s.label]})]})]}),k.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold tracking-wide ${T} ${C}`,children:N})]}),k.jsx("div",{className:"flex-1 w-full min-h-[180px] p-2",children:k.jsx(JW,{width:"100%",height:"100%",children:k.jsxs(Poe,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[k.jsx(bU,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),k.jsx(RU,{dataKey:"date",tickFormatter:I=>oI(I,!1),tick:{fontSize:10,fill:"#94a3b8"},axisLine:!1,tickLine:!1,dy:10,minTickGap:30}),k.jsx(NU,{hide:!1,domain:x,padding:{top:0,bottom:0},tick:{fontSize:10,fill:"#94a3b8"},width:30,axisLine:!1,tickLine:!1}),k.jsx(qte,{content:k.jsx(R,{}),cursor:{stroke:"#cbd5e1",strokeWidth:1,strokeDasharray:"4 4"}}),d!==void 0&&f!==void 0&&k.jsx(gU,{y1:d,y2:f,fill:"#dcfce7",fillOpacity:.3,strokeOpacity:0,ifOverflow:"extendDomain"}),d!==void 0&&k.jsx(Zb,{y:d,stroke:"#16a34a",strokeDasharray:"4 4",strokeOpacity:.8,strokeWidth:1,ifOverflow:"extendDomain"}),f!==void 0&&k.jsx(Zb,{y:f,stroke:"#16a34a",strokeDasharray:"4 4",strokeOpacity:.8,strokeWidth:1,ifOverflow:"extendDomain"}),k.jsx(MU,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2.5,activeDot:{r:5,strokeWidth:2,fill:"#fff",stroke:"#3b82f6"},dot:{r:3,strokeWidth:1.5,fill:"#fff",stroke:"#3b82f6"},animationDuration:500})]})})}),g.length>0&&k.jsx("div",{className:"px-4 pb-3 pt-2 flex flex-wrap gap-2 border-t border-slate-50 bg-slate-50/30",children:g.map(I=>k.jsxs("button",{onClick:()=>{const O=a.find(F=>F.rawName===I);O&&n&&n(O.reportId)},className:"inline-flex items-center px-2 py-1 rounded bg-white border border-slate-200 shadow-sm text-[10px] text-slate-500 hover:text-blue-600 hover:border-blue-300 transition-colors",title:`Go to report: ${I}`,children:[k.jsx(fI,{className:"w-3 h-3 mr-1 opacity-50"}),I]},I))})]})},za=[{target:"center",title:"Welcome to MediJourney",content:"Your personal AI-powered health assistant. Upload your lab reports to visualize your health trends over time.",position:"center"},{target:'[data-tour="upload-section"]',title:"Upload Reports",content:"Start by dragging and dropping your PDF or Image medical reports here. The AI will extract all data automatically.",position:"right"},{target:'[data-tour="dashboard-view"]',title:"Health Dashboard",content:"Your extracted test results will appear here as interactive charts. You can track values, see reference ranges, and monitor changes.",position:"center"},{target:'[data-tour="settings-nav"]',title:"Settings & Mappings",content:"Configure your API key here. You can also fix any test name mismatches manually if the AI gets confused.",position:"center"}],Ioe=({onComplete:t})=>{const[e,n]=P.useState(0),[i,r]=P.useState({});P.useEffect(()=>{const l=()=>{const c=za[e];if(c.position==="center"){r({top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"});return}const d=document.querySelector(c.target);if(d){const f=d.getBoundingClientRect();let p=0,g=0;const y=12;switch(c.position){case"right":p=f.top+f.height/2,g=f.right+y,r({top:p,left:g,transform:"translate(0, -50%)",position:"fixed"});break;case"left":p=f.top+f.height/2,g=f.left-y,r({top:p,left:g,transform:"translate(-100%, -50%)",position:"fixed"});break;case"bottom":p=f.bottom+y,g=f.left+f.width/2,r({top:p,left:g,transform:"translate(-50%, 0)",position:"fixed"});break;case"top":p=f.top-y,g=f.left+f.width/2,r({top:p,left:g,transform:"translate(-50%, -100%)",position:"fixed"});break}}else r({top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"})};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e]);const s=za[e],a=()=>{e<za.length-1?n(l=>l+1):t()};return k.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[k.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-[1px] pointer-events-auto transition-opacity duration-500"}),k.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-2xl border border-slate-200 pointer-events-auto w-80 max-w-[90vw] transition-all duration-300 ease-out z-50",style:i,children:[k.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-600",children:k.jsx(rA,{className:"w-4 h-4"})}),k.jsxs("div",{className:"mb-4",children:[k.jsxs("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold uppercase tracking-wider rounded-md mb-2",children:["Tip ",e+1," of ",za.length]}),k.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),k.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:s.content})]}),k.jsxs("div",{className:"flex justify-between items-center mt-6",children:[k.jsx("div",{className:"flex gap-1.5",children:za.map((l,c)=>k.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${c===e?"w-6 bg-blue-600":"w-1.5 bg-slate-200"}`},c))}),k.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white text-sm font-medium rounded-lg hover:bg-slate-800 transition-colors shadow-lg shadow-slate-200",children:[e===za.length-1?"Get Started":"Next",e===za.length-1?k.jsx(cI,{className:"w-3 h-3"}):k.jsx(M3,{className:"w-3 h-3"})]})]})]})]})},Doe=({images:t,onConfirm:e,onCancel:n})=>{const[i,r]=P.useState(new Set),s=c=>{r(d=>{const f=new Set(d);return f.has(c)?f.delete(c):f.add(c),f})},a=()=>{const c=t.filter((d,f)=>!i.has(f));e(c)},l=t.length-i.size;return k.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:k.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[k.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[k.jsxs("div",{children:[k.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[k.jsx(B3,{className:"w-5 h-5 text-blue-600"}),"PDF Conversion Preview"]}),k.jsx("p",{className:"text-xs text-slate-500",children:"Click the X on any page to exclude it from analysis."})]}),k.jsx("div",{className:"flex items-center gap-2",children:k.jsxs("p",{className:`text-xs font-mono px-2 py-1 rounded ${i.size>0?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[l," of ",t.length," Page(s) Selected"]})})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100/50",children:k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((c,d)=>{const f=i.has(d);return k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsxs("div",{className:`text-xs font-semibold uppercase tracking-wider pl-1 ${f?"text-slate-400 line-through":"text-slate-500"}`,children:["Page ",d+1]}),k.jsx("button",{onClick:()=>s(d),className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-all ${f?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:f?k.jsxs(k.Fragment,{children:[k.jsx(lz,{className:"w-3 h-3"}),"Restore"]}):k.jsxs(k.Fragment,{children:[k.jsx(pT,{className:"w-3 h-3"}),"Exclude"]})})]}),k.jsxs("div",{className:`relative group rounded-xl overflow-hidden shadow-sm border bg-white transition-all ${f?"border-red-200 opacity-40 grayscale":"border-slate-200"}`,children:[k.jsx("img",{src:`data:image/jpeg;base64,${c}`,alt:`Page ${d+1}`,className:"w-full h-auto"}),f&&k.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:k.jsxs("div",{className:"bg-red-500/80 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1.5 shadow-lg",children:[k.jsx(pT,{className:"w-4 h-4"}),"EXCLUDED"]})})]})]},d)})})}),k.jsxs("div",{className:"p-4 border-t border-slate-100 bg-white flex justify-between items-center",children:[k.jsx("div",{className:"text-xs text-slate-500",children:i.size>0&&k.jsxs("span",{className:"text-amber-600",children:[i.size," page(s) will not be analyzed"]})}),k.jsxs("div",{className:"flex gap-3",children:[k.jsxs("button",{onClick:n,className:"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2 text-sm",children:[k.jsx(rA,{className:"w-4 h-4"}),"Cancel"]}),k.jsxs("button",{onClick:a,disabled:l===0,className:"px-6 py-2 bg-blue-600 text-white font-medium hover:bg-blue-700 rounded-lg shadow-sm shadow-blue-200 transition-all flex items-center gap-2 text-sm transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:[k.jsx(cI,{className:"w-4 h-4"}),"Analyze ",l," Page(s)"]})]})]})]})})},Ooe=Rr.lazy(()=>Oc(()=>import("./Settings-B5oJsGFt.js"),__vite__mapDeps([0,1,2])).then(t=>({default:t.Settings}))),koe=Rr.lazy(()=>Oc(()=>import("./ReportDetail-kPk34xAJ.js"),__vite__mapDeps([3,1])).then(t=>({default:t.ReportDetail}))),Loe=Rr.lazy(()=>Oc(()=>import("./InsightsView-CpXXICSS.js"),[]).then(t=>({default:t.InsightsView}))),Uoe=Rr.lazy(()=>Oc(()=>import("./HealthChat-SNJTU_Sa.js"),[]).then(t=>({default:t.HealthChat}))),Boe=Rr.lazy(()=>Oc(()=>import("./PrintReportModal-C54Mscp6.js").then(t=>t.P),__vite__mapDeps([4,2])).then(t=>({default:t.PrintReportModal}))),Foe=()=>k.jsx("div",{className:"flex items-center justify-center p-12",children:k.jsx(dI,{className:"w-8 h-8 animate-spin text-blue-500"})});function zoe(){const[t,e]=P.useState([]),[n,i]=P.useState([]),[r,s]=P.useState(""),[a,l]=P.useState(null),[c,d]=P.useState(null),[f,p]=P.useState({type:"DASHBOARD"}),[g,y]=P.useState(!1),[S,w]=P.useState(!1),[E,x]=P.useState(null),[C,T]=P.useState(localStorage.getItem("ai_provider")||"gemini"),[N,R]=P.useState(localStorage.getItem("gemini_api_key")||""),[I,O]=P.useState(localStorage.getItem("gemini_model")||""),[F,z]=P.useState(localStorage.getItem("openai_api_key")||""),[$,G]=P.useState(localStorage.getItem("openai_base_url")||"https://api.openai.com/v1"),[X,le]=P.useState(localStorage.getItem("openai_model")||""),[oe,pe]=P.useState(localStorage.getItem("openai_processing_mode")||"page-by-page"),[B,V]=P.useState(null),[re,ue]=P.useState(!1),[Me,L]=P.useState(!1),[K,ie]=P.useState(""),[ce,Ae]=P.useState(""),[xe,me]=P.useState("Male"),[lt,Z]=P.useState([]),[Re,Ie]=P.useState({}),[ae,ht]=P.useState(!1),[ze,kt]=P.useState(!0),[Lt,Ji]=P.useState(""),[hr,Kl]=P.useState("All"),[Wl,vo]=P.useState(!1);P.useEffect(()=>{Xj(),(async()=>{try{await jj();const de=await rb();if(de.length>0){i(de);const Ne=localStorage.getItem("last_profile_id");Ne&&de.find(wt=>wt.id===Ne)?s(Ne):s(de[0].id);const je=await sb();e(je.sort((wt,an)=>an.uploadDate-wt.uploadDate))}else{const Ne={id:"demo",name:"Demo User",age:"30",gender:"Other",createdAt:Date.now()};i([Ne]),s("demo");const je=Jj();e(je)}const we=await ab();Ie(we),localStorage.getItem("has_seen_tour")||ue(!0)}catch(de){console.error("Failed to load local database",de)}})()},[]);const Xn=P.useMemo(()=>t.filter(se=>se.profileId===r),[t,r]),mm=P.useMemo(()=>Xn.some(se=>se.isDemo),[Xn]),Bn=P.useMemo(()=>t.filter(de=>de.status===Yt.QUEUED).length===0?!1:C==="gemini"?!N:C==="openai"?$&&!$.includes("api.openai.com")?!1:!F:!0,[t,C,N,F,$]),Qi=P.useMemo(()=>{const se={};return Object.entries(Re).forEach(([de,we])=>{we.forEach(ye=>{se[ye]=de})}),se},[Re]),Xl=async(se,de)=>{x(null);const we=[];for(const ye of se){const Ne=await bm(ye);we.push({id:crypto.randomUUID(),profileId:de,fileName:ye.name,fileType:ye.type,uploadDate:Date.now(),status:Yt.QUEUED,data:null,rawBase64:`data:${ye.type};base64,${Ne}`})}e(ye=>[...we,...ye]);for(const ye of we)await ss(ye)},ld=async()=>{if(!K.trim())return;const se={id:crypto.randomUUID(),name:K,age:ce,gender:xe,createdAt:Date.now()};await Yj(se),r==="demo"?(i([se]),e([])):i(ye=>[...ye,se]),s(se.id),localStorage.setItem("last_profile_id",se.id),L(!1),ie(""),lt.length>0&&(await Xl(lt,se.id),Z([]));const de=C==="gemini"&&!!N,we=C==="openai"&&(!!F||!!$&&!$.includes("api.openai.com"));!de&&!we&&p({type:"SETTINGS"})},yo=se=>{s(se),localStorage.setItem("last_profile_id",se),p({type:"DASHBOARD"})},gm=se=>{R(se),localStorage.setItem("gemini_api_key",se)},ud=se=>{O(se),localStorage.setItem("gemini_model",se)},vm=se=>{z(se),localStorage.setItem("openai_api_key",se)},ym=se=>{G(se),localStorage.setItem("openai_base_url",se)},Sa=se=>{le(se),localStorage.setItem("openai_model",se)},Fn=se=>{pe(se),localStorage.setItem("openai_processing_mode",se)},pr=se=>{T(se),localStorage.setItem("ai_provider",se)},zn=async()=>{const se=await sb();e(se.sort((ye,Ne)=>Ne.uploadDate-ye.uploadDate));const de=await ab();Ie(de);const we=await rb();i(we),we.length>0&&(!(r&&we.find(Ne=>Ne.id===r))||r==="demo")&&(s(we[0].id),localStorage.setItem("last_profile_id",we[0].id))},bm=se=>new Promise((de,we)=>{const ye=new FileReader;ye.readAsDataURL(se),ye.onload=()=>{const je=ye.result.split(",")[1];de(je)},ye.onerror=Ne=>we(Ne)}),Am=async se=>{if(x(null),r==="demo"){Z(se),L(!0);return}if(!r){x("Please select or create a profile first.");return}await Xl(se,r)};P.useEffect(()=>{(async()=>{if(g||a)return;const de=t.find(ye=>ye.status===Yt.QUEUED);if(!de||!de.rawBase64||C==="gemini"&&!N)return;if(C==="openai"&&de.fileType==="application/pdf"){y(!0);try{const ye=de.rawBase64.split(",")[1],Ne=await zD(ye);l(Ne),d(de.id)}catch(ye){console.error("PDF Preview Failed",ye)}finally{y(!1)}return}y(!0);const we={...de,status:Yt.PROCESSING};e(ye=>ye.map(Ne=>Ne.id===de.id?we:Ne)),await ss(we);try{const ye=de.rawBase64.split(",")[1],Ne={provider:C,apiKey:C==="gemini"?N:F,baseUrl:C==="openai"?$:void 0,modelId:C==="gemini"?I:X},je=await T1(ye,de.fileType,Ne),wt={...de,status:Yt.COMPLETED,data:je};e(an=>an.map(ci=>ci.id===de.id?wt:ci)),await ss(wt),Ps([wt])}catch(ye){console.error(`Error processing report ${de.id}:`,ye);const Ne={...de,status:Yt.ERROR,errorMessage:ye.message||"Failed to analyze report"};e(je=>je.map(wt=>wt.id===de.id?Ne:wt)),await ss(Ne)}finally{y(!1)}})()},[t,g,C,N,I,F,$,X,a]);const Sm=async se=>{if(!c||!se||se.length===0)return;const de=t.find(we=>we.id===c);if(de){l(null),d(null),y(!0),V(null);try{const we={...de,status:Yt.PROCESSING};e(wt=>wt.map(an=>an.id===c?we:an)),await ss(we);const Ne=await T1(se,"image/jpeg",{provider:"openai",apiKey:F,baseUrl:$,modelId:X},{processingMode:oe,onProgress:(wt,an)=>V({current:wt,total:an})});V(null);const je={...de,status:Yt.COMPLETED,data:Ne};e(wt=>wt.map(an=>an.id===c?je:an)),await ss(je),Ps([je])}catch(we){console.error(`Error analyzing converted PDF ${c}:`,we);const ye={...de,status:Yt.ERROR,errorMessage:we.message||"Failed to analyze converted PDF"};e(Ne=>Ne.map(je=>je.id===c?ye:je)),await ss(ye)}finally{y(!1),V(null)}}},bo=async()=>{if(!c)return;const se=t.find(de=>de.id===c);if(se){const de={...se,status:Yt.ERROR,errorMessage:"User cancelled PDF analysis."};e(we=>we.map(ye=>ye.id===c?de:ye)),await ss(de)}l(null),d(null)},Ps=async(se,de=!1)=>{if(C==="gemini"&&!N||S)return;const we=new Set;se.forEach(Ne=>{Ne.data?.results.forEach(je=>{we.add(je.testName),je.standardizedName&&we.add(je.standardizedName)})});const ye=de?Array.from(we):Array.from(we).filter(Ne=>!Qi[Ne]);if(ye.length>0){w(!0);try{const je=await $j(ye,Re,{provider:C,apiKey:C==="gemini"?N:F,baseUrl:C==="openai"?$:void 0,modelId:C==="gemini"?I:X});Ie(je),await Wj(je)}catch(Ne){console.error("Optimization error",Ne)}finally{w(!1)}}},Ao=async se=>{await Kj(se),e(de=>de.filter(we=>we.id!==se)),f.type==="REPORT_DETAIL"&&f.reportId===se&&p({type:"DASHBOARD"})},mr=se=>{p({type:"REPORT_DETAIL",reportId:se})},gr=P.useMemo(()=>{const se={},de=new Map;Xn.forEach(ye=>{ye.data&&ye.data.results.forEach(Ne=>{const je=Ne.category||"Uncategorized",wt=Ne.testName.trim(),an=Ne.standardizedName.trim(),ci=Qi[wt]||Qi[an]||an||wt;de.set(ci,je)})}),de.forEach((ye,Ne)=>{const je=Lt.toLowerCase();(Ne.toLowerCase().includes(je)||ye.toLowerCase().includes(je))&&(hr==="All"||ye===hr)&&(se[ye]||(se[ye]=new Set),se[ye].add(Ne))});const we={};return Object.keys(se).sort().forEach(ye=>{we[ye]=Array.from(se[ye]).sort()}),we},[Xn,Lt,hr,Qi]),Rs=P.useMemo(()=>{const se=new Set;return Xn.forEach(de=>de.data?.results.forEach(we=>{we.category&&se.add(we.category)})),Array.from(se).sort()},[Xn]),Jl=se=>Xn.filter(de=>de.status===Yt.COMPLETED&&de.data).map(de=>{const we=de.data.results.find(ye=>{const Ne=ye.testName.trim(),je=ye.standardizedName.trim();return(Qi[Ne]||Qi[je]||je||Ne)===se});return we?{date:de.data.reportDate||new Date(de.uploadDate).toISOString().split("T")[0],value:we.value,unit:we.unit,min:we.referenceRange?.min,max:we.referenceRange?.max,reportId:de.id,description:we.description,rawName:we.testName}:null}).filter(de=>de!==null),cd=P.useMemo(()=>{const se=[];return Object.values(gr).forEach(de=>se.push(...de)),se},[gr]),Ns=()=>n.find(se=>se.id===r),wa=()=>{if(f.type==="REPORTS")return k.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[k.jsxs("div",{className:"flex justify-between items-end",children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Reports"}),k.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[k.jsxs("p",{className:"text-slate-500",children:["Files for ",Ns()?.name||"User"]}),k.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium border flex items-center gap-1
                    ${C==="gemini"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200"}`,children:[C==="gemini"?k.jsx(th,{className:"w-3 h-3"}):k.jsx(mT,{className:"w-3 h-3"}),(C==="gemini"?I:X)||"Not Set"]})]})]}),k.jsxs("div",{className:"text-sm font-medium bg-slate-100 text-slate-600 px-3 py-1 rounded-full",children:[Xn.length," Files"]})]}),k.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-sm","data-tour":"upload-section",children:[k.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[k.jsx(Fv,{className:"w-5 h-5 text-blue-500"}),"Upload New Reports"]}),k.jsx(Qj,{onFileSelect:Am}),E&&k.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-700 text-xs rounded-lg flex items-start",children:[k.jsx(bT,{className:"w-4 h-4 mr-1.5 flex-shrink-0 mt-0.5"}),E]})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"font-semibold text-slate-800 mb-4",children:"Uploaded Files"}),Bn&&k.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:k.jsx(bT,{className:"w-5 h-5"})}),k.jsxs("div",{children:[k.jsx("h4",{className:"text-sm font-bold text-amber-900",children:"Processing Paused"}),k.jsx("p",{className:"text-xs text-amber-700",children:"Reports are queued but no API Key is set."})]})]}),k.jsxs("button",{onClick:()=>p({type:"SETTINGS"}),className:"px-4 py-2 bg-amber-600 text-white text-xs font-bold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-1",children:["Go to Settings ",k.jsx(S3,{className:"w-3 h-3"})]})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:k.jsx("div",{className:"md:col-span-2 xl:col-span-3",children:k.jsx(Zj,{reports:Xn,onDelete:Ao,onSelect:se=>p({type:"REPORT_DETAIL",reportId:se}),selectedId:null,analysisProgress:B})})})]})]});if(f.type==="SETTINGS")return k.jsx(Ooe,{onDataImported:zn,mapping:Qi,onMappingUpdate:()=>{},triggerGrounding:()=>Ps(t,!0),isOptimizing:S,aiProvider:C,onProviderChange:pr,geminiApiKey:N,onGeminiKeyChange:gm,geminiModelId:I,onGeminiModelChange:ud,openaiApiKey:F,onOpenAIKeyChange:vm,openaiBaseUrl:$,onOpenAIBaseUrlChange:ym,openaiModelId:X,onOpenAIModelChange:Sa,openaiProcessingMode:oe,onOpenAIProcessingModeChange:Fn});if(f.type==="REPORT_DETAIL"){const se=t.find(de=>de.id===f.reportId);return se?k.jsx(koe,{report:se,onBack:()=>p({type:"REPORTS"}),onUpdate:async de=>{await ss(de),e(we=>we.map(ye=>ye.id===de.id?de:ye))}}):k.jsxs("div",{className:"text-center py-20",children:[k.jsx("p",{className:"text-slate-500",children:"Report not found."}),k.jsx("button",{onClick:()=>p({type:"DASHBOARD"}),className:"mt-4 text-blue-600 hover:underline",children:"Go to Dashboard"})]})}return f.type==="INSIGHTS"?k.jsx(Loe,{getChartData:Jl,allTestNames:cd,onChipClick:mr}):k.jsx("div",{"data-tour":"dashboard-view",children:Object.keys(gr).length>0?k.jsxs("div",{className:"space-y-12",children:[mm&&k.jsx("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-xl shadow-md flex items-center justify-between animate-in fade-in slide-in-from-top-2",children:k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:k.jsx(vT,{className:"w-5 h-5"})}),k.jsxs("div",{children:[k.jsx("h4",{className:"font-bold text-sm",children:"Viewing Demo Data"}),k.jsx("p",{className:"text-xs text-blue-100 opacity-90",children:"Upload your own report to start your timeline."})]})]})}),S&&k.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[k.jsx(th,{className:"w-5 h-5 animate-spin"}),k.jsxs("div",{className:"text-sm font-medium",children:["Optimizing Health Index...",k.jsx("div",{className:"text-xs opacity-80",children:"Merging duplicate test names"})]})]}),k.jsx("div",{className:"space-y-10",children:Object.entries(gr).map(([se,de])=>k.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[k.jsxs("h3",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2 border-b border-slate-200 pb-2",children:[k.jsx("span",{className:"bg-slate-100 p-1 rounded text-slate-500",children:k.jsx(gT,{className:"w-4 h-4"})}),se]}),k.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:de.map(we=>k.jsx("div",{className:"h-auto",children:k.jsx(Noe,{data:Jl(we),testName:we,onChipClick:mr})},we))})]},se))})]}):k.jsx("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center text-slate-400 animate-in zoom-in-95 duration-500",children:k.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6",children:[k.jsx("div",{className:"bg-blue-50 p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:k.jsx(Bv,{className:"w-10 h-10 text-blue-500"})}),k.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:["Hi, ",Ns()?.name||"User"]}),k.jsx("p",{className:"max-w-xs mx-auto text-slate-500 leading-relaxed mb-6",children:"Start your health journey by uploading your first medical report (PDF or Image)."}),k.jsx("div",{className:"flex flex-col gap-3",children:k.jsxs("button",{onClick:()=>p({type:"REPORTS"}),className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors shadow-lg shadow-slate-200",children:[k.jsx(Fv,{className:"w-4 h-4"}),"Go to Reports"]})})]})})})};return k.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col md:flex-row text-slate-800 font-sans relative",children:[re&&k.jsx(Ioe,{onComplete:()=>{ue(!1),localStorage.setItem("has_seen_tour","true")}}),a&&k.jsx(Doe,{images:a,onConfirm:Sm,onCancel:bo}),g&&k.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] bg-slate-900/90 text-white pl-4 pr-6 py-3 rounded-full shadow-2xl backdrop-blur-md flex items-center gap-3 animate-in slide-in-from-bottom-10 fade-in duration-300",children:[k.jsxs("div",{className:"relative",children:[k.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-25"}),k.jsx("div",{className:"bg-blue-600 rounded-full p-2 relative z-10",children:k.jsx(dI,{className:"w-5 h-5 animate-spin text-white"})})]}),k.jsxs("div",{children:[k.jsx("div",{className:"font-bold text-sm",children:B?`Analyzing Page ${B.current} of ${B.total}...`:"Analyzing Report..."}),k.jsxs("div",{className:"text-[10px] text-slate-300",children:["Using ",(C==="gemini"?I:X)||"No model selected"]})]})]}),Me&&k.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:k.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md scale-100",children:[k.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Create Health Profile"}),k.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"To save your reports securely, please create a personal profile."}),k.jsxs("div",{className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name *"}),k.jsx("input",{type:"text",value:K,onChange:se=>ie(se.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. John Doe"})]}),k.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Age"}),k.jsx("input",{type:"number",value:ce,onChange:se=>Ae(se.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Gender"}),k.jsxs("select",{value:xe,onChange:se=>me(se.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[k.jsx("option",{children:"Male"}),k.jsx("option",{children:"Female"}),k.jsx("option",{children:"Other"})]})]})]})]}),k.jsx("button",{onClick:ld,disabled:!K.trim(),className:"mt-8 w-full bg-blue-600 text-white py-2.5 rounded-xl font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Create Profile & Continue"}),k.jsx("button",{onClick:()=>{L(!1),Z([])},className:"mt-3 w-full text-slate-500 text-sm hover:text-slate-700",children:"Cancel"})]})}),k.jsx(Rr.Suspense,{fallback:null,children:k.jsx(Uoe,{aiProvider:C,apiKey:C==="gemini"?N:F,baseUrl:C==="openai"?$:void 0,modelId:C==="gemini"?I:X,reports:Xn,mapping:Qi})}),k.jsxs("div",{className:"md:hidden bg-white border-b border-slate-200 p-4 flex justify-between items-center sticky top-0 z-30",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"bg-blue-600 p-1.5 rounded-lg",children:k.jsx(Bv,{className:"text-white w-4 h-4"})}),k.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"MediJourney"})]}),k.jsx("button",{onClick:()=>ht(!ae),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:ae?k.jsx(rA,{className:"w-6 h-6"}):k.jsx(Z3,{className:"w-6 h-6"})})]}),ae&&k.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-30 md:hidden",onClick:()=>ht(!1)}),k.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-40 bg-white border-r border-slate-200 flex flex-col transition-all duration-300 ease-in-out
        ${ae?"translate-x-0 shadow-xl":"-translate-x-full shadow-none"}
        md:translate-x-0 md:static md:h-screen md:sticky md:top-0
        ${ze?"md:w-64":"md:w-0 md:overflow-hidden md:border-r-0"}
      `,children:[k.jsxs("div",{className:"p-6 border-b border-slate-100 hidden md:flex justify-between items-center min-w-[16rem]",children:[k.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>p({type:"DASHBOARD"}),children:[k.jsx("div",{className:"bg-blue-600 p-2 rounded-lg shadow-blue-200 shadow-md",children:k.jsx(Bv,{className:"text-white w-5 h-5"})}),k.jsx("h1",{className:"text-xl font-bold tracking-tight text-slate-900",children:"MediJourney"})]}),k.jsx("button",{onClick:()=>kt(!1),className:"p-1.5 text-slate-400 hover:bg-slate-100 rounded-lg transition-colors",title:"Collapse Sidebar",children:k.jsx(T3,{className:"w-5 h-5"})})]}),k.jsx("div",{className:"p-4 border-b border-slate-100",children:k.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100",children:[k.jsxs("div",{className:"flex items-center justify-between mb-2",children:[k.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:"Current Profile"}),k.jsx("button",{onClick:()=>L(!0),className:"text-blue-600 hover:bg-blue-50 p-1 rounded transition-colors",title:"Add Profile",children:k.jsx(rz,{className:"w-3 h-3"})})]}),n.length>0?k.jsx("div",{className:"space-y-1",children:n.map(se=>k.jsxs("button",{onClick:()=>yo(se.id),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-sm transition-colors
                       ${r===se.id?"bg-white shadow-sm ring-1 ring-slate-200 font-medium text-slate-900":"text-slate-500 hover:bg-slate-200/50"}
                     `,children:[k.jsx("div",{className:`w-2 h-2 rounded-full ${r===se.id?"bg-green-500":"bg-slate-300"}`}),k.jsx("span",{className:"truncate",children:se.name})]},se.id))}):k.jsx("div",{className:"text-xs text-slate-400 italic",children:"No profiles"})]})}),k.jsxs("div",{className:"flex-1 flex flex-col min-w-[16rem] md:min-w-[16rem] overflow-y-auto py-6 px-4 space-y-2",children:[k.jsxs("button",{onClick:()=>{p({type:"DASHBOARD"}),ht(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="DASHBOARD"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[k.jsx(gT,{className:"w-5 h-5"}),k.jsx("span",{className:"font-medium",children:"Dashboard"})]}),k.jsxs("button",{onClick:()=>{p({type:"REPORTS"}),ht(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="REPORTS"||f.type==="REPORT_DETAIL"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[k.jsx(Fv,{className:"w-5 h-5"}),k.jsx("span",{className:"font-medium",children:"My Reports"})]}),k.jsxs("button",{onClick:()=>{p({type:"INSIGHTS"}),ht(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="INSIGHTS"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[k.jsx(vT,{className:"w-5 h-5"}),k.jsx("span",{className:"font-medium",children:"Insights"})]}),k.jsx("div",{className:"my-4 border-t border-slate-100 mx-2"}),k.jsxs("button",{onClick:()=>{p({type:"SETTINGS"}),ht(!1)},"data-tour":"settings-nav",className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="SETTINGS"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[k.jsx(fz,{className:"w-5 h-5"}),k.jsx("span",{className:"font-medium",children:"Settings"})]}),k.jsx("div",{className:"mt-auto pt-10",children:k.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex flex-col gap-2",children:[k.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-bold text-xs uppercase tracking-wider",children:[k.jsx(pz,{className:"w-4 h-4"})," Privacy First"]}),k.jsx("p",{className:"text-[10px] text-green-700 leading-tight opacity-90",children:"Your medical data is stored locally on this device. We do not host your files."})]})})]})]}),k.jsxs("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-65px)] md:h-screen scroll-smooth",children:[f.type==="DASHBOARD"&&k.jsxs("header",{className:"mb-8 flex flex-col lg:flex-row lg:items-end justify-between gap-4",children:[k.jsxs("div",{className:"flex items-start gap-4",children:[!ze&&k.jsx("button",{onClick:()=>kt(!0),className:"hidden md:flex p-2 bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-300 rounded-lg transition-colors items-center justify-center shadow-sm",title:"Expand Sidebar",children:k.jsx(yT,{className:"w-5 h-5"})}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Health Dashboard"}),k.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[k.jsx(Cz,{className:"w-4 h-4 text-slate-400"}),k.jsx("span",{className:"text-sm text-slate-600 font-medium",children:Ns()?.name||"Loading..."}),k.jsx("span",{className:"text-slate-300",children:""}),k.jsxs("span",{className:"text-sm text-slate-500",children:[Xn.length," reports analyzed"]}),k.jsx("span",{className:"text-slate-300",children:""}),k.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium border flex items-center gap-1
                    ${C==="gemini"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200"}`,children:[C==="gemini"?k.jsx(th,{className:"w-3 h-3"}):k.jsx(mT,{className:"w-3 h-3"}),(C==="gemini"?I:X)||"Not Set"]})]})]})]}),Rs.length>0&&k.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[k.jsxs("div",{className:"relative flex-1 sm:min-w-[200px]",children:[k.jsx(cz,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),k.jsx("input",{type:"text",placeholder:"Search tests...",value:Lt,onChange:se=>Ji(se.target.value),className:"w-full pl-9 pr-4 py-2 bg-white border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),k.jsxs("div",{className:"relative flex-1 sm:min-w-[180px]",children:[k.jsx(G3,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),k.jsxs("select",{value:hr,onChange:se=>Kl(se.target.value),className:"w-full pl-9 pr-8 py-2 bg-white border border-slate-300 rounded-lg text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"All",children:"All Categories"}),Rs.map(se=>k.jsx("option",{value:se,children:se},se))]})]}),k.jsxs("button",{onClick:()=>vo(!0),className:"px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-400 transition-colors flex items-center gap-2",title:"Export to PDF",children:[k.jsx(az,{className:"w-4 h-4"}),k.jsx("span",{className:"hidden sm:inline",children:"Export PDF"})]})]})]}),f.type!=="DASHBOARD"&&!ze&&k.jsx("button",{onClick:()=>kt(!0),className:"hidden md:flex p-2 absolute top-8 left-8 z-20 bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-300 rounded-lg transition-colors items-center justify-center shadow-sm",title:"Expand Sidebar",children:k.jsx(yT,{className:"w-5 h-5"})}),k.jsx(Rr.Suspense,{fallback:k.jsx(Foe,{}),children:wa()}),k.jsx(Rr.Suspense,{fallback:null,children:k.jsx(Boe,{isOpen:Wl,onClose:()=>vo(!1),reports:Xn,mapping:Qi,groupedMapping:Re,profileName:Ns()?.name||"User",getChartDataForTest:Jl,testsByCategory:gr})})]})]})}const GU=document.getElementById("root");if(!GU)throw new Error("Could not find root element to mount to");const Hoe=d3.createRoot(GU);Hoe.render(k.jsx(Rr.StrictMode,{children:k.jsx(zoe,{})}));export{mT as C,B3 as F,mA as G,tz as M,rz as P,Rr as R,th as S,fI as T,xz as U,rA as X,Oc as _,R3 as a,cI as b,He as c,$oe as d,joe as e,Voe as f,sb as g,P0 as h,Yoe as i,k as j,_3 as k,cz as l,G3 as m,Roe as n,I3 as o,Az as p,Noe as q,P as r,wz as s,Br as t,Yt as u,az as v,bT as w,qoe as x};
