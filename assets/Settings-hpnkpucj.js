import{c as k,r as a,g as de,j as e,S as K,C as P,a as J,b as V,F as De,U as ce,T as xe,P as Fe,X as Ee,d as Re,f as Ge,e as Ue,i as _e}from"./index-CAQwZLyK.js";import{S as $e}from"./save-YfvQyAz0.js";import{D as me}from"./download-BJLxXkE4.js";const Te=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ke=k("cloud",Te);const Pe=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Je=k("database",Pe);const Ve=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ue=k("key",Ve);const Be=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],he=k("refresh-cw",Be),ss=({onDataImported:pe,mapping:N,onMappingUpdate:B,triggerGrounding:be,isOptimizing:C,aiProvider:n,onProviderChange:q,geminiApiKey:A,onGeminiKeyChange:ge,geminiModelId:m,onGeminiModelChange:fe,openaiApiKey:I,onOpenAIKeyChange:je,openaiBaseUrl:u,onOpenAIBaseUrlChange:Ne,openaiModelId:h,onOpenAIModelChange:ve,openaiProcessingMode:M,onOpenAIProcessingModeChange:we})=>{const[v,z]=a.useState(A),[c,L]=a.useState(m),[O,H]=a.useState(I),[p,w]=a.useState(u),[i,y]=a.useState(h),[D,Y]=a.useState(M),[F,W]=a.useState(!1),[E,R]=a.useState(null),[ye,X]=a.useState(0),[b,g]=a.useState([]),[o,Z]=a.useState(!1),[G,d]=a.useState(!1),[Q,S]=a.useState(null),U=n==="gemini"?!!m:!!h,[Se,_]=a.useState(!U),$=[{id:"openai",name:"OpenAI (Standard)",baseUrl:"https://api.openai.com/v1"},{id:"ollama",name:"Ollama (Local)",baseUrl:"http://localhost:11434/v1"},{id:"lmstudio",name:"LM Studio (Local)",baseUrl:"http://localhost:1234/v1"},{id:"custom",name:"Custom / Other",baseUrl:""}],ee=s=>$.find(t=>t.baseUrl===s)?.id||"custom",[x,se]=a.useState(()=>ee(u)),[qe,ze]=a.useState(!1),[f,He]=a.useState(null),[Ye,We]=a.useState(null),[te,le]=a.useState(null),[T,ae]=a.useState("");a.useEffect(()=>{z(A),L(m),H(I),w(u),y(h),Y(M),se(ee(u))},[A,m,I,u,h,M]),a.useEffect(()=>{de().then(t=>X(t.length));const s=`${n}_saved_models`,l=localStorage.getItem(s);if(l)try{const t=JSON.parse(l);g(t),t.length>0&&d(!0)}catch{}else g([]),d(!1)},[n]);const ne=async()=>{Z(!0),g([]),d(!1),S(null);let s=!1;try{if(n==="gemini"){const t=await Re({provider:"gemini",apiKey:v,modelId:""});t.length>0?(g(t),d(!0),localStorage.setItem("gemini_saved_models",JSON.stringify(t)),c||L(t[0].name),s=!0):S("No models found. Please check your API key.")}else{const t=(await Ge(O,p)).map(r=>({name:r,displayName:r}));t.length>0?(g(t),d(!0),localStorage.setItem("openai_saved_models",JSON.stringify(t)),i||y(t[0].name),s=!0):S("No models found. Ensure the server is running and accessible.")}}catch(l){console.error("Failed to fetch models",l),d(!1),S(l.message||"Failed to connect to AI provider. Check your URL and try again."),s=!1}finally{Z(!1)}return s},j=s=>l=>{s(l),d(!1)},ke=()=>{ge(v),fe(c),je(O),Ne(p),ve(i),we(D),W(!0),_(!1),setTimeout(()=>W(!1),2e3)};G&&(n==="gemini"?c:i).trim();const Ce=async()=>{try{const s=await Ue(),l=new Blob([s],{type:"application/json"}),t=URL.createObjectURL(l),r=document.createElement("a");r.href=t,r.download=`medijourney_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(s){console.error("Export failed",s)}},Ae=async s=>{const l=s.target.files?.[0];if(!l)return;R("Importing...");const t=new FileReader;t.onload=async r=>{try{const oe=r.target?.result,Le=await _e(oe);R(`Successfully imported ${Le} reports.`),pe(),de().then(Oe=>X(Oe.length))}catch{R("Failed to import database. Invalid format.")}},t.readAsText(l)},re=a.useMemo(()=>{const s={};return Object.entries(N).forEach(([l,t])=>{s[t]||(s[t]=[]),s[t].push(l)}),s},[N]),Ie=s=>{const l={...N};delete l[s],B(l)},ie=(s,l)=>{if(!l.trim())return;const t={...N};t[l.trim()]=s,B(t),ae(""),le(null)},Me=!(m||h);return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[Me&&e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl shadow-lg overflow-hidden",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("h3",{className:"text-white font-bold text-lg mb-3 flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"Getting Started with MediJourney"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-xl p-3 border-2 border-white/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-6 h-6 bg-white text-blue-600 rounded-full flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("span",{className:"text-white font-semibold text-sm",children:"Configure AI"})]}),e.jsx("p",{className:"text-white/70 text-xs",children:"Set up your AI provider below"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-6 h-6 bg-white/30 text-white rounded-full flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("span",{className:"text-white/80 font-semibold text-sm",children:"Drive Sync"})]}),e.jsx("p",{className:"text-white/50 text-xs",children:"Optional: Backup to Google Drive"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-6 h-6 bg-white/30 text-white rounded-full flex items-center justify-center font-bold text-sm",children:"3"}),e.jsx("span",{className:"text-white/80 font-semibold text-sm",children:"Add Reports"})]}),e.jsx("p",{className:"text-white/50 text-xs",children:"Upload your medical reports"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-xl p-3 border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-6 h-6 bg-white/30 text-white rounded-full flex items-center justify-center font-bold text-sm",children:"4"}),e.jsx("span",{className:"text-white/80 font-semibold text-sm",children:"Dashboard"})]}),e.jsx("p",{className:"text-white/50 text-xs",children:"View your health insights"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:U&&!Se?e.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${n==="gemini"?"bg-blue-500/20":"bg-green-500/20"}`,children:n==="gemini"?e.jsx(K,{className:"w-5 h-5 text-blue-400"}):e.jsx(P,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-medium",children:"Active AI Configuration"}),e.jsx("h3",{className:"text-white font-bold",children:n==="gemini"?"Google Gemini":"OpenAI / Compatible"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-medium",children:"Model"}),e.jsx("p",{className:"font-mono text-sm text-white",children:(n==="gemini"?c:i)||"Not set"})]}),e.jsxs("button",{onClick:()=>_(!0),className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-1.5",children:[e.jsx(ue,{className:"w-3.5 h-3.5"}),"Edit"]})]}),n==="openai"&&p&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-medium",children:"Endpoint"}),e.jsx("p",{className:"font-mono text-xs text-slate-300 truncate",children:p})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-blue-600"}),"AI & Model Configuration"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Choose your AI provider. Keys are stored locally in your browser."})]}),U&&e.jsx("button",{onClick:()=>_(!1),className:"text-sm text-slate-500 hover:text-slate-700 underline",children:"Cancel"})]})}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),ke()},className:"space-y-6",children:[e.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[e.jsx("button",{type:"button",onClick:()=>q("gemini"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${n==="gemini"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:"Google Gemini"}),e.jsx("button",{type:"button",onClick:()=>q("openai"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${n==="openai"?"bg-white shadow text-green-600":"text-slate-500 hover:text-slate-700"}`,children:"OpenAI / Compatible"})]}),n==="gemini"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Google Gemini API Key"})}),e.jsx("input",{type:"password",value:v,onChange:s=>j(z)(s.target.value),placeholder:"Enter AI Key (AIza...)",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-slate-500"}),"AI Model for Analysis"]}),e.jsx("button",{type:"button",onClick:()=>ne(),disabled:o||!v,className:"text-xs text-blue-600 hover:underline disabled:opacity-50",children:o?"Fetching...":"Refresh List"})]}),e.jsxs("select",{value:c,onChange:s=>L(s.target.value),disabled:o,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white",children:[o&&e.jsx("option",{children:"Loading models..."}),b.length>0?b.map(s=>e.jsxs("option",{value:s.name,children:[s.displayName," (",s.name,")"]},s.name)):e.jsxs("optgroup",{label:"Recommended",children:[e.jsx("option",{value:"gemini-2.0-flash",children:"Gemini 2.0 Flash (Fastest)"}),e.jsx("option",{value:"gemini-1.5-pro",children:"Gemini 1.5 Pro"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Provider Preset"})}),e.jsx("select",{value:x,onChange:s=>{const l=s.target.value;se(l);const t=$.find(r=>r.id===l);t&&(t.id!=="custom"?j(w)(t.baseUrl):j(w)(""))},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm bg-white",children:$.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["API Key ",x!=="openai"&&"(Optional for local)"]})}),e.jsx("input",{type:"password",value:O,onChange:s=>j(H)(s.target.value),placeholder:x==="openai"?"sk-...":"Optional for local models",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm font-mono"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Base URL"})}),e.jsx("input",{type:"text",value:p,onChange:s=>j(w)(s.target.value),placeholder:"https://api.openai.com/v1",disabled:x!=="custom",className:`w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm font-mono ${x!=="custom"?"bg-slate-100 text-slate-500":""}`}),x==="custom"&&e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Leave default for OpenAI. Change for Groq, DeepSeek, local LLMs."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-slate-500"}),"AI Model Name"]}),e.jsx("button",{type:"button",onClick:()=>ne(),disabled:o,className:"text-xs text-green-600 hover:underline disabled:opacity-50",children:o?"Fetching...":"Fetch Models"})]}),b.length>0?e.jsx("select",{value:i,onChange:s=>y(s.target.value),disabled:o,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm bg-white",children:b.map(s=>e.jsx("option",{value:s.name,children:s.displayName},s.name))}):e.jsx("input",{type:"text",value:i,onChange:s=>y(s.target.value),placeholder:"e.g. gpt-4o, llama-3.3-70b-versatile",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),Q&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"w-4 h-4 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-red-700",children:"Connection Failed"}),e.jsx("p",{className:"text-[10px] text-red-600 mt-0.5",children:Q})]})]})}),G&&e.jsxs("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-green-600"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Connected successfully! ",b.length," model(s) available."]})]})]}),e.jsxs("div",{className:"bg-sky-50 p-3 rounded-lg border border-sky-200",children:[e.jsxs("h4",{className:"flex items-center gap-1 text-xs font-bold text-sky-800 mb-1",children:[e.jsx(J,{className:"w-3 h-3"})," PDF Support Enabled"]}),e.jsx("p",{className:"text-[10px] text-sky-700",children:"We automatically convert ALL pages of your PDF to images before sending to OpenAI. You will be shown a preview to confirm before analysis."})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("label",{className:"text-sm font-medium text-slate-700 flex items-center gap-2 mb-2",children:[e.jsx(De,{className:"w-4 h-4 text-slate-500"}),"PDF Processing Mode"]}),e.jsxs("select",{value:D,onChange:s=>Y(s.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm bg-white",children:[e.jsx("option",{value:"page-by-page",children:"ðŸ“„ Page by Page (Recommended)"}),e.jsx("option",{value:"batch",children:"ðŸ“š All Pages at Once"})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:D==="page-by-page"?"Analyzes each page separately with progress indicator. Better for multi-page reports.":"Sends all pages in one request. Faster but may hit token limits on large PDFs."})]})]}),e.jsx("div",{className:"pt-2 flex flex-col gap-2",children:(n==="gemini"&&c||n==="openai"&&G&&i)&&e.jsxs("button",{type:"submit",className:`w-full sm:w-auto px-6 py-2 rounded-lg text-white font-medium transition-colors flex items-center justify-center gap-2
                      ${F?"bg-green-600":"bg-slate-900 hover:bg-slate-800"}
                  `,children:[F?e.jsx(V,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"}),F?"Configuration Saved":"Save Configuration"]})})]})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-sky-600"}),"Google Drive Sync"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Backup or restore your data to a private folder in your Drive."})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"relative group/disabled",children:e.jsxs("button",{disabled:!0,className:"w-full flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 opacity-50 cursor-not-allowed",children:[e.jsx("div",{className:"p-3 rounded-full bg-slate-200",children:e.jsx(ce,{className:"w-6 h-6 text-slate-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block font-semibold text-slate-500",children:"Backup to Drive"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Coming Soon (Under Privacy Review)"})]})]})}),e.jsx("div",{className:"relative group/disabled",children:e.jsxs("button",{disabled:!0,className:"w-full flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50 opacity-50 cursor-not-allowed",children:[e.jsx("div",{className:"p-3 rounded-full bg-slate-200",children:e.jsx(me,{className:"w-6 h-6 text-slate-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"block font-semibold text-slate-500",children:"Restore from Drive"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Coming Soon (Under Privacy Review)"})]})]})})]}),f&&e.jsxs("div",{className:`mt-4 text-sm p-3 rounded-lg flex items-start gap-2 ${f.includes("Error")||f.includes("missing")?"bg-red-50 text-red-700":"bg-sky-50 text-sky-800"}`,children:[e.jsx("div",{className:"mt-0.5",children:f.includes("Error")?e.jsx(J,{className:"w-4 h-4"}):e.jsx(V,{className:"w-4 h-4"})}),f]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5 text-purple-600"}),"Local File Management"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Manual import/export using JSON files."})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-700",children:"Database Status"}),e.jsxs("div",{className:"text-sm text-slate-500",children:[ye," Reports Stored"]})]}),e.jsx("div",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded font-medium",children:"Active"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:Ce,className:"flex items-center justify-center gap-2 px-4 py-3 border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors text-slate-700 font-medium",children:[e.jsx(me,{className:"w-4 h-4"}),"Download JSON Backup"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".json",onChange:Ae,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors text-slate-700 font-medium",children:[e.jsx(ce,{className:"w-4 h-4"}),"Upload JSON Backup"]})]})]}),E&&e.jsx("div",{className:`text-sm p-3 rounded-lg ${E.includes("Success")?"bg-green-50 text-green-700":"bg-slate-100 text-slate-600"}`,children:E})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-indigo-600"}),"Test Name Mappings"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Manage how different names from reports are grouped into a single Standard Name."})]}),e.jsx("div",{className:"p-6 border-b border-slate-100 bg-slate-50",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full flex-shrink-0",children:e.jsx(K,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold text-blue-900 mb-1",children:"AI Smart Grouping Fixer"}),e.jsx("p",{className:"text-xs text-blue-700 mb-3 leading-relaxed",children:'If you see duplicate groups for the same test (e.g. "Vitamin D" and "Vit D3" separate), use this tool to re-analyze and merge them.'}),e.jsxs("button",{onClick:()=>{window.confirm("This will re-analyze all test names to consolidate groups. Continue?")&&be()},disabled:C,className:"text-xs px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[C?e.jsx(he,{className:"w-3 h-3 animate-spin"}):e.jsx(he,{className:"w-3 h-3"}),C?"Fixing...":"Fix Test Groupings"]})]})]})}),e.jsx("div",{className:"divide-y divide-slate-100 max-h-[500px] overflow-y-auto",children:Object.keys(re).length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"bg-indigo-50 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(xe,{className:"w-6 h-6 text-indigo-400"})}),e.jsx("p",{className:"text-slate-600 font-medium mb-1",children:"No Mappings Yet"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-xs mx-auto",children:"Test name mappings are automatically generated after AI analyzes your reports. Upload a medical report to get started."})]}):Object.entries(re).sort((s,l)=>s[0].localeCompare(l[0])).map(([s,l])=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[s,e.jsxs("span",{className:"text-[10px] bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded-full",children:[l.length," aliases"]})]}),e.jsxs("button",{onClick:()=>le(te===s?null:s),className:"text-xs flex items-center text-blue-600 hover:underline",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"})," Add Alias"]})]}),te===s&&e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:T,onChange:t=>ae(t.target.value),placeholder:"Enter alias (e.g. 'T3')",className:"text-xs flex-1 px-3 py-1.5 border border-slate-300 rounded",onKeyDown:t=>t.key==="Enter"&&ie(s,T)}),e.jsx("button",{onClick:()=>ie(s,T),className:"text-xs bg-blue-600 text-white px-3 py-1 rounded",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(t=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-white border border-slate-200 text-xs text-slate-600 group",children:[t,e.jsx("button",{onClick:()=>Ie(t),className:"ml-1.5 text-slate-300 hover:text-red-500",title:"Unmap this alias",children:e.jsx(Ee,{className:"w-3 h-3"})})]},t))})]},s))})]})]})};export{ss as Settings};
