const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Settings-DbEBEfLp.js","./save-7iMKO7BE.js","./download-CKg2Lf7z.js","./ReportDetail-Dcyx8J9f.js","./PrintReportModal-DyEeGWGg.js"])))=>i.map(i=>d[i]);
var uT=t=>{throw TypeError(t)};var Bv=(t,e,n)=>e.has(t)||uT("Cannot "+n);var Et=(t,e,n)=>(Bv(t,e,"read from private field"),n?n.call(t):e.get(t)),_r=(t,e,n)=>e.has(t)?uT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ri=(t,e,n,i)=>(Bv(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),xr=(t,e,n)=>(Bv(t,e,"access private method"),n);var cT=(t,e,n,i)=>({set _(r){ri(t,e,r,n)},get _(){return Et(t,e,i)}});function b3(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Mle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Br(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fv={exports:{}},qu={};var dT;function A3(){if(dT)return qu;dT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return qu.Fragment=e,qu.jsx=n,qu.jsxs=n,qu}var fT;function S3(){return fT||(fT=1,Fv.exports=A3()),Fv.exports}var D=S3(),zv={exports:{}},Oe={};var hT;function w3(){if(hT)return Oe;hT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function E(L,X,se){this.props=L,this.context=X,this.refs=x,this.updater=se||S}E.prototype.isReactComponent={},E.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=E.prototype;function T(L,X,se){this.props=L,this.context=X,this.refs=x,this.updater=se||S}var N=T.prototype=new C;N.constructor=T,w(N,E.prototype),N.isPureReactComponent=!0;var R=Array.isArray;function I(){}var k={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function z(L,X,se){var ce=se.ref;return{$$typeof:t,type:L,key:X,ref:ce!==void 0?ce:null,props:se}}function V(L,X){return z(L.type,X,L.props)}function G(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function W(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return X[se]})}var oe=/\/+/g;function ae(L,X){return typeof L=="object"&&L!==null&&L.key!=null?W(""+L.key):X.toString(36)}function pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(I,I):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,X,se,ce,Se){var Te=typeof L;(Te==="undefined"||Te==="boolean")&&(L=null);var ge=!1;if(L===null)ge=!0;else switch(Te){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(L.$$typeof){case t:case e:ge=!0;break;case f:return ge=L._init,F(ge(L._payload),X,se,ce,Se)}}if(ge)return Se=Se(L),ge=ce===""?"."+ae(L,0):ce,R(Se)?(se="",ge!=null&&(se=ge.replace(oe,"$&/")+"/"),F(Se,X,se,"",function(Ne){return Ne})):Se!=null&&(G(Se)&&(Se=V(Se,se+(Se.key==null||L&&L.key===Se.key?"":(""+Se.key).replace(oe,"$&/")+"/")+ge)),X.push(Se)),1;ge=0;var lt=ce===""?".":ce+":";if(R(L))for(var Z=0;Z<L.length;Z++)ce=L[Z],Te=lt+ae(ce,Z),ge+=F(ce,X,se,Te,Se);else if(Z=y(L),typeof Z=="function")for(L=Z.call(L),Z=0;!(ce=L.next()).done;)ce=ce.value,Te=lt+ae(ce,Z++),ge+=F(ce,X,se,Te,Se);else if(Te==="object"){if(typeof L.then=="function")return F(pe(L),X,se,ce,Se);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ge}function j(L,X,se){if(L==null)return L;var ce=[],Se=0;return F(L,ce,"","",function(Te){return X.call(se,Te,Se++)}),ce}function re(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var ue=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Pe={map:j,forEach:function(L,X,se){j(L,function(){X.apply(this,arguments)},se)},count:function(L){var X=0;return j(L,function(){X++}),X},toArray:function(L){return j(L,function(X){return X})||[]},only:function(L){if(!G(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Oe.Activity=p,Oe.Children=Pe,Oe.Component=E,Oe.Fragment=n,Oe.Profiler=r,Oe.PureComponent=T,Oe.StrictMode=i,Oe.Suspense=c,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return k.H.useMemoCache(L)}},Oe.cache=function(L){return function(){return L.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(L,X,se){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ce=w({},L.props),Se=L.key;if(X!=null)for(Te in X.key!==void 0&&(Se=""+X.key),X)!B.call(X,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&X.ref===void 0||(ce[Te]=X[Te]);var Te=arguments.length-2;if(Te===1)ce.children=se;else if(1<Te){for(var ge=Array(Te),lt=0;lt<Te;lt++)ge[lt]=arguments[lt+2];ce.children=ge}return z(L.type,Se,ce)},Oe.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},Oe.createElement=function(L,X,se){var ce,Se={},Te=null;if(X!=null)for(ce in X.key!==void 0&&(Te=""+X.key),X)B.call(X,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Se[ce]=X[ce]);var ge=arguments.length-2;if(ge===1)Se.children=se;else if(1<ge){for(var lt=Array(ge),Z=0;Z<ge;Z++)lt[Z]=arguments[Z+2];Se.children=lt}if(L&&L.defaultProps)for(ce in ge=L.defaultProps,ge)Se[ce]===void 0&&(Se[ce]=ge[ce]);return z(L,Te,Se)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(L){return{$$typeof:l,render:L}},Oe.isValidElement=G,Oe.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:re}},Oe.memo=function(L,X){return{$$typeof:d,type:L,compare:X===void 0?null:X}},Oe.startTransition=function(L){var X=k.T,se={};k.T=se;try{var ce=L(),Se=k.S;Se!==null&&Se(se,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(I,ue)}catch(Te){ue(Te)}finally{X!==null&&se.types!==null&&(X.types=se.types),k.T=X}},Oe.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Oe.use=function(L){return k.H.use(L)},Oe.useActionState=function(L,X,se){return k.H.useActionState(L,X,se)},Oe.useCallback=function(L,X){return k.H.useCallback(L,X)},Oe.useContext=function(L){return k.H.useContext(L)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(L,X){return k.H.useDeferredValue(L,X)},Oe.useEffect=function(L,X){return k.H.useEffect(L,X)},Oe.useEffectEvent=function(L){return k.H.useEffectEvent(L)},Oe.useId=function(){return k.H.useId()},Oe.useImperativeHandle=function(L,X,se){return k.H.useImperativeHandle(L,X,se)},Oe.useInsertionEffect=function(L,X){return k.H.useInsertionEffect(L,X)},Oe.useLayoutEffect=function(L,X){return k.H.useLayoutEffect(L,X)},Oe.useMemo=function(L,X){return k.H.useMemo(L,X)},Oe.useOptimistic=function(L,X){return k.H.useOptimistic(L,X)},Oe.useReducer=function(L,X,se){return k.H.useReducer(L,X,se)},Oe.useRef=function(L){return k.H.useRef(L)},Oe.useState=function(L){return k.H.useState(L)},Oe.useSyncExternalStore=function(L,X,se){return k.H.useSyncExternalStore(L,X,se)},Oe.useTransition=function(){return k.H.useTransition()},Oe.version="19.2.3",Oe}var pT;function Bl(){return pT||(pT=1,zv.exports=w3()),zv.exports}var M=Bl();const Ir=Br(M),_3=b3({__proto__:null,default:Ir},[M]);var Hv={exports:{}},Vu={},Gv={exports:{}},qv={};var mT;function x3(){return mT||(mT=1,(function(t){function e(F,j){var re=F.length;F.push(j);e:for(;0<re;){var ue=re-1>>>1,Pe=F[ue];if(0<r(Pe,j))F[ue]=j,F[re]=Pe,re=ue;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var j=F[0],re=F.pop();if(re!==j){F[0]=re;e:for(var ue=0,Pe=F.length,L=Pe>>>1;ue<L;){var X=2*(ue+1)-1,se=F[X],ce=X+1,Se=F[ce];if(0>r(se,re))ce<Pe&&0>r(Se,se)?(F[ue]=Se,F[ce]=re,ue=ce):(F[ue]=se,F[X]=re,ue=X);else if(ce<Pe&&0>r(Se,re))F[ue]=Se,F[ce]=re,ue=ce;else break e}}return j}function r(F,j){var re=F.sortIndex-j.sortIndex;return re!==0?re:F.id-j.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,p=null,g=3,y=!1,S=!1,w=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(F){for(var j=n(d);j!==null;){if(j.callback===null)i(d);else if(j.startTime<=F)i(d),j.sortIndex=j.expirationTime,e(c,j);else break;j=n(d)}}function R(F){if(w=!1,N(F),!S)if(n(c)!==null)S=!0,I||(I=!0,W());else{var j=n(d);j!==null&&pe(R,j.startTime-F)}}var I=!1,k=-1,B=5,z=-1;function V(){return x?!0:!(t.unstable_now()-z<B)}function G(){if(x=!1,I){var F=t.unstable_now();z=F;var j=!0;try{e:{S=!1,w&&(w=!1,C(k),k=-1),y=!0;var re=g;try{t:{for(N(F),p=n(c);p!==null&&!(p.expirationTime>F&&V());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,g=p.priorityLevel;var Pe=ue(p.expirationTime<=F);if(F=t.unstable_now(),typeof Pe=="function"){p.callback=Pe,N(F),j=!0;break t}p===n(c)&&i(c),N(F)}else i(c);p=n(c)}if(p!==null)j=!0;else{var L=n(d);L!==null&&pe(R,L.startTime-F),j=!1}}break e}finally{p=null,g=re,y=!1}j=void 0}}finally{j?W():I=!1}}}var W;if(typeof T=="function")W=function(){T(G)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ae=oe.port2;oe.port1.onmessage=G,W=function(){ae.postMessage(null)}}else W=function(){E(G,0)};function pe(F,j){k=E(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var j=3;break;default:j=g}var re=g;g=j;try{return F()}finally{g=re}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var re=g;g=F;try{return j()}finally{g=re}},t.unstable_scheduleCallback=function(F,j,re){var ue=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ue+re:ue):re=ue,F){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=re+Pe,F={id:f++,callback:j,priorityLevel:F,startTime:re,expirationTime:Pe,sortIndex:-1},re>ue?(F.sortIndex=re,e(d,F),n(c)===null&&F===n(d)&&(w?(C(k),k=-1):w=!0,pe(R,re-ue))):(F.sortIndex=Pe,e(c,F),S||y||(S=!0,I||(I=!0,W()))),F},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(F){var j=g;return function(){var re=g;g=j;try{return F.apply(this,arguments)}finally{g=re}}}})(qv)),qv}var gT;function E3(){return gT||(gT=1,Gv.exports=x3()),Gv.exports}var Vv={exports:{}},Dn={};var vT;function T3(){if(vT)return Dn;vT=1;var t=Bl();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Dn.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(c,d,null,f)},Dn.flushSync=function(c){var d=a.T,f=i.p;try{if(a.T=null,i.p=2,c)return c()}finally{a.T=d,i.p=f,i.d.f()}},Dn.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},Dn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Dn.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):f==="script"&&i.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Dn.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},Dn.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);i.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Dn.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=l(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},Dn.requestFormReset=function(c){i.d.r(c)},Dn.unstable_batchedUpdates=function(c,d){return c(d)},Dn.useFormState=function(c,d,f){return a.H.useFormState(c,d,f)},Dn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Dn.version="19.2.3",Dn}var yT;function _I(){if(yT)return Vv.exports;yT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vv.exports=T3(),Vv.exports}var bT;function C3(){if(bT)return Vu;bT=1;var t=E3(),e=Bl(),n=_I();function i(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(s(o)!==o)throw Error(i(188))}function d(o){var u=o.alternate;if(!u){if(u=s(o),u===null)throw Error(i(188));return u!==o?null:o}for(var h=o,m=u;;){var A=h.return;if(A===null)break;var _=A.alternate;if(_===null){if(m=A.return,m!==null){h=m;continue}break}if(A.child===_.child){for(_=A.child;_;){if(_===h)return c(A),o;if(_===m)return c(A),u;_=_.sibling}throw Error(i(188))}if(h.return!==m.return)h=A,m=_;else{for(var P=!1,O=A.child;O;){if(O===h){P=!0,h=A,m=_;break}if(O===m){P=!0,m=A,h=_;break}O=O.sibling}if(!P){for(O=_.child;O;){if(O===h){P=!0,h=_,m=A;break}if(O===m){P=!0,m=_,h=A;break}O=O.sibling}if(!P)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function W(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var oe=Symbol.for("react.client.reference");function ae(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===oe?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList";case z:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case T:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case N:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return u=o.displayName||null,u!==null?u:ae(o.type)||"Memo";case B:u=o._payload,o=o._init;try{return ae(o(u))}catch{}}return null}var pe=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ue=[],Pe=-1;function L(o){return{current:o}}function X(o){0>Pe||(o.current=ue[Pe],ue[Pe]=null,Pe--)}function se(o,u){Pe++,ue[Pe]=o.current,o.current=u}var ce=L(null),Se=L(null),Te=L(null),ge=L(null);function lt(o,u){switch(se(Te,u),se(Se,o),se(ce,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?IE(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=IE(u),o=DE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}X(ce),se(ce,o)}function Z(){X(ce),X(Se),X(Te)}function Ne(o){o.memoizedState!==null&&se(ge,o);var u=ce.current,h=DE(u,o.type);u!==h&&(se(Se,o),se(ce,h))}function Ie(o){Se.current===o&&(X(ce),X(Se)),ge.current===o&&(X(ge),Fu._currentValue=re)}var le,ut;function ze(o){if(le===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);le=u&&u[1]||"",ut=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+o+ut}var Ft=!1;function zt(o,u){if(!o||Ft)return"";Ft=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var K=J}Reflect.construct(o,[],ie)}else{try{ie.call()}catch(J){K=J}o.call(ie.prototype)}}else{try{throw Error()}catch(J){K=J}(ie=o())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),P=_[0],O=_[1];if(P&&O){var U=P.split(`
`),Y=O.split(`
`);for(A=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;A<Y.length&&!Y[A].includes("DetermineComponentFrameRoot");)A++;if(m===U.length||A===Y.length)for(m=U.length-1,A=Y.length-1;1<=m&&0<=A&&U[m]!==Y[A];)A--;for(;1<=m&&0<=A;m--,A--)if(U[m]!==Y[A]){if(m!==1||A!==1)do if(m--,A--,0>A||U[m]!==Y[A]){var ee=`
`+U[m].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=m&&0<=A);break}}}finally{Ft=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?ze(h):""}function Qi(o,u){switch(o.tag){case 26:case 27:case 5:return ze(o.type);case 16:return ze("Lazy");case 13:return o.child!==u&&u!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return zt(o.type,!1);case 11:return zt(o.type.render,!1);case 1:return zt(o.type,!0);case 31:return ze("Activity");default:return""}}function mr(o){try{var u="",h=null;do u+=Qi(o,h),h=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Wl=Object.prototype.hasOwnProperty,Jl=t.unstable_scheduleCallback,vo=t.unstable_cancelCallback,Wn=t.unstable_shouldYield,Sm=t.unstable_requestPaint,Rt=t.unstable_now,gr=t.unstable_getCurrentPriorityLevel,Ql=t.unstable_ImmediatePriority,hd=t.unstable_UserBlockingPriority,yo=t.unstable_NormalPriority,wm=t.unstable_LowPriority,pd=t.unstable_IdlePriority,_m=t.log,xm=t.unstable_setDisableYieldValue,Aa=null,Fn=null;function vr(o){if(typeof _m=="function"&&xm(o),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(Aa,o)}catch{}}var zn=Math.clz32?Math.clz32:Cm,Em=Math.log,Tm=Math.LN2;function Cm(o){return o>>>=0,o===0?32:31-(Em(o)/Tm|0)|0}var bo=256,Ao=262144,Is=4194304;function Hr(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Sa(o,u,h){var m=o.pendingLanes;if(m===0)return 0;var A=0,_=o.suspendedLanes,P=o.pingedLanes;o=o.warmLanes;var O=m&134217727;return O!==0?(m=O&~_,m!==0?A=Hr(m):(P&=O,P!==0?A=Hr(P):h||(h=O&~o,h!==0&&(A=Hr(h))))):(O=m&~_,O!==0?A=Hr(O):P!==0?A=Hr(P):h||(h=m&~o,h!==0&&(A=Hr(h)))),A===0?0:u!==0&&u!==A&&(u&_)===0&&(_=A&-A,h=u&-u,_>=h||_===32&&(h&4194048)!==0)?u:A}function Zi(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function md(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function So(){var o=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),o}function Zl(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function yr(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Mm(o,u,h,m,A,_){var P=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var O=o.entanglements,U=o.expirationTimes,Y=o.hiddenUpdates;for(h=P&~h;0<h;){var ee=31-zn(h),ie=1<<ee;O[ee]=0,U[ee]=-1;var K=Y[ee];if(K!==null)for(Y[ee]=null,ee=0;ee<K.length;ee++){var J=K[ee];J!==null&&(J.lane&=-536870913)}h&=~ie}m!==0&&te(o,m,0),_!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=_&~(P&~u))}function te(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-zn(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function de(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var m=31-zn(h),A=1<<m;A&u|o[m]&u&&(o[m]|=u),h&=~A}}function we(o,u){var h=u&-u;return h=(h&42)!==0?1:fe(h),(h&(o.suspendedLanes|u))!==0?0:h}function fe(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ee(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ve(){var o=j.p;return o!==0?o:(o=window.event,o===void 0?32:nT(o.type))}function wt(o,u){var h=j.p;try{return j.p=o,u()}finally{j.p=h}}var _t=Math.random().toString(36).slice(2),Dt="__reactFiber$"+_t,Jn="__reactProps$"+_t,wo="__reactContainer$"+_t,Pm="__reactEvents$"+_t,lB="__reactListeners$"+_t,uB="__reactHandles$"+_t,bw="__reactResources$"+_t,eu="__reactMarker$"+_t;function Rm(o){delete o[Dt],delete o[Jn],delete o[Pm],delete o[lB],delete o[uB]}function _o(o){var u=o[Dt];if(u)return u;for(var h=o.parentNode;h;){if(u=h[wo]||h[Dt]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=zE(o);o!==null;){if(h=o[Dt])return h;o=zE(o)}return u}o=h,h=o.parentNode}return null}function xo(o){if(o=o[Dt]||o[wo]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function tu(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(i(33))}function Eo(o){var u=o[bw];return u||(u=o[bw]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function un(o){o[eu]=!0}var Aw=new Set,Sw={};function wa(o,u){To(o,u),To(o+"Capture",u)}function To(o,u){for(Sw[o]=u,o=0;o<u.length;o++)Aw.add(u[o])}var cB=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ww={},_w={};function dB(o){return Wl.call(_w,o)?!0:Wl.call(ww,o)?!1:cB.test(o)?_w[o]=!0:(ww[o]=!0,!1)}function gd(o,u,h){if(dB(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function vd(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function Gr(o,u,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+m)}}function Ci(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xw(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function fB(o,u,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,_=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return A.call(this)},set:function(P){h=""+P,_.call(this,P)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Nm(o){if(!o._valueTracker){var u=xw(o)?"checked":"value";o._valueTracker=fB(o,u,""+o[u])}}function Ew(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return o&&(m=xw(o)?o.checked?"true":"false":o.value),o=m,o!==h?(u.setValue(o),!0):!1}function yd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var hB=/[\n"\\]/g;function Mi(o){return o.replace(hB,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Im(o,u,h,m,A,_,P,O){o.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.type=P:o.removeAttribute("type"),u!=null?P==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Ci(u)):o.value!==""+Ci(u)&&(o.value=""+Ci(u)):P!=="submit"&&P!=="reset"||o.removeAttribute("value"),u!=null?Dm(o,P,Ci(u)):h!=null?Dm(o,P,Ci(h)):m!=null&&o.removeAttribute("value"),A==null&&_!=null&&(o.defaultChecked=!!_),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+Ci(O):o.removeAttribute("name")}function Tw(o,u,h,m,A,_,P,O){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),u!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Nm(o);return}h=h!=null?""+Ci(h):"",u=u!=null?""+Ci(u):h,O||u===o.value||(o.value=u),o.defaultValue=u}m=m??A,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=O?o.checked:!!m,o.defaultChecked=!!m,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(o.name=P),Nm(o)}function Dm(o,u,h){u==="number"&&yd(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Co(o,u,h,m){if(o=o.options,u){u={};for(var A=0;A<h.length;A++)u["$"+h[A]]=!0;for(h=0;h<o.length;h++)A=u.hasOwnProperty("$"+o[h].value),o[h].selected!==A&&(o[h].selected=A),A&&m&&(o[h].defaultSelected=!0)}else{for(h=""+Ci(h),u=null,A=0;A<o.length;A++){if(o[A].value===h){o[A].selected=!0,m&&(o[A].defaultSelected=!0);return}u!==null||o[A].disabled||(u=o[A])}u!==null&&(u.selected=!0)}}function Cw(o,u,h){if(u!=null&&(u=""+Ci(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+Ci(h):""}function Mw(o,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(i(92));if(pe(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=Ci(u),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),Nm(o)}function Mo(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var pB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pw(o,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,h):typeof h!="number"||h===0||pB.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function Rw(o,u,h){if(u!=null&&typeof u!="object")throw Error(i(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var A in u)m=u[A],u.hasOwnProperty(A)&&h[A]!==m&&Pw(o,A,m)}else for(var _ in u)u.hasOwnProperty(_)&&Pw(o,_,u[_])}function Om(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bd(o){return gB.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function qr(){}var km=null;function Lm(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Po=null,Ro=null;function Nw(o){var u=xo(o);if(u&&(o=u.stateNode)){var h=o[Jn]||null;e:switch(o=u.stateNode,u.type){case"input":if(Im(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Mi(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==o&&m.form===o.form){var A=m[Jn]||null;if(!A)throw Error(i(90));Im(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===o.form&&Ew(m)}break e;case"textarea":Cw(o,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Co(o,!!h.multiple,u,!1)}}}var Um=!1;function Iw(o,u,h){if(Um)return o(u,h);Um=!0;try{var m=o(u);return m}finally{if(Um=!1,(Po!==null||Ro!==null)&&(of(),Po&&(u=Po,o=Ro,Ro=Po=null,Nw(u),o)))for(u=0;u<o.length;u++)Nw(o[u])}}function nu(o,u){var h=o.stateNode;if(h===null)return null;var m=h[Jn]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,u,typeof h));return h}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bm=!1;if(Vr)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){Bm=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{Bm=!1}var Ds=null,Fm=null,Ad=null;function Dw(){if(Ad)return Ad;var o,u=Fm,h=u.length,m,A="value"in Ds?Ds.value:Ds.textContent,_=A.length;for(o=0;o<h&&u[o]===A[o];o++);var P=h-o;for(m=1;m<=P&&u[h-m]===A[_-m];m++);return Ad=A.slice(o,1<m?1-m:void 0)}function Sd(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function wd(){return!0}function Ow(){return!1}function Qn(o){function u(h,m,A,_,P){this._reactName=h,this._targetInst=A,this.type=m,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(h=o[O],this[O]=h?h(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wd:Ow,this.isPropagationStopped=Ow,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),u}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=Qn(_a),ru=p({},_a,{view:0,detail:0}),vB=Qn(ru),zm,Hm,su,xd=p({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qm,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==su&&(su&&o.type==="mousemove"?(zm=o.screenX-su.screenX,Hm=o.screenY-su.screenY):Hm=zm=0,su=o),zm)},movementY:function(o){return"movementY"in o?o.movementY:Hm}}),kw=Qn(xd),yB=p({},xd,{dataTransfer:0}),bB=Qn(yB),AB=p({},ru,{relatedTarget:0}),Gm=Qn(AB),SB=p({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),wB=Qn(SB),_B=p({},_a,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xB=Qn(_B),EB=p({},_a,{data:0}),Lw=Qn(EB),TB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PB(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=MB[o])?!!u[o]:!1}function qm(){return PB}var RB=p({},ru,{key:function(o){if(o.key){var u=TB[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Sd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?CB[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qm,charCode:function(o){return o.type==="keypress"?Sd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Sd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),NB=Qn(RB),IB=p({},xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uw=Qn(IB),DB=p({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qm}),OB=Qn(DB),kB=p({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),LB=Qn(kB),UB=p({},xd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),BB=Qn(UB),FB=p({},_a,{newState:0,oldState:0}),zB=Qn(FB),HB=[9,13,27,32],Vm=Vr&&"CompositionEvent"in window,au=null;Vr&&"documentMode"in document&&(au=document.documentMode);var GB=Vr&&"TextEvent"in window&&!au,Bw=Vr&&(!Vm||au&&8<au&&11>=au),Fw=" ",zw=!1;function Hw(o,u){switch(o){case"keyup":return HB.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var No=!1;function qB(o,u){switch(o){case"compositionend":return Gw(u);case"keypress":return u.which!==32?null:(zw=!0,Fw);case"textInput":return o=u.data,o===Fw&&zw?null:o;default:return null}}function VB(o,u){if(No)return o==="compositionend"||!Vm&&Hw(o,u)?(o=Dw(),Ad=Fm=Ds=null,No=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Bw&&u.locale!=="ko"?null:u.data;default:return null}}var jB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qw(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!jB[o.type]:u==="textarea"}function Vw(o,u,h,m){Po?Ro?Ro.push(m):Ro=[m]:Po=m,u=pf(u,"onChange"),0<u.length&&(h=new _d("onChange","change",null,h,m),o.push({event:h,listeners:u}))}var ou=null,lu=null;function $B(o){TE(o,0)}function Ed(o){var u=tu(o);if(Ew(u))return o}function jw(o,u){if(o==="change")return u}var $w=!1;if(Vr){var jm;if(Vr){var $m="oninput"in document;if(!$m){var Yw=document.createElement("div");Yw.setAttribute("oninput","return;"),$m=typeof Yw.oninput=="function"}jm=$m}else jm=!1;$w=jm&&(!document.documentMode||9<document.documentMode)}function Xw(){ou&&(ou.detachEvent("onpropertychange",Kw),lu=ou=null)}function Kw(o){if(o.propertyName==="value"&&Ed(lu)){var u=[];Vw(u,lu,o,Lm(o)),Iw($B,u)}}function YB(o,u,h){o==="focusin"?(Xw(),ou=u,lu=h,ou.attachEvent("onpropertychange",Kw)):o==="focusout"&&Xw()}function XB(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ed(lu)}function KB(o,u){if(o==="click")return Ed(u)}function WB(o,u){if(o==="input"||o==="change")return Ed(u)}function JB(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var di=typeof Object.is=="function"?Object.is:JB;function uu(o,u){if(di(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var A=h[m];if(!Wl.call(u,A)||!di(o[A],u[A]))return!1}return!0}function Ww(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Jw(o,u){var h=Ww(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=u&&m>=u)return{node:h,offset:u-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Ww(h)}}function Qw(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Qw(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Zw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=yd(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=yd(o.document)}return u}function Ym(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var QB=Vr&&"documentMode"in document&&11>=document.documentMode,Io=null,Xm=null,cu=null,Km=!1;function e_(o,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Km||Io==null||Io!==yd(m)||(m=Io,"selectionStart"in m&&Ym(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),cu&&uu(cu,m)||(cu=m,m=pf(Xm,"onSelect"),0<m.length&&(u=new _d("onSelect","select",null,u,h),o.push({event:u,listeners:m}),u.target=Io)))}function xa(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var Do={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionrun:xa("Transition","TransitionRun"),transitionstart:xa("Transition","TransitionStart"),transitioncancel:xa("Transition","TransitionCancel"),transitionend:xa("Transition","TransitionEnd")},Wm={},t_={};Vr&&(t_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Ea(o){if(Wm[o])return Wm[o];if(!Do[o])return o;var u=Do[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in t_)return Wm[o]=u[h];return o}var n_=Ea("animationend"),i_=Ea("animationiteration"),r_=Ea("animationstart"),ZB=Ea("transitionrun"),eF=Ea("transitionstart"),tF=Ea("transitioncancel"),s_=Ea("transitionend"),a_=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function er(o,u){a_.set(o,u),wa(u,[o])}var Td=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Pi=[],Oo=0,Qm=0;function Cd(){for(var o=Oo,u=Qm=Oo=0;u<o;){var h=Pi[u];Pi[u++]=null;var m=Pi[u];Pi[u++]=null;var A=Pi[u];Pi[u++]=null;var _=Pi[u];if(Pi[u++]=null,m!==null&&A!==null){var P=m.pending;P===null?A.next=A:(A.next=P.next,P.next=A),m.pending=A}_!==0&&o_(h,A,_)}}function Md(o,u,h,m){Pi[Oo++]=o,Pi[Oo++]=u,Pi[Oo++]=h,Pi[Oo++]=m,Qm|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Zm(o,u,h,m){return Md(o,u,h,m),Pd(o)}function Ta(o,u){return Md(o,null,null,u),Pd(o)}function o_(o,u,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var A=!1,_=o.return;_!==null;)_.childLanes|=h,m=_.alternate,m!==null&&(m.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(A=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,A&&u!==null&&(A=31-zn(h),o=_.hiddenUpdates,m=o[A],m===null?o[A]=[u]:m.push(u),u.lane=h|536870912),_):null}function Pd(o){if(50<Iu)throw Iu=0,lv=null,Error(i(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var ko={};function nF(o,u,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(o,u,h,m){return new nF(o,u,h,m)}function eg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function jr(o,u){var h=o.alternate;return h===null?(h=fi(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function l_(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Rd(o,u,h,m,A,_){var P=0;if(m=o,typeof o=="function")eg(o)&&(P=1);else if(typeof o=="string")P=o3(o,h,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case z:return o=fi(31,h,u,A),o.elementType=z,o.lanes=_,o;case w:return Ca(h.children,A,_,u);case x:P=8,A|=24;break;case E:return o=fi(12,h,u,A|2),o.elementType=E,o.lanes=_,o;case R:return o=fi(13,h,u,A),o.elementType=R,o.lanes=_,o;case I:return o=fi(19,h,u,A),o.elementType=I,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case T:P=10;break e;case C:P=9;break e;case N:P=11;break e;case k:P=14;break e;case B:P=16,m=null;break e}P=29,h=Error(i(130,o===null?"null":typeof o,"")),m=null}return u=fi(P,h,u,A),u.elementType=o,u.type=m,u.lanes=_,u}function Ca(o,u,h,m){return o=fi(7,o,m,u),o.lanes=h,o}function tg(o,u,h){return o=fi(6,o,null,u),o.lanes=h,o}function u_(o){var u=fi(18,null,null,0);return u.stateNode=o,u}function ng(o,u,h){return u=fi(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var c_=new WeakMap;function Ri(o,u){if(typeof o=="object"&&o!==null){var h=c_.get(o);return h!==void 0?h:(u={value:o,source:u,stack:mr(u)},c_.set(o,u),u)}return{value:o,source:u,stack:mr(u)}}var Lo=[],Uo=0,Nd=null,du=0,Ni=[],Ii=0,Os=null,br=1,Ar="";function $r(o,u){Lo[Uo++]=du,Lo[Uo++]=Nd,Nd=o,du=u}function d_(o,u,h){Ni[Ii++]=br,Ni[Ii++]=Ar,Ni[Ii++]=Os,Os=o;var m=br;o=Ar;var A=32-zn(m)-1;m&=~(1<<A),h+=1;var _=32-zn(u)+A;if(30<_){var P=A-A%5;_=(m&(1<<P)-1).toString(32),m>>=P,A-=P,br=1<<32-zn(u)+A|h<<A|m,Ar=_+o}else br=1<<_|h<<A|m,Ar=o}function ig(o){o.return!==null&&($r(o,1),d_(o,1,0))}function rg(o){for(;o===Nd;)Nd=Lo[--Uo],Lo[Uo]=null,du=Lo[--Uo],Lo[Uo]=null;for(;o===Os;)Os=Ni[--Ii],Ni[Ii]=null,Ar=Ni[--Ii],Ni[Ii]=null,br=Ni[--Ii],Ni[Ii]=null}function f_(o,u){Ni[Ii++]=br,Ni[Ii++]=Ar,Ni[Ii++]=Os,br=u.id,Ar=u.overflow,Os=o}var An=null,yt=null,Ye=!1,ks=null,Di=!1,sg=Error(i(519));function Ls(o){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fu(Ri(u,o)),sg}function h_(o){var u=o.stateNode,h=o.type,m=o.memoizedProps;switch(u[Dt]=o,u[Jn]=m,h){case"dialog":qe("cancel",u),qe("close",u);break;case"iframe":case"object":case"embed":qe("load",u);break;case"video":case"audio":for(h=0;h<Ou.length;h++)qe(Ou[h],u);break;case"source":qe("error",u);break;case"img":case"image":case"link":qe("error",u),qe("load",u);break;case"details":qe("toggle",u);break;case"input":qe("invalid",u),Tw(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":qe("invalid",u);break;case"textarea":qe("invalid",u),Mw(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||RE(u.textContent,h)?(m.popover!=null&&(qe("beforetoggle",u),qe("toggle",u)),m.onScroll!=null&&qe("scroll",u),m.onScrollEnd!=null&&qe("scrollend",u),m.onClick!=null&&(u.onclick=qr),u=!0):u=!1,u||Ls(o,!0)}function p_(o){for(An=o.return;An;)switch(An.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:An=An.return}}function Bo(o){if(o!==An)return!1;if(!Ye)return p_(o),Ye=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||_v(o.type,o.memoizedProps)),h=!h),h&&yt&&Ls(o),p_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));yt=FE(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));yt=FE(o)}else u===27?(u=yt,Ws(o.type)?(o=Mv,Mv=null,yt=o):yt=u):yt=An?ki(o.stateNode.nextSibling):null;return!0}function Ma(){yt=An=null,Ye=!1}function ag(){var o=ks;return o!==null&&(ni===null?ni=o:ni.push.apply(ni,o),ks=null),o}function fu(o){ks===null?ks=[o]:ks.push(o)}var og=L(null),Pa=null,Yr=null;function Us(o,u,h){se(og,u._currentValue),u._currentValue=h}function Xr(o){o._currentValue=og.current,X(og)}function lg(o,u,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===h)break;o=o.return}}function ug(o,u,h,m){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var _=A.dependencies;if(_!==null){var P=A.child;_=_.firstContext;e:for(;_!==null;){var O=_;_=A;for(var U=0;U<u.length;U++)if(O.context===u[U]){_.lanes|=h,O=_.alternate,O!==null&&(O.lanes|=h),lg(_.return,h,o),m||(P=null);break e}_=O.next}}else if(A.tag===18){if(P=A.return,P===null)throw Error(i(341));P.lanes|=h,_=P.alternate,_!==null&&(_.lanes|=h),lg(P,h,o),P=null}else P=A.child;if(P!==null)P.return=A;else for(P=A;P!==null;){if(P===o){P=null;break}if(A=P.sibling,A!==null){A.return=P.return,P=A;break}P=P.return}A=P}}function Fo(o,u,h,m){o=null;for(var A=u,_=!1;A!==null;){if(!_){if((A.flags&524288)!==0)_=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var P=A.alternate;if(P===null)throw Error(i(387));if(P=P.memoizedProps,P!==null){var O=A.type;di(A.pendingProps.value,P.value)||(o!==null?o.push(O):o=[O])}}else if(A===ge.current){if(P=A.alternate,P===null)throw Error(i(387));P.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(Fu):o=[Fu])}A=A.return}o!==null&&ug(u,o,h,m),u.flags|=262144}function Id(o){for(o=o.firstContext;o!==null;){if(!di(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ra(o){Pa=o,Yr=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Sn(o){return m_(Pa,o)}function Dd(o,u){return Pa===null&&Ra(o),m_(o,u)}function m_(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Yr===null){if(o===null)throw Error(i(308));Yr=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Yr=Yr.next=u;return h}var iF=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},rF=t.unstable_scheduleCallback,sF=t.unstable_NormalPriority,jt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cg(){return{controller:new iF,data:new Map,refCount:0}}function hu(o){o.refCount--,o.refCount===0&&rF(sF,function(){o.controller.abort()})}var pu=null,dg=0,zo=0,Ho=null;function aF(o,u){if(pu===null){var h=pu=[];dg=0,zo=pv(),Ho={status:"pending",value:void 0,then:function(m){h.push(m)}}}return dg++,u.then(g_,g_),u}function g_(){if(--dg===0&&pu!==null){Ho!==null&&(Ho.status="fulfilled");var o=pu;pu=null,zo=0,Ho=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function oF(o,u){var h=[],m={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var A=0;A<h.length;A++)(0,h[A])(u)},function(A){for(m.status="rejected",m.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),m}var v_=F.S;F.S=function(o,u){eE=Rt(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&aF(o,u),v_!==null&&v_(o,u)};var Na=L(null);function fg(){var o=Na.current;return o!==null?o:pt.pooledCache}function Od(o,u){u===null?se(Na,Na.current):se(Na,u.pool)}function y_(){var o=fg();return o===null?null:{parent:jt._currentValue,pool:o}}var Go=Error(i(460)),hg=Error(i(474)),kd=Error(i(542)),Ld={then:function(){}};function b_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function A_(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(qr,qr),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,w_(o),o;default:if(typeof u.status=="string")u.then(qr,qr);else{if(o=pt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=m}},function(m){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,w_(o),o}throw Da=u,Go}}function Ia(o){try{var u=o._init;return u(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Da=h,Go):h}}var Da=null;function S_(){if(Da===null)throw Error(i(459));var o=Da;return Da=null,o}function w_(o){if(o===Go||o===kd)throw Error(i(483))}var qo=null,mu=0;function Ud(o){var u=mu;return mu+=1,qo===null&&(qo=[]),A_(qo,o,u)}function gu(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Bd(o,u){throw u.$$typeof===g?Error(i(525)):(o=Object.prototype.toString.call(u),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function __(o){function u(q,H){if(o){var $=q.deletions;$===null?(q.deletions=[H],q.flags|=16):$.push(H)}}function h(q,H){if(!o)return null;for(;H!==null;)u(q,H),H=H.sibling;return null}function m(q){for(var H=new Map;q!==null;)q.key!==null?H.set(q.key,q):H.set(q.index,q),q=q.sibling;return H}function A(q,H){return q=jr(q,H),q.index=0,q.sibling=null,q}function _(q,H,$){return q.index=$,o?($=q.alternate,$!==null?($=$.index,$<H?(q.flags|=67108866,H):$):(q.flags|=67108866,H)):(q.flags|=1048576,H)}function P(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function O(q,H,$,ne){return H===null||H.tag!==6?(H=tg($,q.mode,ne),H.return=q,H):(H=A(H,$),H.return=q,H)}function U(q,H,$,ne){var Ce=$.type;return Ce===w?ee(q,H,$.props.children,ne,$.key):H!==null&&(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Ia(Ce)===H.type)?(H=A(H,$.props),gu(H,$),H.return=q,H):(H=Rd($.type,$.key,$.props,null,q.mode,ne),gu(H,$),H.return=q,H)}function Y(q,H,$,ne){return H===null||H.tag!==4||H.stateNode.containerInfo!==$.containerInfo||H.stateNode.implementation!==$.implementation?(H=ng($,q.mode,ne),H.return=q,H):(H=A(H,$.children||[]),H.return=q,H)}function ee(q,H,$,ne,Ce){return H===null||H.tag!==7?(H=Ca($,q.mode,ne,Ce),H.return=q,H):(H=A(H,$),H.return=q,H)}function ie(q,H,$){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=tg(""+H,q.mode,$),H.return=q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return $=Rd(H.type,H.key,H.props,null,q.mode,$),gu($,H),$.return=q,$;case S:return H=ng(H,q.mode,$),H.return=q,H;case B:return H=Ia(H),ie(q,H,$)}if(pe(H)||W(H))return H=Ca(H,q.mode,$,null),H.return=q,H;if(typeof H.then=="function")return ie(q,Ud(H),$);if(H.$$typeof===T)return ie(q,Dd(q,H),$);Bd(q,H)}return null}function K(q,H,$,ne){var Ce=H!==null?H.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ce!==null?null:O(q,H,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case y:return $.key===Ce?U(q,H,$,ne):null;case S:return $.key===Ce?Y(q,H,$,ne):null;case B:return $=Ia($),K(q,H,$,ne)}if(pe($)||W($))return Ce!==null?null:ee(q,H,$,ne,null);if(typeof $.then=="function")return K(q,H,Ud($),ne);if($.$$typeof===T)return K(q,H,Dd(q,$),ne);Bd(q,$)}return null}function J(q,H,$,ne,Ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get($)||null,O(H,q,""+ne,Ce);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return q=q.get(ne.key===null?$:ne.key)||null,U(H,q,ne,Ce);case S:return q=q.get(ne.key===null?$:ne.key)||null,Y(H,q,ne,Ce);case B:return ne=Ia(ne),J(q,H,$,ne,Ce)}if(pe(ne)||W(ne))return q=q.get($)||null,ee(H,q,ne,Ce,null);if(typeof ne.then=="function")return J(q,H,$,Ud(ne),Ce);if(ne.$$typeof===T)return J(q,H,$,Dd(H,ne),Ce);Bd(H,ne)}return null}function be(q,H,$,ne){for(var Ce=null,We=null,_e=H,Fe=H=0,$e=null;_e!==null&&Fe<$.length;Fe++){_e.index>Fe?($e=_e,_e=null):$e=_e.sibling;var Je=K(q,_e,$[Fe],ne);if(Je===null){_e===null&&(_e=$e);break}o&&_e&&Je.alternate===null&&u(q,_e),H=_(Je,H,Fe),We===null?Ce=Je:We.sibling=Je,We=Je,_e=$e}if(Fe===$.length)return h(q,_e),Ye&&$r(q,Fe),Ce;if(_e===null){for(;Fe<$.length;Fe++)_e=ie(q,$[Fe],ne),_e!==null&&(H=_(_e,H,Fe),We===null?Ce=_e:We.sibling=_e,We=_e);return Ye&&$r(q,Fe),Ce}for(_e=m(_e);Fe<$.length;Fe++)$e=J(_e,q,Fe,$[Fe],ne),$e!==null&&(o&&$e.alternate!==null&&_e.delete($e.key===null?Fe:$e.key),H=_($e,H,Fe),We===null?Ce=$e:We.sibling=$e,We=$e);return o&&_e.forEach(function(ta){return u(q,ta)}),Ye&&$r(q,Fe),Ce}function Re(q,H,$,ne){if($==null)throw Error(i(151));for(var Ce=null,We=null,_e=H,Fe=H=0,$e=null,Je=$.next();_e!==null&&!Je.done;Fe++,Je=$.next()){_e.index>Fe?($e=_e,_e=null):$e=_e.sibling;var ta=K(q,_e,Je.value,ne);if(ta===null){_e===null&&(_e=$e);break}o&&_e&&ta.alternate===null&&u(q,_e),H=_(ta,H,Fe),We===null?Ce=ta:We.sibling=ta,We=ta,_e=$e}if(Je.done)return h(q,_e),Ye&&$r(q,Fe),Ce;if(_e===null){for(;!Je.done;Fe++,Je=$.next())Je=ie(q,Je.value,ne),Je!==null&&(H=_(Je,H,Fe),We===null?Ce=Je:We.sibling=Je,We=Je);return Ye&&$r(q,Fe),Ce}for(_e=m(_e);!Je.done;Fe++,Je=$.next())Je=J(_e,q,Fe,Je.value,ne),Je!==null&&(o&&Je.alternate!==null&&_e.delete(Je.key===null?Fe:Je.key),H=_(Je,H,Fe),We===null?Ce=Je:We.sibling=Je,We=Je);return o&&_e.forEach(function(y3){return u(q,y3)}),Ye&&$r(q,Fe),Ce}function ft(q,H,$,ne){if(typeof $=="object"&&$!==null&&$.type===w&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case y:e:{for(var Ce=$.key;H!==null;){if(H.key===Ce){if(Ce=$.type,Ce===w){if(H.tag===7){h(q,H.sibling),ne=A(H,$.props.children),ne.return=q,q=ne;break e}}else if(H.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===B&&Ia(Ce)===H.type){h(q,H.sibling),ne=A(H,$.props),gu(ne,$),ne.return=q,q=ne;break e}h(q,H);break}else u(q,H);H=H.sibling}$.type===w?(ne=Ca($.props.children,q.mode,ne,$.key),ne.return=q,q=ne):(ne=Rd($.type,$.key,$.props,null,q.mode,ne),gu(ne,$),ne.return=q,q=ne)}return P(q);case S:e:{for(Ce=$.key;H!==null;){if(H.key===Ce)if(H.tag===4&&H.stateNode.containerInfo===$.containerInfo&&H.stateNode.implementation===$.implementation){h(q,H.sibling),ne=A(H,$.children||[]),ne.return=q,q=ne;break e}else{h(q,H);break}else u(q,H);H=H.sibling}ne=ng($,q.mode,ne),ne.return=q,q=ne}return P(q);case B:return $=Ia($),ft(q,H,$,ne)}if(pe($))return be(q,H,$,ne);if(W($)){if(Ce=W($),typeof Ce!="function")throw Error(i(150));return $=Ce.call($),Re(q,H,$,ne)}if(typeof $.then=="function")return ft(q,H,Ud($),ne);if($.$$typeof===T)return ft(q,H,Dd(q,$),ne);Bd(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,H!==null&&H.tag===6?(h(q,H.sibling),ne=A(H,$),ne.return=q,q=ne):(h(q,H),ne=tg($,q.mode,ne),ne.return=q,q=ne),P(q)):h(q,H)}return function(q,H,$,ne){try{mu=0;var Ce=ft(q,H,$,ne);return qo=null,Ce}catch(_e){if(_e===Go||_e===kd)throw _e;var We=fi(29,_e,null,q.mode);return We.lanes=ne,We.return=q,We}}}var Oa=__(!0),x_=__(!1),Bs=!1;function pg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mg(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Fs(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function zs(o,u,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(et&2)!==0){var A=m.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),m.pending=u,u=Pd(o),o_(o,null,h),u}return Md(o,m,u,h),Pd(o)}function vu(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,de(o,h)}}function gg(o,u){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var A=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?A=_=P:_=_.next=P,h=h.next}while(h!==null);_===null?A=_=u:_=_.next=u}else A=_=u;h={baseState:m.baseState,firstBaseUpdate:A,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var vg=!1;function yu(){if(vg){var o=Ho;if(o!==null)throw o}}function bu(o,u,h,m){vg=!1;var A=o.updateQueue;Bs=!1;var _=A.firstBaseUpdate,P=A.lastBaseUpdate,O=A.shared.pending;if(O!==null){A.shared.pending=null;var U=O,Y=U.next;U.next=null,P===null?_=Y:P.next=Y,P=U;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,O=ee.lastBaseUpdate,O!==P&&(O===null?ee.firstBaseUpdate=Y:O.next=Y,ee.lastBaseUpdate=U))}if(_!==null){var ie=A.baseState;P=0,ee=Y=U=null,O=_;do{var K=O.lane&-536870913,J=K!==O.lane;if(J?(je&K)===K:(m&K)===K){K!==0&&K===zo&&(vg=!0),ee!==null&&(ee=ee.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var be=o,Re=O;K=u;var ft=h;switch(Re.tag){case 1:if(be=Re.payload,typeof be=="function"){ie=be.call(ft,ie,K);break e}ie=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Re.payload,K=typeof be=="function"?be.call(ft,ie,K):be,K==null)break e;ie=p({},ie,K);break e;case 2:Bs=!0}}K=O.callback,K!==null&&(o.flags|=64,J&&(o.flags|=8192),J=A.callbacks,J===null?A.callbacks=[K]:J.push(K))}else J={lane:K,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ee===null?(Y=ee=J,U=ie):ee=ee.next=J,P|=K;if(O=O.next,O===null){if(O=A.shared.pending,O===null)break;J=O,O=J.next,J.next=null,A.lastBaseUpdate=J,A.shared.pending=null}}while(!0);ee===null&&(U=ie),A.baseState=U,A.firstBaseUpdate=Y,A.lastBaseUpdate=ee,_===null&&(A.shared.lanes=0),js|=P,o.lanes=P,o.memoizedState=ie}}function E_(o,u){if(typeof o!="function")throw Error(i(191,o));o.call(u)}function T_(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)E_(h[o],u)}var Vo=L(null),Fd=L(0);function C_(o,u){o=is,se(Fd,o),se(Vo,u),is=o|u.baseLanes}function yg(){se(Fd,is),se(Vo,Vo.current)}function bg(){is=Fd.current,X(Vo),X(Fd)}var hi=L(null),Oi=null;function Hs(o){var u=o.alternate;se(Ht,Ht.current&1),se(hi,o),Oi===null&&(u===null||Vo.current!==null||u.memoizedState!==null)&&(Oi=o)}function Ag(o){se(Ht,Ht.current),se(hi,o),Oi===null&&(Oi=o)}function M_(o){o.tag===22?(se(Ht,Ht.current),se(hi,o),Oi===null&&(Oi=o)):Gs()}function Gs(){se(Ht,Ht.current),se(hi,hi.current)}function pi(o){X(hi),Oi===o&&(Oi=null),X(Ht)}var Ht=L(0);function zd(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Tv(h)||Cv(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Kr=0,Be=null,ct=null,$t=null,Hd=!1,jo=!1,ka=!1,Gd=0,Au=0,$o=null,lF=0;function Ot(){throw Error(i(321))}function Sg(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!di(o[h],u[h]))return!1;return!0}function wg(o,u,h,m,A,_){return Kr=_,Be=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,F.H=o===null||o.memoizedState===null?dx:Ug,ka=!1,_=h(m,A),ka=!1,jo&&(_=R_(u,h,m,A)),P_(o),_}function P_(o){F.H=_u;var u=ct!==null&&ct.next!==null;if(Kr=0,$t=ct=Be=null,Hd=!1,Au=0,$o=null,u)throw Error(i(300));o===null||Yt||(o=o.dependencies,o!==null&&Id(o)&&(Yt=!0))}function R_(o,u,h,m){Be=o;var A=0;do{if(jo&&($o=null),Au=0,jo=!1,25<=A)throw Error(i(301));if(A+=1,$t=ct=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=fx,_=u(h,m)}while(jo);return _}function uF(){var o=F.H,u=o.useState()[0];return u=typeof u.then=="function"?Su(u):u,o=o.useState()[0],(ct!==null?ct.memoizedState:null)!==o&&(Be.flags|=1024),u}function _g(){var o=Gd!==0;return Gd=0,o}function xg(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function Eg(o){if(Hd){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Hd=!1}Kr=0,$t=ct=Be=null,jo=!1,Au=Gd=0,$o=null}function Hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Be.memoizedState=$t=o:$t=$t.next=o,$t}function Gt(){if(ct===null){var o=Be.alternate;o=o!==null?o.memoizedState:null}else o=ct.next;var u=$t===null?Be.memoizedState:$t.next;if(u!==null)$t=u,ct=o;else{if(o===null)throw Be.alternate===null?Error(i(467)):Error(i(310));ct=o,o={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},$t===null?Be.memoizedState=$t=o:$t=$t.next=o}return $t}function qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(o){var u=Au;return Au+=1,$o===null&&($o=[]),o=A_($o,o,u),u=Be,($t===null?u.memoizedState:$t.next)===null&&(u=u.alternate,F.H=u===null||u.memoizedState===null?dx:Ug),o}function Vd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Su(o);if(o.$$typeof===T)return Sn(o)}throw Error(i(438,String(o)))}function Tg(o){var u=null,h=Be.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=Be.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=qd(),Be.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),m=0;m<o;m++)h[m]=V;return u.index++,h}function Wr(o,u){return typeof u=="function"?u(o):u}function jd(o){var u=Gt();return Cg(u,ct,o)}function Cg(o,u,h){var m=o.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var A=o.baseQueue,_=m.pending;if(_!==null){if(A!==null){var P=A.next;A.next=_.next,_.next=P}u.baseQueue=A=_,m.pending=null}if(_=o.baseState,A===null)o.memoizedState=_;else{u=A.next;var O=P=null,U=null,Y=u,ee=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(je&ie)===ie:(Kr&ie)===ie){var K=Y.revertLane;if(K===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===zo&&(ee=!0);else if((Kr&K)===K){Y=Y.next,K===zo&&(ee=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=ie,P=_):U=U.next=ie,Be.lanes|=K,js|=K;ie=Y.action,ka&&h(_,ie),_=Y.hasEagerState?Y.eagerState:h(_,ie)}else K={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(O=U=K,P=_):U=U.next=K,Be.lanes|=ie,js|=ie;Y=Y.next}while(Y!==null&&Y!==u);if(U===null?P=_:U.next=O,!di(_,o.memoizedState)&&(Yt=!0,ee&&(h=Ho,h!==null)))throw h;o.memoizedState=_,o.baseState=P,o.baseQueue=U,m.lastRenderedState=_}return A===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Mg(o){var u=Gt(),h=u.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,A=h.pending,_=u.memoizedState;if(A!==null){h.pending=null;var P=A=A.next;do _=o(_,P.action),P=P.next;while(P!==A);di(_,u.memoizedState)||(Yt=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),h.lastRenderedState=_}return[_,m]}function N_(o,u,h){var m=Be,A=Gt(),_=Ye;if(_){if(h===void 0)throw Error(i(407));h=h()}else h=u();var P=!di((ct||A).memoizedState,h);if(P&&(A.memoizedState=h,Yt=!0),A=A.queue,Ng(O_.bind(null,m,A,o),[o]),A.getSnapshot!==u||P||$t!==null&&$t.memoizedState.tag&1){if(m.flags|=2048,Yo(9,{destroy:void 0},D_.bind(null,m,A,h,u),null),pt===null)throw Error(i(349));_||(Kr&127)!==0||I_(m,u,h)}return h}function I_(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=Be.updateQueue,u===null?(u=qd(),Be.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function D_(o,u,h,m){u.value=h,u.getSnapshot=m,k_(u)&&L_(o)}function O_(o,u,h){return h(function(){k_(u)&&L_(o)})}function k_(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!di(o,h)}catch{return!0}}function L_(o){var u=Ta(o,2);u!==null&&ii(u,o,2)}function Pg(o){var u=Hn();if(typeof o=="function"){var h=o;if(o=h(),ka){vr(!0);try{h()}finally{vr(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:o},u}function U_(o,u,h,m){return o.baseState=h,Cg(o,ct,typeof m=="function"?m:Wr)}function cF(o,u,h,m,A){if(Xd(o))throw Error(i(485));if(o=u.action,o!==null){var _={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){_.listeners.push(P)}};F.T!==null?h(!0):_.isTransition=!1,m(_),h=u.pending,h===null?(_.next=u.pending=_,B_(u,_)):(_.next=h.next,u.pending=h.next=_)}}function B_(o,u){var h=u.action,m=u.payload,A=o.state;if(u.isTransition){var _=F.T,P={};F.T=P;try{var O=h(A,m),U=F.S;U!==null&&U(P,O),F_(o,u,O)}catch(Y){Rg(o,u,Y)}finally{_!==null&&P.types!==null&&(_.types=P.types),F.T=_}}else try{_=h(A,m),F_(o,u,_)}catch(Y){Rg(o,u,Y)}}function F_(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){z_(o,u,m)},function(m){return Rg(o,u,m)}):z_(o,u,h)}function z_(o,u,h){u.status="fulfilled",u.value=h,H_(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,B_(o,h)))}function Rg(o,u,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,H_(u),u=u.next;while(u!==m)}o.action=null}function H_(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function G_(o,u){return u}function q_(o,u){if(Ye){var h=pt.formState;if(h!==null){e:{var m=Be;if(Ye){if(yt){t:{for(var A=yt,_=Di;A.nodeType!==8;){if(!_){A=null;break t}if(A=ki(A.nextSibling),A===null){A=null;break t}}_=A.data,A=_==="F!"||_==="F"?A:null}if(A){yt=ki(A.nextSibling),m=A.data==="F!";break e}}Ls(m)}m=!1}m&&(u=h[0])}}return h=Hn(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G_,lastRenderedState:u},h.queue=m,h=lx.bind(null,Be,m),m.dispatch=h,m=Pg(!1),_=Lg.bind(null,Be,!1,m.queue),m=Hn(),A={state:u,dispatch:null,action:o,pending:null},m.queue=A,h=cF.bind(null,Be,A,_,h),A.dispatch=h,m.memoizedState=o,[u,h,!1]}function V_(o){var u=Gt();return j_(u,ct,o)}function j_(o,u,h){if(u=Cg(o,u,G_)[0],o=jd(Wr)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Su(u)}catch(P){throw P===Go?kd:P}else m=u;u=Gt();var A=u.queue,_=A.dispatch;return h!==u.memoizedState&&(Be.flags|=2048,Yo(9,{destroy:void 0},dF.bind(null,A,h),null)),[m,_,o]}function dF(o,u){o.action=u}function $_(o){var u=Gt(),h=ct;if(h!==null)return j_(u,h,o);Gt(),u=u.memoizedState,h=Gt();var m=h.queue.dispatch;return h.memoizedState=o,[u,m,!1]}function Yo(o,u,h,m){return o={tag:o,create:h,deps:m,inst:u,next:null},u=Be.updateQueue,u===null&&(u=qd(),Be.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,u.lastEffect=o),o}function Y_(){return Gt().memoizedState}function $d(o,u,h,m){var A=Hn();Be.flags|=o,A.memoizedState=Yo(1|u,{destroy:void 0},h,m===void 0?null:m)}function Yd(o,u,h,m){var A=Gt();m=m===void 0?null:m;var _=A.memoizedState.inst;ct!==null&&m!==null&&Sg(m,ct.memoizedState.deps)?A.memoizedState=Yo(u,_,h,m):(Be.flags|=o,A.memoizedState=Yo(1|u,_,h,m))}function X_(o,u){$d(8390656,8,o,u)}function Ng(o,u){Yd(2048,8,o,u)}function fF(o){Be.flags|=4;var u=Be.updateQueue;if(u===null)u=qd(),Be.updateQueue=u,u.events=[o];else{var h=u.events;h===null?u.events=[o]:h.push(o)}}function K_(o){var u=Gt().memoizedState;return fF({ref:u,nextImpl:o}),function(){if((et&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function W_(o,u){return Yd(4,2,o,u)}function J_(o,u){return Yd(4,4,o,u)}function Q_(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Z_(o,u,h){h=h!=null?h.concat([o]):null,Yd(4,4,Q_.bind(null,u,o),h)}function Ig(){}function ex(o,u){var h=Gt();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&Sg(u,m[1])?m[0]:(h.memoizedState=[o,u],o)}function tx(o,u){var h=Gt();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&Sg(u,m[1]))return m[0];if(m=o(),ka){vr(!0);try{o()}finally{vr(!1)}}return h.memoizedState=[m,u],m}function Dg(o,u,h){return h===void 0||(Kr&1073741824)!==0&&(je&261930)===0?o.memoizedState=u:(o.memoizedState=h,o=nE(),Be.lanes|=o,js|=o,h)}function nx(o,u,h,m){return di(h,u)?h:Vo.current!==null?(o=Dg(o,h,m),di(o,u)||(Yt=!0),o):(Kr&42)===0||(Kr&1073741824)!==0&&(je&261930)===0?(Yt=!0,o.memoizedState=h):(o=nE(),Be.lanes|=o,js|=o,u)}function ix(o,u,h,m,A){var _=j.p;j.p=_!==0&&8>_?_:8;var P=F.T,O={};F.T=O,Lg(o,!1,u,h);try{var U=A(),Y=F.S;if(Y!==null&&Y(O,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=oF(U,m);wu(o,u,ee,vi(o))}else wu(o,u,m,vi(o))}catch(ie){wu(o,u,{then:function(){},status:"rejected",reason:ie},vi())}finally{j.p=_,P!==null&&O.types!==null&&(P.types=O.types),F.T=P}}function hF(){}function Og(o,u,h,m){if(o.tag!==5)throw Error(i(476));var A=rx(o).queue;ix(o,A,u,re,h===null?hF:function(){return sx(o),h(m)})}function rx(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:re},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function sx(o){var u=rx(o);u.next===null&&(u=o.alternate.memoizedState),wu(o,u.next.queue,{},vi())}function kg(){return Sn(Fu)}function ax(){return Gt().memoizedState}function ox(){return Gt().memoizedState}function pF(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=vi();o=Fs(h);var m=zs(u,o,h);m!==null&&(ii(m,u,h),vu(m,u,h)),u={cache:cg()},o.payload=u;return}u=u.return}}function mF(o,u,h){var m=vi();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Xd(o)?ux(u,h):(h=Zm(o,u,h,m),h!==null&&(ii(h,o,m),cx(h,u,m)))}function lx(o,u,h){var m=vi();wu(o,u,h,m)}function wu(o,u,h,m){var A={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Xd(o))ux(u,A);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var P=u.lastRenderedState,O=_(P,h);if(A.hasEagerState=!0,A.eagerState=O,di(O,P))return Md(o,u,A,0),pt===null&&Cd(),!1}catch{}if(h=Zm(o,u,A,m),h!==null)return ii(h,o,m),cx(h,u,m),!0}return!1}function Lg(o,u,h,m){if(m={lane:2,revertLane:pv(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Xd(o)){if(u)throw Error(i(479))}else u=Zm(o,h,m,2),u!==null&&ii(u,o,2)}function Xd(o){var u=o.alternate;return o===Be||u!==null&&u===Be}function ux(o,u){jo=Hd=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function cx(o,u,h){if((h&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,de(o,h)}}var _u={readContext:Sn,use:Vd,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};_u.useEffectEvent=Ot;var dx={readContext:Sn,use:Vd,useCallback:function(o,u){return Hn().memoizedState=[o,u===void 0?null:u],o},useContext:Sn,useEffect:X_,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,$d(4194308,4,Q_.bind(null,u,o),h)},useLayoutEffect:function(o,u){return $d(4194308,4,o,u)},useInsertionEffect:function(o,u){$d(4,2,o,u)},useMemo:function(o,u){var h=Hn();u=u===void 0?null:u;var m=o();if(ka){vr(!0);try{o()}finally{vr(!1)}}return h.memoizedState=[m,u],m},useReducer:function(o,u,h){var m=Hn();if(h!==void 0){var A=h(u);if(ka){vr(!0);try{h(u)}finally{vr(!1)}}}else A=u;return m.memoizedState=m.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},m.queue=o,o=o.dispatch=mF.bind(null,Be,o),[m.memoizedState,o]},useRef:function(o){var u=Hn();return o={current:o},u.memoizedState=o},useState:function(o){o=Pg(o);var u=o.queue,h=lx.bind(null,Be,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:Ig,useDeferredValue:function(o,u){var h=Hn();return Dg(h,o,u)},useTransition:function(){var o=Pg(!1);return o=ix.bind(null,Be,o.queue,!0,!1),Hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var m=Be,A=Hn();if(Ye){if(h===void 0)throw Error(i(407));h=h()}else{if(h=u(),pt===null)throw Error(i(349));(je&127)!==0||I_(m,u,h)}A.memoizedState=h;var _={value:h,getSnapshot:u};return A.queue=_,X_(O_.bind(null,m,_,o),[o]),m.flags|=2048,Yo(9,{destroy:void 0},D_.bind(null,m,_,h,u),null),h},useId:function(){var o=Hn(),u=pt.identifierPrefix;if(Ye){var h=Ar,m=br;h=(m&~(1<<32-zn(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=Gd++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=lF++,u="_"+u+"r_"+h.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:kg,useFormState:q_,useActionState:q_,useOptimistic:function(o){var u=Hn();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Lg.bind(null,Be,!0,h),h.dispatch=u,[o,u]},useMemoCache:Tg,useCacheRefresh:function(){return Hn().memoizedState=pF.bind(null,Be)},useEffectEvent:function(o){var u=Hn(),h={impl:o};return u.memoizedState=h,function(){if((et&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Ug={readContext:Sn,use:Vd,useCallback:ex,useContext:Sn,useEffect:Ng,useImperativeHandle:Z_,useInsertionEffect:W_,useLayoutEffect:J_,useMemo:tx,useReducer:jd,useRef:Y_,useState:function(){return jd(Wr)},useDebugValue:Ig,useDeferredValue:function(o,u){var h=Gt();return nx(h,ct.memoizedState,o,u)},useTransition:function(){var o=jd(Wr)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:Su(o),u]},useSyncExternalStore:N_,useId:ax,useHostTransitionStatus:kg,useFormState:V_,useActionState:V_,useOptimistic:function(o,u){var h=Gt();return U_(h,ct,o,u)},useMemoCache:Tg,useCacheRefresh:ox};Ug.useEffectEvent=K_;var fx={readContext:Sn,use:Vd,useCallback:ex,useContext:Sn,useEffect:Ng,useImperativeHandle:Z_,useInsertionEffect:W_,useLayoutEffect:J_,useMemo:tx,useReducer:Mg,useRef:Y_,useState:function(){return Mg(Wr)},useDebugValue:Ig,useDeferredValue:function(o,u){var h=Gt();return ct===null?Dg(h,o,u):nx(h,ct.memoizedState,o,u)},useTransition:function(){var o=Mg(Wr)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:Su(o),u]},useSyncExternalStore:N_,useId:ax,useHostTransitionStatus:kg,useFormState:$_,useActionState:$_,useOptimistic:function(o,u){var h=Gt();return ct!==null?U_(h,ct,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:Tg,useCacheRefresh:ox};fx.useEffectEvent=K_;function Bg(o,u,h,m){u=o.memoizedState,h=h(m,u),h=h==null?u:p({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Fg={enqueueSetState:function(o,u,h){o=o._reactInternals;var m=vi(),A=Fs(m);A.payload=u,h!=null&&(A.callback=h),u=zs(o,A,m),u!==null&&(ii(u,o,m),vu(u,o,m))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var m=vi(),A=Fs(m);A.tag=1,A.payload=u,h!=null&&(A.callback=h),u=zs(o,A,m),u!==null&&(ii(u,o,m),vu(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=vi(),m=Fs(h);m.tag=2,u!=null&&(m.callback=u),u=zs(o,m,h),u!==null&&(ii(u,o,h),vu(u,o,h))}};function hx(o,u,h,m,A,_,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,_,P):u.prototype&&u.prototype.isPureReactComponent?!uu(h,m)||!uu(A,_):!0}function px(o,u,h,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==o&&Fg.enqueueReplaceState(u,u.state,null)}function La(o,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(o=o.defaultProps){h===u&&(h=p({},h));for(var A in o)h[A]===void 0&&(h[A]=o[A])}return h}function mx(o){Td(o)}function gx(o){console.error(o)}function vx(o){Td(o)}function Kd(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function yx(o,u,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function zg(o,u,h){return h=Fs(h),h.tag=3,h.payload={element:null},h.callback=function(){Kd(o,u)},h}function bx(o){return o=Fs(o),o.tag=3,o}function Ax(o,u,h,m){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var _=m.value;o.payload=function(){return A(_)},o.callback=function(){yx(u,h,m)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(o.callback=function(){yx(u,h,m),typeof A!="function"&&($s===null?$s=new Set([this]):$s.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function gF(o,u,h,m,A){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&Fo(u,h,A,!0),h=hi.current,h!==null){switch(h.tag){case 31:case 13:return Oi===null?lf():h.alternate===null&&kt===0&&(kt=3),h.flags&=-257,h.flags|=65536,h.lanes=A,m===Ld?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),dv(o,m,A)),!1;case 22:return h.flags|=65536,m===Ld?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),dv(o,m,A)),!1}throw Error(i(435,h.tag))}return dv(o,m,A),lf(),!1}if(Ye)return u=hi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,m!==sg&&(o=Error(i(422),{cause:m}),fu(Ri(o,h)))):(m!==sg&&(u=Error(i(423),{cause:m}),fu(Ri(u,h))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,m=Ri(m,h),A=zg(o.stateNode,m,A),gg(o,A),kt!==4&&(kt=2)),!1;var _=Error(i(520),{cause:m});if(_=Ri(_,h),Nu===null?Nu=[_]:Nu.push(_),kt!==4&&(kt=2),u===null)return!0;m=Ri(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=A&-A,h.lanes|=o,o=zg(h.stateNode,m,o),gg(h,o),!1;case 1:if(u=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($s===null||!$s.has(_))))return h.flags|=65536,A&=-A,h.lanes|=A,A=bx(A),Ax(A,o,h,m),gg(h,A),!1}h=h.return}while(h!==null);return!1}var Hg=Error(i(461)),Yt=!1;function wn(o,u,h,m){u.child=o===null?x_(u,null,h,m):Oa(u,o.child,h,m)}function Sx(o,u,h,m,A){h=h.render;var _=u.ref;if("ref"in m){var P={};for(var O in m)O!=="ref"&&(P[O]=m[O])}else P=m;return Ra(u),m=wg(o,u,h,P,_,A),O=_g(),o!==null&&!Yt?(xg(o,u,A),Jr(o,u,A)):(Ye&&O&&ig(u),u.flags|=1,wn(o,u,m,A),u.child)}function wx(o,u,h,m,A){if(o===null){var _=h.type;return typeof _=="function"&&!eg(_)&&_.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=_,_x(o,u,_,m,A)):(o=Rd(h.type,null,m,u,u.mode,A),o.ref=u.ref,o.return=u,u.child=o)}if(_=o.child,!Kg(o,A)){var P=_.memoizedProps;if(h=h.compare,h=h!==null?h:uu,h(P,m)&&o.ref===u.ref)return Jr(o,u,A)}return u.flags|=1,o=jr(_,m),o.ref=u.ref,o.return=u,u.child=o}function _x(o,u,h,m,A){if(o!==null){var _=o.memoizedProps;if(uu(_,m)&&o.ref===u.ref)if(Yt=!1,u.pendingProps=m=_,Kg(o,A))(o.flags&131072)!==0&&(Yt=!0);else return u.lanes=o.lanes,Jr(o,u,A)}return Gg(o,u,h,m,A)}function xx(o,u,h,m){var A=m.children,_=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,o!==null){for(m=u.child=o.child,A=0;m!==null;)A=A|m.lanes|m.childLanes,m=m.sibling;m=A&~_}else m=0,u.child=null;return Ex(o,u,_,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Od(u,_!==null?_.cachePool:null),_!==null?C_(u,_):yg(),M_(u);else return m=u.lanes=536870912,Ex(o,u,_!==null?_.baseLanes|h:h,h,m)}else _!==null?(Od(u,_.cachePool),C_(u,_),Gs(),u.memoizedState=null):(o!==null&&Od(u,null),yg(),Gs());return wn(o,u,A,h),u.child}function xu(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Ex(o,u,h,m,A){var _=fg();return _=_===null?null:{parent:jt._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},o!==null&&Od(u,null),yg(),M_(u),o!==null&&Fo(o,u,m,!0),u.childLanes=A,null}function Wd(o,u){return u=Qd({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Tx(o,u,h){return Oa(u,o.child,null,h),o=Wd(u,u.pendingProps),o.flags|=2,pi(u),u.memoizedState=null,o}function vF(o,u,h){var m=u.pendingProps,A=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ye){if(m.mode==="hidden")return o=Wd(u,m),u.lanes=536870912,xu(null,o);if(Ag(u),(o=yt)?(o=BE(o,Di),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Os!==null?{id:br,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},h=u_(o),h.return=u,u.child=h,An=u,yt=null)):o=null,o===null)throw Ls(u);return u.lanes=536870912,null}return Wd(u,m)}var _=o.memoizedState;if(_!==null){var P=_.dehydrated;if(Ag(u),A)if(u.flags&256)u.flags&=-257,u=Tx(o,u,h);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(i(558));else if(Yt||Fo(o,u,h,!1),A=(h&o.childLanes)!==0,Yt||A){if(m=pt,m!==null&&(P=we(m,h),P!==0&&P!==_.retryLane))throw _.retryLane=P,Ta(o,P),ii(m,o,P),Hg;lf(),u=Tx(o,u,h)}else o=_.treeContext,yt=ki(P.nextSibling),An=u,Ye=!0,ks=null,Di=!1,o!==null&&f_(u,o),u=Wd(u,m),u.flags|=4096;return u}return o=jr(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Jd(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function Gg(o,u,h,m,A){return Ra(u),h=wg(o,u,h,m,void 0,A),m=_g(),o!==null&&!Yt?(xg(o,u,A),Jr(o,u,A)):(Ye&&m&&ig(u),u.flags|=1,wn(o,u,h,A),u.child)}function Cx(o,u,h,m,A,_){return Ra(u),u.updateQueue=null,h=R_(u,m,h,A),P_(o),m=_g(),o!==null&&!Yt?(xg(o,u,_),Jr(o,u,_)):(Ye&&m&&ig(u),u.flags|=1,wn(o,u,h,_),u.child)}function Mx(o,u,h,m,A){if(Ra(u),u.stateNode===null){var _=ko,P=h.contextType;typeof P=="object"&&P!==null&&(_=Sn(P)),_=new h(m,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Fg,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=m,_.state=u.memoizedState,_.refs={},pg(u),P=h.contextType,_.context=typeof P=="object"&&P!==null?Sn(P):ko,_.state=u.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(Bg(u,h,P,m),_.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(P=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),P!==_.state&&Fg.enqueueReplaceState(_,_.state,null),bu(u,m,_,A),yu(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){_=u.stateNode;var O=u.memoizedProps,U=La(h,O);_.props=U;var Y=_.context,ee=h.contextType;P=ko,typeof ee=="object"&&ee!==null&&(P=Sn(ee));var ie=h.getDerivedStateFromProps;ee=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",O=u.pendingProps!==O,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O||Y!==P)&&px(u,_,m,P),Bs=!1;var K=u.memoizedState;_.state=K,bu(u,m,_,A),yu(),Y=u.memoizedState,O||K!==Y||Bs?(typeof ie=="function"&&(Bg(u,h,ie,m),Y=u.memoizedState),(U=Bs||hx(u,h,U,m,K,Y,P))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=Y),_.props=m,_.state=Y,_.context=P,m=U):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{_=u.stateNode,mg(o,u),P=u.memoizedProps,ee=La(h,P),_.props=ee,ie=u.pendingProps,K=_.context,Y=h.contextType,U=ko,typeof Y=="object"&&Y!==null&&(U=Sn(Y)),O=h.getDerivedStateFromProps,(Y=typeof O=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==ie||K!==U)&&px(u,_,m,U),Bs=!1,K=u.memoizedState,_.state=K,bu(u,m,_,A),yu();var J=u.memoizedState;P!==ie||K!==J||Bs||o!==null&&o.dependencies!==null&&Id(o.dependencies)?(typeof O=="function"&&(Bg(u,h,O,m),J=u.memoizedState),(ee=Bs||hx(u,h,ee,m,K,J,U)||o!==null&&o.dependencies!==null&&Id(o.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,J,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,J,U)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===o.memoizedProps&&K===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&K===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=J),_.props=m,_.state=J,_.context=U,m=ee):(typeof _.componentDidUpdate!="function"||P===o.memoizedProps&&K===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&K===o.memoizedState||(u.flags|=1024),m=!1)}return _=m,Jd(o,u),m=(u.flags&128)!==0,_||m?(_=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,o!==null&&m?(u.child=Oa(u,o.child,null,A),u.child=Oa(u,null,h,A)):wn(o,u,h,A),u.memoizedState=_.state,o=u.child):o=Jr(o,u,A),o}function Px(o,u,h,m){return Ma(),u.flags|=256,wn(o,u,h,m),u.child}var qg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vg(o){return{baseLanes:o,cachePool:y_()}}function jg(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=gi),o}function Rx(o,u,h){var m=u.pendingProps,A=!1,_=(u.flags&128)!==0,P;if((P=_)||(P=o!==null&&o.memoizedState===null?!1:(Ht.current&2)!==0),P&&(A=!0,u.flags&=-129),P=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ye){if(A?Hs(u):Gs(),(o=yt)?(o=BE(o,Di),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Os!==null?{id:br,overflow:Ar}:null,retryLane:536870912,hydrationErrors:null},h=u_(o),h.return=u,u.child=h,An=u,yt=null)):o=null,o===null)throw Ls(u);return Cv(o)?u.lanes=32:u.lanes=536870912,null}var O=m.children;return m=m.fallback,A?(Gs(),A=u.mode,O=Qd({mode:"hidden",children:O},A),m=Ca(m,A,h,null),O.return=u,m.return=u,O.sibling=m,u.child=O,m=u.child,m.memoizedState=Vg(h),m.childLanes=jg(o,P,h),u.memoizedState=qg,xu(null,m)):(Hs(u),$g(u,O))}var U=o.memoizedState;if(U!==null&&(O=U.dehydrated,O!==null)){if(_)u.flags&256?(Hs(u),u.flags&=-257,u=Yg(o,u,h)):u.memoizedState!==null?(Gs(),u.child=o.child,u.flags|=128,u=null):(Gs(),O=m.fallback,A=u.mode,m=Qd({mode:"visible",children:m.children},A),O=Ca(O,A,h,null),O.flags|=2,m.return=u,O.return=u,m.sibling=O,u.child=m,Oa(u,o.child,null,h),m=u.child,m.memoizedState=Vg(h),m.childLanes=jg(o,P,h),u.memoizedState=qg,u=xu(null,m));else if(Hs(u),Cv(O)){if(P=O.nextSibling&&O.nextSibling.dataset,P)var Y=P.dgst;P=Y,m=Error(i(419)),m.stack="",m.digest=P,fu({value:m,source:null,stack:null}),u=Yg(o,u,h)}else if(Yt||Fo(o,u,h,!1),P=(h&o.childLanes)!==0,Yt||P){if(P=pt,P!==null&&(m=we(P,h),m!==0&&m!==U.retryLane))throw U.retryLane=m,Ta(o,m),ii(P,o,m),Hg;Tv(O)||lf(),u=Yg(o,u,h)}else Tv(O)?(u.flags|=192,u.child=o.child,u=null):(o=U.treeContext,yt=ki(O.nextSibling),An=u,Ye=!0,ks=null,Di=!1,o!==null&&f_(u,o),u=$g(u,m.children),u.flags|=4096);return u}return A?(Gs(),O=m.fallback,A=u.mode,U=o.child,Y=U.sibling,m=jr(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,Y!==null?O=jr(Y,O):(O=Ca(O,A,h,null),O.flags|=2),O.return=u,m.return=u,m.sibling=O,u.child=m,xu(null,m),m=u.child,O=o.child.memoizedState,O===null?O=Vg(h):(A=O.cachePool,A!==null?(U=jt._currentValue,A=A.parent!==U?{parent:U,pool:U}:A):A=y_(),O={baseLanes:O.baseLanes|h,cachePool:A}),m.memoizedState=O,m.childLanes=jg(o,P,h),u.memoizedState=qg,xu(o.child,m)):(Hs(u),h=o.child,o=h.sibling,h=jr(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,o!==null&&(P=u.deletions,P===null?(u.deletions=[o],u.flags|=16):P.push(o)),u.child=h,u.memoizedState=null,h)}function $g(o,u){return u=Qd({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Qd(o,u){return o=fi(22,o,null,u),o.lanes=0,o}function Yg(o,u,h){return Oa(u,o.child,null,h),o=$g(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Nx(o,u,h){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),lg(o.return,u,h)}function Xg(o,u,h,m,A,_){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:A,treeForkCount:_}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=m,P.tail=h,P.tailMode=A,P.treeForkCount=_)}function Ix(o,u,h){var m=u.pendingProps,A=m.revealOrder,_=m.tail;m=m.children;var P=Ht.current,O=(P&2)!==0;if(O?(P=P&1|2,u.flags|=128):P&=1,se(Ht,P),wn(o,u,m,h),m=Ye?du:0,!O&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Nx(o,h,u);else if(o.tag===19)Nx(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(A){case"forwards":for(h=u.child,A=null;h!==null;)o=h.alternate,o!==null&&zd(o)===null&&(A=h),h=h.sibling;h=A,h===null?(A=u.child,u.child=null):(A=h.sibling,h.sibling=null),Xg(u,!1,A,h,_,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,A=u.child,u.child=null;A!==null;){if(o=A.alternate,o!==null&&zd(o)===null){u.child=A;break}o=A.sibling,A.sibling=h,h=A,A=o}Xg(u,!0,h,null,_,m);break;case"together":Xg(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function Jr(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),js|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(Fo(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(i(153));if(u.child!==null){for(o=u.child,h=jr(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=jr(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function Kg(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Id(o)))}function yF(o,u,h){switch(u.tag){case 3:lt(u,u.stateNode.containerInfo),Us(u,jt,o.memoizedState.cache),Ma();break;case 27:case 5:Ne(u);break;case 4:lt(u,u.stateNode.containerInfo);break;case 10:Us(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Ag(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(Hs(u),u.flags|=128,null):(h&u.child.childLanes)!==0?Rx(o,u,h):(Hs(u),o=Jr(o,u,h),o!==null?o.sibling:null);Hs(u);break;case 19:var A=(o.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(Fo(o,u,h,!1),m=(h&u.childLanes)!==0),A){if(m)return Ix(o,u,h);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),se(Ht,Ht.current),m)break;return null;case 22:return u.lanes=0,xx(o,u,h,u.pendingProps);case 24:Us(u,jt,o.memoizedState.cache)}return Jr(o,u,h)}function Dx(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)Yt=!0;else{if(!Kg(o,h)&&(u.flags&128)===0)return Yt=!1,yF(o,u,h);Yt=(o.flags&131072)!==0}else Yt=!1,Ye&&(u.flags&1048576)!==0&&d_(u,du,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=Ia(u.elementType),u.type=o,typeof o=="function")eg(o)?(m=La(o,m),u.tag=1,u=Mx(null,u,o,m,h)):(u.tag=0,u=Gg(null,u,o,m,h));else{if(o!=null){var A=o.$$typeof;if(A===N){u.tag=11,u=Sx(null,u,o,m,h);break e}else if(A===k){u.tag=14,u=wx(null,u,o,m,h);break e}}throw u=ae(o)||o,Error(i(306,u,""))}}return u;case 0:return Gg(o,u,u.type,u.pendingProps,h);case 1:return m=u.type,A=La(m,u.pendingProps),Mx(o,u,m,A,h);case 3:e:{if(lt(u,u.stateNode.containerInfo),o===null)throw Error(i(387));m=u.pendingProps;var _=u.memoizedState;A=_.element,mg(o,u),bu(u,m,null,h);var P=u.memoizedState;if(m=P.cache,Us(u,jt,m),m!==_.cache&&ug(u,[jt],h,!0),yu(),m=P.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:P.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=Px(o,u,m,h);break e}else if(m!==A){A=Ri(Error(i(424)),u),fu(A),u=Px(o,u,m,h);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,yt=ki(o.firstChild),An=u,Ye=!0,ks=null,Di=!0,h=x_(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ma(),m===A){u=Jr(o,u,h);break e}wn(o,u,m,h)}u=u.child}return u;case 26:return Jd(o,u),o===null?(h=VE(u.type,null,u.pendingProps,null))?u.memoizedState=h:Ye||(h=u.type,o=u.pendingProps,m=mf(Te.current).createElement(h),m[Dt]=u,m[Jn]=o,_n(m,h,o),un(m),u.stateNode=m):u.memoizedState=VE(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ne(u),o===null&&Ye&&(m=u.stateNode=HE(u.type,u.pendingProps,Te.current),An=u,Di=!0,A=yt,Ws(u.type)?(Mv=A,yt=ki(m.firstChild)):yt=A),wn(o,u,u.pendingProps.children,h),Jd(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ye&&((A=m=yt)&&(m=XF(m,u.type,u.pendingProps,Di),m!==null?(u.stateNode=m,An=u,yt=ki(m.firstChild),Di=!1,A=!0):A=!1),A||Ls(u)),Ne(u),A=u.type,_=u.pendingProps,P=o!==null?o.memoizedProps:null,m=_.children,_v(A,_)?m=null:P!==null&&_v(A,P)&&(u.flags|=32),u.memoizedState!==null&&(A=wg(o,u,uF,null,null,h),Fu._currentValue=A),Jd(o,u),wn(o,u,m,h),u.child;case 6:return o===null&&Ye&&((o=h=yt)&&(h=KF(h,u.pendingProps,Di),h!==null?(u.stateNode=h,An=u,yt=null,o=!0):o=!1),o||Ls(u)),null;case 13:return Rx(o,u,h);case 4:return lt(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=Oa(u,null,m,h):wn(o,u,m,h),u.child;case 11:return Sx(o,u,u.type,u.pendingProps,h);case 7:return wn(o,u,u.pendingProps,h),u.child;case 8:return wn(o,u,u.pendingProps.children,h),u.child;case 12:return wn(o,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,Us(u,u.type,m.value),wn(o,u,m.children,h),u.child;case 9:return A=u.type._context,m=u.pendingProps.children,Ra(u),A=Sn(A),m=m(A),u.flags|=1,wn(o,u,m,h),u.child;case 14:return wx(o,u,u.type,u.pendingProps,h);case 15:return _x(o,u,u.type,u.pendingProps,h);case 19:return Ix(o,u,h);case 31:return vF(o,u,h);case 22:return xx(o,u,h,u.pendingProps);case 24:return Ra(u),m=Sn(jt),o===null?(A=fg(),A===null&&(A=pt,_=cg(),A.pooledCache=_,_.refCount++,_!==null&&(A.pooledCacheLanes|=h),A=_),u.memoizedState={parent:m,cache:A},pg(u),Us(u,jt,A)):((o.lanes&h)!==0&&(mg(o,u),bu(u,null,null,h),yu()),A=o.memoizedState,_=u.memoizedState,A.parent!==m?(A={parent:m,cache:m},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),Us(u,jt,m)):(m=_.cache,Us(u,jt,m),m!==A.cache&&ug(u,[jt],h,!0))),wn(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Qr(o){o.flags|=4}function Wg(o,u,h,m,A){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(A&335544128)===A)if(o.stateNode.complete)o.flags|=8192;else if(aE())o.flags|=8192;else throw Da=Ld,hg}else o.flags&=-16777217}function Ox(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!KE(u))if(aE())o.flags|=8192;else throw Da=Ld,hg}function Zd(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?So():536870912,o.lanes|=u,Jo|=u)}function Eu(o,u){if(!Ye)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function bt(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(u)for(var A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags&65011712,m|=A.flags&65011712,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)h|=A.lanes|A.childLanes,m|=A.subtreeFlags,m|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=m,o.childLanes=h,u}function bF(o,u,h){var m=u.pendingProps;switch(rg(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(u),null;case 1:return bt(u),null;case 3:return h=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Xr(jt),Z(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Bo(u)?Qr(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ag())),bt(u),null;case 26:var A=u.type,_=u.memoizedState;return o===null?(Qr(u),_!==null?(bt(u),Ox(u,_)):(bt(u),Wg(u,A,null,m,h))):_?_!==o.memoizedState?(Qr(u),bt(u),Ox(u,_)):(bt(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&Qr(u),bt(u),Wg(u,A,o,m,h)),null;case 27:if(Ie(u),h=Te.current,A=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Qr(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return bt(u),null}o=ce.current,Bo(u)?h_(u):(o=HE(A,m,h),u.stateNode=o,Qr(u))}return bt(u),null;case 5:if(Ie(u),A=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Qr(u);else{if(!m){if(u.stateNode===null)throw Error(i(166));return bt(u),null}if(_=ce.current,Bo(u))h_(u);else{var P=mf(Te.current);switch(_){case 1:_=P.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:_=P.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":_=P.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":_=P.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":_=P.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof m.is=="string"?P.createElement("select",{is:m.is}):P.createElement("select"),m.multiple?_.multiple=!0:m.size&&(_.size=m.size);break;default:_=typeof m.is=="string"?P.createElement(A,{is:m.is}):P.createElement(A)}}_[Dt]=u,_[Jn]=m;e:for(P=u.child;P!==null;){if(P.tag===5||P.tag===6)_.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===u)break e;for(;P.sibling===null;){if(P.return===null||P.return===u)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}u.stateNode=_;e:switch(_n(_,A,m),A){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Qr(u)}}return bt(u),Wg(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,h),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&Qr(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(i(166));if(o=Te.current,Bo(u)){if(o=u.stateNode,h=u.memoizedProps,m=null,A=An,A!==null)switch(A.tag){case 27:case 5:m=A.memoizedProps}o[Dt]=u,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||RE(o.nodeValue,h)),o||Ls(u,!0)}else o=mf(o).createTextNode(m),o[Dt]=u,u.stateNode=o}return bt(u),null;case 31:if(h=u.memoizedState,o===null||o.memoizedState!==null){if(m=Bo(u),h!==null){if(o===null){if(!m)throw Error(i(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Dt]=u}else Ma(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;bt(u),o=!1}else h=ag(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return u.flags&256?(pi(u),u):(pi(u),null);if((u.flags&128)!==0)throw Error(i(558))}return bt(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=Bo(u),m!==null&&m.dehydrated!==null){if(o===null){if(!A)throw Error(i(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(i(317));A[Dt]=u}else Ma(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;bt(u),A=!1}else A=ag(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(pi(u),u):(pi(u),null)}return pi(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=u.child,A=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(A=m.alternate.memoizedState.cachePool.pool),_=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==A&&(m.flags|=2048)),h!==o&&h&&(u.child.flags|=8192),Zd(u,u.updateQueue),bt(u),null);case 4:return Z(),o===null&&yv(u.stateNode.containerInfo),bt(u),null;case 10:return Xr(u.type),bt(u),null;case 19:if(X(Ht),m=u.memoizedState,m===null)return bt(u),null;if(A=(u.flags&128)!==0,_=m.rendering,_===null)if(A)Eu(m,!1);else{if(kt!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(_=zd(o),_!==null){for(u.flags|=128,Eu(m,!1),o=_.updateQueue,u.updateQueue=o,Zd(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)l_(h,o),h=h.sibling;return se(Ht,Ht.current&1|2),Ye&&$r(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&Rt()>sf&&(u.flags|=128,A=!0,Eu(m,!1),u.lanes=4194304)}else{if(!A)if(o=zd(_),o!==null){if(u.flags|=128,A=!0,o=o.updateQueue,u.updateQueue=o,Zd(u,o),Eu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ye)return bt(u),null}else 2*Rt()-m.renderingStartTime>sf&&h!==536870912&&(u.flags|=128,A=!0,Eu(m,!1),u.lanes=4194304);m.isBackwards?(_.sibling=u.child,u.child=_):(o=m.last,o!==null?o.sibling=_:u.child=_,m.last=_)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=Rt(),o.sibling=null,h=Ht.current,se(Ht,A?h&1|2:h&1),Ye&&$r(u,m.treeForkCount),o):(bt(u),null);case 22:case 23:return pi(u),bg(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(bt(u),u.subtreeFlags&6&&(u.flags|=8192)):bt(u),h=u.updateQueue,h!==null&&Zd(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),o!==null&&X(Na),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Xr(jt),bt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function AF(o,u){switch(rg(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Xr(jt),Z(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ie(u),null;case 31:if(u.memoizedState!==null){if(pi(u),u.alternate===null)throw Error(i(340));Ma()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(pi(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Ma()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return X(Ht),null;case 4:return Z(),null;case 10:return Xr(u.type),null;case 22:case 23:return pi(u),bg(),o!==null&&X(Na),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Xr(jt),null;case 25:return null;default:return null}}function kx(o,u){switch(rg(u),u.tag){case 3:Xr(jt),Z();break;case 26:case 27:case 5:Ie(u);break;case 4:Z();break;case 31:u.memoizedState!==null&&pi(u);break;case 13:pi(u);break;case 19:X(Ht);break;case 10:Xr(u.type);break;case 22:case 23:pi(u),bg(),o!==null&&X(Na);break;case 24:Xr(jt)}}function Tu(o,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var A=m.next;h=A;do{if((h.tag&o)===o){m=void 0;var _=h.create,P=h.inst;m=_(),P.destroy=m}h=h.next}while(h!==A)}}catch(O){at(u,u.return,O)}}function qs(o,u,h){try{var m=u.updateQueue,A=m!==null?m.lastEffect:null;if(A!==null){var _=A.next;m=_;do{if((m.tag&o)===o){var P=m.inst,O=P.destroy;if(O!==void 0){P.destroy=void 0,A=u;var U=h,Y=O;try{Y()}catch(ee){at(A,U,ee)}}}m=m.next}while(m!==_)}}catch(ee){at(u,u.return,ee)}}function Lx(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{T_(u,h)}catch(m){at(o,o.return,m)}}}function Ux(o,u,h){h.props=La(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){at(o,u,m)}}function Cu(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(A){at(o,u,A)}}function Sr(o,u){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(A){at(o,u,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){at(o,u,A)}else h.current=null}function Bx(o){var u=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(A){at(o,o.return,A)}}function Jg(o,u,h){try{var m=o.stateNode;GF(m,o.type,h,u),m[Jn]=u}catch(A){at(o,o.return,A)}}function Fx(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ws(o.type)||o.tag===4}function Qg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Fx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ws(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Zg(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=qr));else if(m!==4&&(m===27&&Ws(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(Zg(o,u,h),o=o.sibling;o!==null;)Zg(o,u,h),o=o.sibling}function ef(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(m!==4&&(m===27&&Ws(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(ef(o,u,h),o=o.sibling;o!==null;)ef(o,u,h),o=o.sibling}function zx(o){var u=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,A=u.attributes;A.length;)u.removeAttributeNode(A[0]);_n(u,m,h),u[Dt]=o,u[Jn]=h}catch(_){at(o,o.return,_)}}var Zr=!1,Xt=!1,ev=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,cn=null;function SF(o,u){if(o=o.containerInfo,Sv=wf,o=Zw(o),Ym(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var A=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var P=0,O=-1,U=-1,Y=0,ee=0,ie=o,K=null;t:for(;;){for(var J;ie!==h||A!==0&&ie.nodeType!==3||(O=P+A),ie!==_||m!==0&&ie.nodeType!==3||(U=P+m),ie.nodeType===3&&(P+=ie.nodeValue.length),(J=ie.firstChild)!==null;)K=ie,ie=J;for(;;){if(ie===o)break t;if(K===h&&++Y===A&&(O=P),K===_&&++ee===m&&(U=P),(J=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=J}h=O===-1||U===-1?null:{start:O,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(wv={focusedElem:o,selectionRange:h},wf=!1,cn=u;cn!==null;)if(u=cn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,cn=o;else for(;cn!==null;){switch(u=cn,_=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)A=o[h],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=u,A=_.memoizedProps,_=_.memoizedState,m=h.stateNode;try{var be=La(h.type,A);o=m.getSnapshotBeforeUpdate(be,_),m.__reactInternalSnapshotBeforeUpdate=o}catch(Re){at(h,h.return,Re)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)Ev(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ev(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=u.sibling,o!==null){o.return=u.return,cn=o;break}cn=u.return}}function Gx(o,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:ts(o,h),m&4&&Tu(5,h);break;case 1:if(ts(o,h),m&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(P){at(h,h.return,P)}else{var A=La(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(A,u,o.__reactInternalSnapshotBeforeUpdate)}catch(P){at(h,h.return,P)}}m&64&&Lx(h),m&512&&Cu(h,h.return);break;case 3:if(ts(o,h),m&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{T_(o,u)}catch(P){at(h,h.return,P)}}break;case 27:u===null&&m&4&&zx(h);case 26:case 5:ts(o,h),u===null&&m&4&&Bx(h),m&512&&Cu(h,h.return);break;case 12:ts(o,h);break;case 31:ts(o,h),m&4&&jx(o,h);break;case 13:ts(o,h),m&4&&$x(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=RF.bind(null,h),WF(o,h))));break;case 22:if(m=h.memoizedState!==null||Zr,!m){u=u!==null&&u.memoizedState!==null||Xt,A=Zr;var _=Xt;Zr=m,(Xt=u)&&!_?ns(o,h,(h.subtreeFlags&8772)!==0):ts(o,h),Zr=A,Xt=_}break;case 30:break;default:ts(o,h)}}function qx(o){var u=o.alternate;u!==null&&(o.alternate=null,qx(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Rm(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var xt=null,Zn=!1;function es(o,u,h){for(h=h.child;h!==null;)Vx(o,u,h),h=h.sibling}function Vx(o,u,h){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Aa,h)}catch{}switch(h.tag){case 26:Xt||Sr(h,u),es(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xt||Sr(h,u);var m=xt,A=Zn;Ws(h.type)&&(xt=h.stateNode,Zn=!1),es(o,u,h),Lu(h.stateNode),xt=m,Zn=A;break;case 5:Xt||Sr(h,u);case 6:if(m=xt,A=Zn,xt=null,es(o,u,h),xt=m,Zn=A,xt!==null)if(Zn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(h.stateNode)}catch(_){at(h,u,_)}else try{xt.removeChild(h.stateNode)}catch(_){at(h,u,_)}break;case 18:xt!==null&&(Zn?(o=xt,LE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),sl(o)):LE(xt,h.stateNode));break;case 4:m=xt,A=Zn,xt=h.stateNode.containerInfo,Zn=!0,es(o,u,h),xt=m,Zn=A;break;case 0:case 11:case 14:case 15:qs(2,h,u),Xt||qs(4,h,u),es(o,u,h);break;case 1:Xt||(Sr(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Ux(h,u,m)),es(o,u,h);break;case 21:es(o,u,h);break;case 22:Xt=(m=Xt)||h.memoizedState!==null,es(o,u,h),Xt=m;break;default:es(o,u,h)}}function jx(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{sl(o)}catch(h){at(u,u.return,h)}}}function $x(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{sl(o)}catch(h){at(u,u.return,h)}}function wF(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Hx),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Hx),u;default:throw Error(i(435,o.tag))}}function tf(o,u){var h=wF(o);u.forEach(function(m){if(!h.has(m)){h.add(m);var A=NF.bind(null,o,m);m.then(A,A)}})}function ei(o,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var A=h[m],_=o,P=u,O=P;e:for(;O!==null;){switch(O.tag){case 27:if(Ws(O.type)){xt=O.stateNode,Zn=!1;break e}break;case 5:xt=O.stateNode,Zn=!1;break e;case 3:case 4:xt=O.stateNode.containerInfo,Zn=!0;break e}O=O.return}if(xt===null)throw Error(i(160));Vx(_,P,A),xt=null,Zn=!1,_=A.alternate,_!==null&&(_.return=null),A.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Yx(u,o),u=u.sibling}var tr=null;function Yx(o,u){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ei(u,o),ti(o),m&4&&(qs(3,o,o.return),Tu(3,o),qs(5,o,o.return));break;case 1:ei(u,o),ti(o),m&512&&(Xt||h===null||Sr(h,h.return)),m&64&&Zr&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var A=tr;if(ei(u,o),ti(o),m&512&&(Xt||h===null||Sr(h,h.return)),m&4){var _=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,A=A.ownerDocument||A;t:switch(m){case"title":_=A.getElementsByTagName("title")[0],(!_||_[eu]||_[Dt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=A.createElement(m),A.head.insertBefore(_,A.querySelector("head > title"))),_n(_,m,h),_[Dt]=o,un(_),m=_;break e;case"link":var P=YE("link","href",A).get(m+(h.href||""));if(P){for(var O=0;O<P.length;O++)if(_=P[O],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(O,1);break t}}_=A.createElement(m),_n(_,m,h),A.head.appendChild(_);break;case"meta":if(P=YE("meta","content",A).get(m+(h.content||""))){for(O=0;O<P.length;O++)if(_=P[O],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(O,1);break t}}_=A.createElement(m),_n(_,m,h),A.head.appendChild(_);break;default:throw Error(i(468,m))}_[Dt]=o,un(_),m=_}o.stateNode=m}else XE(A,o.type,o.stateNode);else o.stateNode=$E(A,m,o.memoizedProps);else _!==m?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,m===null?XE(A,o.type,o.stateNode):$E(A,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Jg(o,o.memoizedProps,h.memoizedProps)}break;case 27:ei(u,o),ti(o),m&512&&(Xt||h===null||Sr(h,h.return)),h!==null&&m&4&&Jg(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ei(u,o),ti(o),m&512&&(Xt||h===null||Sr(h,h.return)),o.flags&32){A=o.stateNode;try{Mo(A,"")}catch(be){at(o,o.return,be)}}m&4&&o.stateNode!=null&&(A=o.memoizedProps,Jg(o,A,h!==null?h.memoizedProps:A)),m&1024&&(ev=!0);break;case 6:if(ei(u,o),ti(o),m&4){if(o.stateNode===null)throw Error(i(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(be){at(o,o.return,be)}}break;case 3:if(yf=null,A=tr,tr=gf(u.containerInfo),ei(u,o),tr=A,ti(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{sl(u.containerInfo)}catch(be){at(o,o.return,be)}ev&&(ev=!1,Xx(o));break;case 4:m=tr,tr=gf(o.stateNode.containerInfo),ei(u,o),ti(o),tr=m;break;case 12:ei(u,o),ti(o);break;case 31:ei(u,o),ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,tf(o,m)));break;case 13:ei(u,o),ti(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(rf=Rt()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,tf(o,m)));break;case 22:A=o.memoizedState!==null;var U=h!==null&&h.memoizedState!==null,Y=Zr,ee=Xt;if(Zr=Y||A,Xt=ee||U,ei(u,o),Xt=ee,Zr=Y,ti(o),m&8192)e:for(u=o.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(h===null||U||Zr||Xt||Ua(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){U=h=u;try{if(_=U.stateNode,A)P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{O=U.stateNode;var ie=U.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;O.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(be){at(U,U.return,be)}}}else if(u.tag===6){if(h===null){U=u;try{U.stateNode.nodeValue=A?"":U.memoizedProps}catch(be){at(U,U.return,be)}}}else if(u.tag===18){if(h===null){U=u;try{var J=U.stateNode;A?UE(J,!0):UE(U.stateNode,!1)}catch(be){at(U,U.return,be)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,tf(o,h))));break;case 19:ei(u,o),ti(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,tf(o,m)));break;case 30:break;case 21:break;default:ei(u,o),ti(o)}}function ti(o){var u=o.flags;if(u&2){try{for(var h,m=o.return;m!==null;){if(Fx(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var A=h.stateNode,_=Qg(o);ef(o,_,A);break;case 5:var P=h.stateNode;h.flags&32&&(Mo(P,""),h.flags&=-33);var O=Qg(o);ef(o,O,P);break;case 3:case 4:var U=h.stateNode.containerInfo,Y=Qg(o);Zg(o,Y,U);break;default:throw Error(i(161))}}catch(ee){at(o,o.return,ee)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Xx(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Xx(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ts(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Gx(o,u.alternate,u),u=u.sibling}function Ua(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:qs(4,u,u.return),Ua(u);break;case 1:Sr(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&Ux(u,u.return,h),Ua(u);break;case 27:Lu(u.stateNode);case 26:case 5:Sr(u,u.return),Ua(u);break;case 22:u.memoizedState===null&&Ua(u);break;case 30:Ua(u);break;default:Ua(u)}o=o.sibling}}function ns(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,A=o,_=u,P=_.flags;switch(_.tag){case 0:case 11:case 15:ns(A,_,h),Tu(4,_);break;case 1:if(ns(A,_,h),m=_,A=m.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(Y){at(m,m.return,Y)}if(m=_,A=m.updateQueue,A!==null){var O=m.stateNode;try{var U=A.shared.hiddenCallbacks;if(U!==null)for(A.shared.hiddenCallbacks=null,A=0;A<U.length;A++)E_(U[A],O)}catch(Y){at(m,m.return,Y)}}h&&P&64&&Lx(_),Cu(_,_.return);break;case 27:zx(_);case 26:case 5:ns(A,_,h),h&&m===null&&P&4&&Bx(_),Cu(_,_.return);break;case 12:ns(A,_,h);break;case 31:ns(A,_,h),h&&P&4&&jx(A,_);break;case 13:ns(A,_,h),h&&P&4&&$x(A,_);break;case 22:_.memoizedState===null&&ns(A,_,h),Cu(_,_.return);break;case 30:break;default:ns(A,_,h)}u=u.sibling}}function tv(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&hu(h))}function nv(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&hu(o))}function nr(o,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Kx(o,u,h,m),u=u.sibling}function Kx(o,u,h,m){var A=u.flags;switch(u.tag){case 0:case 11:case 15:nr(o,u,h,m),A&2048&&Tu(9,u);break;case 1:nr(o,u,h,m);break;case 3:nr(o,u,h,m),A&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&hu(o)));break;case 12:if(A&2048){nr(o,u,h,m),o=u.stateNode;try{var _=u.memoizedProps,P=_.id,O=_.onPostCommit;typeof O=="function"&&O(P,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){at(u,u.return,U)}}else nr(o,u,h,m);break;case 31:nr(o,u,h,m);break;case 13:nr(o,u,h,m);break;case 23:break;case 22:_=u.stateNode,P=u.alternate,u.memoizedState!==null?_._visibility&2?nr(o,u,h,m):Mu(o,u):_._visibility&2?nr(o,u,h,m):(_._visibility|=2,Xo(o,u,h,m,(u.subtreeFlags&10256)!==0||!1)),A&2048&&tv(P,u);break;case 24:nr(o,u,h,m),A&2048&&nv(u.alternate,u);break;default:nr(o,u,h,m)}}function Xo(o,u,h,m,A){for(A=A&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=o,P=u,O=h,U=m,Y=P.flags;switch(P.tag){case 0:case 11:case 15:Xo(_,P,O,U,A),Tu(8,P);break;case 23:break;case 22:var ee=P.stateNode;P.memoizedState!==null?ee._visibility&2?Xo(_,P,O,U,A):Mu(_,P):(ee._visibility|=2,Xo(_,P,O,U,A)),A&&Y&2048&&tv(P.alternate,P);break;case 24:Xo(_,P,O,U,A),A&&Y&2048&&nv(P.alternate,P);break;default:Xo(_,P,O,U,A)}u=u.sibling}}function Mu(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,m=u,A=m.flags;switch(m.tag){case 22:Mu(h,m),A&2048&&tv(m.alternate,m);break;case 24:Mu(h,m),A&2048&&nv(m.alternate,m);break;default:Mu(h,m)}u=u.sibling}}var Pu=8192;function Ko(o,u,h){if(o.subtreeFlags&Pu)for(o=o.child;o!==null;)Wx(o,u,h),o=o.sibling}function Wx(o,u,h){switch(o.tag){case 26:Ko(o,u,h),o.flags&Pu&&o.memoizedState!==null&&l3(h,tr,o.memoizedState,o.memoizedProps);break;case 5:Ko(o,u,h);break;case 3:case 4:var m=tr;tr=gf(o.stateNode.containerInfo),Ko(o,u,h),tr=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Pu,Pu=16777216,Ko(o,u,h),Pu=m):Ko(o,u,h));break;default:Ko(o,u,h)}}function Jx(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Ru(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];cn=m,Zx(m,o)}Jx(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Qx(o),o=o.sibling}function Qx(o){switch(o.tag){case 0:case 11:case 15:Ru(o),o.flags&2048&&qs(9,o,o.return);break;case 3:Ru(o);break;case 12:Ru(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,nf(o)):Ru(o);break;default:Ru(o)}}function nf(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];cn=m,Zx(m,o)}Jx(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:qs(8,u,u.return),nf(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,nf(u));break;default:nf(u)}o=o.sibling}}function Zx(o,u){for(;cn!==null;){var h=cn;switch(h.tag){case 0:case 11:case 15:qs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:hu(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,cn=m;else e:for(h=o;cn!==null;){m=cn;var A=m.sibling,_=m.return;if(qx(m),m===h){cn=null;break e}if(A!==null){A.return=_,cn=A;break e}cn=_}}}var _F={getCacheForType:function(o){var u=Sn(jt),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h},cacheSignal:function(){return Sn(jt).controller.signal}},xF=typeof WeakMap=="function"?WeakMap:Map,et=0,pt=null,Ge=null,je=0,st=0,mi=null,Vs=!1,Wo=!1,iv=!1,is=0,kt=0,js=0,Ba=0,rv=0,gi=0,Jo=0,Nu=null,ni=null,sv=!1,rf=0,eE=0,sf=1/0,af=null,$s=null,en=0,Ys=null,Qo=null,rs=0,av=0,ov=null,tE=null,Iu=0,lv=null;function vi(){return(et&2)!==0&&je!==0?je&-je:F.T!==null?pv():Ve()}function nE(){if(gi===0)if((je&536870912)===0||Ye){var o=Ao;Ao<<=1,(Ao&3932160)===0&&(Ao=262144),gi=o}else gi=536870912;return o=hi.current,o!==null&&(o.flags|=32),gi}function ii(o,u,h){(o===pt&&(st===2||st===9)||o.cancelPendingCommit!==null)&&(Zo(o,0),Xs(o,je,gi,!1)),yr(o,h),((et&2)===0||o!==pt)&&(o===pt&&((et&2)===0&&(Ba|=h),kt===4&&Xs(o,je,gi,!1)),wr(o))}function iE(o,u,h){if((et&6)!==0)throw Error(i(327));var m=!h&&(u&127)===0&&(u&o.expiredLanes)===0||Zi(o,u),A=m?CF(o,u):cv(o,u,!0),_=m;do{if(A===0){Wo&&!m&&Xs(o,u,0,!1);break}else{if(h=o.current.alternate,_&&!EF(h)){A=cv(o,u,!1),_=!1;continue}if(A===2){if(_=u,o.errorRecoveryDisabledLanes&_)var P=0;else P=o.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){u=P;e:{var O=o;A=Nu;var U=O.current.memoizedState.isDehydrated;if(U&&(Zo(O,P).flags|=256),P=cv(O,P,!1),P!==2){if(iv&&!U){O.errorRecoveryDisabledLanes|=_,Ba|=_,A=4;break e}_=ni,ni=A,_!==null&&(ni===null?ni=_:ni.push.apply(ni,_))}A=P}if(_=!1,A!==2)continue}}if(A===1){Zo(o,0),Xs(o,u,0,!0);break}e:{switch(m=o,_=A,_){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Xs(m,u,gi,!Vs);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(A=rf+300-Rt(),10<A)){if(Xs(m,u,gi,!Vs),Sa(m,0,!0)!==0)break e;rs=u,m.timeoutHandle=OE(rE.bind(null,m,h,ni,af,sv,u,gi,Ba,Jo,Vs,_,"Throttled",-0,0),A);break e}rE(m,h,ni,af,sv,u,gi,Ba,Jo,Vs,_,null,-0,0)}}break}while(!0);wr(o)}function rE(o,u,h,m,A,_,P,O,U,Y,ee,ie,K,J){if(o.timeoutHandle=-1,ie=u.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},Wx(u,_,ie);var be=(_&62914560)===_?rf-Rt():(_&4194048)===_?eE-Rt():0;if(be=u3(ie,be),be!==null){rs=_,o.cancelPendingCommit=be(fE.bind(null,o,u,_,h,m,A,P,O,U,ee,ie,null,K,J)),Xs(o,_,P,!Y);return}}fE(o,u,_,h,m,A,P,O,U)}function EF(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var A=h[m],_=A.getSnapshot;A=A.value;try{if(!di(_(),A))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Xs(o,u,h,m){u&=~rv,u&=~Ba,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var A=u;0<A;){var _=31-zn(A),P=1<<_;m[_]=-1,A&=~P}h!==0&&te(o,h,u)}function of(){return(et&6)===0?(Du(0),!1):!0}function uv(){if(Ge!==null){if(st===0)var o=Ge.return;else o=Ge,Yr=Pa=null,Eg(o),qo=null,mu=0,o=Ge;for(;o!==null;)kx(o.alternate,o),o=o.return;Ge=null}}function Zo(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,jF(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),rs=0,uv(),pt=o,Ge=h=jr(o.current,null),je=u,st=0,mi=null,Vs=!1,Wo=Zi(o,u),iv=!1,Jo=gi=rv=Ba=js=kt=0,ni=Nu=null,sv=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var A=31-zn(m),_=1<<A;u|=o[A],m&=~_}return is=u,Cd(),h}function sE(o,u){Be=null,F.H=_u,u===Go||u===kd?(u=S_(),st=3):u===hg?(u=S_(),st=4):st=u===Hg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,mi=u,Ge===null&&(kt=1,Kd(o,Ri(u,o.current)))}function aE(){var o=hi.current;return o===null?!0:(je&4194048)===je?Oi===null:(je&62914560)===je||(je&536870912)!==0?o===Oi:!1}function oE(){var o=F.H;return F.H=_u,o===null?_u:o}function lE(){var o=F.A;return F.A=_F,o}function lf(){kt=4,Vs||(je&4194048)!==je&&hi.current!==null||(Wo=!0),(js&134217727)===0&&(Ba&134217727)===0||pt===null||Xs(pt,je,gi,!1)}function cv(o,u,h){var m=et;et|=2;var A=oE(),_=lE();(pt!==o||je!==u)&&(af=null,Zo(o,u)),u=!1;var P=kt;e:do try{if(st!==0&&Ge!==null){var O=Ge,U=mi;switch(st){case 8:uv(),P=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(u=!0);var Y=st;if(st=0,mi=null,el(o,O,U,Y),h&&Wo){P=0;break e}break;default:Y=st,st=0,mi=null,el(o,O,U,Y)}}TF(),P=kt;break}catch(ee){sE(o,ee)}while(!0);return u&&o.shellSuspendCounter++,Yr=Pa=null,et=m,F.H=A,F.A=_,Ge===null&&(pt=null,je=0,Cd()),P}function TF(){for(;Ge!==null;)uE(Ge)}function CF(o,u){var h=et;et|=2;var m=oE(),A=lE();pt!==o||je!==u?(af=null,sf=Rt()+500,Zo(o,u)):Wo=Zi(o,u);e:do try{if(st!==0&&Ge!==null){u=Ge;var _=mi;t:switch(st){case 1:st=0,mi=null,el(o,u,_,1);break;case 2:case 9:if(b_(_)){st=0,mi=null,cE(u);break}u=function(){st!==2&&st!==9||pt!==o||(st=7),wr(o)},_.then(u,u);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:b_(_)?(st=0,mi=null,cE(u)):(st=0,mi=null,el(o,u,_,7));break;case 5:var P=null;switch(Ge.tag){case 26:P=Ge.memoizedState;case 5:case 27:var O=Ge;if(P?KE(P):O.stateNode.complete){st=0,mi=null;var U=O.sibling;if(U!==null)Ge=U;else{var Y=O.return;Y!==null?(Ge=Y,uf(Y)):Ge=null}break t}}st=0,mi=null,el(o,u,_,5);break;case 6:st=0,mi=null,el(o,u,_,6);break;case 8:uv(),kt=6;break e;default:throw Error(i(462))}}MF();break}catch(ee){sE(o,ee)}while(!0);return Yr=Pa=null,F.H=m,F.A=A,et=h,Ge!==null?0:(pt=null,je=0,Cd(),kt)}function MF(){for(;Ge!==null&&!Wn();)uE(Ge)}function uE(o){var u=Dx(o.alternate,o,is);o.memoizedProps=o.pendingProps,u===null?uf(o):Ge=u}function cE(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=Cx(h,u,u.pendingProps,u.type,void 0,je);break;case 11:u=Cx(h,u,u.pendingProps,u.type.render,u.ref,je);break;case 5:Eg(u);default:kx(h,u),u=Ge=l_(u,is),u=Dx(h,u,is)}o.memoizedProps=o.pendingProps,u===null?uf(o):Ge=u}function el(o,u,h,m){Yr=Pa=null,Eg(u),qo=null,mu=0;var A=u.return;try{if(gF(o,A,u,h,je)){kt=1,Kd(o,Ri(h,o.current)),Ge=null;return}}catch(_){if(A!==null)throw Ge=A,_;kt=1,Kd(o,Ri(h,o.current)),Ge=null;return}u.flags&32768?(Ye||m===1?o=!0:Wo||(je&536870912)!==0?o=!1:(Vs=o=!0,(m===2||m===9||m===3||m===6)&&(m=hi.current,m!==null&&m.tag===13&&(m.flags|=16384))),dE(u,o)):uf(u)}function uf(o){var u=o;do{if((u.flags&32768)!==0){dE(u,Vs);return}o=u.return;var h=bF(u.alternate,u,is);if(h!==null){Ge=h;return}if(u=u.sibling,u!==null){Ge=u;return}Ge=u=o}while(u!==null);kt===0&&(kt=5)}function dE(o,u){do{var h=AF(o.alternate,o);if(h!==null){h.flags&=32767,Ge=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){Ge=o;return}Ge=o=h}while(o!==null);kt=6,Ge=null}function fE(o,u,h,m,A,_,P,O,U){o.cancelPendingCommit=null;do cf();while(en!==0);if((et&6)!==0)throw Error(i(327));if(u!==null){if(u===o.current)throw Error(i(177));if(_=u.lanes|u.childLanes,_|=Qm,Mm(o,h,_,P,O,U),o===pt&&(Ge=pt=null,je=0),Qo=u,Ys=o,rs=h,av=_,ov=A,tE=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,IF(yo,function(){return vE(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=F.T,F.T=null,A=j.p,j.p=2,P=et,et|=4;try{SF(o,u,h)}finally{et=P,j.p=A,F.T=m}}en=1,hE(),pE(),mE()}}function hE(){if(en===1){en=0;var o=Ys,u=Qo,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=F.T,F.T=null;var m=j.p;j.p=2;var A=et;et|=4;try{Yx(u,o);var _=wv,P=Zw(o.containerInfo),O=_.focusedElem,U=_.selectionRange;if(P!==O&&O&&O.ownerDocument&&Qw(O.ownerDocument.documentElement,O)){if(U!==null&&Ym(O)){var Y=U.start,ee=U.end;if(ee===void 0&&(ee=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min(ee,O.value.length);else{var ie=O.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var J=K.getSelection(),be=O.textContent.length,Re=Math.min(U.start,be),ft=U.end===void 0?Re:Math.min(U.end,be);!J.extend&&Re>ft&&(P=ft,ft=Re,Re=P);var q=Jw(O,Re),H=Jw(O,ft);if(q&&H&&(J.rangeCount!==1||J.anchorNode!==q.node||J.anchorOffset!==q.offset||J.focusNode!==H.node||J.focusOffset!==H.offset)){var $=ie.createRange();$.setStart(q.node,q.offset),J.removeAllRanges(),Re>ft?(J.addRange($),J.extend(H.node,H.offset)):($.setEnd(H.node,H.offset),J.addRange($))}}}}for(ie=[],J=O;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ie.length;O++){var ne=ie[O];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}wf=!!Sv,wv=Sv=null}finally{et=A,j.p=m,F.T=h}}o.current=u,en=2}}function pE(){if(en===2){en=0;var o=Ys,u=Qo,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=F.T,F.T=null;var m=j.p;j.p=2;var A=et;et|=4;try{Gx(o,u.alternate,u)}finally{et=A,j.p=m,F.T=h}}en=3}}function mE(){if(en===4||en===3){en=0,Sm();var o=Ys,u=Qo,h=rs,m=tE;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?en=5:(en=0,Qo=Ys=null,gE(o,o.pendingLanes));var A=o.pendingLanes;if(A===0&&($s=null),Ee(h),u=u.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Aa,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=F.T,A=j.p,j.p=2,F.T=null;try{for(var _=o.onRecoverableError,P=0;P<m.length;P++){var O=m[P];_(O.value,{componentStack:O.stack})}}finally{F.T=u,j.p=A}}(rs&3)!==0&&cf(),wr(o),A=o.pendingLanes,(h&261930)!==0&&(A&42)!==0?o===lv?Iu++:(Iu=0,lv=o):Iu=0,Du(0)}}function gE(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,hu(u)))}function cf(){return hE(),pE(),mE(),vE()}function vE(){if(en!==5)return!1;var o=Ys,u=av;av=0;var h=Ee(rs),m=F.T,A=j.p;try{j.p=32>h?32:h,F.T=null,h=ov,ov=null;var _=Ys,P=rs;if(en=0,Qo=Ys=null,rs=0,(et&6)!==0)throw Error(i(331));var O=et;if(et|=4,Qx(_.current),Kx(_,_.current,P,h),et=O,Du(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Aa,_)}catch{}return!0}finally{j.p=A,F.T=m,gE(o,u)}}function yE(o,u,h){u=Ri(h,u),u=zg(o.stateNode,u,2),o=zs(o,u,2),o!==null&&(yr(o,2),wr(o))}function at(o,u,h){if(o.tag===3)yE(o,o,h);else for(;u!==null;){if(u.tag===3){yE(u,o,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&($s===null||!$s.has(m))){o=Ri(h,o),h=bx(2),m=zs(u,h,2),m!==null&&(Ax(h,m,u,o),yr(m,2),wr(m));break}}u=u.return}}function dv(o,u,h){var m=o.pingCache;if(m===null){m=o.pingCache=new xF;var A=new Set;m.set(u,A)}else A=m.get(u),A===void 0&&(A=new Set,m.set(u,A));A.has(h)||(iv=!0,A.add(h),o=PF.bind(null,o,u,h),u.then(o,o))}function PF(o,u,h){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,pt===o&&(je&h)===h&&(kt===4||kt===3&&(je&62914560)===je&&300>Rt()-rf?(et&2)===0&&Zo(o,0):rv|=h,Jo===je&&(Jo=0)),wr(o)}function bE(o,u){u===0&&(u=So()),o=Ta(o,u),o!==null&&(yr(o,u),wr(o))}function RF(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),bE(o,h)}function NF(o,u){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,A=o.memoizedState;A!==null&&(h=A.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(u),bE(o,h)}function IF(o,u){return Jl(o,u)}var df=null,tl=null,fv=!1,ff=!1,hv=!1,Ks=0;function wr(o){o!==tl&&o.next===null&&(tl===null?df=tl=o:tl=tl.next=o),ff=!0,fv||(fv=!0,OF())}function Du(o,u){if(!hv&&ff){hv=!0;do for(var h=!1,m=df;m!==null;){if(o!==0){var A=m.pendingLanes;if(A===0)var _=0;else{var P=m.suspendedLanes,O=m.pingedLanes;_=(1<<31-zn(42|o)+1)-1,_&=A&~(P&~O),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,_E(m,_))}else _=je,_=Sa(m,m===pt?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||Zi(m,_)||(h=!0,_E(m,_));m=m.next}while(h);hv=!1}}function DF(){AE()}function AE(){ff=fv=!1;var o=0;Ks!==0&&VF()&&(o=Ks);for(var u=Rt(),h=null,m=df;m!==null;){var A=m.next,_=SE(m,u);_===0?(m.next=null,h===null?df=A:h.next=A,A===null&&(tl=h)):(h=m,(o!==0||(_&3)!==0)&&(ff=!0)),m=A}en!==0&&en!==5||Du(o),Ks!==0&&(Ks=0)}function SE(o,u){for(var h=o.suspendedLanes,m=o.pingedLanes,A=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var P=31-zn(_),O=1<<P,U=A[P];U===-1?((O&h)===0||(O&m)!==0)&&(A[P]=md(O,u)):U<=u&&(o.expiredLanes|=O),_&=~O}if(u=pt,h=je,h=Sa(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===u&&(st===2||st===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&vo(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Zi(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(m!==null&&vo(m),Ee(h)){case 2:case 8:h=hd;break;case 32:h=yo;break;case 268435456:h=pd;break;default:h=yo}return m=wE.bind(null,o),h=Jl(h,m),o.callbackPriority=u,o.callbackNode=h,u}return m!==null&&m!==null&&vo(m),o.callbackPriority=2,o.callbackNode=null,2}function wE(o,u){if(en!==0&&en!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(cf()&&o.callbackNode!==h)return null;var m=je;return m=Sa(o,o===pt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(iE(o,m,u),SE(o,Rt()),o.callbackNode!=null&&o.callbackNode===h?wE.bind(null,o):null)}function _E(o,u){if(cf())return null;iE(o,u,!0)}function OF(){$F(function(){(et&6)!==0?Jl(Ql,DF):AE()})}function pv(){if(Ks===0){var o=zo;o===0&&(o=bo,bo<<=1,(bo&261888)===0&&(bo=256)),Ks=o}return Ks}function xE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:bd(""+o)}function EE(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function kF(o,u,h,m,A){if(u==="submit"&&h&&h.stateNode===A){var _=xE((A[Jn]||null).action),P=m.submitter;P&&(u=(u=P[Jn]||null)?xE(u.formAction):P.getAttribute("formAction"),u!==null&&(_=u,P=null));var O=new _d("action","action",null,m,A);o.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ks!==0){var U=P?EE(A,P):new FormData(A);Og(h,{pending:!0,data:U,method:A.method,action:_},null,U)}}else typeof _=="function"&&(O.preventDefault(),U=P?EE(A,P):new FormData(A),Og(h,{pending:!0,data:U,method:A.method,action:_},_,U))},currentTarget:A}]})}}for(var mv=0;mv<Jm.length;mv++){var gv=Jm[mv],LF=gv.toLowerCase(),UF=gv[0].toUpperCase()+gv.slice(1);er(LF,"on"+UF)}er(n_,"onAnimationEnd"),er(i_,"onAnimationIteration"),er(r_,"onAnimationStart"),er("dblclick","onDoubleClick"),er("focusin","onFocus"),er("focusout","onBlur"),er(ZB,"onTransitionRun"),er(eF,"onTransitionStart"),er(tF,"onTransitionCancel"),er(s_,"onTransitionEnd"),To("onMouseEnter",["mouseout","mouseover"]),To("onMouseLeave",["mouseout","mouseover"]),To("onPointerEnter",["pointerout","pointerover"]),To("onPointerLeave",["pointerout","pointerover"]),wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function TE(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],A=m.event;m=m.listeners;e:{var _=void 0;if(u)for(var P=m.length-1;0<=P;P--){var O=m[P],U=O.instance,Y=O.currentTarget;if(O=O.listener,U!==_&&A.isPropagationStopped())break e;_=O,A.currentTarget=Y;try{_(A)}catch(ee){Td(ee)}A.currentTarget=null,_=U}else for(P=0;P<m.length;P++){if(O=m[P],U=O.instance,Y=O.currentTarget,O=O.listener,U!==_&&A.isPropagationStopped())break e;_=O,A.currentTarget=Y;try{_(A)}catch(ee){Td(ee)}A.currentTarget=null,_=U}}}}function qe(o,u){var h=u[Pm];h===void 0&&(h=u[Pm]=new Set);var m=o+"__bubble";h.has(m)||(CE(u,o,2,!1),h.add(m))}function vv(o,u,h){var m=0;u&&(m|=4),CE(h,o,m,u)}var hf="_reactListening"+Math.random().toString(36).slice(2);function yv(o){if(!o[hf]){o[hf]=!0,Aw.forEach(function(h){h!=="selectionchange"&&(BF.has(h)||vv(h,!1,o),vv(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[hf]||(u[hf]=!0,vv("selectionchange",!1,u))}}function CE(o,u,h,m){switch(nT(u)){case 2:var A=f3;break;case 8:A=h3;break;default:A=Dv}h=A.bind(null,u,h,o),A=void 0,!Bm||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(A=!0),m?A!==void 0?o.addEventListener(u,h,{capture:!0,passive:A}):o.addEventListener(u,h,!0):A!==void 0?o.addEventListener(u,h,{passive:A}):o.addEventListener(u,h,!1)}function bv(o,u,h,m,A){var _=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var O=m.stateNode.containerInfo;if(O===A)break;if(P===4)for(P=m.return;P!==null;){var U=P.tag;if((U===3||U===4)&&P.stateNode.containerInfo===A)return;P=P.return}for(;O!==null;){if(P=_o(O),P===null)return;if(U=P.tag,U===5||U===6||U===26||U===27){m=_=P;continue e}O=O.parentNode}}m=m.return}Iw(function(){var Y=_,ee=Lm(h),ie=[];e:{var K=a_.get(o);if(K!==void 0){var J=_d,be=o;switch(o){case"keypress":if(Sd(h)===0)break e;case"keydown":case"keyup":J=NB;break;case"focusin":be="focus",J=Gm;break;case"focusout":be="blur",J=Gm;break;case"beforeblur":case"afterblur":J=Gm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=kw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=bB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=OB;break;case n_:case i_:case r_:J=wB;break;case s_:J=LB;break;case"scroll":case"scrollend":J=vB;break;case"wheel":J=BB;break;case"copy":case"cut":case"paste":J=xB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Uw;break;case"toggle":case"beforetoggle":J=zB}var Re=(u&4)!==0,ft=!Re&&(o==="scroll"||o==="scrollend"),q=Re?K!==null?K+"Capture":null:K;Re=[];for(var H=Y,$;H!==null;){var ne=H;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||q===null||(ne=nu(H,q),ne!=null&&Re.push(ku(H,ne,$))),ft)break;H=H.return}0<Re.length&&(K=new J(K,be,null,h,ee),ie.push({event:K,listeners:Re}))}}if((u&7)===0){e:{if(K=o==="mouseover"||o==="pointerover",J=o==="mouseout"||o==="pointerout",K&&h!==km&&(be=h.relatedTarget||h.fromElement)&&(_o(be)||be[wo]))break e;if((J||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,J?(be=h.relatedTarget||h.toElement,J=Y,be=be?_o(be):null,be!==null&&(ft=s(be),Re=be.tag,be!==ft||Re!==5&&Re!==27&&Re!==6)&&(be=null)):(J=null,be=Y),J!==be)){if(Re=kw,ne="onMouseLeave",q="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Re=Uw,ne="onPointerLeave",q="onPointerEnter",H="pointer"),ft=J==null?K:tu(J),$=be==null?K:tu(be),K=new Re(ne,H+"leave",J,h,ee),K.target=ft,K.relatedTarget=$,ne=null,_o(ee)===Y&&(Re=new Re(q,H+"enter",be,h,ee),Re.target=$,Re.relatedTarget=ft,ne=Re),ft=ne,J&&be)t:{for(Re=FF,q=J,H=be,$=0,ne=q;ne;ne=Re(ne))$++;ne=0;for(var Ce=H;Ce;Ce=Re(Ce))ne++;for(;0<$-ne;)q=Re(q),$--;for(;0<ne-$;)H=Re(H),ne--;for(;$--;){if(q===H||H!==null&&q===H.alternate){Re=q;break t}q=Re(q),H=Re(H)}Re=null}else Re=null;J!==null&&ME(ie,K,J,Re,!1),be!==null&&ft!==null&&ME(ie,ft,be,Re,!0)}}e:{if(K=Y?tu(Y):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var We=jw;else if(qw(K))if($w)We=WB;else{We=XB;var _e=YB}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Om(Y.elementType)&&(We=jw):We=KB;if(We&&(We=We(o,Y))){Vw(ie,We,h,ee);break e}_e&&_e(o,K,Y),o==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Dm(K,"number",K.value)}switch(_e=Y?tu(Y):window,o){case"focusin":(qw(_e)||_e.contentEditable==="true")&&(Io=_e,Xm=Y,cu=null);break;case"focusout":cu=Xm=Io=null;break;case"mousedown":Km=!0;break;case"contextmenu":case"mouseup":case"dragend":Km=!1,e_(ie,h,ee);break;case"selectionchange":if(QB)break;case"keydown":case"keyup":e_(ie,h,ee)}var Fe;if(Vm)e:{switch(o){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else No?Hw(o,h)&&($e="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&($e="onCompositionStart");$e&&(Bw&&h.locale!=="ko"&&(No||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&No&&(Fe=Dw()):(Ds=ee,Fm="value"in Ds?Ds.value:Ds.textContent,No=!0)),_e=pf(Y,$e),0<_e.length&&($e=new Lw($e,o,null,h,ee),ie.push({event:$e,listeners:_e}),Fe?$e.data=Fe:(Fe=Gw(h),Fe!==null&&($e.data=Fe)))),(Fe=GB?qB(o,h):VB(o,h))&&($e=pf(Y,"onBeforeInput"),0<$e.length&&(_e=new Lw("onBeforeInput","beforeinput",null,h,ee),ie.push({event:_e,listeners:$e}),_e.data=Fe)),kF(ie,o,Y,h,ee)}TE(ie,u)})}function ku(o,u,h){return{instance:o,listener:u,currentTarget:h}}function pf(o,u){for(var h=u+"Capture",m=[];o!==null;){var A=o,_=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||_===null||(A=nu(o,h),A!=null&&m.unshift(ku(o,A,_)),A=nu(o,u),A!=null&&m.push(ku(o,A,_))),o.tag===3)return m;o=o.return}return[]}function FF(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function ME(o,u,h,m,A){for(var _=u._reactName,P=[];h!==null&&h!==m;){var O=h,U=O.alternate,Y=O.stateNode;if(O=O.tag,U!==null&&U===m)break;O!==5&&O!==26&&O!==27||Y===null||(U=Y,A?(Y=nu(h,_),Y!=null&&P.unshift(ku(h,Y,U))):A||(Y=nu(h,_),Y!=null&&P.push(ku(h,Y,U)))),h=h.return}P.length!==0&&o.push({event:u,listeners:P})}var zF=/\r\n?/g,HF=/\u0000|\uFFFD/g;function PE(o){return(typeof o=="string"?o:""+o).replace(zF,`
`).replace(HF,"")}function RE(o,u){return u=PE(u),PE(o)===u}function dt(o,u,h,m,A,_){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||Mo(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&Mo(o,""+m);break;case"className":vd(o,"class",m);break;case"tabIndex":vd(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":vd(o,h,m);break;case"style":Rw(o,m,_);break;case"data":if(u!=="object"){vd(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=bd(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(u!=="input"&&dt(o,u,"name",A.name,A,null),dt(o,u,"formEncType",A.formEncType,A,null),dt(o,u,"formMethod",A.formMethod,A,null),dt(o,u,"formTarget",A.formTarget,A,null)):(dt(o,u,"encType",A.encType,A,null),dt(o,u,"method",A.method,A,null),dt(o,u,"target",A.target,A,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=bd(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=qr);break;case"onScroll":m!=null&&qe("scroll",o);break;case"onScrollEnd":m!=null&&qe("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=bd(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":qe("beforetoggle",o),qe("toggle",o),gd(o,"popover",m);break;case"xlinkActuate":Gr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Gr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Gr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Gr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Gr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Gr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Gr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Gr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Gr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":gd(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=mB.get(h)||h,gd(o,h,m))}}function Av(o,u,h,m,A,_){switch(h){case"style":Rw(o,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(A.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof m=="string"?Mo(o,m):(typeof m=="number"||typeof m=="bigint")&&Mo(o,""+m);break;case"onScroll":m!=null&&qe("scroll",o);break;case"onScrollEnd":m!=null&&qe("scrollend",o);break;case"onClick":m!=null&&(o.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sw.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),u=h.slice(2,A?h.length-7:void 0),_=o[Jn]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(u,_,A),typeof m=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,m,A);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):gd(o,h,m)}}}function _n(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",o),qe("load",o);var m=!1,A=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var P=h[_];if(P!=null)switch(_){case"src":m=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:dt(o,u,_,P,h,null)}}A&&dt(o,u,"srcSet",h.srcSet,h,null),m&&dt(o,u,"src",h.src,h,null);return;case"input":qe("invalid",o);var O=_=P=A=null,U=null,Y=null;for(m in h)if(h.hasOwnProperty(m)){var ee=h[m];if(ee!=null)switch(m){case"name":A=ee;break;case"type":P=ee;break;case"checked":U=ee;break;case"defaultChecked":Y=ee;break;case"value":_=ee;break;case"defaultValue":O=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,u));break;default:dt(o,u,m,ee,h,null)}}Tw(o,_,O,U,Y,P,A,!1);return;case"select":qe("invalid",o),m=P=_=null;for(A in h)if(h.hasOwnProperty(A)&&(O=h[A],O!=null))switch(A){case"value":_=O;break;case"defaultValue":P=O;break;case"multiple":m=O;default:dt(o,u,A,O,h,null)}u=_,h=P,o.multiple=!!m,u!=null?Co(o,!!m,u,!1):h!=null&&Co(o,!!m,h,!0);return;case"textarea":qe("invalid",o),_=A=m=null;for(P in h)if(h.hasOwnProperty(P)&&(O=h[P],O!=null))switch(P){case"value":m=O;break;case"defaultValue":A=O;break;case"children":_=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:dt(o,u,P,O,h,null)}Mw(o,m,A,_);return;case"option":for(U in h)h.hasOwnProperty(U)&&(m=h[U],m!=null)&&(U==="selected"?o.selected=m&&typeof m!="function"&&typeof m!="symbol":dt(o,u,U,m,h,null));return;case"dialog":qe("beforetoggle",o),qe("toggle",o),qe("cancel",o),qe("close",o);break;case"iframe":case"object":qe("load",o);break;case"video":case"audio":for(m=0;m<Ou.length;m++)qe(Ou[m],o);break;case"image":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"embed":case"source":case"link":qe("error",o),qe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in h)if(h.hasOwnProperty(Y)&&(m=h[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:dt(o,u,Y,m,h,null)}return;default:if(Om(u)){for(ee in h)h.hasOwnProperty(ee)&&(m=h[ee],m!==void 0&&Av(o,u,ee,m,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(m=h[O],m!=null&&dt(o,u,O,m,h,null))}function GF(o,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,_=null,P=null,O=null,U=null,Y=null,ee=null;for(J in h){var ie=h[J];if(h.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":U=ie;default:m.hasOwnProperty(J)||dt(o,u,J,null,m,ie)}}for(var K in m){var J=m[K];if(ie=h[K],m.hasOwnProperty(K)&&(J!=null||ie!=null))switch(K){case"type":_=J;break;case"name":A=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":P=J;break;case"defaultValue":O=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,u));break;default:J!==ie&&dt(o,u,K,J,m,ie)}}Im(o,P,O,U,Y,ee,_,A);return;case"select":J=P=O=K=null;for(_ in h)if(U=h[_],h.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":J=U;default:m.hasOwnProperty(_)||dt(o,u,_,null,m,U)}for(A in m)if(_=m[A],U=h[A],m.hasOwnProperty(A)&&(_!=null||U!=null))switch(A){case"value":K=_;break;case"defaultValue":O=_;break;case"multiple":P=_;default:_!==U&&dt(o,u,A,_,m,U)}u=O,h=P,m=J,K!=null?Co(o,!!h,K,!1):!!m!=!!h&&(u!=null?Co(o,!!h,u,!0):Co(o,!!h,h?[]:"",!1));return;case"textarea":J=K=null;for(O in h)if(A=h[O],h.hasOwnProperty(O)&&A!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:dt(o,u,O,null,m,A)}for(P in m)if(A=m[P],_=h[P],m.hasOwnProperty(P)&&(A!=null||_!=null))switch(P){case"value":K=A;break;case"defaultValue":J=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:A!==_&&dt(o,u,P,A,m,_)}Cw(o,K,J);return;case"option":for(var be in h)K=h[be],h.hasOwnProperty(be)&&K!=null&&!m.hasOwnProperty(be)&&(be==="selected"?o.selected=!1:dt(o,u,be,null,m,K));for(U in m)K=m[U],J=h[U],m.hasOwnProperty(U)&&K!==J&&(K!=null||J!=null)&&(U==="selected"?o.selected=K&&typeof K!="function"&&typeof K!="symbol":dt(o,u,U,K,m,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in h)K=h[Re],h.hasOwnProperty(Re)&&K!=null&&!m.hasOwnProperty(Re)&&dt(o,u,Re,null,m,K);for(Y in m)if(K=m[Y],J=h[Y],m.hasOwnProperty(Y)&&K!==J&&(K!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,u));break;default:dt(o,u,Y,K,m,J)}return;default:if(Om(u)){for(var ft in h)K=h[ft],h.hasOwnProperty(ft)&&K!==void 0&&!m.hasOwnProperty(ft)&&Av(o,u,ft,void 0,m,K);for(ee in m)K=m[ee],J=h[ee],!m.hasOwnProperty(ee)||K===J||K===void 0&&J===void 0||Av(o,u,ee,K,m,J);return}}for(var q in h)K=h[q],h.hasOwnProperty(q)&&K!=null&&!m.hasOwnProperty(q)&&dt(o,u,q,null,m,K);for(ie in m)K=m[ie],J=h[ie],!m.hasOwnProperty(ie)||K===J||K==null&&J==null||dt(o,u,ie,K,m,J)}function NE(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qF(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var A=h[m],_=A.transferSize,P=A.initiatorType,O=A.duration;if(_&&O&&NE(P)){for(P=0,O=A.responseEnd,m+=1;m<h.length;m++){var U=h[m],Y=U.startTime;if(Y>O)break;var ee=U.transferSize,ie=U.initiatorType;ee&&NE(ie)&&(U=U.responseEnd,P+=ee*(U<O?1:(O-Y)/(U-Y)))}if(--m,u+=8*(_+P)/(A.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Sv=null,wv=null;function mf(o){return o.nodeType===9?o:o.ownerDocument}function IE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function _v(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var xv=null;function VF(){var o=window.event;return o&&o.type==="popstate"?o===xv?!1:(xv=o,!0):(xv=null,!1)}var OE=typeof setTimeout=="function"?setTimeout:void 0,jF=typeof clearTimeout=="function"?clearTimeout:void 0,kE=typeof Promise=="function"?Promise:void 0,$F=typeof queueMicrotask=="function"?queueMicrotask:typeof kE<"u"?function(o){return kE.resolve(null).then(o).catch(YF)}:OE;function YF(o){setTimeout(function(){throw o})}function Ws(o){return o==="head"}function LE(o,u){var h=u,m=0;do{var A=h.nextSibling;if(o.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(A),sl(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Lu(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Lu(h);for(var _=h.firstChild;_;){var P=_.nextSibling,O=_.nodeName;_[eu]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=P}}else h==="body"&&Lu(o.ownerDocument.body);h=A}while(h);sl(u)}function UE(o,u){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function Ev(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ev(h),Rm(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function XF(o,u,h,m){for(;o.nodeType===1;){var A=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[eu])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==A.rel||o.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var _=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=ki(o.nextSibling),o===null)break}return null}function KF(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=ki(o.nextSibling),o===null))return null;return o}function BE(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ki(o.nextSibling),o===null))return null;return o}function Tv(o){return o.data==="$?"||o.data==="$~"}function Cv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function WF(o,u){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function ki(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Mv=null;function FE(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(u===0)return ki(o.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}o=o.nextSibling}return null}function zE(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return o;u--}else h!=="/$"&&h!=="/&"||u++}o=o.previousSibling}return null}function HE(o,u,h){switch(u=mf(h),o){case"html":if(o=u.documentElement,!o)throw Error(i(452));return o;case"head":if(o=u.head,!o)throw Error(i(453));return o;case"body":if(o=u.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Lu(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Rm(o)}var Li=new Map,GE=new Set;function gf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ss=j.d;j.d={f:JF,r:QF,D:ZF,C:e3,L:t3,m:n3,X:r3,S:i3,M:s3};function JF(){var o=ss.f(),u=of();return o||u}function QF(o){var u=xo(o);u!==null&&u.tag===5&&u.type==="form"?sx(u):ss.r(o)}var nl=typeof document>"u"?null:document;function qE(o,u,h){var m=nl;if(m&&typeof u=="string"&&u){var A=Mi(u);A='link[rel="'+o+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),GE.has(A)||(GE.add(A),o={rel:o,crossOrigin:h,href:u},m.querySelector(A)===null&&(u=m.createElement("link"),_n(u,"link",o),un(u),m.head.appendChild(u)))}}function ZF(o){ss.D(o),qE("dns-prefetch",o,null)}function e3(o,u){ss.C(o,u),qE("preconnect",o,u)}function t3(o,u,h){ss.L(o,u,h);var m=nl;if(m&&o&&u){var A='link[rel="preload"][as="'+Mi(u)+'"]';u==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+Mi(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+Mi(h.imageSizes)+'"]')):A+='[href="'+Mi(o)+'"]';var _=A;switch(u){case"style":_=il(o);break;case"script":_=rl(o)}Li.has(_)||(o=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),Li.set(_,o),m.querySelector(A)!==null||u==="style"&&m.querySelector(Uu(_))||u==="script"&&m.querySelector(Bu(_))||(u=m.createElement("link"),_n(u,"link",o),un(u),m.head.appendChild(u)))}}function n3(o,u){ss.m(o,u);var h=nl;if(h&&o){var m=u&&typeof u.as=="string"?u.as:"script",A='link[rel="modulepreload"][as="'+Mi(m)+'"][href="'+Mi(o)+'"]',_=A;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=rl(o)}if(!Li.has(_)&&(o=p({rel:"modulepreload",href:o},u),Li.set(_,o),h.querySelector(A)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Bu(_)))return}m=h.createElement("link"),_n(m,"link",o),un(m),h.head.appendChild(m)}}}function i3(o,u,h){ss.S(o,u,h);var m=nl;if(m&&o){var A=Eo(m).hoistableStyles,_=il(o);u=u||"default";var P=A.get(_);if(!P){var O={loading:0,preload:null};if(P=m.querySelector(Uu(_)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},h),(h=Li.get(_))&&Pv(o,h);var U=P=m.createElement("link");un(U),_n(U,"link",o),U._p=new Promise(function(Y,ee){U.onload=Y,U.onerror=ee}),U.addEventListener("load",function(){O.loading|=1}),U.addEventListener("error",function(){O.loading|=2}),O.loading|=4,vf(P,u,m)}P={type:"stylesheet",instance:P,count:1,state:O},A.set(_,P)}}}function r3(o,u){ss.X(o,u);var h=nl;if(h&&o){var m=Eo(h).hoistableScripts,A=rl(o),_=m.get(A);_||(_=h.querySelector(Bu(A)),_||(o=p({src:o,async:!0},u),(u=Li.get(A))&&Rv(o,u),_=h.createElement("script"),un(_),_n(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(A,_))}}function s3(o,u){ss.M(o,u);var h=nl;if(h&&o){var m=Eo(h).hoistableScripts,A=rl(o),_=m.get(A);_||(_=h.querySelector(Bu(A)),_||(o=p({src:o,async:!0,type:"module"},u),(u=Li.get(A))&&Rv(o,u),_=h.createElement("script"),un(_),_n(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(A,_))}}function VE(o,u,h,m){var A=(A=Te.current)?gf(A):null;if(!A)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=il(h.href),h=Eo(A).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=il(h.href);var _=Eo(A).hoistableStyles,P=_.get(o);if(P||(A=A.ownerDocument||A,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,P),(_=A.querySelector(Uu(o)))&&!_._p&&(P.instance=_,P.state.loading=5),Li.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Li.set(o,h),_||a3(A,o,h,P.state))),u&&m===null)throw Error(i(528,""));return P}if(u&&m!==null)throw Error(i(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=rl(h),h=Eo(A).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function il(o){return'href="'+Mi(o)+'"'}function Uu(o){return'link[rel="stylesheet"]['+o+"]"}function jE(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function a3(o,u,h,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),_n(u,"link",h),un(u),o.head.appendChild(u))}function rl(o){return'[src="'+Mi(o)+'"]'}function Bu(o){return"script[async]"+o}function $E(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+Mi(h.href)+'"]');if(m)return u.instance=m,un(m),m;var A=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),un(m),_n(m,"style",A),vf(m,h.precedence,o),u.instance=m;case"stylesheet":A=il(h.href);var _=o.querySelector(Uu(A));if(_)return u.state.loading|=4,u.instance=_,un(_),_;m=jE(h),(A=Li.get(A))&&Pv(m,A),_=(o.ownerDocument||o).createElement("link"),un(_);var P=_;return P._p=new Promise(function(O,U){P.onload=O,P.onerror=U}),_n(_,"link",m),u.state.loading|=4,vf(_,h.precedence,o),u.instance=_;case"script":return _=rl(h.src),(A=o.querySelector(Bu(_)))?(u.instance=A,un(A),A):(m=h,(A=Li.get(_))&&(m=p({},h),Rv(m,A)),o=o.ownerDocument||o,A=o.createElement("script"),un(A),_n(A,"link",m),o.head.appendChild(A),u.instance=A);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,vf(m,h.precedence,o));return u.instance}function vf(o,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=m.length?m[m.length-1]:null,_=A,P=0;P<m.length;P++){var O=m[P];if(O.dataset.precedence===u)_=O;else if(_!==A)break}_?_.parentNode.insertBefore(o,_.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function Pv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Rv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var yf=null;function YE(o,u,h){if(yf===null){var m=new Map,A=yf=new Map;A.set(h,m)}else A=yf,m=A.get(h),m||(m=new Map,A.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),A=0;A<h.length;A++){var _=h[A];if(!(_[eu]||_[Dt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var P=_.getAttribute(u)||"";P=o+P;var O=m.get(P);O?O.push(_):m.set(P,[_])}}return m}function XE(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function o3(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function KE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function l3(o,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=il(m.href),_=u.querySelector(Uu(A));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=bf.bind(o),u.then(o,o)),h.state.loading|=4,h.instance=_,un(_);return}_=u.ownerDocument||u,m=jE(m),(A=Li.get(A))&&Pv(m,A),_=_.createElement("link"),un(_);var P=_;P._p=new Promise(function(O,U){P.onload=O,P.onerror=U}),_n(_,"link",m),h.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=bf.bind(o),u.addEventListener("load",h),u.addEventListener("error",h))}}var Nv=0;function u3(o,u){return o.stylesheets&&o.count===0&&Sf(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&Sf(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+u);0<o.imgBytes&&Nv===0&&(Nv=62500*qF());var A=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Sf(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>Nv?50:800)+u);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(A)}}:null}function bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Af=null;function Sf(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Af=new Map,u.forEach(c3,o),Af=null,bf.call(o))}function c3(o,u){if(!(u.state.loading&4)){var h=Af.get(o);if(h)var m=h.get(null);else{h=new Map,Af.set(o,h);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<A.length;_++){var P=A[_];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),m=P)}m&&h.set(null,m)}A=u.instance,P=A.getAttribute("data-precedence"),_=h.get(P)||m,_===m&&h.set(null,A),h.set(P,A),this.count++,m=bf.bind(this),A.addEventListener("load",m),A.addEventListener("error",m),_?_.parentNode.insertBefore(A,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),u.state.loading|=4}}var Fu={$$typeof:T,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function d3(o,u,h,m,A,_,P,O,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zl(0),this.hiddenUpdates=Zl(null),this.identifierPrefix=m,this.onUncaughtError=A,this.onCaughtError=_,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function WE(o,u,h,m,A,_,P,O,U,Y,ee,ie){return o=new d3(o,u,h,P,U,Y,ee,ie,O),u=1,_===!0&&(u|=24),_=fi(3,null,null,u),o.current=_,_.stateNode=o,u=cg(),u.refCount++,o.pooledCache=u,u.refCount++,_.memoizedState={element:m,isDehydrated:h,cache:u},pg(_),o}function JE(o){return o?(o=ko,o):ko}function QE(o,u,h,m,A,_){A=JE(A),m.context===null?m.context=A:m.pendingContext=A,m=Fs(u),m.payload={element:h},_=_===void 0?null:_,_!==null&&(m.callback=_),h=zs(o,m,u),h!==null&&(ii(h,o,u),vu(h,o,u))}function ZE(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function Iv(o,u){ZE(o,u),(o=o.alternate)&&ZE(o,u)}function eT(o){if(o.tag===13||o.tag===31){var u=Ta(o,67108864);u!==null&&ii(u,o,67108864),Iv(o,67108864)}}function tT(o){if(o.tag===13||o.tag===31){var u=vi();u=fe(u);var h=Ta(o,u);h!==null&&ii(h,o,u),Iv(o,u)}}var wf=!0;function f3(o,u,h,m){var A=F.T;F.T=null;var _=j.p;try{j.p=2,Dv(o,u,h,m)}finally{j.p=_,F.T=A}}function h3(o,u,h,m){var A=F.T;F.T=null;var _=j.p;try{j.p=8,Dv(o,u,h,m)}finally{j.p=_,F.T=A}}function Dv(o,u,h,m){if(wf){var A=Ov(m);if(A===null)bv(o,u,m,_f,h),iT(o,m);else if(m3(A,o,u,h,m))m.stopPropagation();else if(iT(o,m),u&4&&-1<p3.indexOf(o)){for(;A!==null;){var _=xo(A);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var P=Hr(_.pendingLanes);if(P!==0){var O=_;for(O.pendingLanes|=2,O.entangledLanes|=2;P;){var U=1<<31-zn(P);O.entanglements[1]|=U,P&=~U}wr(_),(et&6)===0&&(sf=Rt()+500,Du(0))}}break;case 31:case 13:O=Ta(_,2),O!==null&&ii(O,_,2),of(),Iv(_,2)}if(_=Ov(m),_===null&&bv(o,u,m,_f,h),_===A)break;A=_}A!==null&&m.stopPropagation()}else bv(o,u,m,null,h)}}function Ov(o){return o=Lm(o),kv(o)}var _f=null;function kv(o){if(_f=null,o=_o(o),o!==null){var u=s(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=a(u),o!==null)return o;o=null}else if(h===31){if(o=l(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return _f=o,null}function nT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case Ql:return 2;case hd:return 8;case yo:case wm:return 32;case pd:return 268435456;default:return 32}default:return 32}}var Lv=!1,Js=null,Qs=null,Zs=null,zu=new Map,Hu=new Map,ea=[],p3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iT(o,u){switch(o){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":zu.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hu.delete(u.pointerId)}}function Gu(o,u,h,m,A,_){return o===null||o.nativeEvent!==_?(o={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:_,targetContainers:[A]},u!==null&&(u=xo(u),u!==null&&eT(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,A!==null&&u.indexOf(A)===-1&&u.push(A),o)}function m3(o,u,h,m,A){switch(u){case"focusin":return Js=Gu(Js,o,u,h,m,A),!0;case"dragenter":return Qs=Gu(Qs,o,u,h,m,A),!0;case"mouseover":return Zs=Gu(Zs,o,u,h,m,A),!0;case"pointerover":var _=A.pointerId;return zu.set(_,Gu(zu.get(_)||null,o,u,h,m,A)),!0;case"gotpointercapture":return _=A.pointerId,Hu.set(_,Gu(Hu.get(_)||null,o,u,h,m,A)),!0}return!1}function rT(o){var u=_o(o.target);if(u!==null){var h=s(u);if(h!==null){if(u=h.tag,u===13){if(u=a(h),u!==null){o.blockedOn=u,wt(o.priority,function(){tT(h)});return}}else if(u===31){if(u=l(h),u!==null){o.blockedOn=u,wt(o.priority,function(){tT(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xf(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=Ov(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);km=m,h.target.dispatchEvent(m),km=null}else return u=xo(h),u!==null&&eT(u),o.blockedOn=h,!1;u.shift()}return!0}function sT(o,u,h){xf(o)&&h.delete(u)}function g3(){Lv=!1,Js!==null&&xf(Js)&&(Js=null),Qs!==null&&xf(Qs)&&(Qs=null),Zs!==null&&xf(Zs)&&(Zs=null),zu.forEach(sT),Hu.forEach(sT)}function Ef(o,u){o.blockedOn===u&&(o.blockedOn=null,Lv||(Lv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,g3)))}var Tf=null;function aT(o){Tf!==o&&(Tf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Tf===o&&(Tf=null);for(var u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],A=o[u+2];if(typeof m!="function"){if(kv(m||h)===null)continue;break}var _=xo(h);_!==null&&(o.splice(u,3),u-=3,Og(_,{pending:!0,data:A,method:h.method,action:m},m,A))}}))}function sl(o){function u(U){return Ef(U,o)}Js!==null&&Ef(Js,o),Qs!==null&&Ef(Qs,o),Zs!==null&&Ef(Zs,o),zu.forEach(u),Hu.forEach(u);for(var h=0;h<ea.length;h++){var m=ea[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<ea.length&&(h=ea[0],h.blockedOn===null);)rT(h),h.blockedOn===null&&ea.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var A=h[m],_=h[m+1],P=A[Jn]||null;if(typeof _=="function")P||aT(h);else if(P){var O=null;if(_&&_.hasAttribute("formAction")){if(A=_,P=_[Jn]||null)O=P.formAction;else if(kv(A)!==null)continue}else O=P.action;typeof O=="function"?h[m+1]=O:(h.splice(m,3),m-=3),aT(h)}}}function oT(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(P){return A=P})},focusReset:"manual",scroll:"manual"})}function u(){A!==null&&(A(),A=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,A=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),A!==null&&(A(),A=null)}}}function Uv(o){this._internalRoot=o}Cf.prototype.render=Uv.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(i(409));var h=u.current,m=vi();QE(h,m,o,u,null,null)},Cf.prototype.unmount=Uv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;QE(o.current,2,null,o,null,null),of(),u[wo]=null}};function Cf(o){this._internalRoot=o}Cf.prototype.unstable_scheduleHydration=function(o){if(o){var u=Ve();o={blockedOn:null,target:o,priority:u};for(var h=0;h<ea.length&&u!==0&&u<ea[h].priority;h++);ea.splice(h,0,o),h===0&&rT(o)}};var lT=e.version;if(lT!=="19.2.3")throw Error(i(527,lT,"19.2.3"));j.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=d(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var v3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{Aa=Mf.inject(v3),Fn=Mf}catch{}}return Vu.createRoot=function(o,u){if(!r(o))throw Error(i(299));var h=!1,m="",A=mx,_=gx,P=vx;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=WE(o,1,!1,null,null,h,m,null,A,_,P,oT),o[wo]=u.current,yv(o),new Uv(u)},Vu.hydrateRoot=function(o,u,h){if(!r(o))throw Error(i(299));var m=!1,A="",_=mx,P=gx,O=vx,U=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.formState!==void 0&&(U=h.formState)),u=WE(o,1,!0,u,h??null,m,A,U,_,P,O,oT),u.context=JE(null),h=u.current,m=vi(),m=fe(m),A=Fs(m),A.callback=null,zs(h,A,m),h=m,u.current.lanes=h,yr(u,h),wr(u),o[wo]=u.current,yv(o),new Cf(u)},Vu.version="19.2.3",Vu}var AT;function M3(){if(AT)return Hv.exports;AT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hv.exports=C3(),Hv.exports}var P3=M3();const R3=Br(P3),N3="modulepreload",I3=function(t,e){return new URL(t,e).href},ST={},Bc=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=d(n.map(f=>{if(f=I3(f,i),f in ST)return;ST[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(i)for(let S=a.length-1;S>=0;S--){const w=a[S];if(w.href===f&&(!p||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":N3,p||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((S,w)=>{y.addEventListener("load",S),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};const D3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),wT=t=>{const e=O3(t);return e.charAt(0).toUpperCase()+e.slice(1)},xI=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),k3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var L3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const U3=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...l},c)=>M.createElement("svg",{ref:c,...L3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:xI("lucide",r),...!s&&!k3(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,f])=>M.createElement(d,f)),...Array.isArray(s)?s:[s]]));const He=(t,e)=>{const n=M.forwardRef(({className:i,...r},s)=>M.createElement(U3,{ref:s,iconNode:e,className:xI(`lucide-${D3(wT(t))}`,`lucide-${t}`,i),...r}));return n.displayName=wT(t),n};const B3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],jv=He("activity",B3);const F3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],z3=He("arrow-right",F3);const H3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],G3=He("calendar",H3);const q3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],EI=He("check",q3);const V3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],j3=He("chevron-left",V3);const $3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y3=He("chevron-right",$3);const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],K3=He("circle-alert",X3);const W3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],J3=He("circle-check-big",W3);const Q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_T=He("circle-x",Q3);const Z3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ez=He("clock",Z3);const tz=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],xT=He("cpu",tz);const nz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],iz=He("file-image",nz);const rz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],F0=He("file-text",rz);const sz=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$v=He("folder-open",sz);const az=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],oz=He("funnel",az);const lz=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],uz=He("hourglass",lz);const cz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],dz=He("image",cz);const fz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hz=He("info",fz);const pz=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],ET=He("layout-dashboard",pz);const mz=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],gz=He("lightbulb",mz);const vz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],TI=He("loader-circle",vz);const yz=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],bz=He("menu",yz);const Az=[["path",{d:"M5 12h14",key:"1ays0h"}]],Sz=He("minus",Az);const wz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],TT=He("panel-left",wz);const _z=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xz=He("plus",_z);const Ez=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Tz=He("printer",Ez);const Cz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Mz=He("rotate-ccw",Cz);const Pz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Rz=He("search",Pz);const Nz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Iz=He("settings",Nz);const Dz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oz=He("shield-check",Dz);const kz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ac=He("sparkles",kz);const Lz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],CI=He("tag",Lz);const Uz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],MI=He("trash-2",Uz);const Bz=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Fz=He("trending-down",Bz);const zz=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hz=He("trending-up",zz);const Gz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yv=He("triangle-alert",Gz);const qz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Vz=He("upload",qz);const jz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],CT=He("users",jz);const $z=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gh=He("x",$z);var Jt=(t=>(t.IDLE="IDLE",t.QUEUED="QUEUED",t.PROCESSING="PROCESSING",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t))(Jt||{}),Yz={};let Xz,Kz;function Wz(){return{geminiUrl:Xz,vertexUrl:Kz}}function Jz(t,e,n,i){var r,s;if(!t?.baseUrl){const a=Wz();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(s=a.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}class Es{}function he(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function b(t,e,n){for(let s=0;s<e.length-1;s++){const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];b(f,e.slice(s+1),n[d])}else for(const d of c)b(d,e.slice(s+1),n)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];b(c[0],e.slice(s+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function v(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(l=>v(l,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Qz(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),a=new Set;let l=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){l=c;break}if(l!==-1&&s.length>l)for(let c=l;c<s.length;c++){const d=s[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}z0(t,r,s,0,a)}}function z0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2),l=t;if(a in l&&Array.isArray(l[a]))for(const c of l[a])z0(c,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,l=Object.keys(a).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of l)c[d]=a[d];for(const[d,f]of Object.entries(c)){const p=[];for(const g of n.slice(i))g==="*"?p.push(d):p.push(g);b(a,p,f)}for(const d of l)delete a[d]}}else{const a=t;s in a&&z0(a[s],e,n,i+1,r)}}function gA(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function Zz(t){const e={},n=v(t,["operationName"]);n!=null&&b(e,["operationName"],n);const i=v(t,["resourceName"]);return i!=null&&b(e,["_url","resourceName"],i),e}function eH(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response","generateVideoResponse"]);return a!=null&&b(e,["response"],nH(a)),e}function tH(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],iH(a)),e}function nH(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rH(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function iH(t){const e={},n=v(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>sH(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function rH(t){const e={},n=v(t,["video"]);return n!=null&&b(e,["video"],dH(n)),e}function sH(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],fH(n)),e}function aH(t){const e={},n=v(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function oH(t){const e={},n=v(t,["operationName"]);return n!=null&&b(e,["_url","operationName"],n),e}function lH(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],uH(a)),e}function uH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function PI(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],cH(a)),e}function cH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function dH(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],gA(i));const r=v(t,["encoding"]);return r!=null&&b(e,["mimeType"],r),e}function fH(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],gA(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}var MT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(MT||(MT={}));var PT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(PT||(PT={}));var RT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(RT||(RT={}));var nt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(nt||(nt={}));var NT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(NT||(NT={}));var IT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(IT||(IT={}));var DT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(DT||(DT={}));var OT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(OT||(OT={}));var kT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(kT||(kT={}));var LT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(LT||(LT={}));var UT;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(UT||(UT={}));var BT;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(BT||(BT={}));var FT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(FT||(FT={}));var zT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(zT||(zT={}));var HT;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HT||(HT={}));var GT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(GT||(GT={}));var qT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(qT||(qT={}));var VT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(VT||(VT={}));var jT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jT||(jT={}));var vh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(vh||(vh={}));var $T;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($T||($T={}));var YT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(YT||(YT={}));var XT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(XT||(XT={}));var H0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(H0||(H0={}));var KT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(KT||(KT={}));var WT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(WT||(WT={}));var JT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(JT||(JT={}));var QT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(QT||(QT={}));var ZT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ZT||(ZT={}));var eC;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eC||(eC={}));var tC;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(tC||(tC={}));var nC;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nC||(nC={}));var iC;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(iC||(iC={}));var rC;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rC||(rC={}));var sC;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sC||(sC={}));var aC;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aC||(aC={}));var oC;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(oC||(oC={}));var lC;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lC||(lC={}));var uC;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(uC||(uC={}));var cC;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(cC||(cC={}));var dC;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(dC||(dC={}));var fC;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(fC||(fC={}));var hC;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(hC||(hC={}));var pC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(pC||(pC={}));var mC;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(mC||(mC={}));var gC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(gC||(gC={}));var vC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vC||(vC={}));var yC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(yC||(yC={}));var bC;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(bC||(bC={}));var AC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(AC||(AC={}));var SC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(SC||(SC={}));var wC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(wC||(wC={}));var _C;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_C||(_C={}));var xC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xC||(xC={}));var EC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(EC||(EC={}));var ml;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ml||(ml={}));class G0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ju{get text(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const g of(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[y,S]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(S!==null||S!==void 0)&&p.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(p))g!=="inlineData"&&(y!==null||y!==void 0)&&f.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,r,s,a,l,c;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,i,r,s,a,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,r,s,a,l,c,d;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(l=(a=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}}class TC{}class CC{}class hH{}class pH{}class mH{}class gH{}class MC{}class PC{}class RC{}class vH{}class yh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new yh;let r;const s=e;return n?r=tH(s):r=eH(s),Object.assign(i,r),i}}class NC{}class IC{}class DC{}class OC{}class yH{}class bH{}class AH{}class vA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new vA,s=lH(e);return Object.assign(i,s),i}}class SH{}class wH{}class _H{}class kC{}class xH{get text(){var e,n,i;let r="",s=!1;const a=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;s=!0,r+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="inlineData"&&c!==null&&s.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class EH{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class yA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new yA,s=PI(e);return Object.assign(i,s),i}}function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function RI(t,e){const n=Qe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function NI(t){return Array.isArray(t)?t.map(e=>bh(e)):[bh(t)]}function bh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function II(t){const e=bh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function DI(t){const e=bh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function OI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>LC(e)):[LC(t)]}function q0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function UC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function BC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ln(t){if(t==null)throw new Error("ContentUnion is required");return q0(t)?t:{role:"user",parts:OI(t)}}function bA(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ln(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Ln(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ln(n)):[Ln(e)]}function ji(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(UC(t)||BC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ln(t)]}const e=[],n=[],i=q0(t[0]);for(const r of t){const s=q0(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(UC(r)||BC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:OI(n)}),e}function TH(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(nt).includes(n[0].toUpperCase())?n[0].toUpperCase():nt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(nt).includes(i.toUpperCase())?i.toUpperCase():nt.TYPE_UNSPECIFIED})}}function wl(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&TH(t.type,e);for(const[a,l]of Object.entries(t))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(nt).includes(l.toUpperCase())?l.toUpperCase():nt.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=wl(l);else if(i.includes(a)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(wl(d))}e[a]=c}else if(r.includes(a)){const c={};for(const[d,f]of Object.entries(l))c[d]=wl(f);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=l}return e}function AA(t){return wl(t)}function SA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function wA(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=wl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=wl(e.response));return t}function zl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function CH(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ts(t,e){if(typeof e!="string")throw new Error("name must be a string");return CH(t,e,"cachedContents")}function kI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ma(t){return gA(t)}function MH(t){return t!=null&&typeof t=="object"&&"name"in t}function PH(t){return t!=null&&typeof t=="object"&&"video"in t}function RH(t){return t!=null&&typeof t=="object"&&"uri"in t}function LI(t){var e;let n;if(MH(t)&&(n=t.name),!(RH(t)&&(n=t.uri,n===void 0))&&!(PH(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function UI(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function BI(t){for(const e of["models","tunedModels","publisherModels"])if(NH(t,e))return t[e];return[]}function NH(t,e){return t!==null&&typeof t=="object"&&e in t}function IH(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function DH(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const a=IH(r,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function FI(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function OH(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zI(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Hl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function HI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function kH(t){const e={},n=v(t,["responsesFile"]);n!=null&&b(e,["fileName"],n);const i=v(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>m4(a))),b(e,["inlinedResponses"],s)}const r=v(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["inlinedEmbedContentResponses"],s)}return e}function LH(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&b(e,["format"],n);const i=v(t,["gcsDestination","outputUriPrefix"]);i!=null&&b(e,["gcsUri"],i);const r=v(t,["bigqueryDestination","outputUri"]);return r!=null&&b(e,["bigqueryUri"],r),e}function UH(t){const e={},n=v(t,["format"]);n!=null&&b(e,["predictionsFormat"],n);const i=v(t,["gcsUri"]);i!=null&&b(e,["gcsDestination","outputUriPrefix"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&b(e,["bigqueryDestination","outputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(v(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ah(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata","displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["metadata","state"]);r!=null&&b(e,["state"],HI(r));const s=v(t,["metadata","createTime"]);s!=null&&b(e,["createTime"],s);const a=v(t,["metadata","endTime"]);a!=null&&b(e,["endTime"],a);const l=v(t,["metadata","updateTime"]);l!=null&&b(e,["updateTime"],l);const c=v(t,["metadata","model"]);c!=null&&b(e,["model"],c);const d=v(t,["metadata","output"]);return d!=null&&b(e,["dest"],kH(zI(d))),e}function V0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["state"]);r!=null&&b(e,["state"],HI(r));const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["createTime"]);a!=null&&b(e,["createTime"],a);const l=v(t,["startTime"]);l!=null&&b(e,["startTime"],l);const c=v(t,["endTime"]);c!=null&&b(e,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(e,["updateTime"],d);const f=v(t,["model"]);f!=null&&b(e,["model"],f);const p=v(t,["inputConfig"]);p!=null&&b(e,["src"],BH(p));const g=v(t,["outputConfig"]);g!=null&&b(e,["dest"],LH(zI(g)));const y=v(t,["completionStats"]);return y!=null&&b(e,["completionStats"],y),e}function BH(t){const e={},n=v(t,["instancesFormat"]);n!=null&&b(e,["format"],n);const i=v(t,["gcsSource","uris"]);i!=null&&b(e,["gcsUri"],i);const r=v(t,["bigquerySource","inputUri"]);return r!=null&&b(e,["bigqueryUri"],r),e}function FH(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=v(e,["fileName"]);i!=null&&b(n,["fileName"],i);const r=v(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>p4(t,a))),b(n,["requests","requests"],s)}return n}function zH(t){const e={},n=v(t,["format"]);n!=null&&b(e,["instancesFormat"],n);const i=v(t,["gcsUri"]);i!=null&&b(e,["gcsSource","uris"],i);const r=v(t,["bigqueryUri"]);if(r!=null&&b(e,["bigquerySource","inputUri"],r),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HH(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function GH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function qH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function VH(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],n);const i=v(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],jH(i));const r=v(t,["tokenCount"]);r!=null&&b(e,["tokenCount"],r);const s=v(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);const a=v(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&b(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const f=v(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),b(e,["safetyRatings"],g)}const p=v(t,["urlContextMetadata"]);return p!=null&&b(e,["urlContextMetadata"],p),e}function jH(t){const e={},n=v(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["citations"],i)}return e}function GI(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>w4(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function $H(t,e){const n={},i=v(t,["displayName"]);if(e!==void 0&&i!=null&&b(e,["batch","displayName"],i),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function YH(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["dest"]);return e!==void 0&&r!=null&&b(e,["outputConfig"],UH(OH(r))),n}function FC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["batch","inputConfig"],FH(t,FI(t,r)));const s=v(e,["config"]);return s!=null&&$H(s,n),n}function XH(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["inputConfig"],zH(FI(t,r)));const s=v(e,["config"]);return s!=null&&YH(s,n),n}function KH(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["batch","displayName"],i),n}function WH(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["src"]);r!=null&&b(n,["batch","inputConfig"],i4(t,r));const s=v(e,["config"]);return s!=null&&KH(s,n),n}function JH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function QH(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function ZH(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],s),e}function e4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);return s!=null&&b(e,["error"],s),e}function t4(t,e){const n={},i=v(e,["contents"]);if(i!=null){let s=bA(t,i);Array.isArray(s)&&(s=s.map(a=>a)),b(n,["requests[]","request","content"],s)}const r=v(e,["config"]);return r!=null&&(b(n,["_self"],n4(r,n)),Qz(n,{"requests[].*":"requests[].request.*"})),n}function n4(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["requests[]","title"],r);const s=v(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function i4(t,e){const n={},i=v(e,["fileName"]);i!=null&&b(n,["file_name"],i);const r=v(e,["inlinedRequests"]);return r!=null&&b(n,["requests"],t4(t,r)),n}function r4(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function s4(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function a4(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function o4(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],GI(Ln(r)));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const x=v(e,["responseMimeType"]);x!=null&&b(i,["responseMimeType"],x);const E=v(e,["responseSchema"]);E!=null&&b(i,["responseSchema"],AA(E));const C=v(e,["responseJsonSchema"]);if(C!=null&&b(i,["responseJsonSchema"],C),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=v(e,["safetySettings"]);if(n!==void 0&&T!=null){let oe=T;Array.isArray(oe)&&(oe=oe.map(ae=>_4(ae))),b(n,["safetySettings"],oe)}const N=v(e,["tools"]);if(n!==void 0&&N!=null){let oe=zl(N);Array.isArray(oe)&&(oe=oe.map(ae=>E4(Fl(ae)))),b(n,["tools"],oe)}const R=v(e,["toolConfig"]);if(n!==void 0&&R!=null&&b(n,["toolConfig"],x4(R)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=v(e,["cachedContent"]);n!==void 0&&I!=null&&b(n,["cachedContent"],Ts(t,I));const k=v(e,["responseModalities"]);k!=null&&b(i,["responseModalities"],k);const B=v(e,["mediaResolution"]);B!=null&&b(i,["mediaResolution"],B);const z=v(e,["speechConfig"]);if(z!=null&&b(i,["speechConfig"],SA(z)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=v(e,["thinkingConfig"]);V!=null&&b(i,["thinkingConfig"],V);const G=v(e,["imageConfig"]);G!=null&&b(i,["imageConfig"],h4(G));const W=v(e,["enableEnhancedCivicAnswers"]);return W!=null&&b(i,["enableEnhancedCivicAnswers"],W),i}function l4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>VH(d))),b(e,["candidates"],c)}const r=v(t,["modelVersion"]);r!=null&&b(e,["modelVersion"],r);const s=v(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);const a=v(t,["responseId"]);a!=null&&b(e,["responseId"],a);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function u4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function c4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Hl(t,i)),n}function d4(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function f4(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function h4(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function p4(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["request","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let l=ji(r);Array.isArray(l)&&(l=l.map(c=>GI(c))),b(n,["request","contents"],l)}const s=v(e,["metadata"]);s!=null&&b(n,["metadata"],s);const a=v(e,["config"]);return a!=null&&b(n,["request","generationConfig"],o4(t,a,v(n,["request"],{}))),n}function m4(t){const e={},n=v(t,["response"]);n!=null&&b(e,["response"],l4(n));const i=v(t,["error"]);return i!=null&&b(e,["error"],i),e}function g4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);if(e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function v4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);e!==void 0&&r!=null&&b(e,["_query","pageToken"],r);const s=v(t,["filter"]);return e!==void 0&&s!=null&&b(e,["_query","filter"],s),n}function y4(t){const e={},n=v(t,["config"]);return n!=null&&g4(n,e),e}function b4(t){const e={},n=v(t,["config"]);return n!=null&&v4(n,e),e}function A4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>ah(a))),b(e,["batchJobs"],s)}return e}function S4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>V0(a))),b(e,["batchJobs"],s)}return e}function w4(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],r4(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],s4(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],HH(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function _4(t){const e={},n=v(t,["category"]);if(n!=null&&b(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=v(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function x4(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],a4(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function E4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],d4(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],f4(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}var ys;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ys||(ys={}));class fo{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(s=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class T4 extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(ys.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=FC(this.apiClient,e),i=n._url,r=he("{model}:batchGenerateContent",i),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const g=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=g,p.request=y}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),a=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(a)i.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=XH(this.apiClient,e);return l=he("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>V0(f))}else{const d=FC(this.apiClient,e);return l=he("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>ah(f))}}async createEmbeddingsInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=WH(this.apiClient,e);return s=he("{model}:asyncBatchEmbedContent",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>ah(c))}}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=c4(this.apiClient,e);return l=he("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>V0(f))}else{const d=u4(this.apiClient,e);return l=he("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>ah(f))}}async cancel(e){var n,i,r,s;let a="",l={};if(this.apiClient.isVertexAI()){const c=qH(this.apiClient,e);a=he("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=GH(this.apiClient,e);a=he("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=b4(e);return l=he("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=S4(f),g=new kC;return Object.assign(g,p),g})}else{const d=y4(e);return l=he("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=A4(f),g=new kC;return Object.assign(g,p),g})}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=QH(this.apiClient,e);return l=he("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>e4(f))}else{const d=JH(this.apiClient,e);return l=he("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>ZH(f))}}}function C4(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function zC(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>W4(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function M4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&b(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let f=ji(a);Array.isArray(f)&&(f=f.map(p=>zC(p))),b(e,["contents"],f)}const l=v(t,["systemInstruction"]);e!==void 0&&l!=null&&b(e,["systemInstruction"],zC(Ln(l)));const c=v(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>Q4(p))),b(e,["tools"],f)}const d=v(t,["toolConfig"]);if(e!==void 0&&d!=null&&b(e,["toolConfig"],J4(d)),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function P4(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);e!==void 0&&r!=null&&b(e,["expireTime"],r);const s=v(t,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const a=v(t,["contents"]);if(e!==void 0&&a!=null){let p=ji(a);Array.isArray(p)&&(p=p.map(g=>g)),b(e,["contents"],p)}const l=v(t,["systemInstruction"]);e!==void 0&&l!=null&&b(e,["systemInstruction"],Ln(l));const c=v(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>Z4(g))),b(e,["tools"],p)}const d=v(t,["toolConfig"]);e!==void 0&&d!=null&&b(e,["toolConfig"],d);const f=v(t,["kmsKeyName"]);return e!==void 0&&f!=null&&b(e,["encryption_spec","kmsKeyName"],f),n}function R4(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],RI(t,i));const r=v(e,["config"]);return r!=null&&M4(r,n),n}function N4(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["model"],RI(t,i));const r=v(e,["config"]);return r!=null&&P4(r,n),n}function I4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Ts(t,i)),n}function D4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Ts(t,i)),n}function O4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function k4(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function L4(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function U4(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function B4(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function F4(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function z4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Ts(t,i)),n}function H4(t,e){const n={},i=v(e,["name"]);return i!=null&&b(n,["_url","name"],Ts(t,i)),n}function G4(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function q4(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function V4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function j4(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function $4(t){const e={},n=v(t,["config"]);return n!=null&&V4(n,e),e}function Y4(t){const e={},n=v(t,["config"]);return n!=null&&j4(n,e),e}function X4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["cachedContents"],s)}return e}function K4(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["cachedContents"],s)}return e}function W4(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],L4(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],U4(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],C4(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function J4(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],B4(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function Q4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],G4(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],q4(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function Z4(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>F4(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function eG(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&b(e,["expireTime"],r),n}function tG(t,e){const n={},i=v(t,["ttl"]);e!==void 0&&i!=null&&b(e,["ttl"],i);const r=v(t,["expireTime"]);return e!==void 0&&r!=null&&b(e,["expireTime"],r),n}function nG(t,e){const n={},i=v(e,["name"]);i!=null&&b(n,["_url","name"],Ts(t,i));const r=v(e,["config"]);return r!=null&&eG(r,n),n}function iG(t,e){const n={},i=v(e,["name"]);i!=null&&b(n,["_url","name"],Ts(t,i));const r=v(e,["config"]);return r!=null&&tG(r,n),n}class rG extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(ys.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=N4(this.apiClient,e);return l=he("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=R4(this.apiClient,e);return l=he("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=H4(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=z4(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=D4(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=k4(f),g=new DC;return Object.assign(g,p),g})}else{const d=I4(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=O4(f),g=new DC;return Object.assign(g,p),g})}}async update(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=iG(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const d=nG(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=Y4(e);return l=he("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=K4(f),g=new OC;return Object.assign(g,p),g})}else{const d=$4(e);return l=he("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=X4(f),g=new OC;return Object.assign(g,p),g})}}}function Ah(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function HC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function De(t){return this instanceof De?(this.v=t,this):new De(t)}function or(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(S){return Promise.resolve(S).then(y,p)}}function l(y,S){i[y]&&(r[y]=function(w){return new Promise(function(x,E){s.push([y,w,x,E])>1||c(y,w)})},S&&(r[y]=S(r[y])))}function c(y,S){try{d(i[y](S))}catch(w){g(s[0][3],w)}}function d(y){y.value instanceof De?Promise.resolve(y.value.v).then(f,p):g(s[0][2],y)}function f(y){c("next",y)}function p(y){c("throw",y)}function g(y,S){y(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function lr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof HC=="function"?HC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(a){return new Promise(function(l,c){a=t[s](a),r(l,c,a.done,a.value)})}}function r(s,a,l,c){Promise.resolve(c).then(function(d){s({value:d,done:l})},a)}}function sG(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:qI(n)}function qI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function aG(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function GC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!qI(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class oG{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new lG(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class lG{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),aG(s)}async sendMessage(e){var n;await this.sendPromise;const i=Ln(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,a,l;const c=await r,d=(a=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||a===void 0?void 0:a.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];f!=null&&(g=(l=f.slice(p))!==null&&l!==void 0?l:[]);const y=d?[d]:[];this.recordHistory(i,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ln(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?GC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return or(this,arguments,function*(){var r,s,a,l,c,d;const f=[];try{for(var p=!0,g=lr(e),y;y=yield De(g.next()),r=y.done,!r;p=!0){l=y.value,p=!1;const S=l;if(sG(S)){const w=(d=(c=S.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;w!==void 0&&f.push(w)}yield yield De(S)}}catch(S){s={error:S}}finally{try{!p&&!r&&(a=g.return)&&(yield De(a.call(g)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...GC(i)):this.history.push(e),this.history.push(...r)}}class Ap extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ap.prototype)}}function uG(t){const e={},n=v(t,["file"]);return n!=null&&b(e,["file"],n),e}function cG(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function dG(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","file"],LI(n)),e}function fG(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function hG(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","file"],LI(n)),e}function pG(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function mG(t){const e={},n=v(t,["config"]);return n!=null&&pG(n,e),e}function gG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["files"],s)}return e}class vG extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(ys.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mG(e);return s=he("files",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=gG(c),f=new SH;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=uG(e);return s=he("upload/v1beta/files",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=cG(c),f=new wH;return Object.assign(f,d),f})}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hG(e);return s=he("files/{file}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dG(e);return s=he("files/{file}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=fG(c),f=new _H;return Object.assign(f,d),f})}}}function oh(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function yG(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>OG(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function bG(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function AG(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SG(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function wG(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=v(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const r=v(t,["audioTimestamp"]);r!=null&&b(e,["audioTimestamp"],r);const s=v(t,["candidateCount"]);s!=null&&b(e,["candidateCount"],s);const a=v(t,["enableAffectiveDialog"]);a!=null&&b(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&b(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&b(e,["logprobs"],c);const d=v(t,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const f=v(t,["mediaResolution"]);f!=null&&b(e,["mediaResolution"],f);const p=v(t,["presencePenalty"]);p!=null&&b(e,["presencePenalty"],p);const g=v(t,["responseLogprobs"]);g!=null&&b(e,["responseLogprobs"],g);const y=v(t,["responseMimeType"]);y!=null&&b(e,["responseMimeType"],y);const S=v(t,["responseModalities"]);S!=null&&b(e,["responseModalities"],S);const w=v(t,["responseSchema"]);w!=null&&b(e,["responseSchema"],w);const x=v(t,["routingConfig"]);x!=null&&b(e,["routingConfig"],x);const E=v(t,["seed"]);E!=null&&b(e,["seed"],E);const C=v(t,["speechConfig"]);C!=null&&b(e,["speechConfig"],C);const T=v(t,["stopSequences"]);T!=null&&b(e,["stopSequences"],T);const N=v(t,["temperature"]);N!=null&&b(e,["temperature"],N);const R=v(t,["thinkingConfig"]);R!=null&&b(e,["thinkingConfig"],R);const I=v(t,["topK"]);I!=null&&b(e,["topK"],I);const k=v(t,["topP"]);if(k!=null&&b(e,["topP"],k),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _G(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function xG(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function EG(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],wA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],yG(Ln(S)));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let I=zl(w);Array.isArray(I)&&(I=I.map(k=>LG(Fl(k)))),b(e,["setup","tools"],I)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&b(e,["setup","sessionResumption"],kG(x));const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&b(e,["setup","inputAudioTranscription"],E);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);if(e!==void 0&&R!=null&&b(e,["setup","proactivity"],R),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function TG(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],wG(i));const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],wA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],Ln(S));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let k=zl(w);Array.isArray(k)&&(k=k.map(B=>UG(Fl(B)))),b(e,["setup","tools"],k)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&b(e,["setup","sessionResumption"],x);const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&b(e,["setup","inputAudioTranscription"],E);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);e!==void 0&&R!=null&&b(e,["setup","proactivity"],R);const I=v(t,["explicitVadSignal"]);return e!==void 0&&I!=null&&b(e,["setup","explicitVadSignal"],I),n}function CG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],EG(r,n)),n}function MG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],TG(r,n)),n}function PG(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&b(e,["musicGenerationConfig"],n),e}function RG(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["weightedPrompts"],i)}return e}function NG(t){const e={},n=v(t,["media"]);if(n!=null){let d=NI(n);Array.isArray(d)&&(d=d.map(f=>oh(f))),b(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&b(e,["audio"],oh(DI(i)));const r=v(t,["audioStreamEnd"]);r!=null&&b(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&b(e,["video"],oh(II(s)));const a=v(t,["text"]);a!=null&&b(e,["text"],a);const l=v(t,["activityStart"]);l!=null&&b(e,["activityStart"],l);const c=v(t,["activityEnd"]);return c!=null&&b(e,["activityEnd"],c),e}function IG(t){const e={},n=v(t,["media"]);if(n!=null){let d=NI(n);Array.isArray(d)&&(d=d.map(f=>f)),b(e,["mediaChunks"],d)}const i=v(t,["audio"]);i!=null&&b(e,["audio"],DI(i));const r=v(t,["audioStreamEnd"]);r!=null&&b(e,["audioStreamEnd"],r);const s=v(t,["video"]);s!=null&&b(e,["video"],II(s));const a=v(t,["text"]);a!=null&&b(e,["text"],a);const l=v(t,["activityStart"]);l!=null&&b(e,["activityStart"],l);const c=v(t,["activityEnd"]);return c!=null&&b(e,["activityEnd"],c),e}function DG(t){const e={},n=v(t,["setupComplete"]);n!=null&&b(e,["setupComplete"],n);const i=v(t,["serverContent"]);i!=null&&b(e,["serverContent"],i);const r=v(t,["toolCall"]);r!=null&&b(e,["toolCall"],r);const s=v(t,["toolCallCancellation"]);s!=null&&b(e,["toolCallCancellation"],s);const a=v(t,["usageMetadata"]);a!=null&&b(e,["usageMetadata"],BG(a));const l=v(t,["goAway"]);l!=null&&b(e,["goAway"],l);const c=v(t,["sessionResumptionUpdate"]);c!=null&&b(e,["sessionResumptionUpdate"],c);const d=v(t,["voiceActivityDetectionSignal"]);return d!=null&&b(e,["voiceActivityDetectionSignal"],d),e}function OG(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],bG(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],AG(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],oh(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function kG(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LG(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],_G(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],xG(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function UG(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>SG(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function BG(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&b(e,["promptTokenCount"],n);const i=v(t,["cachedContentTokenCount"]);i!=null&&b(e,["cachedContentTokenCount"],i);const r=v(t,["candidatesTokenCount"]);r!=null&&b(e,["responseTokenCount"],r);const s=v(t,["toolUsePromptTokenCount"]);s!=null&&b(e,["toolUsePromptTokenCount"],s);const a=v(t,["thoughtsTokenCount"]);a!=null&&b(e,["thoughtsTokenCount"],a);const l=v(t,["totalTokenCount"]);l!=null&&b(e,["totalTokenCount"],l);const c=v(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["promptTokensDetails"],y)}const d=v(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["cacheTokensDetails"],y)}const f=v(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["responseTokensDetails"],y)}const p=v(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(S=>S)),b(e,["toolUsePromptTokensDetails"],y)}const g=v(t,["trafficType"]);return g!=null&&b(e,["trafficType"],g),e}function FG(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function zG(t){const e={},n=v(t,["content"]);n!=null&&b(e,["content"],n);const i=v(t,["citationMetadata"]);i!=null&&b(e,["citationMetadata"],HG(i));const r=v(t,["tokenCount"]);r!=null&&b(e,["tokenCount"],r);const s=v(t,["finishReason"]);s!=null&&b(e,["finishReason"],s);const a=v(t,["avgLogprobs"]);a!=null&&b(e,["avgLogprobs"],a);const l=v(t,["groundingMetadata"]);l!=null&&b(e,["groundingMetadata"],l);const c=v(t,["index"]);c!=null&&b(e,["index"],c);const d=v(t,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const f=v(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),b(e,["safetyRatings"],g)}const p=v(t,["urlContextMetadata"]);return p!=null&&b(e,["urlContextMetadata"],p),e}function HG(t){const e={},n=v(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),b(e,["citations"],i)}return e}function GG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let s=ji(r);Array.isArray(s)&&(s=s.map(a=>a)),b(n,["contents"],s)}return n}function qG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(e,["tokensInfo"],r)}return e}function VG(t){const e={},n=v(t,["values"]);n!=null&&b(e,["values"],n);const i=v(t,["statistics"]);return i!=null&&b(e,["statistics"],jG(i)),e}function jG(t){const e={},n=v(t,["truncated"]);n!=null&&b(e,["truncated"],n);const i=v(t,["token_count"]);return i!=null&&b(e,["tokenCount"],i),e}function Sp(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>eq(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function $G(t){const e={},n=v(t,["controlType"]);n!=null&&b(e,["controlType"],n);const i=v(t,["enableControlImageComputation"]);return i!=null&&b(e,["computeControl"],i),e}function YG(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function XG(t,e){const n={},i=v(t,["systemInstruction"]);e!==void 0&&i!=null&&b(e,["systemInstruction"],Ln(i));const r=v(t,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>YI(l))),b(e,["tools"],a)}const s=v(t,["generationConfig"]);return e!==void 0&&s!=null&&b(e,["generationConfig"],F5(s)),n}function KG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=ji(r);Array.isArray(a)&&(a=a.map(l=>Sp(l))),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&YG(s),n}function WG(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=ji(r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&XG(s,n),n}function JG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["totalTokens"]);i!=null&&b(e,["totalTokens"],i);const r=v(t,["cachedContentTokenCount"]);return r!=null&&b(e,["cachedContentTokenCount"],r),e}function QG(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["totalTokens"]);return i!=null&&b(e,["totalTokens"],i),e}function ZG(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function e5(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function t5(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function n5(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}function i5(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["negativePrompt"]);e!==void 0&&r!=null&&b(e,["parameters","negativePrompt"],r);const s=v(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a);const l=v(t,["guidanceScale"]);e!==void 0&&l!=null&&b(e,["parameters","guidanceScale"],l);const c=v(t,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&b(e,["parameters","includeSafetyAttributes"],p);const g=v(t,["includeRaiReason"]);e!==void 0&&g!=null&&b(e,["parameters","includeRaiReason"],g);const y=v(t,["language"]);e!==void 0&&y!=null&&b(e,["parameters","language"],y);const S=v(t,["outputMimeType"]);e!==void 0&&S!=null&&b(e,["parameters","outputOptions","mimeType"],S);const w=v(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&b(e,["parameters","outputOptions","compressionQuality"],w);const x=v(t,["addWatermark"]);e!==void 0&&x!=null&&b(e,["parameters","addWatermark"],x);const E=v(t,["labels"]);e!==void 0&&E!=null&&b(e,["labels"],E);const C=v(t,["editMode"]);e!==void 0&&C!=null&&b(e,["parameters","editMode"],C);const T=v(t,["baseSteps"]);return e!==void 0&&T!=null&&b(e,["parameters","editConfig","baseSteps"],T),n}function r5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>aq(c))),b(n,["instances[0]","referenceImages"],l)}const a=v(e,["config"]);return a!=null&&i5(a,n),n}function s5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>wp(s))),b(e,["generatedImages"],r)}return e}function a5(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["requests[]","taskType"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["requests[]","title"],r);const s=v(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&b(e,["requests[]","outputDimensionality"],s),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function o5(t,e){const n={},i=v(t,["taskType"]);e!==void 0&&i!=null&&b(e,["instances[]","task_type"],i);const r=v(t,["title"]);e!==void 0&&r!=null&&b(e,["instances[]","title"],r);const s=v(t,["outputDimensionality"]);e!==void 0&&s!=null&&b(e,["parameters","outputDimensionality"],s);const a=v(t,["mimeType"]);e!==void 0&&a!=null&&b(e,["instances[]","mimeType"],a);const l=v(t,["autoTruncate"]);return e!==void 0&&l!=null&&b(e,["parameters","autoTruncate"],l),n}function l5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let l=bA(t,r);Array.isArray(l)&&(l=l.map(c=>c)),b(n,["requests[]","content"],l)}const s=v(e,["config"]);s!=null&&a5(s,n);const a=v(e,["model"]);return a!==void 0&&b(n,["requests[]","model"],Qe(t,a)),n}function u5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=bA(t,r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["instances[]","content"],a)}const s=v(e,["config"]);return s!=null&&o5(s,n),n}function c5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["embeddings"],s)}const r=v(t,["metadata"]);return r!=null&&b(e,["metadata"],r),e}function d5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>VG(a))),b(e,["embeddings"],s)}const r=v(t,["metadata"]);return r!=null&&b(e,["metadata"],r),e}function f5(t){const e={},n=v(t,["endpoint"]);n!=null&&b(e,["name"],n);const i=v(t,["deployedModelId"]);return i!=null&&b(e,["deployedModelId"],i),e}function h5(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function p5(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m5(t){const e={},n=v(t,["mode"]);n!=null&&b(e,["mode"],n);const i=v(t,["allowedFunctionNames"]);if(i!=null&&b(e,["allowedFunctionNames"],i),v(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function g5(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&b(e,["description"],n);const i=v(t,["name"]);i!=null&&b(e,["name"],i);const r=v(t,["parameters"]);r!=null&&b(e,["parameters"],r);const s=v(t,["parametersJsonSchema"]);s!=null&&b(e,["parametersJsonSchema"],s);const a=v(t,["response"]);a!=null&&b(e,["response"],a);const l=v(t,["responseJsonSchema"]);return l!=null&&b(e,["responseJsonSchema"],l),e}function v5(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],Sp(Ln(r)));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const x=v(e,["responseMimeType"]);x!=null&&b(i,["responseMimeType"],x);const E=v(e,["responseSchema"]);E!=null&&b(i,["responseSchema"],AA(E));const C=v(e,["responseJsonSchema"]);if(C!=null&&b(i,["responseJsonSchema"],C),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=v(e,["safetySettings"]);if(n!==void 0&&T!=null){let oe=T;Array.isArray(oe)&&(oe=oe.map(ae=>oq(ae))),b(n,["safetySettings"],oe)}const N=v(e,["tools"]);if(n!==void 0&&N!=null){let oe=zl(N);Array.isArray(oe)&&(oe=oe.map(ae=>pq(Fl(ae)))),b(n,["tools"],oe)}const R=v(e,["toolConfig"]);if(n!==void 0&&R!=null&&b(n,["toolConfig"],hq(R)),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=v(e,["cachedContent"]);n!==void 0&&I!=null&&b(n,["cachedContent"],Ts(t,I));const k=v(e,["responseModalities"]);k!=null&&b(i,["responseModalities"],k);const B=v(e,["mediaResolution"]);B!=null&&b(i,["mediaResolution"],B);const z=v(e,["speechConfig"]);if(z!=null&&b(i,["speechConfig"],SA(z)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=v(e,["thinkingConfig"]);V!=null&&b(i,["thinkingConfig"],V);const G=v(e,["imageConfig"]);G!=null&&b(i,["imageConfig"],V5(G));const W=v(e,["enableEnhancedCivicAnswers"]);return W!=null&&b(i,["enableEnhancedCivicAnswers"],W),i}function y5(t,e,n){const i={},r=v(e,["systemInstruction"]);n!==void 0&&r!=null&&b(n,["systemInstruction"],Ln(r));const s=v(e,["temperature"]);s!=null&&b(i,["temperature"],s);const a=v(e,["topP"]);a!=null&&b(i,["topP"],a);const l=v(e,["topK"]);l!=null&&b(i,["topK"],l);const c=v(e,["candidateCount"]);c!=null&&b(i,["candidateCount"],c);const d=v(e,["maxOutputTokens"]);d!=null&&b(i,["maxOutputTokens"],d);const f=v(e,["stopSequences"]);f!=null&&b(i,["stopSequences"],f);const p=v(e,["responseLogprobs"]);p!=null&&b(i,["responseLogprobs"],p);const g=v(e,["logprobs"]);g!=null&&b(i,["logprobs"],g);const y=v(e,["presencePenalty"]);y!=null&&b(i,["presencePenalty"],y);const S=v(e,["frequencyPenalty"]);S!=null&&b(i,["frequencyPenalty"],S);const w=v(e,["seed"]);w!=null&&b(i,["seed"],w);const x=v(e,["responseMimeType"]);x!=null&&b(i,["responseMimeType"],x);const E=v(e,["responseSchema"]);E!=null&&b(i,["responseSchema"],AA(E));const C=v(e,["responseJsonSchema"]);C!=null&&b(i,["responseJsonSchema"],C);const T=v(e,["routingConfig"]);T!=null&&b(i,["routingConfig"],T);const N=v(e,["modelSelectionConfig"]);N!=null&&b(i,["modelConfig"],N);const R=v(e,["safetySettings"]);if(n!==void 0&&R!=null){let F=R;Array.isArray(F)&&(F=F.map(j=>j)),b(n,["safetySettings"],F)}const I=v(e,["tools"]);if(n!==void 0&&I!=null){let F=zl(I);Array.isArray(F)&&(F=F.map(j=>YI(Fl(j)))),b(n,["tools"],F)}const k=v(e,["toolConfig"]);n!==void 0&&k!=null&&b(n,["toolConfig"],k);const B=v(e,["labels"]);n!==void 0&&B!=null&&b(n,["labels"],B);const z=v(e,["cachedContent"]);n!==void 0&&z!=null&&b(n,["cachedContent"],Ts(t,z));const V=v(e,["responseModalities"]);V!=null&&b(i,["responseModalities"],V);const G=v(e,["mediaResolution"]);G!=null&&b(i,["mediaResolution"],G);const W=v(e,["speechConfig"]);W!=null&&b(i,["speechConfig"],SA(W));const oe=v(e,["audioTimestamp"]);oe!=null&&b(i,["audioTimestamp"],oe);const ae=v(e,["thinkingConfig"]);ae!=null&&b(i,["thinkingConfig"],ae);const pe=v(e,["imageConfig"]);if(pe!=null&&b(i,["imageConfig"],j5(pe)),v(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function qC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=ji(r);Array.isArray(a)&&(a=a.map(l=>Sp(l))),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&b(n,["generationConfig"],v5(t,s,n)),n}function VC(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["contents"]);if(r!=null){let a=ji(r);Array.isArray(a)&&(a=a.map(l=>l)),b(n,["contents"],a)}const s=v(e,["config"]);return s!=null&&b(n,["generationConfig"],y5(t,s,n)),n}function jC(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>zG(d))),b(e,["candidates"],c)}const r=v(t,["modelVersion"]);r!=null&&b(e,["modelVersion"],r);const s=v(t,["promptFeedback"]);s!=null&&b(e,["promptFeedback"],s);const a=v(t,["responseId"]);a!=null&&b(e,["responseId"],a);const l=v(t,["usageMetadata"]);return l!=null&&b(e,["usageMetadata"],l),e}function $C(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),b(e,["candidates"],d)}const r=v(t,["createTime"]);r!=null&&b(e,["createTime"],r);const s=v(t,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=v(t,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const l=v(t,["responseId"]);l!=null&&b(e,["responseId"],l);const c=v(t,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function b5(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=v(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["aspectRatio"]);e!==void 0&&r!=null&&b(e,["parameters","aspectRatio"],r);const s=v(t,["guidanceScale"]);if(e!==void 0&&s!=null&&b(e,["parameters","guidanceScale"],s),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&b(e,["parameters","safetySetting"],a);const l=v(t,["personGeneration"]);e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l);const c=v(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&b(e,["parameters","includeSafetyAttributes"],c);const d=v(t,["includeRaiReason"]);e!==void 0&&d!=null&&b(e,["parameters","includeRaiReason"],d);const f=v(t,["language"]);e!==void 0&&f!=null&&b(e,["parameters","language"],f);const p=v(t,["outputMimeType"]);e!==void 0&&p!=null&&b(e,["parameters","outputOptions","mimeType"],p);const g=v(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&b(e,["parameters","outputOptions","compressionQuality"],g),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=v(t,["imageSize"]);if(e!==void 0&&y!=null&&b(e,["parameters","sampleImageSize"],y),v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function A5(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["negativePrompt"]);e!==void 0&&r!=null&&b(e,["parameters","negativePrompt"],r);const s=v(t,["numberOfImages"]);e!==void 0&&s!=null&&b(e,["parameters","sampleCount"],s);const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a);const l=v(t,["guidanceScale"]);e!==void 0&&l!=null&&b(e,["parameters","guidanceScale"],l);const c=v(t,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&b(e,["parameters","includeSafetyAttributes"],p);const g=v(t,["includeRaiReason"]);e!==void 0&&g!=null&&b(e,["parameters","includeRaiReason"],g);const y=v(t,["language"]);e!==void 0&&y!=null&&b(e,["parameters","language"],y);const S=v(t,["outputMimeType"]);e!==void 0&&S!=null&&b(e,["parameters","outputOptions","mimeType"],S);const w=v(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&b(e,["parameters","outputOptions","compressionQuality"],w);const x=v(t,["addWatermark"]);e!==void 0&&x!=null&&b(e,["parameters","addWatermark"],x);const E=v(t,["labels"]);e!==void 0&&E!=null&&b(e,["labels"],E);const C=v(t,["imageSize"]);e!==void 0&&C!=null&&b(e,["parameters","sampleImageSize"],C);const T=v(t,["enhancePrompt"]);return e!==void 0&&T!=null&&b(e,["parameters","enhancePrompt"],T),n}function S5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["config"]);return s!=null&&b5(s,n),n}function w5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["config"]);return s!=null&&A5(s,n),n}function _5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>k5(a))),b(e,["generatedImages"],s)}const r=v(t,["positivePromptSafetyAttributes"]);return r!=null&&b(e,["positivePromptSafetyAttributes"],jI(r)),e}function x5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>wp(a))),b(e,["generatedImages"],s)}const r=v(t,["positivePromptSafetyAttributes"]);return r!=null&&b(e,["positivePromptSafetyAttributes"],$I(r)),e}function E5(t,e){const n={},i=v(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=v(t,["durationSeconds"]);if(e!==void 0&&r!=null&&b(e,["parameters","durationSeconds"],r),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=v(t,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);const a=v(t,["resolution"]);e!==void 0&&a!=null&&b(e,["parameters","resolution"],a);const l=v(t,["personGeneration"]);if(e!==void 0&&l!=null&&b(e,["parameters","personGeneration"],l),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=v(t,["negativePrompt"]);e!==void 0&&c!=null&&b(e,["parameters","negativePrompt"],c);const d=v(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&b(e,["parameters","enhancePrompt"],d),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=v(t,["lastFrame"]);e!==void 0&&f!=null&&b(e,["instances[0]","lastFrame"],_p(f));const p=v(t,["referenceImages"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(y=>Cq(y))),b(e,["instances[0]","referenceImages"],g)}if(v(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function T5(t,e){const n={},i=v(t,["numberOfVideos"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&b(e,["parameters","storageUri"],r);const s=v(t,["fps"]);e!==void 0&&s!=null&&b(e,["parameters","fps"],s);const a=v(t,["durationSeconds"]);e!==void 0&&a!=null&&b(e,["parameters","durationSeconds"],a);const l=v(t,["seed"]);e!==void 0&&l!=null&&b(e,["parameters","seed"],l);const c=v(t,["aspectRatio"]);e!==void 0&&c!=null&&b(e,["parameters","aspectRatio"],c);const d=v(t,["resolution"]);e!==void 0&&d!=null&&b(e,["parameters","resolution"],d);const f=v(t,["personGeneration"]);e!==void 0&&f!=null&&b(e,["parameters","personGeneration"],f);const p=v(t,["pubsubTopic"]);e!==void 0&&p!=null&&b(e,["parameters","pubsubTopic"],p);const g=v(t,["negativePrompt"]);e!==void 0&&g!=null&&b(e,["parameters","negativePrompt"],g);const y=v(t,["enhancePrompt"]);e!==void 0&&y!=null&&b(e,["parameters","enhancePrompt"],y);const S=v(t,["generateAudio"]);e!==void 0&&S!=null&&b(e,["parameters","generateAudio"],S);const w=v(t,["lastFrame"]);e!==void 0&&w!=null&&b(e,["instances[0]","lastFrame"],fr(w));const x=v(t,["referenceImages"]);if(e!==void 0&&x!=null){let T=x;Array.isArray(T)&&(T=T.map(N=>Mq(N))),b(e,["instances[0]","referenceImages"],T)}const E=v(t,["mask"]);e!==void 0&&E!=null&&b(e,["instances[0]","mask"],Tq(E));const C=v(t,["compressionQuality"]);return e!==void 0&&C!=null&&b(e,["parameters","compressionQuality"],C),n}function C5(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response","generateVideoResponse"]);return a!=null&&b(e,["response"],N5(a)),e}function M5(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],I5(a)),e}function P5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["image"]);s!=null&&b(n,["instances[0]","image"],_p(s));const a=v(e,["video"]);a!=null&&b(n,["instances[0]","video"],XI(a));const l=v(e,["source"]);l!=null&&D5(l,n);const c=v(e,["config"]);return c!=null&&E5(c,n),n}function R5(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["prompt"]);r!=null&&b(n,["instances[0]","prompt"],r);const s=v(e,["image"]);s!=null&&b(n,["instances[0]","image"],fr(s));const a=v(e,["video"]);a!=null&&b(n,["instances[0]","video"],KI(a));const l=v(e,["source"]);l!=null&&O5(l,n);const c=v(e,["config"]);return c!=null&&T5(c,n),n}function N5(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>U5(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function I5(t){const e={},n=v(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>B5(a))),b(e,["generatedVideos"],s)}const i=v(t,["raiMediaFilteredCount"]);i!=null&&b(e,["raiMediaFilteredCount"],i);const r=v(t,["raiMediaFilteredReasons"]);return r!=null&&b(e,["raiMediaFilteredReasons"],r),e}function D5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],_p(r));const s=v(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],XI(s)),n}function O5(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],fr(r));const s=v(t,["video"]);return e!==void 0&&s!=null&&b(e,["instances[0]","video"],KI(s)),n}function k5(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],$5(n));const i=v(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const r=v(t,["_self"]);return r!=null&&b(e,["safetyAttributes"],jI(r)),e}function wp(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["image"],VI(n));const i=v(t,["raiFilteredReason"]);i!=null&&b(e,["raiFilteredReason"],i);const r=v(t,["_self"]);r!=null&&b(e,["safetyAttributes"],$I(r));const s=v(t,["prompt"]);return s!=null&&b(e,["enhancedPrompt"],s),e}function L5(t){const e={},n=v(t,["_self"]);n!=null&&b(e,["mask"],VI(n));const i=v(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(e,["labels"],r)}return e}function U5(t){const e={},n=v(t,["video"]);return n!=null&&b(e,["video"],xq(n)),e}function B5(t){const e={},n=v(t,["_self"]);return n!=null&&b(e,["video"],Eq(n)),e}function F5(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&b(e,["modelConfig"],n);const i=v(t,["responseJsonSchema"]);i!=null&&b(e,["responseJsonSchema"],i);const r=v(t,["audioTimestamp"]);r!=null&&b(e,["audioTimestamp"],r);const s=v(t,["candidateCount"]);s!=null&&b(e,["candidateCount"],s);const a=v(t,["enableAffectiveDialog"]);a!=null&&b(e,["enableAffectiveDialog"],a);const l=v(t,["frequencyPenalty"]);l!=null&&b(e,["frequencyPenalty"],l);const c=v(t,["logprobs"]);c!=null&&b(e,["logprobs"],c);const d=v(t,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const f=v(t,["mediaResolution"]);f!=null&&b(e,["mediaResolution"],f);const p=v(t,["presencePenalty"]);p!=null&&b(e,["presencePenalty"],p);const g=v(t,["responseLogprobs"]);g!=null&&b(e,["responseLogprobs"],g);const y=v(t,["responseMimeType"]);y!=null&&b(e,["responseMimeType"],y);const S=v(t,["responseModalities"]);S!=null&&b(e,["responseModalities"],S);const w=v(t,["responseSchema"]);w!=null&&b(e,["responseSchema"],w);const x=v(t,["routingConfig"]);x!=null&&b(e,["routingConfig"],x);const E=v(t,["seed"]);E!=null&&b(e,["seed"],E);const C=v(t,["speechConfig"]);C!=null&&b(e,["speechConfig"],C);const T=v(t,["stopSequences"]);T!=null&&b(e,["stopSequences"],T);const N=v(t,["temperature"]);N!=null&&b(e,["temperature"],N);const R=v(t,["thinkingConfig"]);R!=null&&b(e,["thinkingConfig"],R);const I=v(t,["topK"]);I!=null&&b(e,["topK"],I);const k=v(t,["topP"]);if(k!=null&&b(e,["topP"],k),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function z5(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function H5(t,e){const n={},i=v(e,["model"]);return i!=null&&b(n,["_url","name"],Qe(t,i)),n}function G5(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function q5(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function V5(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);if(i!=null&&b(e,["imageSize"],i),v(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(v(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function j5(t){const e={},n=v(t,["aspectRatio"]);n!=null&&b(e,["aspectRatio"],n);const i=v(t,["imageSize"]);i!=null&&b(e,["imageSize"],i);const r=v(t,["outputMimeType"]);r!=null&&b(e,["imageOutputOptions","mimeType"],r);const s=v(t,["outputCompressionQuality"]);return s!=null&&b(e,["imageOutputOptions","compressionQuality"],s),e}function $5(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],ma(n));const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function VI(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["imageBytes"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function _p(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],ma(n));const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function fr(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["imageBytes"]);i!=null&&b(e,["bytesBase64Encoded"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Y5(t,e,n){const i={},r=v(e,["pageSize"]);n!==void 0&&r!=null&&b(n,["_query","pageSize"],r);const s=v(e,["pageToken"]);n!==void 0&&s!=null&&b(n,["_query","pageToken"],s);const a=v(e,["filter"]);n!==void 0&&a!=null&&b(n,["_query","filter"],a);const l=v(e,["queryBase"]);return n!==void 0&&l!=null&&b(n,["_url","models_url"],UI(t,l)),i}function X5(t,e,n){const i={},r=v(e,["pageSize"]);n!==void 0&&r!=null&&b(n,["_query","pageSize"],r);const s=v(e,["pageToken"]);n!==void 0&&s!=null&&b(n,["_query","pageToken"],s);const a=v(e,["filter"]);n!==void 0&&a!=null&&b(n,["_query","filter"],a);const l=v(e,["queryBase"]);return n!==void 0&&l!=null&&b(n,["_url","models_url"],UI(t,l)),i}function K5(t,e){const n={},i=v(e,["config"]);return i!=null&&Y5(t,i,n),n}function W5(t,e){const n={},i=v(e,["config"]);return i!=null&&X5(t,i,n),n}function J5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["_self"]);if(r!=null){let s=BI(r);Array.isArray(s)&&(s=s.map(a=>j0(a))),b(e,["models"],s)}return e}function Q5(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["_self"]);if(r!=null){let s=BI(r);Array.isArray(s)&&(s=s.map(a=>$0(a))),b(e,["models"],s)}return e}function Z5(t){const e={},n=v(t,["maskMode"]);n!=null&&b(e,["maskMode"],n);const i=v(t,["segmentationClasses"]);i!=null&&b(e,["maskClasses"],i);const r=v(t,["maskDilation"]);return r!=null&&b(e,["dilation"],r),e}function j0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["version"]);s!=null&&b(e,["version"],s);const a=v(t,["_self"]);a!=null&&b(e,["tunedModelInfo"],mq(a));const l=v(t,["inputTokenLimit"]);l!=null&&b(e,["inputTokenLimit"],l);const c=v(t,["outputTokenLimit"]);c!=null&&b(e,["outputTokenLimit"],c);const d=v(t,["supportedGenerationMethods"]);d!=null&&b(e,["supportedActions"],d);const f=v(t,["temperature"]);f!=null&&b(e,["temperature"],f);const p=v(t,["maxTemperature"]);p!=null&&b(e,["maxTemperature"],p);const g=v(t,["topP"]);g!=null&&b(e,["topP"],g);const y=v(t,["topK"]);y!=null&&b(e,["topK"],y);const S=v(t,["thinking"]);return S!=null&&b(e,["thinking"],S),e}function $0(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["displayName"]);i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);r!=null&&b(e,["description"],r);const s=v(t,["versionId"]);s!=null&&b(e,["version"],s);const a=v(t,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(g=>f5(g))),b(e,["endpoints"],p)}const l=v(t,["labels"]);l!=null&&b(e,["labels"],l);const c=v(t,["_self"]);c!=null&&b(e,["tunedModelInfo"],gq(c));const d=v(t,["defaultCheckpointId"]);d!=null&&b(e,["defaultCheckpointId"],d);const f=v(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),b(e,["checkpoints"],p)}return e}function eq(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],h5(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],p5(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],FG(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function tq(t){const e={},n=v(t,["productImage"]);return n!=null&&b(e,["image"],fr(n)),e}function nq(t,e){const n={},i=v(t,["numberOfImages"]);e!==void 0&&i!=null&&b(e,["parameters","sampleCount"],i);const r=v(t,["baseSteps"]);e!==void 0&&r!=null&&b(e,["parameters","baseSteps"],r);const s=v(t,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);const a=v(t,["seed"]);e!==void 0&&a!=null&&b(e,["parameters","seed"],a);const l=v(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&b(e,["parameters","safetySetting"],l);const c=v(t,["personGeneration"]);e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c);const d=v(t,["addWatermark"]);e!==void 0&&d!=null&&b(e,["parameters","addWatermark"],d);const f=v(t,["outputMimeType"]);e!==void 0&&f!=null&&b(e,["parameters","outputOptions","mimeType"],f);const p=v(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&b(e,["parameters","outputOptions","compressionQuality"],p);const g=v(t,["enhancePrompt"]);e!==void 0&&g!=null&&b(e,["parameters","enhancePrompt"],g);const y=v(t,["labels"]);return e!==void 0&&y!=null&&b(e,["labels"],y),n}function iq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["source"]);r!=null&&sq(r,n);const s=v(e,["config"]);return s!=null&&nq(s,n),n}function rq(t){const e={},n=v(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>wp(r))),b(e,["generatedImages"],i)}return e}function sq(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["personImage"]);e!==void 0&&r!=null&&b(e,["instances[0]","personImage","image"],fr(r));const s=v(t,["productImages"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>tq(l))),b(e,["instances[0]","productImages"],a)}return n}function aq(t){const e={},n=v(t,["referenceImage"]);n!=null&&b(e,["referenceImage"],fr(n));const i=v(t,["referenceId"]);i!=null&&b(e,["referenceId"],i);const r=v(t,["referenceType"]);r!=null&&b(e,["referenceType"],r);const s=v(t,["maskImageConfig"]);s!=null&&b(e,["maskImageConfig"],Z5(s));const a=v(t,["controlImageConfig"]);a!=null&&b(e,["controlImageConfig"],$G(a));const l=v(t,["styleImageConfig"]);l!=null&&b(e,["styleImageConfig"],l);const c=v(t,["subjectImageConfig"]);return c!=null&&b(e,["subjectImageConfig"],c),e}function jI(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=v(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const r=v(t,["contentType"]);return r!=null&&b(e,["contentType"],r),e}function $I(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&b(e,["categories"],n);const i=v(t,["safetyAttributes","scores"]);i!=null&&b(e,["scores"],i);const r=v(t,["contentType"]);return r!=null&&b(e,["contentType"],r),e}function oq(t){const e={},n=v(t,["category"]);if(n!=null&&b(e,["category"],n),v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=v(t,["threshold"]);return i!=null&&b(e,["threshold"],i),e}function lq(t){const e={},n=v(t,["image"]);return n!=null&&b(e,["image"],fr(n)),e}function uq(t,e){const n={},i=v(t,["mode"]);e!==void 0&&i!=null&&b(e,["parameters","mode"],i);const r=v(t,["maxPredictions"]);e!==void 0&&r!=null&&b(e,["parameters","maxPredictions"],r);const s=v(t,["confidenceThreshold"]);e!==void 0&&s!=null&&b(e,["parameters","confidenceThreshold"],s);const a=v(t,["maskDilation"]);e!==void 0&&a!=null&&b(e,["parameters","maskDilation"],a);const l=v(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&b(e,["parameters","binaryColorThreshold"],l);const c=v(t,["labels"]);return e!==void 0&&c!=null&&b(e,["labels"],c),n}function cq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["source"]);r!=null&&fq(r,n);const s=v(e,["config"]);return s!=null&&uq(s,n),n}function dq(t){const e={},n=v(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>L5(r))),b(e,["generatedMasks"],i)}return e}function fq(t,e){const n={},i=v(t,["prompt"]);e!==void 0&&i!=null&&b(e,["instances[0]","prompt"],i);const r=v(t,["image"]);e!==void 0&&r!=null&&b(e,["instances[0]","image"],fr(r));const s=v(t,["scribbleImage"]);return e!==void 0&&s!=null&&b(e,["instances[0]","scribble"],lq(s)),n}function hq(t){const e={},n=v(t,["functionCallingConfig"]);n!=null&&b(e,["functionCallingConfig"],m5(n));const i=v(t,["retrievalConfig"]);return i!=null&&b(e,["retrievalConfig"],i),e}function pq(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],G5(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],q5(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function YI(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g5(g))),b(e,["functionDeclarations"],p)}const i=v(t,["retrieval"]);i!=null&&b(e,["retrieval"],i);const r=v(t,["googleSearchRetrieval"]);r!=null&&b(e,["googleSearchRetrieval"],r);const s=v(t,["computerUse"]);if(s!=null&&b(e,["computerUse"],s),v(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=v(t,["codeExecution"]);a!=null&&b(e,["codeExecution"],a);const l=v(t,["enterpriseWebSearch"]);l!=null&&b(e,["enterpriseWebSearch"],l);const c=v(t,["googleMaps"]);c!=null&&b(e,["googleMaps"],c);const d=v(t,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const f=v(t,["urlContext"]);return f!=null&&b(e,["urlContext"],f),e}function mq(t){const e={},n=v(t,["baseModel"]);n!=null&&b(e,["baseModel"],n);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const r=v(t,["updateTime"]);return r!=null&&b(e,["updateTime"],r),e}function gq(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&b(e,["baseModel"],n);const i=v(t,["createTime"]);i!=null&&b(e,["createTime"],i);const r=v(t,["updateTime"]);return r!=null&&b(e,["updateTime"],r),e}function vq(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);e!==void 0&&r!=null&&b(e,["description"],r);const s=v(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),n}function yq(t,e){const n={},i=v(t,["displayName"]);e!==void 0&&i!=null&&b(e,["displayName"],i);const r=v(t,["description"]);e!==void 0&&r!=null&&b(e,["description"],r);const s=v(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&b(e,["defaultCheckpointId"],s),n}function bq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","name"],Qe(t,i));const r=v(e,["config"]);return r!=null&&vq(r,n),n}function Aq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&yq(r,n),n}function Sq(t,e){const n={},i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&b(e,["parameters","storageUri"],i);const r=v(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&b(e,["parameters","safetySetting"],r);const s=v(t,["personGeneration"]);e!==void 0&&s!=null&&b(e,["parameters","personGeneration"],s);const a=v(t,["includeRaiReason"]);e!==void 0&&a!=null&&b(e,["parameters","includeRaiReason"],a);const l=v(t,["outputMimeType"]);e!==void 0&&l!=null&&b(e,["parameters","outputOptions","mimeType"],l);const c=v(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&b(e,["parameters","outputOptions","compressionQuality"],c);const d=v(t,["enhanceInputImage"]);e!==void 0&&d!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=v(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=v(t,["labels"]);e!==void 0&&p!=null&&b(e,["labels"],p);const g=v(t,["numberOfImages"]);e!==void 0&&g!=null&&b(e,["parameters","sampleCount"],g);const y=v(t,["mode"]);return e!==void 0&&y!=null&&b(e,["parameters","mode"],y),n}function wq(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["_url","model"],Qe(t,i));const r=v(e,["image"]);r!=null&&b(n,["instances[0]","image"],fr(r));const s=v(e,["upscaleFactor"]);s!=null&&b(n,["parameters","upscaleConfig","upscaleFactor"],s);const a=v(e,["config"]);return a!=null&&Sq(a,n),n}function _q(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>wp(s))),b(e,["generatedImages"],r)}return e}function xq(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["encodedVideo"]);i!=null&&b(e,["videoBytes"],ma(i));const r=v(t,["encoding"]);return r!=null&&b(e,["mimeType"],r),e}function Eq(t){const e={},n=v(t,["gcsUri"]);n!=null&&b(e,["uri"],n);const i=v(t,["bytesBase64Encoded"]);i!=null&&b(e,["videoBytes"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Tq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["_self"],fr(n));const i=v(t,["maskMode"]);return i!=null&&b(e,["maskMode"],i),e}function Cq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["image"],_p(n));const i=v(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function Mq(t){const e={},n=v(t,["image"]);n!=null&&b(e,["image"],fr(n));const i=v(t,["referenceType"]);return i!=null&&b(e,["referenceType"],i),e}function XI(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["uri"],n);const i=v(t,["videoBytes"]);i!=null&&b(e,["encodedVideo"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["encoding"],r),e}function KI(t){const e={},n=v(t,["uri"]);n!=null&&b(e,["gcsUri"],n);const i=v(t,["videoBytes"]);i!=null&&b(e,["bytesBase64Encoded"],ma(i));const r=v(t,["mimeType"]);return r!=null&&b(e,["mimeType"],r),e}function Pq(t,e){const n={},i=v(t,["displayName"]);return e!==void 0&&i!=null&&b(e,["displayName"],i),n}function Rq(t){const e={},n=v(t,["config"]);return n!=null&&Pq(n,e),e}function Nq(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function Iq(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&Nq(i,e),e}function Dq(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function Oq(t,e){const n={},i=v(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["customMetadata"],s)}const r=v(t,["chunkingConfig"]);return e!==void 0&&r!=null&&b(e,["chunkingConfig"],r),n}function kq(t){const e={},n=v(t,["name"]);n!=null&&b(e,["name"],n);const i=v(t,["metadata"]);i!=null&&b(e,["metadata"],i);const r=v(t,["done"]);r!=null&&b(e,["done"],r);const s=v(t,["error"]);s!=null&&b(e,["error"],s);const a=v(t,["response"]);return a!=null&&b(e,["response"],Uq(a)),e}function Lq(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=v(t,["fileName"]);i!=null&&b(e,["fileName"],i);const r=v(t,["config"]);return r!=null&&Oq(r,e),e}function Uq(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["parent"]);i!=null&&b(e,["parent"],i);const r=v(t,["documentName"]);return r!=null&&b(e,["documentName"],r),e}function Bq(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function Fq(t){const e={},n=v(t,["config"]);return n!=null&&Bq(n,e),e}function zq(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["fileSearchStores"],s)}return e}function WI(t,e){const n={},i=v(t,["mimeType"]);e!==void 0&&i!=null&&b(e,["mimeType"],i);const r=v(t,["displayName"]);e!==void 0&&r!=null&&b(e,["displayName"],r);const s=v(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),b(e,["customMetadata"],l)}const a=v(t,["chunkingConfig"]);return e!==void 0&&a!=null&&b(e,["chunkingConfig"],a),n}function Hq(t){const e={},n=v(t,["fileSearchStoreName"]);n!=null&&b(e,["_url","file_search_store_name"],n);const i=v(t,["config"]);return i!=null&&WI(i,e),e}function Gq(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&b(e,["sdkHttpResponse"],n),e}const qq="Content-Type",Vq="X-Server-Timeout",jq="User-Agent",Y0="x-goog-api-client",$q="1.34.0",Yq=`google-genai-sdk/${$q}`,Xq="v1beta1",Kq="v1beta";class Wq{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Xq,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Kq,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))r.searchParams.append(a,String(l));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,a=s.signal;if(n.timeout&&n?.timeout>0){const l=setTimeout(()=>s.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=a}return n&&n.extraBody!==null&&Jq(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await YC(r),new G0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await YC(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return or(this,arguments,function*(){var i;const r=(i=e?.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";const l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield De(r.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=s.decode(f,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const w=JSON.parse(JSON.stringify(S.error)),x=w.status,E=w.code,C=`got status: ${x}. ${JSON.stringify(S)}`;if(E>=400&&E<600)throw new Ap({message:C,status:E})}}catch(S){if(S.name==="ApiError")throw S}a+=p;let g=-1,y=0;for(;;){g=-1,y=0;for(const x of c){const E=a.indexOf(x);E!==-1&&(g===-1||E<g)&&(g=E,y=x.length)}if(g===-1)break;const S=a.substring(0,g);a=a.substring(g+y);const w=S.trim();if(w.startsWith(l)){const x=w.substring(l.length).trim();try{const E=new Response(x,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield De(new G0(E))}catch(E){throw new Error(`exception parsing stream chunk ${x}. ${E}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Yq+" "+this.clientOptions.userAgentExtra;return e[jq]=n,e[Y0]=n,e[qq]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(Vq,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,a=await s.stat(e);r.sizeBytes=String(a.size);const l=(i=n?.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const c={file:r},d=this.getFileName(e),f=he("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n?.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var r;const s=this.clientOptions.uploader,a=await s.stat(n),l=String(a.size),c=(r=i?.mimeType)!==null&&r!==void 0?r:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};i!=null&&WI(i,p);const g=await this.fetchUploadUrl(d,l,c,f,p,i?.httpOptions);return s.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,a){var l;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(l=d?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function YC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Ap({message:r,status:n}):new Error(r)}}function Jq(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,a){const l=Object.assign({},s);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],f=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const r=i(n,e);t.body=JSON.stringify(r)}const Qq="mcp_used/unknown";let Zq=!1;function JI(t){for(const e of t)if(eV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Zq}function QI(t){var e;const n=(e=t[Y0])!==null&&e!==void 0?e:"";t[Y0]=(n+` ${Qq}`).trimStart()}function eV(t){return t!==null&&typeof t=="object"&&t instanceof _A}function tV(t){return or(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){const a=yield De(n.listTools({cursor:r}));for(const l of a.tools)yield yield De(l),s++;if(!a.nextCursor)break;r=a.nextCursor}})}class _A{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new _A(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},a=[];for(const f of this.mcpClients)try{for(var l=!0,c=(n=void 0,lr(tV(f))),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const p=r;a.push(p);const g=p.name;if(s[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);s[g]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),DH(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return n}}async function nV(t,e,n){const i=new EH;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class iV{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),a=aV(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const f=new Promise(T=>{d=T}),p=e.callbacks,g=function(){d({})},y=this.apiClient,S={onopen:g,onmessage:T=>{nV(y,p.onmessage,T)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(T){}},w=this.webSocketFactory.create(c,sV(a),S);w.connect(),await f;const C={setup:{model:Qe(this.apiClient,e.model)}};return w.send(JSON.stringify(C)),new rV(w,this.apiClient)}}class rV{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=RG(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=PG(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ml.PLAY)}pause(){this.sendPlaybackControl(ml.PAUSE)}stop(){this.sendPlaybackControl(ml.STOP)}resetContext(){this.sendPlaybackControl(ml.RESET_CONTEXT)}close(){this.conn.close()}}function sV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function aV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const oV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lV(t,e,n){const i=new xH;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const a=DG(s);Object.assign(i,a)}else Object.assign(i,s);e(i)}class uV{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new iV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,a,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&JI(e.config.tools)&&QI(p);const g=hV(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,f);else{const z=this.apiClient.getApiKey();let V="BidiGenerateContent",G="key";z?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${V}?${G}=${z}`}let y=()=>{};const S=new Promise(z=>{y=z}),w=e.callbacks,x=function(){var z;(z=w?.onopen)===null||z===void 0||z.call(w),y({})},E=this.apiClient,C={onopen:x,onmessage:z=>{lV(E,w.onmessage,z)},onerror:(n=w?.onerror)!==null&&n!==void 0?n:function(z){},onclose:(i=w?.onclose)!==null&&i!==void 0?i:function(z){}},T=this.webSocketFactory.create(f,fV(g),C);T.connect(),await S;let N=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const z=this.apiClient.getProject(),V=this.apiClient.getLocation();N=`projects/${z}/locations/${V}/`+N}let R={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vh.AUDIO]}:e.config.responseModalities=[vh.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(l=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],k=[];for(const z of I)if(this.isCallableTool(z)){const V=z;k.push(await V.tool())}else k.push(z);k.length>0&&(e.config.tools=k);const B={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?R=MG(this.apiClient,B):R=CG(this.apiClient,B),delete R.config,T.send(JSON.stringify(R)),new dV(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const cV={turnComplete:!0};class dV{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ji(n.turns),e.isVertexAI()||(i=i.map(r=>Sp(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(oV)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},cV),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:IG(e)}:n={realtimeInput:NG(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function fV(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function hV(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const XC=10;function KC(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(n=t?.tools)!==null&&n!==void 0?n:[])if(_l(a)){r=!0;break}if(!r)return!0;const s=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function _l(t){return"callTool"in t&&typeof t.callTool=="function"}function pV(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>_l(r)))!==null&&i!==void 0?i:!1}function WC(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(_l(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function JC(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class mV extends Es{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,a,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!pV(n)||KC(n.config))return await this.generateContentInternal(c);const d=WC(n);if(d.length>0){const w=d.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,p;const g=ji(c.contents),y=(s=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:XC;let S=0;for(;S<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,x=[];for(const E of(l=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(_l(E)){const T=await E.callTool(f.functionCalls);x.push(...T)}S++,p={role:"user",parts:x},c.contents=ji(c.contents),c.contents.push(w),c.contents.push(p),JC(c.config)&&(g.push(w),g.push(p))}return JC(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{var i,r,s,a,l;if(this.maybeMoveToResponseJsonSchem(n),KC(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=WC(n);if(c.length>0){const p=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(r=(i=n?.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(l=(a=n?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const a=[];if(i?.generatedImages)for(const c of i.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c?.safetyAttributes:a.push(c);let l;return s?l={generatedImages:a,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:l={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},l}),this.list=async n=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new fo(ys.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,a,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(s=n.source)===null||s===void 0?void 0:s.video)===null||a===void 0)&&a.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const a=await Promise.all(s.map(async c=>_l(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&JI(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),QI(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const a of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(_l(a)){const l=a,c=await l.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,l)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:XC;let a=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(d,f,p){return or(this,arguments,function*(){for(var g,y,S,w,x,E;l<s;){a&&(l++,a=!1);const R=yield De(d.processParamsMaybeAddMcpUsage(p)),I=yield De(d.generateContentStreamInternal(R)),k=[],B=[];try{for(var C=!0,T=(y=void 0,lr(I)),N;N=yield De(T.next()),g=N.done,!g;C=!0){w=N.value,C=!1;const z=w;if(yield yield De(z),z.candidates&&(!((x=z.candidates[0])===null||x===void 0)&&x.content)){B.push(z.candidates[0].content);for(const V of(E=z.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(l<s&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(V.functionCall.name)){const G=yield De(f.get(V.functionCall.name).callTool([V.functionCall]));k.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(z){y={error:z}}finally{try{!C&&!g&&(S=T.return)&&(yield De(S.call(T)))}finally{if(y)throw y.error}}if(k.length>0){a=!0;const z=new ju;z.candidates=[{content:{role:"user",parts:k}}],yield yield De(z);const V=[];V.push(...B),V.push({role:"user",parts:k});const G=ji(p.contents).concat(V);p.contents=G}else break}})})(this,c,e)}async generateContentInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=VC(this.apiClient,e);return l=he("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=$C(f),g=new ju;return Object.assign(g,p),g})}else{const d=qC(this.apiClient,e);return l=he("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=jC(f),g=new ju;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=VC(this.apiClient,e);return l=he("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return or(this,arguments,function*(){var g,y,S,w;try{for(var x=!0,E=lr(p),C;C=yield De(E.next()),g=C.done,!g;x=!0){w=C.value,x=!1;const T=w,N=$C(yield De(T.json()));N.sdkHttpResponse={headers:T.headers};const R=new ju;Object.assign(R,N),yield yield De(R)}}catch(T){y={error:T}}finally{try{!x&&!g&&(S=E.return)&&(yield De(S.call(E)))}finally{if(y)throw y.error}}})})}else{const d=qC(this.apiClient,e);return l=he("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),a.then(function(p){return or(this,arguments,function*(){var g,y,S,w;try{for(var x=!0,E=lr(p),C;C=yield De(E.next()),g=C.done,!g;x=!0){w=C.value,x=!1;const T=w,N=jC(yield De(T.json()));N.sdkHttpResponse={headers:T.headers};const R=new ju;Object.assign(R,N),yield yield De(R)}}catch(T){y={error:T}}finally{try{!x&&!g&&(S=E.return)&&(yield De(S.call(E)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=u5(this.apiClient,e);return l=he("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=d5(f),g=new TC;return Object.assign(g,p),g})}else{const d=l5(this.apiClient,e);return l=he("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=c5(f),g=new TC;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=w5(this.apiClient,e);return l=he("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=x5(f),g=new CC;return Object.assign(g,p),g})}else{const d=S5(this.apiClient,e);return l=he("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=_5(f),g=new CC;return Object.assign(g,p),g})}}async editImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=r5(this.apiClient,e);return s=he("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=s5(c),f=new hH;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=wq(this.apiClient,e);return s=he("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=_q(c),f=new pH;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=iq(this.apiClient,e);return s=he("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=rq(c),f=new mH;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=cq(this.apiClient,e);return s=he("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=dq(c),f=new gH;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=H5(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>$0(f))}else{const d=z5(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>j0(f))}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=W5(this.apiClient,e);return l=he("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=Q5(f),g=new MC;return Object.assign(g,p),g})}else{const d=K5(this.apiClient,e);return l=he("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=J5(f),g=new MC;return Object.assign(g,p),g})}}async update(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=Aq(this.apiClient,e);return l=he("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>$0(f))}else{const d=bq(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>j0(f))}}async delete(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=e5(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=n5(f),g=new PC;return Object.assign(g,p),g})}else{const d=ZG(this.apiClient,e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=t5(f),g=new PC;return Object.assign(g,p),g})}}async countTokens(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=WG(this.apiClient,e);return l=he("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=QG(f),g=new RC;return Object.assign(g,p),g})}else{const d=KG(this.apiClient,e);return l=he("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=JG(f),g=new RC;return Object.assign(g,p),g})}}async computeTokens(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=GG(this.apiClient,e);return s=he("{model}:computeTokens",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=qG(c),f=new vH;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=R5(this.apiClient,e);return l=he("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>{const p=M5(f),g=new yh;return Object.assign(g,p),g})}else{const d=P5(this.apiClient,e);return l=he("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a.then(f=>{const p=C5(f),g=new yh;return Object.assign(g,p),g})}}}class gV extends Es{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=oH(e);return l=he("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a}else{const d=aH(e);return l=he("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=Zz(e);return s=he("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}function vV(t){const e={},n=v(t,["data"]);if(n!=null&&b(e,["data"],n),v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function yV(t){const e={},n=v(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>CV(s))),b(e,["parts"],r)}const i=v(t,["role"]);return i!=null&&b(e,["role"],i),e}function bV(t,e,n){const i={},r=v(e,["expireTime"]);n!==void 0&&r!=null&&b(n,["expireTime"],r);const s=v(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&b(n,["newSessionExpireTime"],s);const a=v(e,["uses"]);n!==void 0&&a!=null&&b(n,["uses"],a);const l=v(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&b(n,["bidiGenerateContentSetup"],TV(t,l));const c=v(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&b(n,["fieldMask"],c),i}function AV(t,e){const n={},i=v(e,["config"]);return i!=null&&b(n,["config"],bV(t,i,n)),n}function SV(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&b(e,["fileUri"],n);const i=v(t,["mimeType"]);return i!=null&&b(e,["mimeType"],i),e}function wV(t){const e={},n=v(t,["id"]);n!=null&&b(e,["id"],n);const i=v(t,["args"]);i!=null&&b(e,["args"],i);const r=v(t,["name"]);if(r!=null&&b(e,["name"],r),v(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(v(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _V(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&b(e,["enableWidget"],n),e}function xV(t){const e={};if(v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(v(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=v(t,["timeRangeFilter"]);return n!=null&&b(e,["timeRangeFilter"],n),e}function EV(t,e){const n={},i=v(t,["generationConfig"]);e!==void 0&&i!=null&&b(e,["setup","generationConfig"],i);const r=v(t,["responseModalities"]);e!==void 0&&r!=null&&b(e,["setup","generationConfig","responseModalities"],r);const s=v(t,["temperature"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","temperature"],s);const a=v(t,["topP"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","topP"],a);const l=v(t,["topK"]);e!==void 0&&l!=null&&b(e,["setup","generationConfig","topK"],l);const c=v(t,["maxOutputTokens"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","maxOutputTokens"],c);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const f=v(t,["seed"]);e!==void 0&&f!=null&&b(e,["setup","generationConfig","seed"],f);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","speechConfig"],wA(p));const g=v(t,["thinkingConfig"]);e!==void 0&&g!=null&&b(e,["setup","generationConfig","thinkingConfig"],g);const y=v(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],y);const S=v(t,["systemInstruction"]);e!==void 0&&S!=null&&b(e,["setup","systemInstruction"],yV(Ln(S)));const w=v(t,["tools"]);if(e!==void 0&&w!=null){let I=zl(w);Array.isArray(I)&&(I=I.map(k=>PV(Fl(k)))),b(e,["setup","tools"],I)}const x=v(t,["sessionResumption"]);e!==void 0&&x!=null&&b(e,["setup","sessionResumption"],MV(x));const E=v(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&b(e,["setup","inputAudioTranscription"],E);const C=v(t,["outputAudioTranscription"]);e!==void 0&&C!=null&&b(e,["setup","outputAudioTranscription"],C);const T=v(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&b(e,["setup","realtimeInputConfig"],T);const N=v(t,["contextWindowCompression"]);e!==void 0&&N!=null&&b(e,["setup","contextWindowCompression"],N);const R=v(t,["proactivity"]);if(e!==void 0&&R!=null&&b(e,["setup","proactivity"],R),v(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function TV(t,e){const n={},i=v(e,["model"]);i!=null&&b(n,["setup","model"],Qe(t,i));const r=v(e,["config"]);return r!=null&&b(n,["config"],EV(r,n)),n}function CV(t){const e={},n=v(t,["mediaResolution"]);n!=null&&b(e,["mediaResolution"],n);const i=v(t,["codeExecutionResult"]);i!=null&&b(e,["codeExecutionResult"],i);const r=v(t,["executableCode"]);r!=null&&b(e,["executableCode"],r);const s=v(t,["fileData"]);s!=null&&b(e,["fileData"],SV(s));const a=v(t,["functionCall"]);a!=null&&b(e,["functionCall"],wV(a));const l=v(t,["functionResponse"]);l!=null&&b(e,["functionResponse"],l);const c=v(t,["inlineData"]);c!=null&&b(e,["inlineData"],vV(c));const d=v(t,["text"]);d!=null&&b(e,["text"],d);const f=v(t,["thought"]);f!=null&&b(e,["thought"],f);const p=v(t,["thoughtSignature"]);p!=null&&b(e,["thoughtSignature"],p);const g=v(t,["videoMetadata"]);return g!=null&&b(e,["videoMetadata"],g),e}function MV(t){const e={},n=v(t,["handle"]);if(n!=null&&b(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function PV(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),b(e,["functionDeclarations"],f)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=v(t,["googleSearchRetrieval"]);i!=null&&b(e,["googleSearchRetrieval"],i);const r=v(t,["computerUse"]);r!=null&&b(e,["computerUse"],r);const s=v(t,["fileSearch"]);s!=null&&b(e,["fileSearch"],s);const a=v(t,["codeExecution"]);if(a!=null&&b(e,["codeExecution"],a),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=v(t,["googleMaps"]);l!=null&&b(e,["googleMaps"],_V(l));const c=v(t,["googleSearch"]);c!=null&&b(e,["googleSearch"],xV(c));const d=v(t,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function RV(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function NV(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=RV(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)s?t.fieldMask=s:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];r.length>0&&(l=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];s&&c.push(s),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class IV extends Es{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=AV(this.apiClient,e);s=he("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const c=NV(l,e.config);return r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}function DV(t,e){const n={},i=v(t,["force"]);return e!==void 0&&i!=null&&b(e,["_query","force"],i),n}function OV(t){const e={},n=v(t,["name"]);n!=null&&b(e,["_url","name"],n);const i=v(t,["config"]);return i!=null&&DV(i,e),e}function kV(t){const e={},n=v(t,["name"]);return n!=null&&b(e,["_url","name"],n),e}function LV(t,e){const n={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&b(e,["_query","pageSize"],i);const r=v(t,["pageToken"]);return e!==void 0&&r!=null&&b(e,["_query","pageToken"],r),n}function UV(t){const e={},n=v(t,["parent"]);n!=null&&b(e,["_url","parent"],n);const i=v(t,["config"]);return i!=null&&LV(i,e),e}function BV(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&b(e,["sdkHttpResponse"],n);const i=v(t,["nextPageToken"]);i!=null&&b(e,["nextPageToken"],i);const r=v(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["documents"],s)}return e}class FV extends Es{constructor(e){super(),this.apiClient=e,this.list=async n=>new fo(ys.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kV(e);return s=he("{name}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OV(e);r=he("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UV(e);return s=he("{parent}/documents",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=BV(c),f=new yH;return Object.assign(f,d),f})}}}class zV extends Es{constructor(e,n=new FV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new fo(ys.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Rq(e);return s=he("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Dq(e);return s=he("{name}",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Iq(e);r=he("{name}",a._url),s=a._query,delete a._url,delete a._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Fq(e);return s=he("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=zq(c),f=new bH;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Hq(e);return s=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=Gq(c),f=new AH;return Object.assign(f,d),f})}}async importFile(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Lq(e);return s=he("{file_search_store_name}:importFile",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const d=kq(c),f=new vA;return Object.assign(f,d),f})}}}let ZI=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return ZI=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const HV=()=>ZI();function X0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const K0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class $i extends Error{}class Yn extends $i{constructor(e,n,i,r){super(`${Yn.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new xp({message:i,cause:K0(n)});const s=n;return e===400?new tD(e,s,i,r):e===401?new nD(e,s,i,r):e===403?new iD(e,s,i,r):e===404?new rD(e,s,i,r):e===409?new sD(e,s,i,r):e===422?new aD(e,s,i,r):e===429?new oD(e,s,i,r):e>=500?new lD(e,s,i,r):new Yn(e,s,i,r)}}class W0 extends Yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xp extends Yn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class eD extends xp{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tD extends Yn{}class nD extends Yn{}class iD extends Yn{}class rD extends Yn{}class sD extends Yn{}class aD extends Yn{}class oD extends Yn{}class lD extends Yn{}const GV=/^[a-z][a-z0-9+.-]*:/i,qV=t=>GV.test(t);let J0=t=>(J0=Array.isArray,J0(t));const VV=J0;let jV=VV;const QC=jV;function $V(t){if(!t)return!0;for(const e in t)return!1;return!0}function YV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const XV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $i(`${t} must be an integer`);if(e<0)throw new $i(`${t} must be a positive integer`);return e},KV=t=>{try{return JSON.parse(t)}catch{return}};const WV=t=>new Promise(e=>setTimeout(e,t));const cl="0.0.1";function JV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const QV=()=>{var t,e,n,i,r;const s=JV();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cl,"X-Stainless-OS":e1(Deno.build.os),"X-Stainless-Arch":ZC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cl,"X-Stainless-OS":e1((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":ZC((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const a=ZV();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":cl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,a=i[3]||0;return{browser:e,version:`${r}.${s}.${a}`}}}return null}const ZC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",e1=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Pf;const e6=()=>Pf??(Pf=QV());function t6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uD(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function n6(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return uD({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function cD(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function i6(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}const r6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const dD=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xv(t,e,n){return dD(),new File(t,e??"unknown_file",n)}function s6(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const a6=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const fD=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",o6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&fD(t),l6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function u6(t,e,n){if(dD(),t=await t,o6(t))return t instanceof File?t:Xv([await t.arrayBuffer()],t.name);if(l6(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Xv(await Q0(r),e,n)}const i=await Q0(t);if(e||(e=s6(t)),!n?.type){const r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Xv(i,e,n)}async function Q0(t){var e,n,i,r,s;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(fD(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(a6(t))try{for(var l=!0,c=lr(t),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;const f=r;a.push(...await Q0(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const f=(s=t?.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${c6(t)}`)}return a}function c6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class hD{constructor(e){this._client=e}}hD._key=[];function pD(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const t1=Object.freeze(Object.create(null)),d6=(t=pD)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const s=[],a=n.reduce((f,p,g)=>{var y,S,w;/[?#]/.test(p)&&(r=!0);const x=i[g];let E=(r?encodeURIComponent:t)(""+x);return g!==i.length&&(x==null||typeof x=="object"&&x.toString===((w=Object.getPrototypeOf((S=Object.getPrototypeOf((y=x.hasOwnProperty)!==null&&y!==void 0?y:t1))!==null&&S!==void 0?S:t1))===null||w===void 0?void 0:w.toString))&&(E=x+"",s.push({start:f.length+p.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),f+p+(g===i.length?"":E)},""),l=a.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((f,p)=>f.start-p.start),s.length>0){let f=0;const p=s.reduce((g,y)=>{const S=" ".repeat(y.start-f),w="^".repeat(y.length);return f=y.start+y.length,g+S+w},"");throw new $i(`Path parameters result in path with invalid segments:
${s.map(g=>g.error).join(`
`)}
${a}
${p}`)}return a}),Rf=d6(pD);class mD extends hD{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,s=Ah(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new $i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new $i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Rf`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Rf`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Rf`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const s=n??{},{api_version:a=this._client.apiVersion}=s,l=Ah(s,["api_version"]);return this._client.get(Rf`/${a}/interactions/${e}`,Object.assign(Object.assign({query:l},i),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}}mD._key=Object.freeze(["interactions"]);class gD extends mD{}function f6(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Nf;function xA(t){let e;return(Nf??(e=new globalThis.TextEncoder,Nf=e.encode.bind(e)))(t)}let If;function n1(t){let e;return(If??(e=new globalThis.TextDecoder,If=e.decode.bind(e)))(t)}class Ep{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xA(e):e;this.buffer=f6([this.buffer,n]);const i=[];let r;for(;(r=h6(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(n1(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,a=n1(this.buffer.subarray(0,s));i.push(a),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ep.NEWLINE_CHARS=new Set([`
`,"\r"]);Ep.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function h6(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function p6(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Sh={off:0,error:200,warn:300,info:400,debug:500},i1=(t,e,n)=>{if(t){if(YV(Sh,t))return t;Gn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Sh))}`)}};function oc(){}function Df(t,e,n){return!e||Sh[t]>Sh[n]?oc:e[t].bind(e)}const m6={error:oc,warn:oc,info:oc,debug:oc};let r1=new WeakMap;function Gn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return m6;const r=r1.get(n);if(r&&r[0]===i)return r[1];const s={error:Df("error",n,i),warn:Df("warn",n,i),info:Df("info",n,i),debug:Df("debug",n,i)};return r1.set(n,[i,s]),s}const za=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class gl{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const s=i?Gn(i):console;function a(){return or(this,arguments,function*(){var c,d,f,p;if(r)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,S=lr(g6(e,n)),w;w=yield De(S.next()),c=w.done,!c;y=!0){p=w.value,y=!1;const x=p;if(!g)if(x.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield De(JSON.parse(x.data))}catch(E){throw s.error("Could not parse message into JSON:",x.data),s.error("From chunk:",x.raw),E}}}catch(x){d={error:x}}finally{try{!y&&!c&&(f=S.return)&&(yield De(f.call(S)))}finally{if(d)throw d.error}}g=!0}catch(x){if(X0(x))return yield De(void 0);throw x}finally{g||n.abort()}})}return new gl(a,n,i)}static fromReadableStream(e,n,i){let r=!1;function s(){return or(this,arguments,function*(){var c,d,f,p;const g=new Ep,y=cD(e);try{for(var S=!0,w=lr(y),x;x=yield De(w.next()),c=x.done,!c;S=!0){p=x.value,S=!1;const E=p;for(const C of g.decode(E))yield yield De(C)}}catch(E){d={error:E}}finally{try{!S&&!c&&(f=w.return)&&(yield De(f.call(w)))}finally{if(d)throw d.error}}for(const E of g.flush())yield yield De(E)})}function a(){return or(this,arguments,function*(){var c,d,f,p;if(r)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let g=!1;try{try{for(var y=!0,S=lr(s()),w;w=yield De(S.next()),c=w.done,!c;y=!0){p=w.value,y=!1;const x=p;g||x&&(yield yield De(JSON.parse(x)))}}catch(x){d={error:x}}finally{try{!y&&!c&&(f=S.return)&&(yield De(f.call(S)))}finally{if(d)throw d.error}}g=!0}catch(x){if(X0(x))return yield De(void 0);throw x}finally{g||n.abort()}})}return new gl(a,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const a=i.next();e.push(a),n.push(a)}return s.shift()}});return[new gl(()=>r(e),this.controller,this.client),new gl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return uD({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:s}=await n.next();if(s)return i.close();const a=xA(JSON.stringify(r)+`
`);i.enqueue(a)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function g6(t,e){return or(this,arguments,function*(){var i,r,s,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $i("Attempted to iterate over a response with no body");const l=new y6,c=new Ep,d=cD(t.body);try{for(var f=!0,p=lr(v6(d)),g;g=yield De(p.next()),i=g.done,!i;f=!0){a=g.value,f=!1;const y=a;for(const S of c.decode(y)){const w=l.decode(S);w&&(yield yield De(w))}}}catch(y){r={error:y}}finally{try{!f&&!i&&(s=p.return)&&(yield De(s.call(p)))}finally{if(r)throw r.error}}for(const y of c.flush()){const S=l.decode(y);S&&(yield yield De(S))}})}function v6(t){return or(this,arguments,function*(){var n,i,r,s;let a=new Uint8Array;try{for(var l=!0,c=lr(t),d;d=yield De(c.next()),n=d.done,!n;l=!0){s=d.value,l=!1;const f=s;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?xA(f):f;let g=new Uint8Array(a.length+p.length);g.set(a),g.set(p,a.length),a=g;let y;for(;(y=p6(a))!==-1;)yield yield De(a.slice(0,y)),a=a.slice(y)}}catch(f){i={error:f}}finally{try{!l&&!n&&(r=c.return)&&(yield De(r.call(c)))}finally{if(i)throw i.error}}a.length>0&&(yield yield De(a))})}class y6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=b6(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function b6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function A6(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=e,a=await(async()=>{var l;if(e.options.stream)return Gn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gl.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(l=c?.split(";")[0])===null||l===void 0?void 0:l.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return Gn(t).debug(`[${i}] response parsed`,za({retryOfRequestLogID:r,url:n.url,status:n.status,body:a,durationMs:Date.now()-s})),a}class EA extends Promise{constructor(e,n,i=A6){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new EA(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const vD=Symbol("brand.privateNullableHeaders");function*S6(t){if(!t)return;if(vD in t){const{values:i,nulls:r}=t;yield*i.entries();for(const s of r)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():QC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=QC(i[1])?i[1]:[i[1]];let a=!1;for(const l of s)l!==void 0&&(e&&!a&&(a=!0,yield[r,null]),yield[r,l])}}const $u=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[s,a]of S6(i)){const l=s.toLowerCase();r.has(l)||(e.delete(s),r.add(l)),a===null?(e.delete(s),n.add(l)):(e.append(s,a),n.delete(l))}}return{[vD]:!0,values:e,nulls:n}};const Kv=t=>{var e,n,i,r,s,a;if(typeof globalThis.process<"u")return(i=(n=(e=Yz)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(a=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,t))===null||a===void 0?void 0:a.trim()};var yD;class Tp{constructor(e){var n,i,r,s,a,l,c,{baseURL:d=Kv("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=Kv("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,g=Ah(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:f,apiVersion:p},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(i=y.timeout)!==null&&i!==void 0?i:Tp.DEFAULT_TIMEOUT,this.logger=(r=y.logger)!==null&&r!==void 0?r:console;const S="warn";this.logLevel=S,this.logLevel=(a=(s=i1(y.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:i1(Kv("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:S,this.fetchOptions=y.fetchOptions,this.maxRetries=(l=y.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:t6(),this.encoder=r6,this._options=y,this.apiKey=f,this.apiVersion=p,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=$u([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return $u([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return $u([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new $i(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${cl}`}defaultIdempotencyKey(){return`stainless-node-retry-${HV()}`}makeStatusError(e,n,i,r){return Yn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,s=qV(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return $V(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new EA(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,s,a;const l=await e,c=(r=l.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=c),await this.prepareOptions(l);const{req:d,url:f,timeout:p}=await this.buildRequest(l,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:l});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=i===void 0?"":`, retryOf: ${i}`,S=Date.now();if(Gn(this).debug(`[${g}] sending request`,za({retryOfRequestLogID:i,method:l.method,url:f,options:l,headers:d.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new W0;const w=new AbortController,x=await this.fetchWithTimeout(f,d,p,w).catch(K0),E=Date.now();if(x instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new W0;const N=X0(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return Gn(this).info(`[${g}] connection ${N?"timed out":"failed"} - ${T}`),Gn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (${T})`,za({retryOfRequestLogID:i,url:f,durationMs:E-S,message:x.message})),this.retryRequest(l,n,i??g);throw Gn(this).info(`[${g}] connection ${N?"timed out":"failed"} - error; no more retries left`),Gn(this).debug(`[${g}] connection ${N?"timed out":"failed"} (error; no more retries left)`,za({retryOfRequestLogID:i,url:f,durationMs:E-S,message:x.message})),N?new eD:new xp({cause:x})}const C=`[${g}${y}] ${d.method} ${f} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${E-S}ms`;if(!x.ok){const T=await this.shouldRetry(x);if(n&&T){const z=`retrying, ${n} attempts remaining`;return await i6(x.body),Gn(this).info(`${C} - ${z}`),Gn(this).debug(`[${g}] response error (${z})`,za({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:E-S})),this.retryRequest(l,n,i??g,x.headers)}const N=T?"error; no more retries left":"error; not retryable";Gn(this).info(`${C} - ${N}`);const R=await x.text().catch(z=>K0(z).message),I=KV(R),k=I?void 0:R;throw Gn(this).debug(`[${g}] response error (${N})`,za({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:k,durationMs:Date.now()-S})),this.makeStatusError(x.status,I,k,x.headers)}return Gn(this).info(C),Gn(this).debug(`[${g}] response start`,za({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:E-S})),{response:x,options:l,controller:w,requestLogID:g,retryOfRequestLogID:i,startTime:S}}async fetchWithTimeout(e,n,i,r){const s=n||{},{signal:a,method:l}=s,c=Ah(s,["signal","method"]);a&&a.addEventListener("abort",()=>r.abort());const d=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,p=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);l&&(p.method=l.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var s;let a;const l=r?.get("retry-after-ms");if(l){const d=parseFloat(l);Number.isNaN(d)||(a=d)}const c=r?.get("retry-after");if(c&&!a){const d=parseFloat(c);Number.isNaN(d)?a=Date.parse(c)-Date.now():a=d*1e3}if(!(a&&0<=a&&a<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,d)}return await WV(a),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,s;const a=Object.assign({},e),{method:l,path:c,query:d,defaultBaseURL:f}=a,p=this.buildURL(c,d,f);"timeout"in a&&XV("timeout",a.timeout),a.timeout=(i=a.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:a}),S=await this.buildHeaders({options:e,method:l,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:S},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let l=$u([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),e6()),this._options.defaultHeaders,i,e.headers,a]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=$u([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:n6(e)}:this.encoder({body:e,headers:i})}}Tp.DEFAULT_TIMEOUT=6e4;class yn extends Tp{constructor(){super(...arguments),this.interactions=new gD(this)}}yD=yn;yn.GeminiNextGenAPIClient=yD;yn.GeminiNextGenAPIClientError=$i;yn.APIError=Yn;yn.APIConnectionError=xp;yn.APIConnectionTimeoutError=eD;yn.APIUserAbortError=W0;yn.NotFoundError=rD;yn.ConflictError=sD;yn.RateLimitError=oD;yn.BadRequestError=tD;yn.AuthenticationError=nD;yn.InternalServerError=lD;yn.PermissionDeniedError=iD;yn.UnprocessableEntityError=aD;yn.toFile=u6;yn.Interactions=gD;function w6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function _6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function x6(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&b(n,["sdkHttpResponse"],i),n}function E6(t,e){const n={},i=v(t,["sdkHttpResponse"]);return i!=null&&b(n,["sdkHttpResponse"],i),n}function T6(t,e,n){const i={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=v(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&b(e,["displayName"],r),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=v(t,["epochCount"]);e!==void 0&&s!=null&&b(e,["tuningTask","hyperparameters","epochCount"],s);const a=v(t,["learningRateMultiplier"]);if(a!=null&&b(i,["tuningTask","hyperparameters","learningRateMultiplier"],a),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=v(t,["batchSize"]);e!==void 0&&l!=null&&b(e,["tuningTask","hyperparameters","batchSize"],l);const c=v(t,["learningRate"]);if(e!==void 0&&c!=null&&b(e,["tuningTask","hyperparameters","learningRate"],c),v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(v(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function C6(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const y=v(t,["validationDataset"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec"],s1(y))}else if(r==="PREFERENCE_TUNING"){const y=v(t,["validationDataset"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec"],s1(y))}const s=v(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&b(e,["tunedModelDisplayName"],s);const a=v(t,["description"]);e!==void 0&&a!=null&&b(e,["description"],a);let l=v(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=v(t,["epochCount"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(l==="PREFERENCE_TUNING"){const y=v(t,["epochCount"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=v(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=v(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=v(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let d=v(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const y=v(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(d==="PREFERENCE_TUNING"){const y=v(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=v(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=v(t,["adapterSize"]);e!==void 0&&y!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=v(t,["adapterSize"]);e!==void 0&&y!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=v(t,["labels"]);e!==void 0&&p!=null&&b(e,["labels"],p);const g=v(t,["beta"]);return e!==void 0&&g!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),i}function M6(t,e){const n={},i=v(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&b(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&F6(s);const a=v(t,["config"]);return a!=null&&T6(a,n),n}function P6(t,e){const n={},i=v(t,["baseModel"]);i!=null&&b(n,["baseModel"],i);const r=v(t,["preTunedModel"]);r!=null&&b(n,["preTunedModel"],r);const s=v(t,["trainingDataset"]);s!=null&&z6(s,n,e);const a=v(t,["config"]);return a!=null&&C6(a,n,e),n}function R6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function N6(t,e){const n={},i=v(t,["name"]);return i!=null&&b(n,["_url","name"],i),n}function I6(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),i}function D6(t,e,n){const i={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&b(e,["_query","pageSize"],r);const s=v(t,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=v(t,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),i}function O6(t,e){const n={},i=v(t,["config"]);return i!=null&&I6(i,n),n}function k6(t,e){const n={},i=v(t,["config"]);return i!=null&&D6(i,n),n}function L6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&b(n,["nextPageToken"],r);const s=v(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>bD(l))),b(n,["tuningJobs"],a)}return n}function U6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["nextPageToken"]);r!=null&&b(n,["nextPageToken"],r);const s=v(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Z0(l))),b(n,["tuningJobs"],a)}return n}function B6(t,e){const n={},i=v(t,["name"]);i!=null&&b(n,["model"],i);const r=v(t,["name"]);return r!=null&&b(n,["endpoint"],r),n}function F6(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=v(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),b(n,["examples","examples"],r)}return n}function z6(t,e,n){const i={};let r=v(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=v(t,["gcsUri"]);e!==void 0&&a!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let s=v(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=v(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bD(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["state"]);s!=null&&b(n,["state"],kI(s));const a=v(t,["createTime"]);a!=null&&b(n,["createTime"],a);const l=v(t,["tuningTask","startTime"]);l!=null&&b(n,["startTime"],l);const c=v(t,["tuningTask","completeTime"]);c!=null&&b(n,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(n,["updateTime"],d);const f=v(t,["description"]);f!=null&&b(n,["description"],f);const p=v(t,["baseModel"]);p!=null&&b(n,["baseModel"],p);const g=v(t,["_self"]);return g!=null&&b(n,["tunedModel"],B6(g)),n}function Z0(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["state"]);s!=null&&b(n,["state"],kI(s));const a=v(t,["createTime"]);a!=null&&b(n,["createTime"],a);const l=v(t,["startTime"]);l!=null&&b(n,["startTime"],l);const c=v(t,["endTime"]);c!=null&&b(n,["endTime"],c);const d=v(t,["updateTime"]);d!=null&&b(n,["updateTime"],d);const f=v(t,["error"]);f!=null&&b(n,["error"],f);const p=v(t,["description"]);p!=null&&b(n,["description"],p);const g=v(t,["baseModel"]);g!=null&&b(n,["baseModel"],g);const y=v(t,["tunedModel"]);y!=null&&b(n,["tunedModel"],y);const S=v(t,["preTunedModel"]);S!=null&&b(n,["preTunedModel"],S);const w=v(t,["supervisedTuningSpec"]);w!=null&&b(n,["supervisedTuningSpec"],w);const x=v(t,["preferenceOptimizationSpec"]);x!=null&&b(n,["preferenceOptimizationSpec"],x);const E=v(t,["tuningDataStats"]);E!=null&&b(n,["tuningDataStats"],E);const C=v(t,["encryptionSpec"]);C!=null&&b(n,["encryptionSpec"],C);const T=v(t,["partnerModelTuningSpec"]);T!=null&&b(n,["partnerModelTuningSpec"],T);const N=v(t,["customBaseModel"]);N!=null&&b(n,["customBaseModel"],N);const R=v(t,["experiment"]);R!=null&&b(n,["experiment"],R);const I=v(t,["labels"]);I!=null&&b(n,["labels"],I);const k=v(t,["outputUri"]);k!=null&&b(n,["outputUri"],k);const B=v(t,["pipelineJob"]);B!=null&&b(n,["pipelineJob"],B);const z=v(t,["serviceAccount"]);z!=null&&b(n,["serviceAccount"],z);const V=v(t,["tunedModelDisplayName"]);V!=null&&b(n,["tunedModelDisplayName"],V);const G=v(t,["veoTuningSpec"]);return G!=null&&b(n,["veoTuningSpec"],G),n}function H6(t,e){const n={},i=v(t,["sdkHttpResponse"]);i!=null&&b(n,["sdkHttpResponse"],i);const r=v(t,["name"]);r!=null&&b(n,["name"],r);const s=v(t,["metadata"]);s!=null&&b(n,["metadata"],s);const a=v(t,["done"]);a!=null&&b(n,["done"],a);const l=v(t,["error"]);return l!=null&&b(n,["error"],l),n}function s1(t,e){const n={},i=v(t,["gcsUri"]);i!=null&&b(n,["validationDatasetUri"],i);const r=v(t,["vertexDatasetResource"]);return r!=null&&b(n,["validationDatasetUri"],r),n}class G6 extends Es{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new fo(ys.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let a="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?a=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(a=s.name.split("/operations/")[0]),{name:a,state:H0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=N6(e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>Z0(f))}else{const d=R6(e);return l=he("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>bD(f))}}async listInternal(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=k6(e);return l=he("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=U6(f),g=new NC;return Object.assign(g,p),g})}else{const d=O6(e);return l=he("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=L6(f),g=new NC;return Object.assign(g,p),g})}}async cancel(e){var n,i,r,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=_6(e);return l=he("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=E6(f),g=new IC;return Object.assign(g,p),g})}else{const d=w6(e);return l=he("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:f.headers},g})),a.then(f=>{const p=x6(f),g=new IC;return Object.assign(g,p),g})}}async tuneInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI()){const l=P6(e,e);return s=he("tuningJobs",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Z0(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=M6(e);return s=he("tunedModels",l._url),a=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>H6(c))}}}class q6{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const V6=1024*1024*8,j6=3,$6=1e3,Y6=2,wh="x-goog-upload-status";async function X6(t,e,n){var i;const r=await AD(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[wh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function K6(t,e,n){var i;const r=await AD(t,e,n),s=await r?.json();if(((i=r?.headers)===null||i===void 0?void 0:i[wh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=PI(s),l=new yA;return Object.assign(l,a),l}async function AD(t,e,n){var i,r;let s=0,a=0,l=new G0(new Response),c="upload";for(s=t.size;a<s;){const d=Math.min(V6,s-a),f=t.slice(a,a+d);a+d>=s&&(c+=", finalize");let p=0,g=$6;for(;p<j6&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((i=l?.headers)===null||i===void 0)&&i[wh]));)p++,await J6(g),g=g*Y6;if(a+=d,((r=l?.headers)===null||r===void 0?void 0:r[wh])!=="active")break;if(s<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function W6(t){return{size:t.size,type:t.type}}function J6(t){return new Promise(e=>setTimeout(e,t))}class Q6{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X6(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K6(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W6(e)}}class Z6{create(e,n,i){return new ej(e,n,i)}}class ej{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const a1="x-goog-api-key";class tj{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(a1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(a1,this.apiKey)}}}const nj="gl-node/";class TA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new yn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Jz(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new tj(this.apiKey);this.apiClient=new Wq({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:nj+"web",uploader:new Q6,downloader:new q6}),this.models=new mV(this.apiClient),this.live=new uV(this.apiClient,r,new Z6),this.batches=new T4(this.apiClient),this.chats=new oG(this.models,this.apiClient),this.caches=new rG(this.apiClient),this.files=new vG(this.apiClient),this.operations=new gV(this.apiClient),this.authTokens=new IV(this.apiClient),this.tunings=new G6(this.apiClient),this.fileSearchStores=new zV(this.apiClient)}}const ij={type:nt.OBJECT,properties:{patientName:{type:nt.STRING,description:"Name of the patient found in the report. If not found, use 'Unknown'."},reportDate:{type:nt.STRING,description:"Date of the medical report in YYYY-MM-DD format. If uncertain, leave empty."},labName:{type:nt.STRING,description:"Name of the laboratory or hospital."},results:{type:nt.ARRAY,items:{type:nt.OBJECT,properties:{testName:{type:nt.STRING,description:"The exact name of the test as written in the report."},standardizedName:{type:nt.STRING,description:"The common, standardized medical name for this test (e.g., if 'Hb' or 'Hgb', use 'Hemoglobin'; if 'FBS', use 'Glucose (Fasting)'). This allows grouping results across different labs."},description:{type:nt.STRING,description:"A very short explanation (max 15 words) of what this test measures and its clinical significance for a patient."},value:{type:nt.NUMBER,description:"The numeric value of the result. Remove any non-numeric characters."},unit:{type:nt.STRING,description:"Unit of measurement (e.g., 'g/dL', 'mg/dL')."},status:{type:nt.STRING,description:"Interpretation: 'NORMAL', 'HIGH', 'LOW', or 'UNKNOWN'."},category:{type:nt.STRING,description:"Medical category of the test. E.g., 'Hematology', 'Lipid Profile', 'Liver Function', 'Kidney Function', 'Thyroid', 'Electrolytes', 'Metabolic', 'Urinalysis', 'Vitamins', or 'Other'."},referenceRange:{type:nt.OBJECT,properties:{min:{type:nt.NUMBER,description:"Minimum normal value."},max:{type:nt.NUMBER,description:"Maximum normal value."},text:{type:nt.STRING,description:"Original reference range text (e.g., '12-16')."}}}},required:["testName","standardizedName","value","status","category"]}}},required:["patientName","results"]},rj={type:nt.OBJECT,properties:{mapping:{type:nt.ARRAY,items:{type:nt.OBJECT,properties:{canonicalName:{type:nt.STRING,description:"The single, unified standard English name for the biomarker."},rawNames:{type:nt.ARRAY,items:{type:nt.STRING},description:"List of ALL raw variations found in the input that belong to this canonical name."}}}}}},sj=async(t,e,n,i="gemini-3-pro-preview")=>{try{if(!n)throw new Error("API Key is missing. Please add your Gemini API Key in Settings.");const a=await new TA({apiKey:n}).models.generateContent({model:i,contents:{parts:[{text:`
      You are an expert medical data analyst. Analyze the attached medical laboratory report image or PDF.
      Extract the patient details, date, and all tabular test results.
      
      For each test row:
      1. Identify the Test Name (e.g., Glucose, HbA1c, RBC).
      2. **CRITICAL**: Provide a 'standardizedName'. Map abbreviations to standard English names (e.g., 'Hb' -> 'Hemoglobin').
      3. **CRITICAL**: Provide a 'description'. Briefly explain what this test is for a layperson.
      4. Extract the numeric Value, Unit, and Reference Range (Min/Max).
      5. Determine the status (NORMAL, HIGH, LOW).
      6. Categorize the test into standard medical groups.

      Return the data strictly in JSON format matching the provided schema.
      If the date is ambiguous, try to infer the most likely report date.
    `},{inlineData:{mimeType:e,data:t}}]},config:{responseMimeType:"application/json",responseSchema:ij}});if(!a.text)throw new Error("No response text received from Gemini.");const l=JSON.parse(a.text);return l.results&&l.results.sort((c,d)=>c.standardizedName.localeCompare(d.standardizedName)),l}catch(r){throw console.error("Error analyzing medical report:",r),r}},aj=async(t,e,n,i="gemini-3-pro-preview")=>{if(t.length===0&&Object.keys(e).length===0)return{};try{if(!n)throw new Error("API Key Missing");const r=new TA({apiKey:n}),s=Object.entries(e).map(([f,p])=>({canonical:f,existingVariations:p})),a=`
      You are a Medical Terminology Standardization Engine.
      
      I have a database of medical test names. Some are already grounded (grouped), and some are new raw names extracted from reports.
      Your job is to MERGE the new raw names into the existing groups or create new groups.
      
      GOAL: Eliminate redundancy. "Vitamin D", "Vitamin D Total", "Vit D3", "25-OH Vitamin D" MUST all be grouped under one Canonical Name (e.g., "Vitamin D").
      
      INPUT CONTEXT:
      1. Existing Groups: ${JSON.stringify(s)}
      2. New Raw Names to Ground: ${JSON.stringify(t)}
      
      INSTRUCTIONS:
      1. Look at the "New Raw Names".
      2. If a new name belongs to an "Existing Group", add it to that group.
      3. If a new name is a synonym for another new name, group them together under a new Canonical Name.
      4. If a new name is unique, create a new group.
      5. **IMPORTANT**: Return the COMPLETE list of mappings (Existing + New merged).
      
      Output JSON format:
      {
        "mapping": [
          { "canonicalName": "Hemoglobin", "rawNames": ["Hb", "Hgb", "Hemoglobin", "Haemoglobin"] },
          ...
        ]
      }
    `,l=await r.models.generateContent({model:i,contents:{parts:[{text:a}]},config:{responseMimeType:"application/json",responseSchema:rj}});if(!l.text)return e;const c=JSON.parse(l.text),d={};return c.mapping.forEach(f=>{const p=Array.from(new Set(f.rawNames));d[f.canonicalName]=p}),d}catch(r){return console.error("Optimization failed",r),e}},oj=async t=>{if(!t)return[];try{const n=await new TA({apiKey:t}).models.list(),i=[];for await(const r of n)i.push(r);return i.length===0?[]:i.filter(r=>r.name?.includes("gemini")&&!r.name.includes("embedding")).map(r=>{const s=r.name?.replace(/^models\//,"")||"";return{name:s,displayName:r.displayName||s}}).sort((r,s)=>s.name.localeCompare(r.name))}catch(e){return console.error("Error listing models:",e),[]}},lj=`
You are an expert medical data analyst. Analyze the provided medical laboratory report image.
Extract the patient details, date, and all tabular test results.

For each test row:
1. Identify the Test Name (e.g., Glucose, HbA1c, RBC).
2. **CRITICAL**: Provide a 'standardizedName'. Map abbreviations to standard English names (e.g., 'Hb' -> 'Hemoglobin').
3. **CRITICAL**: Provide a 'description'. Briefly explain what this test is for a layperson (max 15 words).
4. Extract the numeric Value, Unit, and Reference Range (Min/Max).
5. Determine the status (NORMAL, HIGH, LOW).
6. Categorize the test into standard medical groups (e.g., Hematology, Lipid Profile).

**IMPORTANT**: You MUST respond with ONLY valid JSON, no markdown, no explanation, just the raw JSON object.

JSON Schema:
{
  "patientName": "string",
  "reportDate": "YYYY-MM-DD",
  "labName": "string",
  "results": [
    {
      "testName": "string",
      "standardizedName": "string",
      "description": "string",
      "value": number,
      "unit": "string",
      "status": "NORMAL" | "HIGH" | "LOW" | "UNKNOWN",
      "category": "string",
      "referenceRange": { "min": number, "max": number, "text": "string" }
    }
  ]
}
`,o1=async(t,e,n,i,r)=>{if(e==="application/pdf")throw new Error("Received PDF directly in OpenAI Service. Upstream conversion failed.");const s=t.map((p,g)=>({type:"image_url",image_url:{url:`data:${e};base64,${p}`}})),a={model:r,messages:[{role:"system",content:lj},{role:"user",content:[{type:"text",text:t.length>1?`Analyze these ${t.length} pages of a medical report and return ONLY the JSON result. Combine all test results from all pages.`:"Analyze this medical report and return ONLY the JSON result."},...s]}]},l={"Content-Type":"application/json"};n&&(l.Authorization=`Bearer ${n}`);const c=await fetch(`${i}/chat/completions`,{method:"POST",headers:l,body:JSON.stringify(a)});if(!c.ok){let p=`OpenAI Request Failed: ${c.status}`;try{const g=await c.json();console.error("OpenAI API Error Details:",JSON.stringify(g,null,2)),p=g.error?.message||g.message||p}catch{try{const y=await c.text();console.error("OpenAI API Error (text):",y),y&&(p=y)}catch{}}throw new Error(p)}const f=(await c.json()).choices[0].message.content;if(!f)throw new Error("No content received from OpenAI.");try{let p=f.trim();const g=p.match(/```(?:json)?\s*([\s\S]*?)```/);g&&(p=g[1].trim());const y=p.indexOf("{"),S=p.lastIndexOf("}");y!==-1&&S!==-1&&S>y&&(p=p.slice(y,S+1));const w=JSON.parse(p);return w.results&&w.results.sort((x,E)=>x.standardizedName.localeCompare(E.standardizedName)),w}catch{throw console.error("Failed to parse OpenAI JSON:",f),new Error("Failed to parse valid JSON from AI response. The model may not support vision or structured output.")}},uj=async(t,e,n,i,r)=>{const s=Object.entries(e).map(([g,y])=>({canonical:g,existingVariations:y})),a=`
      You are a Medical Terminology Standardization Engine.
      
      I have a database of medical test names. Some are already grounded (grouped), and some are new raw names extracted from reports.
      Your job is to MERGE the new raw names into the existing groups or create new groups.
      
      GOAL: Eliminate redundancy. "Vitamin D", "Vitamin D Total", "Vit D3", "25-OH Vitamin D" MUST all be grouped under one Canonical Name (e.g., "Vitamin D").
      
      INPUT CONTEXT:
      1. Existing Groups: ${JSON.stringify(s)}
      2. New Raw Names to Ground: ${JSON.stringify(t)}
      
      INSTRUCTIONS:
      1. Look at the "New Raw Names".
      2. If a new name belongs to an "Existing Group", add it to that group.
      3. If a new name is a synonym for another new name, group them together under a new Canonical Name.
      4. If a new name is unique, create a new group.
      5. **IMPORTANT**: Return the COMPLETE list of mappings (Existing + New merged).
      
      **IMPORTANT**: Respond with ONLY valid JSON, no markdown, no explanation.
      
      Output JSON format:
      {
        "mapping": [
          { "canonicalName": "Hemoglobin", "rawNames": ["Hb", "Hgb", "Hemoglobin", "Haemoglobin"] },
          ...
        ]
      }
    `,l={model:r,messages:[{role:"system",content:"You are a helpful assistant that outputs ONLY valid JSON, no markdown or explanation."},{role:"user",content:a}]},c={"Content-Type":"application/json"};n&&(c.Authorization=`Bearer ${n}`);const d=await fetch(`${i}/chat/completions`,{method:"POST",headers:c,body:JSON.stringify(l)});if(!d.ok)return e;const p=(await d.json()).choices[0].message.content;try{let g=p.trim();const y=g.match(/```(?:json)?\s*([\s\S]*?)```/);y&&(g=y[1].trim());const S=g.indexOf("{"),w=g.lastIndexOf("}");S!==-1&&w!==-1&&w>S&&(g=g.slice(S,w+1));const x=JSON.parse(g),E={};return x.mapping.forEach(C=>{const T=Array.from(new Set(C.rawNames));E[C.canonicalName]=T}),E}catch(g){return console.error("Failed to parse mapping JSON:",g),e}},Ple=async(t,e)=>{try{const n={"Content-Type":"application/json"};t&&(n.Authorization=`Bearer ${t}`);const i=await fetch(`${e}/models`,{method:"GET",headers:n});if(!i.ok){const s=await i.text();throw new Error(`Failed to fetch models: ${i.status} ${s}`)}const r=await i.json();return r.data&&Array.isArray(r.data)?r.data.map(s=>s.id).sort():[]}catch(n){throw console.error("Error fetching OpenAI models:",n),n}},qn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),eb=[.001,0,0,.001,0,0],Wv=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ra={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mc="pdfjs_internal_editor_",Ue={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Xe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},cj={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},tb={TRIANGLES:1,LATTICE:2},tn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},lh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},dl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Cp={ERRORS:0,WARNINGS:1,INFOS:5},gc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Yu={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},dj={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Mp=Cp.WARNINGS;function fj(t){Number.isInteger(t)&&(Mp=t)}function hj(){return Mp}function Pp(t){Mp>=Cp.INFOS&&console.info(`Info: ${t}`)}function ke(t){Mp>=Cp.WARNINGS&&console.warn(`Warning: ${t}`)}function mt(t){throw new Error(t)}function Ke(t,e){t||mt(e)}function pj(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function SD(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"&&(n.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),n.tryConvertEncoding))try{t=bj(t)}catch{}const i=e?URL.parse(t,e):URL.parse(t);return pj(i)?i:null}function wD(t,e,n=!1){const i=URL.parse(t);return i?(i.hash=e,i.href):n&&SD(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const ho=(function(){function e(n,i){this.message=n,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class l1 extends ho{constructor(e,n){super(e,"PasswordException"),this.code=n}}class Jv extends ho{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class nb extends ho{constructor(e){super(e,"InvalidPDFException")}}class _h extends ho{constructor(e,n,i){super(e,"ResponseException"),this.status=n,this.missing=i}}class mj extends ho{constructor(e){super(e,"FormatError")}}class ua extends ho{constructor(e){super(e,"AbortException")}}function _D(t){(typeof t!="object"||t?.length===void 0)&&mt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Fc(t){typeof t!="string"&&mt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=t.charCodeAt(i)&255;return n}function gj(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function vj(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function yj(){try{return new Function(""),!0}catch{return!1}}class rn{static get isLittleEndian(){return Le(this,"isLittleEndian",vj())}static get isEvalSupported(){return Le(this,"isEvalSupported",yj())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Le(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Le(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return Le(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return Le(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Qv=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class me{static makeHexColor(e,n,i){return`#${Qv[e]}${Qv[n]}${Qv[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let i;e[0]?(e[0]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[3],n[3]*=e[3]):(i=n[0],n[0]=n[1],n[1]=i,i=n[2],n[2]=n[3],n[3]=i,e[1]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,i=0){const r=e[i],s=e[i+1];e[i]=r*n[0]+s*n[2]+n[4],e[i+1]=r*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,i=0){const r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],d=n[5];for(let f=0;f<6;f+=2){const p=e[i+f],g=e[i+f+1];e[i+f]=p*r+g*a+c,e[i+f+1]=p*s+g*l+d}}static applyInverseTransform(e,n){const i=e[0],r=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(i*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-i*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,i){const r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],d=n[5],f=e[0],p=e[1],g=e[2],y=e[3];let S=r*f+c,w=S,x=r*g+c,E=x,C=l*p+d,T=C,N=l*y+d,R=N;if(s!==0||a!==0){const I=s*f,k=s*g,B=a*p,z=a*y;S+=B,E+=B,x+=z,w+=z,C+=I,R+=I,N+=k,T+=k}i[0]=Math.min(i[0],S,x,w,E),i[1]=Math.min(i[1],C,N,T,R),i[2]=Math.max(i[2],S,x,w,E),i[3]=Math.max(i[3],C,N,T,R)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const i=e[0],r=e[1],s=e[2],a=e[3],l=i**2+r**2,c=i*s+r*a,d=s**2+a**2,f=(l+d)/2,p=Math.sqrt(f**2-(l*d-c**2));n[0]=Math.sqrt(f+p||1),n[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const i=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[i,s,r,a]}static pointBoundingBox(e,n,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],n),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],n)}static rectBoundingBox(e,n,i,r,s){s[0]=Math.min(s[0],e,i),s[1]=Math.min(s[1],n,r),s[2]=Math.max(s[2],e,i),s[3]=Math.max(s[3],n,r)}static#e(e,n,i,r,s,a,l,c,d,f){if(d<=0||d>=1)return;const p=1-d,g=d*d,y=g*d,S=p*(p*(p*e+3*d*n)+3*g*i)+y*r,w=p*(p*(p*s+3*d*a)+3*g*l)+y*c;f[0]=Math.min(f[0],S),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],S),f[3]=Math.max(f[3],w)}static#t(e,n,i,r,s,a,l,c,d,f,p,g){if(Math.abs(d)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,n,i,r,s,a,l,c,-p/f,g);return}const y=f**2-4*p*d;if(y<0)return;const S=Math.sqrt(y),w=2*d;this.#e(e,n,i,r,s,a,l,c,(-f+S)/w,g),this.#e(e,n,i,r,s,a,l,c,(-f-S)/w,g)}static bezierBoundingBox(e,n,i,r,s,a,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],n,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],n,c),this.#t(e,i,s,l,n,r,a,c,3*(-e+3*(i-s)+l),6*(e-2*i+s),3*(i-e),d),this.#t(e,i,s,l,n,r,a,c,3*(-n+3*(r-a)+c),6*(n-2*r+a),3*(r-n),d)}}function bj(t){return decodeURIComponent(escape(t))}let Zv=null,u1=null;function Aj(t){return Zv||(Zv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u1=new Map([["","t"]])),t.replaceAll(Zv,(e,n,i)=>n?n.normalize("NFKC"):u1.get(i))}function xD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),_D(t)}const vl="pdfjs_internal_id_";function Sj(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i)||!e(r))return!1;const a=s.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of s)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Vn(t,e,n){return Math.min(Math.max(t,e),n)}function ED(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(_D(t))}function wj(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):Fc(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class vc{static textContent(e){const n=[],i={items:n,styles:Object.create(null)};function r(s){if(!s)return;let a=null;const l=s.name;if(l==="#text")a=s.value;else if(vc.shouldBuildText(l))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const c of s.children)r(c)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class TD{static setupStorage(e,n,i,r,s){const a=r.getValue(n,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(n,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",l=>{r.setValue(n,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",l=>{r.setValue(n,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of i.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(n,{value:d})});break}}static setAttributes({html:e,element:n,storage:i=null,intent:r,linkService:s}){const{attributes:a}=n,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(e){const n=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const l=s!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);a.append(p),l&&vc.shouldBuildText(r.name)&&d.push(p)}return{textDivs:d}}const f=[[r,-1,a]];for(;f.length>0;){const[p,g,y]=f.at(-1);if(g+1===p.children.length){f.pop();continue}const S=p.children[++f.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const E=document.createTextNode(S.value);d.push(E),y.append(E);continue}const x=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(y.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:n,intent:s,linkService:i}),S.children?.length>0)f.push([S,-1,x]);else if(S.value){const E=document.createTextNode(S.value);l&&vc.shouldBuildText(w)&&d.push(E),x.append(E)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const os="http://www.w3.org/2000/svg";class Nl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function zc(t,e="text"){if(lc(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Hc{constructor({viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let f,p,g,y;switch(r%=360,r<0&&(r+=360),r){case 180:f=-1,p=0,g=0,y=1;break;case 90:f=0,p=1,g=1,y=0;break;case 270:f=0,p=-1,g=-1,y=0;break;case 0:f=1,p=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(g=-g,y=-y);let S,w,x,E;f===0?(S=Math.abs(d-e[1])*i+s,w=Math.abs(c-e[0])*i+a,x=(e[3]-e[1])*i,E=(e[2]-e[0])*i):(S=Math.abs(c-e[0])*i+s,w=Math.abs(d-e[1])*i+a,x=(e[2]-e[0])*i,E=(e[3]-e[1])*i),this.transform=[f*i,p*i,g*i,y*i,S-f*i*c-g*i*d,w-p*i*c-y*i*d],this.width=x,this.height=E}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Hc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,n){const i=[e,n];return me.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const n=[e[0],e[1]];me.applyTransform(n,this.transform);const i=[e[2],e[3]];return me.applyTransform(i,this.transform),[n[0],n[1],i[0],i[1]]}convertToPdfPoint(e,n){const i=[e,n];return me.applyInverseTransform(i,this.transform),i}}class CA extends ho{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function Rp(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function MA(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function _j(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function xj(t,e="document.pdf"){if(typeof t!="string")return e;if(Rp(t))return ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!i)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},s=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(s.test(a))return r(a);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const d of l)if(s.test(d))return r(d);const c=Array.from(i.searchParams.keys()).reverse();for(const d of c)if(s.test(d))return r(d)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return r(c[0])}return e}class c1{started=Object.create(null);times=[];time(e){e in this.started&&ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:i}of this.times)n=Math.max(i.length,n);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(n)} ${s-r}ms
`);return e.join("")}}function lc(t,e){const n=e?URL.parse(t,e):URL.parse(t);return n?.protocol==="http:"||n?.protocol==="https:"}function Yi(t){t.preventDefault()}function Ut(t){t.preventDefault(),t.stopPropagation()}function Ej(t){console.log("Deprecated API usage: "+t)}class ib{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#e.exec(e);if(!n)return null;const i=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(n[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(n[6],10);c=c>=0&&c<=59?c:0;const d=n[7]||"Z";let f=parseInt(n[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(n[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(a+=f,l+=p):d==="+"&&(a-=f,l-=p),new Date(Date.UTC(i,r,s,a,l,c))}}function Tj(t,{scale:e=1,rotation:n=0}){const{width:i,height:r}=t.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Hc({viewBox:s,userUnit:1,scale:e,rotation:n})}function Gc(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ke(`Not a valid color format: "${t}"`),[0,0,0])}function Cj(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,Gc(i))}e.remove()}function Nt(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function Er(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function no(t,e,n=!1,i=!0){if(e instanceof Hc){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=t,l=rn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${s}px`,f=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,p=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||e.rotation%180===0?(a.width=f,a.height=p):(a.width=p,a.height=f)}i&&t.setAttribute("data-main-rotation",e.rotation)}class Or{constructor(){const{pixelRatio:e}=Or;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,i,r,s=-1){let a=1/0,l=1/0,c=1/0;i=Or.capPixels(i,s),i>0&&(a=Math.sqrt(i/(e*n))),r!==-1&&(l=r/e,c=r/n);const d=Math.min(a,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,i):i}return e}}const rb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Mj{static get isDarkMode(){return Le(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Pj{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",Gc(i))}}function Rj(t,e,n,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return t=Math.round(t*i+r),e=Math.round(e*i+r),n=Math.round(n*i+r),[t,e,n]}function d1(t,e){const n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),l=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const c=s-a;switch(e[1]=l<.5?c/(s+a):c/(2-s-a),s){case n:e[0]=((i-r)/c+(i<r?6:0))*60;break;case i:e[0]=((r-n)/c+2)*60;break;case r:e[0]=((n-i)/c+4)*60;break}}e[2]=l}function sb(t,e){const n=t[0],i=t[1],r=t[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),l=r-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+l,e[1]=a+l,e[2]=l;break;case 1:e[0]=a+l,e[1]=s+l,e[2]=l;break;case 2:e[0]=l,e[1]=s+l,e[2]=a+l;break;case 3:e[0]=l,e[1]=a+l,e[2]=s+l;break;case 4:e[0]=a+l,e[1]=l,e[2]=s+l;break;case 5:case 6:e[0]=s+l,e[1]=l,e[2]=a+l;break}}function f1(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function h1(t,e,n){sb(t,n),n.map(f1);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];sb(e,n),n.map(f1);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const p1=new Map;function Nj(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=p1.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);d1(t,a);const l=r.subarray(6,9);d1(e,l);const c=l[2]<.5,d=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),h1(a,l,s)<d){let f,p;c?(f=a[2],p=1):(f=0,p=a[2]);const g=.005;for(;p-f>g;){const y=a[2]=(f+p)/2;c===h1(a,l,s)<d?f=y:p=y}a[2]=c?p:f}return sb(a,s),i=me.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),p1.set(n,i),i}function CD({html:t,dir:e,className:n},i){const r=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=t.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const d=a[l];s.append(document.createTextNode(d)),l<c-1&&s.append(document.createElement("br"))}r.append(s)}else TD.render({xfaHtml:t,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",n),i.append(r)}function MD(t){const e=new Path2D;if(!t)return e;for(let n=0,i=t.length;n<i;)switch(t[n++]){case Yu.moveTo:e.moveTo(t[n++],t[n++]);break;case Yu.lineTo:e.lineTo(t[n++],t[n++]);break;case Yu.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case Yu.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case Yu.closePath:e.closePath();break;default:ke(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}class hc{#e=null;#t=null;#i;#n=null;#a=null;#s=null;#r=null;#o=null;static#u=null;constructor(e){this.#i=e,hc.#u||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",Yi,{signal:n}),e.addEventListener("pointerdown",hc.#l,{signal:n}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const r=this.#i.toolbarPosition;if(r){const{style:s}=e,a=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#f(e){this.#i._focusEventsAllowed=!1,Ut(e)}#d(e){this.#i._focusEventsAllowed=!0,Ut(e)}#h(e){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",this.#f.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",Yi,{signal:n}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",hc.#u[e]),this.#h(i)&&i.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#n.append(i)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const n=await e.render();this.#h(n),this.#n.append(n,this.#g),this.#a=e}addComment(e,n=null){if(this.#s)return;const i=e.renderForToolbar();if(!i)return;this.#h(i);const r=this.#r=this.#g;n?(this.#n.insertBefore(i,n),this.#n.insertBefore(r,n)):this.#n.append(i,r),this.#s=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const n=e.renderButton();this.#h(n),this.#n.append(n,this.#g)}async addEditSignatureButton(e){const n=this.#o=await e.renderEditButton(this.#i);this.#h(n),this.#n.append(n,this.#g)}removeButton(e){e==="comment"&&(this.#s?.removeToolbarCommentButton(),this.#s=null,this.#r?.remove(),this.#r=null)}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,i){if(!n&&e==="comment")return;const r=this.#n.querySelector(i);r&&e==="comment"&&this.addComment(n,r)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Ij{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",Yi,{signal:n});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,n){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const l=s.x+(n?s.width:0);if(a>i){r=l,i=a;continue}n?l>r&&(r=l):l<r&&(r=l)}return[n?1-r:r,i]}show(e,n,i){const[r,s]=this.#a(n,i),{style:a}=this.#t||=this.#n();e.append(this.#t),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(e,n,i,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const l=this.#i._signal;l instanceof AbortSignal&&!l.aborted&&(s.addEventListener("contextmenu",Yi,{signal:l}),s.addEventListener("click",r,{signal:l})),this.#e.append(s)}}function PD(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}class it{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(it.#t||=new Set).add(e)}static setPointer(e,n){it.#e||=n,it.#n??=e}static setTimeStamp(e){it.#i=e}static isSamePointerId(e){return it.#e===e}static isSamePointerIdOrRemove(e){return it.#e===e?!0:(it.#t?.delete(e),!1)}static isSamePointerType(e){return it.#n===e}static isInitializedAndDifferentPointerType(e){return it.#n!==null&&!it.isSamePointerType(e)}static isSameTimeStamp(e){return it.#i===e}static isUsingMultiplePointers(){return it.#t?.size>=1}static clearPointerType(){it.#n=null}static clearPointerIds(){it.#e=NaN,it.#t=null}static clearTimeStamp(){it.#i=NaN}}class Dj{#e=0;get id(){return`${mc}${this.#e++}`}}class PA{#e=xD();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",s)}async#n(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(i.url=n,r=await zc(n,"blob")):n instanceof File?r=i.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const s=PA._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,f)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,d()},a.onload=async()=>{const p=i.svgUrl=a.result;l.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},l.onerror=a.onerror=f});a.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){ke(r),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:n,name:i,size:r,type:s}=e;return this.#n(`${n}_${i}_${r}_${s}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,n){const i=await n;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:i}=n;return delete n.blobPromise,this.getFromBlob(n.id,i)}return this.getFromUrl(n.url)}getFromCanvas(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const n=this.#i.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:i}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=r.convertToBlob()}i.close?.(),n.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Oj{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),this.#t)return;const c={cmd:e,undo:n,post:i,type:s};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(a&&this.#e[this.#n].type===s){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const d=this.#n+1;d===this.#i?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#e[n].type!==e){this.#e.splice(n+1,this.#n-n),this.#n=n;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class qc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=rn.platform;for(const[i,r,s={}]of e)for(const a of i){const l=a.startsWith("mac+");n&&l?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!l&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const i=this.callbacks.get(this.#e(n));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:l=null}}=i;l&&!l(e,n)||(r.bind(e,...a,n)(),s||Ut(n))}}class RA{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Cj(e),Le(this,"_colors",e)}convert(e){const n=Gc(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,r]of this._colors)if(r.every((s,a)=>s===n[a]))return RA._colorsMapping.get(i);return n}getHexCode(e){const n=this._colors.get(e);return n?me.makeHexColor(...n):e}}class ca{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#s=null;#r=null;#o=null;#u=new Oj;#l=null;#f=null;#d=null;#h=0;#g=new Set;#m=null;#c=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#_=null;#S=null;#C=null;#A=!1;#x=null;#R=new Dj;#M=!1;#P=!1;#U=!1;#I=null;#O=null;#B=null;#k=null;#V=null;#T=Ue.NONE;#w=new Set;#D=null;#F=null;#H=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#G=[0,0];#L=null;#j=null;#Q=null;#Z=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ca.prototype,n=a=>a.#j.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new qc([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#j.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#j.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}constructor(e,n,i,r,s,a,l,c,d,f,p,g,y,S,w,x){const E=this._signal=this.#e.signal;this.#j=e,this.#Q=n,this.#Z=i,this.#s=r,this.#l=s,this.#F=a,this.#$=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:E}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),l._on("setpreference",this.onSetPreference.bind(this),{signal:E}),l._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#P=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#P=!1},{capture:!0,signal:E}),this.#ae(),this.#fe(),this.#te(),this.#r=c.annotationStorage,this.#E=c.filterFactory,this.#H=d,this.#C=f||null,this.#v=p,this.#b=g,this.#y=y,this.#V=S||null,this.viewParameters={realScale:Nl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,s?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#k?.clear(),this.#t=null,this.#w.clear(),this.#u.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#x?.hide(),this.#x=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Le(this,"hcmFilter",this.#H?this.#E.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Le(this,"direction",getComputedStyle(this.#j).direction)}get _highlightColors(){return Le(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const n=new Map,i=!!this.#H;for(const[r,s]of e){const a=r.endsWith("_HCM");if(i&&a){n.set(r.replace("_HCM",""),s);continue}!i&&!a&&n.set(r,s)}return Le(this,"highlightColors",n)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,n=!1){this.#s?.editAltText(this,e,n)}hasCommentManager(){return!!this.#l}editComment(e,n,i,r){this.#l?.showDialog(this,e,n,i,r)}selectComment(e,n){this.#a.get(e)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,n,i=void 0){this.#l?.toggleCommentPopup(e,n,i)}makeCommentColor(e,n){return e&&this.#l?.makeCommentColor(e,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:n,promise:i}=Promise.withResolvers(),r=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",r),n())};this._eventBus.on("editorsrendered",r),await i}getSignature(e){this.#F?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#F}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=n)}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#j.focus()}findParent(e,n){for(const i of this.#a.values()){const{x:r,y:s,width:a,height:l}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&n>=s&&n<=s+l)return i}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Nl.PDF_TO_CSS_UNITS;for(const n of this.#p)n.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const i of this.#a.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",n=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:l}=i,c=i.toString(),f=this.#J(i).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;i.empty();const g=this.#ee(f),y=this.#T===Ue.NONE,S=()=>{const w=g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:l,text:c});y&&this.showAllEditors("highlight",!0,!0),n&&w?.editComment()};if(y){this.switchToMode(Ue.HIGHLIGHT,S);return}S()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#J(e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#x||=new Ij(this),this.#x.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const n=`${mc}${e}`,i=this.#r.getRawValue(n);return i&&this.#r.remove(n),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,n=null){const i=this.#Z;i&&(i.setAttribute("data-l10n-id",e),n?i.setAttribute("data-l10n-args",JSON.stringify(n)):i.removeAttribute("data-l10n-args"))}#se(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#x?.hide(),this.#D=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===this.#D)return;const r=this.#J(e).closest(".textLayer");if(!r){this.#D&&(this.#x?.hide(),this.#D=null,this.#N({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#D=n,this.#N({hasSelectedText:!0}),!(this.#T!==Ue.HIGHLIGHT&&this.#T!==Ue.NONE)&&(this.#T===Ue.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#T===Ue.HIGHLIGHT?this.#ee(r):null;if(s?.toggleDrawing(),this.#P){const a=new AbortController,l=this.combinedSignal(a),c=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),s?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else s?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(e=""){this.#T===Ue.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#re()}#ae(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#oe(){if(this.#S)return;this.#S=new AbortController;const e=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of this.#w)if(n.div.contains(e)){this.#O=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,n]=this.#O;this.#O=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#te(){if(this.#I)return;this.#I=new AbortController;const e=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#I?.abort(),this.#I=null}#ce(){if(this.#f)return;this.#f=new AbortController;const e=this.combinedSignal(this.#f);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#f?.abort(),this.#f=null}#fe(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ue(),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const i of this.#c)if(i.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const i of this.#c)if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of this.#w){const r=i.serialize(!0);r&&n.push(r)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of this.#c)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){ke(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const d=await r.deserialize(c);if(!d)return;s.push(d)}const a=()=>{for(const c of s)this.#ne(c);this.#ie(s)},l=()=>{for(const c of s)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(s){ke(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Ue.NONE&&!this.isEditorHandlingKeyboard&&ca._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([i,r])=>this.#X[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#T===Ue.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#q([[Xe.HIGHLIGHT_FREE,!0]]))}#q(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ce(),this.#N({isEditing:this.#T!==Ue.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:this.#u.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#c){this.#c=e;for(const n of this.#c)this.#q(n.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#h)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#a.set(e.pageIndex,e),this.#M?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,n=null,i=!1,r=!1,s=!1,a=!1){if(this.#T!==e&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===Ue.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Ue.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Ue.SIGNATURE&&await this.#F?.loadSignatures(),i&&it.clearPointerType(),this.setEditingState(!0),await this.#he(),this.unselectAll();for(const l of this.#a.values())l.updateMode(e);if(e===Ue.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#c.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:p,deleted:g}=d;f&&l.add(f),p&&!g&&c.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:p,contentsObj:g}=d;p&&g?.str&&!l.has(f)&&!this.#g.has(f)&&c.push(d)}this.#l?.showSidebar(c)}if(!n){r&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const l of this.#n.values())l.uid===n?(this.setSelected(l),a?l.editComment():s?l.enterInEditMode():l.focus()):l.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(this.#c){switch(e){case Xe.CREATE:this.currentLayer.addNewEditor(n);return;case Xe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(e,n);else for(const i of this.#c)i.updateDefaultParams(e,n)}}showAllEditors(e,n,i=!1){for(const s of this.#n.values())s.editorType===e&&s.show(n);(this.#Y?.get(Xe.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#q([[Xe.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#U!==e){this.#U=e;for(const n of this.#a.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}async#he(){if(!this.#M){this.#M=!0;const e=[];for(const n of this.#a.values())e.push(n.enable());await Promise.all(e);for(const n of this.#n.values())n.enable()}}#pe(){if(this.unselectAll(),this.#M){this.#M=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const n of this.#n.values())n.pageIndex===e&&(yield n)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const n=this.#a.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#q(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#q(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#q(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const n of this.#w)n!==e&&n.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#u.undo(),this.#N({hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#u.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#u.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#u.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(e){this.#u.cleanType(e)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...this.#w],i=()=>{this._editorUndoBar?.show(r,n.length===1?n[0].editorType:n.length);for(const s of n)s.remove()},r=()=>{for(const s of n)this.#ne(s)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const n of this.#w)n.unselect();this.#w.clear();for(const n of e)n.isEmpty()||(this.#w.add(n),n.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==Ue.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#G[0]+=e,this.#G[1]+=n;const[r,s]=this.#G,a=[...this.#w],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#G[0]=this.#G[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(r,s),c.translationDone())},undo:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(-r,-s),c.translationDone())},mustExec:!1})},l);for(const c of a)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let n=!1;for(const[{x:r,y:s,pageIndex:a},l]of e)l.newX=r,l.newY=s,l.newPageIndex=a,n||=r!==l.savedX||s!==l.savedY||a!==l.savedPageIndex;if(!n)return!1;const i=(r,s,a,l)=>{if(this.#n.has(r.id)){const c=this.#a.get(l);c?r._setParentAndPosition(c,s,a):(r.pageIndex=l,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:l}]of e)i(r,s,a,l)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:l}]of e)i(r,s,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#m)for(const i of this.#m.keys())i.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Ue.NONE}get imageManager(){return Le(this,"imageManager",new PA)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let d=0,f=n.rangeCount;d<f;d++)if(!e.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,f,p,g)=>({x:(f-r)/a,y:1-(d+p-i)/s,width:g/a,height:p/s});break;case"180":l=(d,f,p,g)=>({x:1-(d+p-i)/s,y:1-(f+g-r)/a,width:p/s,height:g/a});break;case"270":l=(d,f,p,g)=>({x:1-(f+g-r)/a,y:(d-i)/s,width:g/a,height:p/s});break;default:l=(d,f,p,g)=>({x:(d-i)/s,y:(f-r)/a,width:p/s,height:g/a});break}const c=[];for(let d=0,f=n.rangeCount;d<f;d++){const p=n.getRangeAt(d);if(!p.collapsed)for(const{x:g,y,width:S,height:w}of p.getClientRects())S===0||w===0||c.push(l(g,y,S,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#o||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const n=this.#o?.get(e.data.id);if(!n)return;const i=this.#r.getRawValue(n);i&&(this.#T===Ue.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,n,i){const r=this.#k?.get(e);r&&(r.setCanvas(n,i),this.#k.delete(e))}addMissingCanvas(e,n){(this.#k||=new Map).set(e,n)}}class Pr{#e=null;#t=!1;#i=null;#n=null;#a=null;#s=null;#r=!1;#o=null;#u=null;#l=null;#f=null;#d=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,Pr.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Pr._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const n=this.#n=document.createElement("span");e.append(n),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Pr.#h.missing),n.setAttribute("data-l10n-id",Pr.#h["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#u._uiManager._signal;e.addEventListener("contextmenu",Yi,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#r=!0,r(s))},{signal:i}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#f=await Pr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#o.classList.toggle("hidden",!e)}serialize(e){let n=this.#e;return!e&&this.#l===n&&(n=this.#f),{altText:n,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#f}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(this.#l=i,this.#f=r),!(this.#e===e&&this.#t===n)&&(s||(this.#e=e,this.#t=n),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Pr.#h[this.#g]),this.#n?.setAttribute("data-l10n-id",Pr.#h[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#a;if(!n){this.#a=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;const r=100,s=this.#u._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:s})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||e.append(n),this.#u.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class Of{#e=null;#t=null;#i=!1;#n=null;#a=null;#s=null;#r=null;#o=null;#u=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#f(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(i.backgroundColor=r)}return this.#f(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:n,height:i}=this.#e.getBoundingClientRect(),{x:r,y:s,width:a,height:l}=this.#n.parent.boundingClientRect;return[(e-r)/a,(n+i-s)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:n}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=n)}#f(e,n){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",Yi,{signal:i}),n&&(e.addEventListener("focusin",s=>{this.#n._focusEventsAllowed=!1,Ut(s)},{capture:!0,signal:i}),e.addEventListener("focusout",s=>{this.#n._focusEventsAllowed=!0,Ut(s)},{capture:!0,signal:i})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#i=!0,r(s))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const n=this.commentPopupPositionInLayer;let i,r;if(n)[i,r]=n;else{[i,r]=this.#n.commentButtonPosition;const{width:f,height:p,x:g,y}=this.#n;i=g+i*f,r=y+r*p}const s=this.#n.parent.boundingClientRect,{x:a,y:l,width:c,height:d}=s;this.#n._uiManager.editComment(this.#n,a+i*c,l+r*d,{...e,parentDimensions:s})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#u||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#s=null),e===null){this.#r="",this.#u=!0;return}this.#r=e,this.#o=new Date,this.#u=!1}setInitialText(e,n=null){this.#a=e,this.data=e,this.#o=null,this.#s=n}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#u=!1}}class Np{#e;#t=!1;#i=null;#n;#a;#s;#r;#o=null;#u;#l=null;#f;#d=null;constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:l}){this.#e=e,this.#i=i,this.#n=n,this.#a=r,this.#s=s,this.#r=a,this.#f=new AbortController,this.#u=AbortSignal.any([l,this.#f.signal]),e.addEventListener("touchstart",this.#h.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Or.pixelRatio}#h(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,s=AbortSignal.any([this.#u,r.signal]),a=this.#e,l={capture:!0,signal:s,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Ut(d),c(d))},l),a.addEventListener("pointerup",c,l),a.addEventListener("pointercancel",c,l);return}if(!this.#d){this.#d=new AbortController;const r=AbortSignal.any([this.#u,this.#d.signal]),s=this.#e,a={signal:r,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),a);const l=this.#m.bind(this);s.addEventListener("touchend",l,a),s.addEventListener("touchcancel",l,a),a.capture=!0,s.addEventListener("pointerdown",Ut,a),s.addEventListener("pointermove",Ut,a),s.addEventListener("pointercancel",Ut,a),s.addEventListener("pointerup",Ut,a),this.#a?.()}if(Ut(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Ut(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:l}=i,c=this.#l,{touch0X:d,touch0Y:f,touch1X:p,touch1Y:g}=c,y=p-d,S=g-f,w=a-r,x=l-s,E=Math.hypot(w,x)||1,C=Math.hypot(y,S)||1;if(!this.#t&&Math.abs(C-E)<=Np.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=s,c.touch1X=a,c.touch1Y=l,!this.#t){this.#t=!0;return}const T=[(r+a)/2,(s+l)/2];this.#s?.(T,C,E)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#r?.()),this.#l&&(Ut(e),this.#l=null,this.#t=!1))}destroy(){this.#f?.abort(),this.#f=null,this.#o?.abort(),this.#o=null}}class Me{#e=null;#t=null;#i=null;#n=null;#a=null;#s=!1;#r=null;#o="";#u=null;#l=null;#f=null;#d=null;#h=null;#g="";#m=!1;#c=null;#p=!1;#v=!1;#b=!1;#y=null;#E=0;#_=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#x=Me._zIndex++;static _borderLineWidth=-1;static _colorManager=new RA;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Me.prototype._resizeWithKeyboard,n=ca.TRANSLATE_SMALL,i=ca.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new qc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Me.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new kj({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Me._l10n??=e,Me._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Me._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Me._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(n+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r),this._onTranslated()}#R([e,n],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,n){this.#R(this.parentDimensions,e,n)}translateInPage(e,n){this.#c||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){this.#c||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:f}=i;f.left=`${(100*a).toFixed(2)}%`,f.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),i.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!this.#c&&(this.#c[0]!==this.x||this.#c[1]!==this.y)}get _hasBeenResized(){return!!this.#c&&(this.#c[2]!==this.width||this.#c[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:i}=Me,r=i/e,s=i/n;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[i,r]}=this;let{x:s,y:a,width:l,height:c}=this;if(l*=i,c*=r,s*=i,a*=r,this._mustFixPosition)switch(e){case 0:s=Vn(s,0,i-l),a=Vn(a,0,r-c);break;case 90:s=Vn(s,0,i-c),a=Vn(a,l,r);break;case 180:s=Vn(s,l,i),a=Vn(a,c,r);break;case 270:s=Vn(s,c,i),a=Vn(a,0,r-l);break}this.x=s/=i,this.y=a/=r;const[d,f]=this.getBaseTranslation();s+=d,a+=f,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#M(e,n,i){switch(i){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return Me.#M(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return Me.#M(e,n,360-this.parentRotation)}#P(e){switch(e){case 90:{const[n,i]=this.pageDimensions;return[0,-n/i,i/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,i]=this.pageDimensions;return[0,n/i,-i/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,i]}=this;return[n*e,i*e]}setDims(){const{div:{style:e},width:n,height:i}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#U(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#u.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#I.bind(this,i),{signal:n}),r.addEventListener("contextmenu",Yi,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#u)}#I(e,n){n.preventDefault();const{isMac:i}=rn.platform;if(n.button!==0||n.ctrlKey&&i)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ut,{passive:!1,signal:a}),window.addEventListener("contextmenu",Yi,{signal:a}),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#B()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#O(e,n,i,r){this.width=i,this.height=r,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#f)return;const{savedX:e,savedY:n,savedWidth:i,savedHeight:r}=this.#f;this.#f=null;const s=this.x,a=this.y,l=this.width,c=this.height;s===e&&a===n&&l===i&&c===r||this.addCommands({cmd:this.#O.bind(this,s,a,l,c),undo:this.#O.bind(this,e,n,i,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#k(e,n){const[i,r]=this.parentDimensions,s=this.x,a=this.y,l=this.width,c=this.height,d=Me.MIN_SIZE/i,f=Me.MIN_SIZE/r,p=this.#P(this.rotation),g=(F,j)=>[p[0]*F+p[2]*j,p[1]*F+p[3]*j],y=this.#P(360-this.rotation),S=(F,j)=>[y[0]*F+y[2]*j,y[1]*F+y[3]*j];let w,x,E=!1,C=!1;switch(e){case"topLeft":E=!0,w=(F,j)=>[0,0],x=(F,j)=>[F,j];break;case"topMiddle":w=(F,j)=>[F/2,0],x=(F,j)=>[F/2,j];break;case"topRight":E=!0,w=(F,j)=>[F,0],x=(F,j)=>[0,j];break;case"middleRight":C=!0,w=(F,j)=>[F,j/2],x=(F,j)=>[0,j/2];break;case"bottomRight":E=!0,w=(F,j)=>[F,j],x=(F,j)=>[0,0];break;case"bottomMiddle":w=(F,j)=>[F/2,j],x=(F,j)=>[F/2,0];break;case"bottomLeft":E=!0,w=(F,j)=>[0,j],x=(F,j)=>[F,0];break;case"middleLeft":C=!0,w=(F,j)=>[0,j/2],x=(F,j)=>[F,j/2];break}const T=w(l,c),N=x(l,c);let R=g(...N);const I=Me._round(s+R[0]),k=Me._round(a+R[1]);let B=1,z=1,V,G;if(n.fromKeyboard)({deltaX:V,deltaY:G}=n);else{const{screenX:F,screenY:j}=n,[re,ue]=this.#l;[V,G]=this.screenToPageTranslation(F-re,j-ue),this.#l[0]=F,this.#l[1]=j}if([V,G]=S(V/i,G/r),E){const F=Math.hypot(l,c);B=z=Math.max(Math.min(Math.hypot(N[0]-T[0]-V,N[1]-T[1]-G)/F,1/l,1/c),d/l,f/c)}else C?B=Vn(Math.abs(N[0]-T[0]-V),d,1)/l:z=Vn(Math.abs(N[1]-T[1]-G),f,1)/c;const W=Me._round(l*B),oe=Me._round(c*z);R=g(...x(W,oe));const ae=I-R[0],pe=k-R[1];this.#c||=[this.x,this.y,this.width,this.height],this.width=W,this.height=oe,this.x=ae,this.y=pe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new hc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,i]of e)await this._editToolbar.addButton(n,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const n=this._editToolbar?.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Pr.initialize(Me._l10n),this.#i=new Pr(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Of(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:i,deleted:r}}=this.#n;return{text:n,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Of(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:i}){if(!n||(this.#n||=new Of(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Of(this),this.#n.edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,l=a+s+1,c=r-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,d,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){this.#n.data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#s?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),PD(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Np({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,n,i){let s=.7*(i/n)+1-.7;if(s===1)return;const a=this.#P(this.rotation),l=(I,k)=>[a[0]*I+a[2]*k,a[1]*I+a[3]*k],[c,d]=this.parentDimensions,f=this.x,p=this.y,g=this.width,y=this.height,S=Me.MIN_SIZE/c,w=Me.MIN_SIZE/d;s=Math.max(Math.min(s,1/g,1/y),S/g,w/y);const x=Me._round(g*s),E=Me._round(y*s);if(x===g&&E===y)return;this.#c||=[f,p,g,y];const C=l(g/2,y/2),T=Me._round(f+C[0]),N=Me._round(p+C[1]),R=l(x/2,E/2);this.x=T-R[0],this.y=N-R[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:n}=rn.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#F(e);return}this.#D(e)}#D(e){const{isMac:n}=rn.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},l=d=>{r.abort(),this.#r=null,this.#m=!1,this._uiManager.endDragSession()||this.#D(d),i&&this._onStopDragging()};n&&(this.#E=e.clientX,this.#_=e.clientY,this.#r=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:g}=d;if(g!==this.#r){Ut(d);return}const[y,S]=this.screenToPageTranslation(f-this.#E,p-this.#_);this.#E=f,this.#_=p,this._uiManager.dragSelectedEditors(y,S)},a),window.addEventListener("touchmove",Ut,a),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#C||d.isPrimary)&&l(d),Ut(d)},a));const c=d=>{if(!this.#r||this.#r===d.pointerId){l(d);return}Ut(d)};window.addEventListener("pointerup",c,{signal:s}),window.addEventListener("blur",c,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,i){e.changeParent(this),this.x=n,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,f=n/r,p=this.x*s,g=this.y*a,y=this.width*s,S=this.height*a;switch(i){case 0:return[p+d+l,a-g-f-S+c,p+d+y+l,a-g-f+c];case 90:return[p+f+l,a-g+d+c,p+f+S+l,a-g+d+y+c];case 180:return[p-d-y+l,a-g+f+c,p-d+l,a-g+f+S+c];case 270:return[p-f-S+l,a-g-d-y+c,p-f+l,a-g-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[i,r,s,a]=e,l=s-i,c=a-r;switch(this.rotation){case 0:return[i,n-a,l,c];case 90:return[i,n-r,c,l];case 180:return[s,n-r,l,c];case 270:return[s,n-a,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Me._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:i,opacity:r,deleted:s,richText:a},uid:l,pageIndex:c,creationDate:d,modificationDate:f}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:i||f,popupRef:!s,color:n,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&r>0&&e<s&&i>0}#H(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,n,i){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[l,c,d,f]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/s,r.y=c/a,r.width=d/s,r.height=f/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#S){for(const e of this.#S.values())clearTimeout(e);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#U(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[i,r,s,a]=this.getPDFRect();return[Me._round(i+(s-i)*e),Me._round(r+(a-r)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#f={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#u.children;if(!this.#t){this.#t=Array.from(n);const a=this.#Y.bind(this),l=this.#$.bind(this),c=this._uiManager._signal;for(const d of this.#t){const f=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",this.#X.bind(this,f),{signal:c}),d.setAttribute("data-l10n-id",Me._l10nResizer[f])}}const i=this.#t[0];let r=0;for(const a of n){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let l=0;l<r-s;l++)this.#u.append(this.#u.firstElementChild);else if(s>r)for(let l=0;l<s-r;l++)this.#u.firstElementChild.before(this.#u.lastElementChild);let a=0;for(const l of n){const d=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Me._l10nResizer[d])}}this.#G(0),this.#b=!0,this.#u.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){Me._resizerKeyboardManager.exec(this,e)}#$(e){this.#b&&e.relatedTarget?.parentNode!==this.#u&&this.#L()}#X(e){this.#g=this.#b?e:""}#G(e){if(this.#t)for(const n of this.#t)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#b&&this.#k(this.#g,{deltaX:e,deltaY:n,fromKeyboard:!0})}#L(){this.#b=!1,this.#G(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#S||=new Map;const{action:i}=e;let r=this.#S.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#S.delete(i),this.#S.size===0&&(this.#S=null)},Me._telemetryTimeout),this.#S.set(i,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const i=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),i.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class kj extends Me{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const m1=3285377520,Ui=4294901760,Tr=65535;class RD{constructor(e){this.h1=e?e&4294967295:m1,this.h2=e?e&4294967295:m1}update(e){let n,i;if(typeof e=="string"){n=new Uint8Array(e.length*2),i=0;for(let w=0,x=e.length;w<x;w++){const E=e.charCodeAt(w);E<=255?n[i++]=E:(n[i++]=E>>>8,n[i++]=E&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),i=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(n.buffer,0,r);let l=0,c=0,d=this.h1,f=this.h2;const p=3432918353,g=461845907,y=p&Tr,S=g&Tr;for(let w=0;w<r;w++)w&1?(l=a[w],l=l*p&Ui|l*y&Tr,l=l<<15|l>>>17,l=l*g&Ui|l*S&Tr,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[w],c=c*p&Ui|c*y&Tr,c=c<<15|c>>>17,c=c*g&Ui|c*S&Tr,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(l=0,s){case 3:l^=n[r*4+2]<<16;case 2:l^=n[r*4+1]<<8;case 1:l^=n[r*4],l=l*p&Ui|l*y&Tr,l=l<<15|l>>>17,l=l*g&Ui|l*S&Tr,r&1?d^=l:f^=l}this.h1=d,this.h2=f}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Ui|e*36045&Tr,n=n*4283543511&Ui|((n<<16|e>>>16)*2950163797&Ui)>>>16,e^=n>>>1,e=e*444984403&Ui|e*60499&Tr,n=n*3301882366&Ui|((n<<16|e>>>16)*3120437893&Ui)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const ab=Object.freeze({map:null,hash:"",transfer:void 0});class NA{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const i=this.#n.get(e);return i===void 0?n:Object.assign(n,i)}getRawValue(e){return this.#n.get(e)}remove(e){const n=this.#n.get(e);if(n!==void 0&&(n instanceof Me&&this.#i.delete(n.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof Me)return;this.onAnnotationEditor(null)}}setValue(e,n){const i=this.#n.get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(n))i[s]!==a&&(r=!0,i[s]=a);else r=!0,this.#n.set(e,n);r&&this.#a(),n instanceof Me&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ND(this)}get serializable(){if(this.#n.size===0)return ab;const e=new Map,n=new RD,i=[],r=Object.create(null);let s=!1;for(const[a,l]of this.#n){const c=l instanceof Me?l.serialize(!1,r):l;c&&(e.set(a,c),n.update(`${a}:${JSON.stringify(c)}`),s||=!!c.bitmap)}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:ab}get editorStats(){let e=null;const n=new Map;let i=0,r=0;for(const s of this.#n.values()){if(!(s instanceof Me)){s.popup&&(s.popup.deleted?r+=1:i+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(i+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:l}=a;n.has(l)||n.set(l,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[d,f]of Object.entries(a)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const g=p.get(f)??0;p.set(f,g+1)}}if((r>0||i>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:i}),!e)return null;for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,n){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(n),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&e.push(n.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class ND extends NA{#e;constructor(e){super();const{map:n,hash:i,transfer:r}=e.serializable,s=structuredClone(n,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}class Lj{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(Ke(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,l=new FontFace(r,s,a);this.addNativeFontFace(l);try{await l.load(),this.#e.add(r),i?.(e)}catch{ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ke(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",qn||rn.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Ke(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:n,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function i(N,R){return N.charCodeAt(R)<<24|N.charCodeAt(R+1)<<16|N.charCodeAt(R+2)<<8|N.charCodeAt(R+3)&255}function r(N,R,I,k){const B=N.substring(0,R),z=N.substring(R+I);return B+k+z}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function f(N,R){if(++d>30){ke("Load test font never loaded."),R();return}if(c.font="30px "+N,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(f.bind(null,N,R))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=r(g,976,p.length,p);const S=16,w=1482184792;let x=i(g,S);for(s=0,a=p.length-3;s<a;s+=4)x=x-w+i(p,s)|0;s<p.length&&(x=x-w+i(p+"XXX",s)|0),g=r(g,S,4,gj(x));const E=`url(data:font/opentype;base64,${btoa(g)});`,C=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const N of[e.loadedName,p]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=N,T.append(R)}this._document.body.append(T),f(p,()=>{T.remove(),n.complete()})}}class Uj{#e;constructor(e,n=null,i,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=n,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${ED(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const i=this.loadedName+"_path_"+n;let r;try{r=e.get(i)}catch(a){ke(`getPathGenerator - ignoring character: "${a}".`)}const s=MD(r?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[n]=s}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){Le(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){Le(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class xl{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const n=new TextEncoder,i={};let r=0;for(const d of xl.strings){const f=n.encode(e[d]);i[d]=f,r+=4+f.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),l=new DataView(s);let c=0;for(const d of xl.strings){const f=i[d],p=f.length;l.setUint32(c,p),a.set(f,c+4),c+=4+p}return Ke(c===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){Ke(e<xl.strings.length,"Invalid string index");let n=0;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class El{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const n=new TextEncoder,i={};let r=0;for(const g of El.strings){const y=n.encode(e[g]);i[g]=y,r+=4+y.length}r+=4;let s,a,l=1+r;e.style&&(s=n.encode(e.style.style),a=n.encode(e.style.weight),l+=4+s.length+4+a.length);const c=new ArrayBuffer(l),d=new Uint8Array(c),f=new DataView(c);let p=0;f.setUint8(p++,e.guessFallback?1:0),f.setUint32(p,0),p+=4,r=0;for(const g of El.strings){const y=i[g],S=y.length;r+=4+S,f.setUint32(p,S),d.set(y,p+4),p+=4+S}return f.setUint32(p-r-4,r),e.style&&(f.setUint32(p,s.length),d.set(s,p+4),p+=4+s.length,f.setUint32(p,a.length),d.set(a,p+4),p+=4+a.length),Ke(p<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Ke(e<El.strings.length,"Invalid string index");let n=5;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const n=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,n));e+=4+n;const r=this.#t.getUint32(e),s=this.#i.decode(new Uint8Array(this.#e,e+4,r));return{style:i,weight:s}}}class ht{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#s;#r;#o;constructor({data:e,extra:n}){this.#s=e,this.#r=new TextDecoder,this.#o=new DataView(this.#s),n&&Object.assign(this,n)}#u(e){Ke(e<ht.bools.length,"Invalid boolean index");const n=Math.floor(e/4),i=e*2%8,r=this.#o.getUint8(n)>>i&3;return r===0?void 0:r===2}get black(){return this.#u(0)}get bold(){return this.#u(1)}get disableFontFace(){return this.#u(2)}get fontExtraProperties(){return this.#u(3)}get isInvalidPDFjsFont(){return this.#u(4)}get isType3Font(){return this.#u(5)}get italic(){return this.#u(6)}get missingFile(){return this.#u(7)}get remeasure(){return this.#u(8)}get vertical(){return this.#u(9)}#l(e){return Ke(e<ht.numbers.length,"Invalid number index"),this.#o.getFloat64(ht.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=ht.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=ht.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=ht.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#f(e){Ke(e<ht.strings.length,"Invalid string index");let n=ht.#a+4;for(let s=0;s<e;s++)n+=this.#o.getUint32(n)+4;const i=this.#o.getUint32(n),r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,n+4,i)),this.#r.decode(r)}get fallbackName(){return this.#f(0)}get loadedName(){return this.#f(1)}get mimetype(){return this.#f(2)}get name(){return this.#f(3)}get data(){let e=ht.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);if(s!==0)return new Uint8Array(this.#s,e+4,s)}clearData(){let e=ht.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);new Uint8Array(this.#s,e+4,s).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=ht.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(this.#s,e+4,r)),new xl(s.buffer)}get systemFontInfo(){let e=ht.#a;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,e+4,i)),new El(r.buffer)}static write(e){const n=e.systemFontInfo?El.write(e.systemFontInfo):null,i=e.cssFontInfo?xl.write(e.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const w of ht.strings)s[w]=r.encode(e[w]),a+=4+s[w].length;const l=ht.#a+4+a+4+(n?n.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),d=new Uint8Array(c),f=new DataView(c);let p=0;const g=ht.bools.length;let y=0,S=0;for(let w=0;w<g;w++){const x=e[ht.bools[w]];y|=(x===void 0?0:x?2:1)<<S,S+=2,(S===8||w===g-1)&&(f.setUint8(p++,y),y=0,S=0)}Ke(p===ht.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of ht.numbers)f.setFloat64(p,e[w]),p+=8;if(Ke(p===ht.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(p++,4);for(const w of e.bbox)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=8;if(Ke(p===ht.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(p++,6);for(const w of e.fontMatrix)f.setFloat64(p,w,!0),p+=8}else f.setUint8(p++,0),p+=48;if(Ke(p===ht.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(p++,1);for(const w of e.defaultVMetrics)f.setInt16(p,w,!0),p+=2}else f.setUint8(p++,0),p+=6;Ke(p===ht.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(ht.#a,0),p+=4;for(const w of ht.strings){const x=s[w],E=x.length;f.setUint32(p,E),d.set(x,p+4),p+=4+E}if(f.setUint32(ht.#a,p-ht.#a-4),!n)f.setUint32(p,0),p+=4;else{const w=n.byteLength;f.setUint32(p,w),Ke(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(n),p+4),p+=4+w}if(!i)f.setUint32(p,0),p+=4;else{const w=i.byteLength;f.setUint32(p,w),Ke(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(i),p+4),p+=4+w}return e.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,e.data.length),d.set(e.data,p+4),p+=4+e.data.length),Ke(p<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(p)}}class dn{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#s=8;static#r=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,i=null,r=[],s=[],a=[],l=[],c=null,d=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,i=e[2],a=e[3],n===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,c=e[1],r=e[2],s=e[3],l=e[4]||[],i=e[6],d=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const f=Math.floor(r.length/2),p=Math.floor(s.length/3),g=a.length,y=l.length;let S=0;for(const R of l)S+=1,S=Math.ceil(S/4)*4,S+=4+R.coords.length*4,S+=4+R.colors.length*4,R.verticesPerRow!==void 0&&(S+=4);const w=20+f*8+p*3+g*8+(i?16:0)+(d?3:0)+S,x=new ArrayBuffer(w),E=new DataView(x),C=new Uint8Array(x);E.setUint8(dn.#e,n),E.setUint8(dn.#t,i?1:0),E.setUint8(dn.#i,d?1:0),E.setUint8(dn.#n,c),E.setUint32(dn.#a,f,!0),E.setUint32(dn.#s,p,!0),E.setUint32(dn.#r,g,!0),E.setUint32(dn.#o,y,!0);let T=20;new Float32Array(x,T,f*2).set(r),T+=f*8,C.set(s,T),T+=p*3;for(const[R,I]of a)E.setFloat32(T,R,!0),T+=4,E.setUint32(T,parseInt(I.slice(1),16),!0),T+=4;if(i)for(const R of i)E.setFloat32(T,R,!0),T+=4;d&&(C.set(d,T),T+=3);for(let R=0;R<l.length;R++){const I=l[R];E.setUint8(T,I.type),T+=1,T=Math.ceil(T/4)*4,E.setUint32(T,I.coords.length,!0),T+=4,new Int32Array(x,T,I.coords.length).set(I.coords),T+=I.coords.length*4,E.setUint32(T,I.colors.length,!0),T+=4,new Int32Array(x,T,I.colors.length).set(I.colors),T+=I.colors.length*4,I.verticesPerRow!==void 0&&(E.setUint32(T,I.verticesPerRow,!0),T+=4)}return x}getIR(){const e=this.view,n=this.data[dn.#e],i=!!this.data[dn.#t],r=!!this.data[dn.#i],s=e.getUint32(dn.#a,!0),a=e.getUint32(dn.#s,!0),l=e.getUint32(dn.#r,!0),c=e.getUint32(dn.#o,!0);let d=20;const f=new Float32Array(this.buffer,d,s*2);d+=s*8;const p=new Uint8Array(this.buffer,d,a*3);d+=a*3;const g=[];for(let x=0;x<l;++x){const E=e.getFloat32(d,!0);d+=4;const C=e.getUint32(d,!0);d+=4,g.push([E,`#${C.toString(16).padStart(6,"0")}`])}let y=null;if(i){y=[];for(let x=0;x<4;++x)y.push(e.getFloat32(d,!0)),d+=4}let S=null;r&&(S=new Uint8Array(this.buffer,d,3),d+=3);const w=[];for(let x=0;x<c;++x){const E=e.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const C=e.getUint32(d,!0);d+=4;const T=new Int32Array(this.buffer,d,C);d+=C*4;const N=e.getUint32(d,!0);d+=4;const R=new Int32Array(this.buffer,d,N);d+=N*4;const I={type:E,coords:T,colors:R};E===tb.LATTICE&&(I.verticesPerRow=e.getUint32(d,!0),d+=4),w.push(I)}if(n===1)return["RadialAxial","axial",y,g,Array.from(f.slice(0,2)),Array.from(f.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",y,g,[f[0],f[1]],[f[3],f[4]],f[2],f[5]];if(n===3){const x=this.data[dn.#n];let E=null;if(f.length>0){let C=f[0],T=f[0],N=f[1],R=f[1];for(let I=0;I<f.length;I+=2){const k=f[I],B=f[I+1];C=C>k?k:C,N=N>B?B:N,T=T<k?k:T,R=R<B?B:R}E=[C,N,T,R]}return["Mesh",x,f,p,w,E,y,S]}throw new Error(`Unsupported pattern kind: ${n}`)}}class Bj{static write(e){let n,i;return rn.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),n=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),n=new Float32Array(i)),n.set(e),i}#e;constructor(e){this.#e=e}get path(){return rn.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function Fj(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(qn)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function zj(t){if(qn&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return Fc(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function kf(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const ob=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,Hj=t=>typeof t=="object"&&typeof t?.name=="string",Gj=Sj.bind(null,ob,Hj);class qj{#e=new Map;#t=Promise.resolve();postMessage(e,n){const i={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,i)})}addEventListener(e,n,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){ke("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(n,r)}removeEventListener(e,n){this.#e.get(n)?.(),this.#e.delete(n)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Lf={DATA:1,ERROR:2},Kt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function g1(){}function si(t){if(t instanceof ua||t instanceof nb||t instanceof l1||t instanceof _h||t instanceof Jv)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new ua(t.message);case"InvalidPDFException":return new nb(t.message);case"PasswordException":return new l1(t.message,t.code);case"ResponseException":return new _h(t.message,t.status,t.missing);case"UnknownErrorException":return new Jv(t.message,t.details)}return new Jv(t.message,t.toString())}class uc{#e=new AbortController;constructor(e,n,i){this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Lf.DATA)r.resolve(e.data);else if(e.callback===Lf.ERROR)r.reject(si(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:Lf.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:Lf.ERROR,callbackId:e.callbackId,reason:si(a)})});return}if(e.streamId){this.#i(e);return}n(e.data)}on(e,n){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=n}send(e,n,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},i)}sendWithPromise(e,n,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,i,r){const s=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:d,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:s,data:n,desiredSize:d.desiredSize},r),f.promise},pull:d=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,c.postMessage({sourceName:a,targetName:l,stream:Kt.PULL,streamId:s,desiredSize:d.desiredSize}),f.promise},cancel:d=>{Ke(d instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Kt.CANCEL,streamId:s,reason:si(d)}),f.promise}},i)}#i(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,f=1,p){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:Kt.ENQUEUE,streamId:n,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Kt.CLOSE,streamId:n}),delete a.streamSinks[n])},error(d){Ke(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Kt.ERROR,streamId:n,reason:si(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,Promise.try(l,e.data,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Kt.START_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:Kt.START_COMPLETE,streamId:n,reason:si(d)})})}#n(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[n],l=this.streamSinks[n];switch(e.stream){case Kt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(si(e.reason));break;case Kt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(si(e.reason));break;case Kt.PULL:if(!l){s.postMessage({sourceName:i,targetName:r,stream:Kt.PULL_COMPLETE,streamId:n,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||g1).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Kt.PULL_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:Kt.PULL_COMPLETE,streamId:n,reason:si(d)})});break;case Kt.ENQUEUE:if(Ke(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Kt.CLOSE:if(Ke(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,n);break;case Kt.ERROR:Ke(a,"error should have stream controller"),a.controller.error(si(e.reason)),this.#a(a,n);break;case Kt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(si(e.reason)),this.#a(a,n);break;case Kt.CANCEL:if(!l)break;const c=si(e.reason);Promise.try(l.onCancel||g1,c).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Kt.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){s.postMessage({sourceName:i,targetName:r,stream:Kt.CANCEL_COMPLETE,streamId:n,reason:si(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#a(e,n){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#e?.abort(),this.#e=null}}class ID{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,n);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,n,i){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){mt("Abstract method `_createCanvas` called.")}}class Vj extends ID{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const i=this._document.createElement("canvas");return i.width=e,i.height=n,i}}class DD{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class v1 extends DD{async _fetch(e){const n=await zc(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Fc(n)}}class OD{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,i,r,s){return"none"}destroy(e=!1){}}class jj extends OD{#e;#t;#i;#n;#a;#s;#r=0;constructor({docId:e,ownerDocument:n=globalThis.document}){super(),this.#n=e,this.#a=n}get#o(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=this.#a.createElementNS(os,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(os,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#f(e){if(e.length===1){const c=e[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=c[p]/255;const f=d.join(",");return[f,f,f]}const[n,i,r]=e,s=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)s[c]=n[c]/255,a[c]=i[c]/255,l[c]=r[c]/255;return[s.join(","),a.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const n=this.#a.URL;n!==this.#a.baseURI&&(Rp(n)?ke('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=wD(n,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let n=this.#o.get(e);if(n)return n;const[i,r,s]=this.#f(e),a=e.length===1?i:`${i}${r}${s}`;if(n=this.#o.get(a),n)return this.#o.set(e,n),n;const l=`g_${this.#n}_transfer_map_${this.#r++}`,c=this.#d(l);this.#o.set(e,c),this.#o.set(a,c);const d=this.#m(l);return this.#p(i,r,s,d),c}addHCMFilter(e,n){const i=`${e}-${n}`,r="base";let s=this.#u.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#u.set(r,s)),!e||!n))return s.url;const a=this.#b(e);e=me.makeHexColor(...a);const l=this.#b(n);if(n=me.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&n==="#ffffff"||e===n)return s.url;const c=new Array(256);for(let y=0;y<=255;y++){const S=y/255;c[y]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=c.join(","),f=`g_${this.#n}_hcm_filter`,p=s.filter=this.#m(f);this.#p(d,d,d,p),this.#g(p);const g=(y,S)=>{const w=a[y]/255,x=l[y]/255,E=new Array(S+1);for(let C=0;C<=S;C++)E[C]=w+C/S*(x-w);return E.join(",")};return this.#p(g(0,5),g(1,5),g(2,5),p),s.url=this.#d(f),s.url}addAlphaFilter(e){let n=this.#o.get(e);if(n)return n;const[i]=this.#f([e]),r=`alpha_${i}`;if(n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_alpha_map_${this.#r++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(r,a);const l=this.#m(s);return this.#v(i,l),a}addLuminosityFilter(e){let n=this.#o.get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=this.#f([e]),r=`luminosity_${i}`):r="luminosity",n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_luminosity_map_${this.#r++}`,a=this.#d(s);this.#o.set(e,a),this.#o.set(r,a);const l=this.#m(s);return this.#h(l),e&&this.#v(i,l),a}addHighlightHCMFilter(e,n,i,r,s){const a=`${n}-${i}-${r}-${s}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!n||!i))return l.url;const[c,d]=[n,i].map(this.#b.bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,y]=[r,s].map(this.#b.bind(this));p<f&&([f,p,g,y]=[p,f,y,g]),this.#l.style.color="";const S=(E,C,T)=>{const N=new Array(256),R=(p-f)/T,I=E/255,k=(C-E)/(255*T);let B=0;for(let z=0;z<=T;z++){const V=Math.round(f+z*R),G=I+z*k;for(let W=B;W<=V;W++)N[W]=G;B=V+1}for(let z=B;z<256;z++)N[z]=N[B-1];return N.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,x=l.filter=this.#m(w);return this.#g(x),this.#p(S(g[0],y[0],5),S(g[1],y[1],5),S(g[2],y[2],5),x),l.url=this.#d(w),l.url}destroy(e=!1){e&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#r=0)}#h(e){const n=this.#a.createElementNS(os,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#g(e){const n=this.#a.createElementNS(os,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#m(e){const n=this.#a.createElementNS(os,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#l.append(n),n}#c(e,n,i){const r=this.#a.createElementNS(os,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#p(e,n,i,r){const s=this.#a.createElementNS(os,"feComponentTransfer");r.append(s),this.#c(s,"feFuncR",e),this.#c(s,"feFuncG",n),this.#c(s,"feFuncB",i)}#v(e,n){const i=this.#a.createElementNS(os,"feComponentTransfer");n.append(i),this.#c(i,"feFuncA",e)}#b(e){return this.#l.style.color=e,Gc(getComputedStyle(this.#l).getPropertyValue("color"))}}class kD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class y1 extends kD{async _fetch(e){const n=await zc(e,"arraybuffer");return new Uint8Array(n)}}class LD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class b1 extends LD{async _fetch(e){const n=await zc(e,"arraybuffer");return new Uint8Array(n)}}qn&&ke("Please use the `legacy` build in Node.js environments.");async function IA(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class $j extends OD{}class Yj extends ID{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Xj extends DD{async _fetch(e){return IA(e)}}class Kj extends kD{async _fetch(e){return IA(e)}}class Wj extends LD{async _fetch(e){return IA(e)}}const al="__forcedDependency",{floor:A1,ceil:S1}=Math;function Uf(t,e,n,i,r,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],i),t[e*4+2]=Math.max(t[e*4+2],r),t[e*4+3]=Math.max(t[e*4+3],s)}const lb=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Jj{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===lb}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Bf=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};class Qj{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[al]:[]};#i=new Map;#n=[];#a=[];#s=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#u=-1;#l=new Set;#f=new Map;#d=new Map;#h;#g;#m;#c;#p;constructor(e,n,i=!1){this.#h=e.width,this.#g=e.height,this.#v(n),i&&(this.#p=new Map)}growOperationsCount(e){e>=this.#c.length&&this.#v(e,this.#c)}#v(e,n){const i=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(i),this.#c=new Uint32Array(i),n&&n.length>0?(this.#c.set(n),this.#c.fill(lb,n.length)):this.#c.fill(lb)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[al]:{__proto__:this.#t[al]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const n=Object.getPrototypeOf(this.#e);if(n===null)return this;this.#e=n,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const i=this.#n.pop();return i!==void 0&&(Bf(this.#p,e)?.dependencies.add(i),this.#c[e]=this.#c[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const n=this.#n.pop();return n!==void 0&&(Bf(this.#p,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const n=this.#a.pop();return n!==void 0&&(Bf(this.#p,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}pushBaseTransform(e){return this.#s.push(me.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(e,n){return this.#e[e]=n,this}recordIncrementalData(e,n){return this.#t[e].push(n),this}resetIncrementalData(e,n){return this.#t[e].length=0,this}recordNamedData(e,n){return this.#i.set(e,n),this}recordSimpleDataFromNamed(e,n,i){this.#e[e]=this.#i.get(n)??i}recordFutureForcedDependency(e,n){return this.recordIncrementalData(al,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in this.#e&&this.recordFutureForcedDependency(n,this.#e[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(al,e);return this}resetBBox(e){return this.#u!==e&&(this.#u=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,n,i,r,s,a){const l=me.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform()),c=[1/0,1/0,-1/0,-1/0];me.axialAlignedBoundingBox([i,s,r,a],l,c);const d=me.intersect(this.#r,c);return d?(this.#r[0]=d[0],this.#r[1]=d[1],this.#r[2]=d[2],this.#r[3]=d[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,n,i,r,s,a){const l=this.#r;if(l[0]===1/0)return this;const c=me.multiplyByDOMMatrix(this.#s.at(-1),n.getTransform());if(l[0]===-1/0)return me.axialAlignedBoundingBox([i,s,r,a],c,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return me.axialAlignedBoundingBox([i,s,r,a],c,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,n,i,r=1,s=0,a=0,l){const c=i.bbox;let d,f;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&this.#d.get(i),d!==!1&&(f=[0,0,0,0],me.axialAlignedBoundingBox(c,i.fontMatrix,f),(r!==1||s!==0||a!==0)&&me.scaleMinMax([r,0,0,-r,s,a],f),d)))return this.recordBBox(e,n,f[0],f[2],f[1],f[3]);if(!l)return this.recordFullPageBBox(e);const p=l();return c&&f&&d===void 0&&(d=f[0]<=s-p.actualBoundingBoxLeft&&f[2]>=s+p.actualBoundingBoxRight&&f[1]<=a-p.actualBoundingBoxAscent&&f[3]>=a+p.actualBoundingBoxDescent,this.#d.set(i,d),d)?this.recordBBox(e,n,f[0],f[2],f[1],f[3]):this.recordBBox(e,n,s-p.actualBoundingBoxLeft,s+p.actualBoundingBoxRight,a-p.actualBoundingBoxAscent,a+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#h,this.#r[2]),this.#o[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,n){const i=this.#l,r=this.#e,s=this.#t;for(const a of n)a in this.#e?i.add(r[a]):a in s&&s[a].forEach(i.add,i);return this}recordNamedDependency(e,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[al]),this.#p){const i=Bf(this.#p,e),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(e),i.isRenderingOperation=!0}if(this.#u===e){const i=A1(this.#o[0]*256/this.#h),r=A1(this.#o[1]*256/this.#g),s=S1(this.#o[2]*256/this.#h),a=S1(this.#o[3]*256/this.#g);Uf(this.#m,e,i,r,s,a);for(const l of this.#l)l!==e&&Uf(this.#m,l,i,r,s,a);for(const l of this.#n)l!==e&&Uf(this.#m,l,i,r,s,a);for(const l of this.#a)l!==e&&Uf(this.#m,l,i,r,s,a);n||(this.#l.clear(),this.#u=-1)}return this}recordShowTextOperation(e,n=!1){const i=Array.from(this.#l);this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,n=!1){return this.#u===e&&(this.#u=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const n=this.#f.get(e);return this.#f.delete(e),n}_pushPendingDependencies(e){for(const n of e)this.#l.add(n)}take(){return this.#d.clear(),new Jj(this.#c,this.#m)}takeDebugMetadata(){return this.#p}}class xh{#e;#t;#i;#n=0;#a=0;constructor(e,n,i){if(e instanceof xh&&e.#i===!!i)return e;this.#e=e,this.#t=n,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,n){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,n){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,n){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,i){return this.#e.recordSimpleDataFromNamed(e,n,this.#t),this}recordFutureForcedDependency(e,n){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,n,i,r,s,a){return this.#i||this.#e.recordClipBox(this.#t,n,i,r,s,a),this}recordBBox(e,n,i,r,s,a){return this.#i||this.#e.recordBBox(this.#t,n,i,r,s,a),this}recordCharacterBBox(e,n,i,r,s,a,l){return this.#i||this.#e.recordCharacterBBox(this.#t,n,i,r,s,a,l),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,n){return this.#e.recordDependencies(this.#t,n),this}recordNamedDependency(e,n){return this.#e.recordNamedDependency(this.#t,n),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Bi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Cn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ub(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class DA{isModifyingCurrentTransform(){return!1}getPattern(){mt("Abstract method `getPattern` called.")}}class Zj extends DA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,n=null){let i,r=this._p0,s=this._p1;if(n&&(r=r.slice(),s=s.slice(),me.applyTransform(r,n),me.applyTransform(s,n)),this._type==="axial")i=e.createLinearGradient(r[0],r[1],s[0],s[1]);else if(this._type==="radial"){let a=this._r0,l=this._r1;if(n){const c=new Float32Array(2);me.singularValueDecompose2dScale(n,c),a*=c[0],l*=c[0]}i=e.createRadialGradient(r[0],r[1],a,s[0],s[1],l)}for(const a of this._colorStops)i.addColorStop(a[0],a[1]);return i}getPattern(e,n,i,r){let s;if(r===Cn.STROKE||r===Cn.FILL){if(this.isOriginBased()){let g=me.transform(i,n.baseTransform);this.matrix&&(g=me.transform(g,this.matrix));const y=.001,S=Math.hypot(g[0],g[1]),w=Math.hypot(g[2],g[3]),x=(g[0]*g[2]+g[1]*g[3])/(S*w);if(Math.abs(x)<y)if(this.isRadial()){if(Math.abs(S-w)<y)return this._createGradient(e,g)}else return this._createGradient(e,g)}const a=n.current.getClippedPathBoundingBox(r,Nt(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=n.cachedCanvases.getCanvas("pattern",l,c),f=d.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-a[0],-a[1]),i=me.transform(i,[1,0,0,1,a[0],a[1]]),f.transform(...n.baseTransform),this.matrix&&f.transform(...this.matrix),ub(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(i);s.setTransform(p)}else ub(e,this._bbox),s=this._createGradient(e);return s}}function ey(t,e,n,i,r,s,a,l){const c=e.coords,d=e.colors,f=t.data,p=t.width*4;let g;c[n+1]>c[i+1]&&(g=n,n=i,i=g,g=s,s=a,a=g),c[i+1]>c[r+1]&&(g=i,i=r,r=g,g=a,a=l,l=g),c[n+1]>c[i+1]&&(g=n,n=i,i=g,g=s,s=a,a=g);const y=(c[n]+e.offsetX)*e.scaleX,S=(c[n+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY,E=(c[r]+e.offsetX)*e.scaleX,C=(c[r+1]+e.offsetY)*e.scaleY;if(S>=C)return;const T=d[s],N=d[s+1],R=d[s+2],I=d[a],k=d[a+1],B=d[a+2],z=d[l],V=d[l+1],G=d[l+2],W=Math.round(S),oe=Math.round(C);let ae,pe,F,j,re,ue,Pe,L;for(let X=W;X<=oe;X++){if(X<x){const ge=X<S?0:(S-X)/(S-x);ae=y-(y-w)*ge,pe=T-(T-I)*ge,F=N-(N-k)*ge,j=R-(R-B)*ge}else{let ge;X>C?ge=1:x===C?ge=0:ge=(x-X)/(x-C),ae=w-(w-E)*ge,pe=I-(I-z)*ge,F=k-(k-V)*ge,j=B-(B-G)*ge}let se;X<S?se=0:X>C?se=1:se=(S-X)/(S-C),re=y-(y-E)*se,ue=T-(T-z)*se,Pe=N-(N-V)*se,L=R-(R-G)*se;const ce=Math.round(Math.min(ae,re)),Se=Math.round(Math.max(ae,re));let Te=p*X+ce*4;for(let ge=ce;ge<=Se;ge++)se=(ae-ge)/(ae-re),se<0?se=0:se>1&&(se=1),f[Te++]=pe-(pe-ue)*se|0,f[Te++]=F-(F-Pe)*se|0,f[Te++]=j-(j-L)*se|0,f[Te++]=255}}function e$(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case tb.LATTICE:const l=e.verticesPerRow,c=Math.floor(i.length/l)-1,d=l-1;for(s=0;s<c;s++){let f=s*l;for(let p=0;p<d;p++,f++)ey(t,n,i[f],i[f+1],i[f+l],r[f],r[f+1],r[f+l]),ey(t,n,i[f+l+1],i[f+1],i[f+l],r[f+l+1],r[f+1],r[f+l])}break;case tb.TRIANGLES:for(s=0,a=i.length;s<a;s+=3)ey(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class t$ extends DA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,f=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=d/p,S=f/g,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/y,scaleY:1/S},x=p+4,E=g+4,C=i.getCanvas("mesh",x,E),T=C.context,N=T.createImageData(p,g);if(n){const I=N.data;for(let k=0,B=I.length;k<B;k+=4)I[k]=n[0],I[k+1]=n[1],I[k+2]=n[2],I[k+3]=255}for(const I of this._figures)e$(N,I,w);return T.putImageData(N,2,2),{canvas:C.canvas,offsetX:l-2*y,offsetY:c-2*S,scaleX:y,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(e,n,i,r){ub(e,this._bbox);const s=new Float32Array(2);if(r===Cn.SHADING)me.singularValueDecompose2dScale(Nt(e),s);else if(this.matrix){me.singularValueDecompose2dScale(this.matrix,s);const[l,c]=s;me.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=l,s[1]*=c}else me.singularValueDecompose2dScale(n.baseTransform,s);const a=this._createMeshCanvas(s,r===Cn.SHADING?null:this._background,n.cachedCanvases);return r!==Cn.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class n$ extends DA{getPattern(){return"hotpink"}}function i$(t){switch(t[0]){case"RadialAxial":return new Zj(t);case"Mesh":return new t$(t);case"Dummy":return new n$}throw new Error(`Unknown IR type: ${t[0]}`)}const w1={COLORED:1,UNCOLORED:2};class OA{static MAX_PATTERN_SIZE=3e3;constructor(e,n,i,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e,n){const{bbox:i,operatorList:r,paintType:s,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Pp("TilingType: "+a);const p=i[0],g=i[1],y=i[2],S=i[3],w=y-p,x=S-g,E=new Float32Array(2);me.singularValueDecompose2dScale(this.matrix,E);const[C,T]=E;me.singularValueDecompose2dScale(this.baseTransform,E);const N=C*E[0],R=T*E[1];let I=w,k=x,B=!1,z=!1;const V=Math.ceil(d*N),G=Math.ceil(f*R),W=Math.ceil(w*N),oe=Math.ceil(x*R);V>=W?I=d:B=!0,G>=oe?k=f:z=!0;const ae=this.getSizeAndScale(I,this.ctx.canvas.width,N),pe=this.getSizeAndScale(k,this.ctx.canvas.height,R),F=e.cachedCanvases.getCanvas("pattern",ae.size,pe.size),j=F.context,re=c.createCanvasGraphics(j,n);if(re.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(re,s,l),j.translate(-ae.scale*p,-pe.scale*g),re.transform(0,ae.scale,0,0,pe.scale,0,0),j.save(),re.dependencyTracker?.save(),this.clipBbox(re,p,g,y,S),re.baseTransform=Nt(re.ctx),re.executeOperatorList(r),re.endDrawing(),re.dependencyTracker?.restore(),j.restore(),B||z){const ue=F.canvas;B&&(I=d),z&&(k=f);const Pe=this.getSizeAndScale(I,this.ctx.canvas.width,N),L=this.getSizeAndScale(k,this.ctx.canvas.height,R),X=Pe.size,se=L.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",X,se),Se=ce.context,Te=B?Math.floor(w/d):0,ge=z?Math.floor(x/f):0;for(let lt=0;lt<=Te;lt++)for(let Z=0;Z<=ge;Z++)Se.drawImage(ue,X*lt,se*Z,X,se,0,0,X,se);return{canvas:ce.canvas,scaleX:Pe.scale,scaleY:L.scale,offsetX:p,offsetY:g}}return{canvas:F.canvas,scaleX:ae.scale,scaleY:pe.scale,offsetX:p,offsetY:g}}getSizeAndScale(e,n,i){const r=Math.max(OA.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,n,i,r,s){const a=r-n,l=s-i;e.ctx.rect(n,i,a,l),me.axialAlignedBoundingBox([n,i,r,s],Nt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,i){const r=e.ctx,s=e.current;switch(n){case w1.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=l;break;case w1.UNCOLORED:r.fillStyle=r.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new mj(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,i,r,s){let a=i;r!==Cn.SHADING&&(a=me.transform(a,n.baseTransform),this.matrix&&(a=me.transform(a,this.matrix)));const l=this.createPatternCanvas(n,s);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function r$({src:t,srcPos:e=0,dest:n,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=rn.isLittleEndian?4278190080:255,[c,d]=a?[s,l]:[l,s],f=i>>3,p=i&7,g=t.length;n=new Uint32Array(n.buffer);let y=0;for(let S=0;S<r;S++){for(const x=e+f;e<x;e++){const E=e<g?t[e]:255;n[y++]=E&128?d:c,n[y++]=E&64?d:c,n[y++]=E&32?d:c,n[y++]=E&16?d:c,n[y++]=E&8?d:c,n[y++]=E&4?d:c,n[y++]=E&2?d:c,n[y++]=E&1?d:c}if(p===0)continue;const w=e<g?t[e++]:255;for(let x=0;x<p;x++)n[y++]=w&1<<7-x?d:c}return{srcPos:e,destPos:y}}const _1=16,x1=100,s$=15,E1=10,ai=16,ty=new DOMMatrix,Ai=new Float32Array(2),yl=new Float32Array([1/0,1/0,-1/0,-1/0]);function a$(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},t.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},t.transform=function(n,i,r,s,a,l){e.transform(n,i,r,s,a,l),this.__originalTransform(n,i,r,s,a,l)},t.setTransform=function(n,i,r,s,a,l){e.setTransform(n,i,r,s,a,l),this.__originalSetTransform(n,i,r,s,a,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,i){e.moveTo(n,i),this.__originalMoveTo(n,i)},t.lineTo=function(n,i){e.lineTo(n,i),this.__originalLineTo(n,i)},t.bezierCurveTo=function(n,i,r,s,a,l){e.bezierCurveTo(n,i,r,s,a,l),this.__originalBezierCurveTo(n,i,r,s,a,l)},t.rect=function(n,i,r,s){e.rect(n,i,r,s),this.__originalRect(n,i,r,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class o${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,n,i)):(r=this.canvasFactory.create(n,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function Ff(t,e,n,i,r,s,a,l,c,d){const[f,p,g,y,S,w]=Nt(t);if(p===0&&g===0){const C=a*f+S,T=Math.round(C),N=l*y+w,R=Math.round(N),I=(a+c)*f+S,k=Math.abs(Math.round(I)-T)||1,B=(l+d)*y+w,z=Math.abs(Math.round(B)-R)||1;return t.setTransform(Math.sign(f),0,0,Math.sign(y),T,R),t.drawImage(e,n,i,r,s,0,0,k,z),t.setTransform(f,p,g,y,S,w),[k,z]}if(f===0&&y===0){const C=l*g+S,T=Math.round(C),N=a*p+w,R=Math.round(N),I=(l+d)*g+S,k=Math.abs(Math.round(I)-T)||1,B=(a+c)*p+w,z=Math.abs(Math.round(B)-R)||1;return t.setTransform(0,Math.sign(p),Math.sign(g),0,T,R),t.drawImage(e,n,i,r,s,0,0,z,k),t.setTransform(f,p,g,y,S,w),[z,k]}t.drawImage(e,n,i,r,s,a,l,c,d);const x=Math.hypot(f,p),E=Math.hypot(g,y);return[x*c,E*d]}class T1{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=eb;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=tn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,n,i){i?.(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=yl.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Cn.FILL,n=null){const i=this.minMax.slice();if(e===Cn.STROKE){n||mt("Stroke bounding box must include transform."),me.singularValueDecompose2dScale(n,Ai);const r=Ai[0]*this.lineWidth/2,s=Ai[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const e=me.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(yl,0)}getClippedPathBoundingBox(e=Cn.FILL,n=null){return me.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function C1(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,i=e.width,r=n%ai,s=(n-r)/ai,a=r===0?s:s+1,l=t.createImageData(i,ai);let c=0,d;const f=e.data,p=l.data;let g,y,S,w;if(e.kind===lh.GRAYSCALE_1BPP){const x=f.byteLength,E=new Uint32Array(p.buffer,0,p.byteLength>>2),C=E.length,T=i+7>>3,N=4294967295,R=rn.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(S=g<s?ai:r,d=0,y=0;y<S;y++){const I=x-c;let k=0;const B=I>T?i:I*8-7,z=B&-8;let V=0,G=0;for(;k<z;k+=8)G=f[c++],E[d++]=G&128?N:R,E[d++]=G&64?N:R,E[d++]=G&32?N:R,E[d++]=G&16?N:R,E[d++]=G&8?N:R,E[d++]=G&4?N:R,E[d++]=G&2?N:R,E[d++]=G&1?N:R;for(;k<B;k++)V===0&&(G=f[c++],V=128),E[d++]=G&V?N:R,V>>=1}for(;d<C;)E[d++]=0;t.putImageData(l,0,g*ai)}}else if(e.kind===lh.RGBA_32BPP){for(y=0,w=i*ai*4,g=0;g<s;g++)p.set(f.subarray(c,c+w)),c+=w,t.putImageData(l,0,y),y+=ai;g<a&&(w=i*r*4,p.set(f.subarray(c,c+w)),t.putImageData(l,0,y))}else if(e.kind===lh.RGB_24BPP)for(S=ai,w=i*S,g=0;g<a;g++){for(g>=s&&(S=r,w=i*S),d=0,y=w;y--;)p[d++]=f[c++],p[d++]=f[c++],p[d++]=f[c++],p[d++]=255;t.putImageData(l,0,g*ai)}else throw new Error(`bad image kind: ${e.kind}`)}function M1(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,i=e.width,r=n%ai,s=(n-r)/ai,a=r===0?s:s+1,l=t.createImageData(i,ai);let c=0;const d=e.data,f=l.data;for(let p=0;p<a;p++){const g=p<s?ai:r;({srcPos:c}=r$({src:d,srcPos:c,dest:f,width:i,height:g,nonBlackColor:0})),t.putImageData(l,0,p*ai)}}function Xu(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)t[i]!==void 0&&(e[i]=t[i]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function zf(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function P1(t,e){if(e)return!0;me.singularValueDecompose2dScale(t,Ai);const n=Math.fround(Or.pixelRatio*Nl.PDF_TO_CSS_UNITS);return Ai[0]<=n&&Ai[1]<=n}const l$=["butt","round","square"],u$=["miter","round","bevel"],c$={},R1={};class Tl{constructor(e,n,i,r,s,{optionalContentConfig:a,markedContentStack:l=null},c,d,f){this.ctx=e,this.current=new T1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new o$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,n,i=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):i}beginDrawing({transform:e,viewport:n,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Nt(this.compositeCtx))}this.ctx.save(),zf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Nt(this.ctx)}executeOperatorList(e,n,i,r,s){const a=e.argsArray,l=e.fnArray;let c=n||0;const d=a.length;if(d===c)return c;const f=d-c>E1&&typeof i=="function",p=f?Date.now()+s$:0;let g=0;const y=this.commonObjs,S=this.objs;let w,x;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(!s||s(c))if(w=l[c],x=a[c]??null,w!==gc.dependency)x===null?this[w](c):this[w](c,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,c);const C=E.startsWith("g_")?y:S;if(!C.has(E))return C.get(E,i),c}if(c++,c===d)return c;if(f&&++g>E1){if(Date.now()>p)return i(),c;g=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),l=i,c=r,d="prescale1",f,p;for(;s>2&&l>1||a>2&&c>1;){let g=l,y=c;s>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/g),a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/y),f=this.cachedCanvases.getCanvas(d,g,y),p=f.context,p.clearRect(0,0,g,y),p.drawImage(e,0,0,l,c,0,0,g,y),e=f.canvas,l=g,c=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,n){const i=this.ctx,{width:r,height:s}=n,a=this.current.fillColor,l=this.current.patternFill,c=Nt(i);let d,f,p,g;if((n.bitmap||n.data)&&n.count>1){const V=n.bitmap||n.data.buffer;f=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(V),d||(d=new Map,this._cachedBitmapsMap.set(V,d));const G=d.get(f);if(G&&!l){const W=Math.round(Math.min(c[0],c[2])+c[4]),oe=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,Bi.transformAndFill),{canvas:G,offsetX:W,offsetY:oe}}p=G}p||(g=this.cachedCanvases.getCanvas("maskCanvas",r,s),M1(g.context,n));let y=me.transform(c,[1/r,0,0,-1/s,0,0]);y=me.transform(y,[1,0,0,1,0,-s]);const S=yl.slice();me.axialAlignedBoundingBox([0,0,r,s],y,S);const[w,x,E,C]=S,T=Math.round(E-w)||1,N=Math.round(C-x)||1,R=this.cachedCanvases.getCanvas("fillCanvas",T,N),I=R.context,k=w,B=x;I.translate(-k,-B),I.transform(...y),p||(p=this._scaleImage(g.canvas,Er(I)),p=p.img,d&&l&&d.set(f,p)),I.imageSmoothingEnabled=P1(Nt(I),n.interpolate),Ff(I,p,0,0,p.width,p.height,0,0,r,s),I.globalCompositeOperation="source-in";const z=me.transform(Er(I),[1,0,0,1,-k,-B]);return I.fillStyle=l?a.getPattern(i,this,z,Cn.FILL,e):a,I.fillRect(0,0,r,s),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,R.canvas)),this.dependencyTracker?.recordDependencies(e,Bi.transformAndFill),{canvas:R.canvas,offsetX:Math.round(k),offsetY:Math.round(B)}}setLineWidth(e,n){this.dependencyTracker?.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=l$[n]}setLineJoin(e,n){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=u$[n]}setMiterLimit(e,n){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,i){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(n),r.lineDashOffset=i)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){for(const[i,r]of n)switch(i){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,n,i);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Xu(this.suspendedCtx,a),a$(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,i,r){const s=r[0],a=r[1],l=r[2]-s,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(n.context,i,l,c,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,n,i,r,s,a,l,c,d,f,p){let g=e.canvas,y=c-f,S=d-p;if(a)if(y<0||S<0||y+i>g.width||S+r>g.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,r),E=x.context;E.drawImage(g,-y,-S),E.globalCompositeOperation="destination-atop",E.fillStyle=a,E.fillRect(0,0,i,r),E.globalCompositeOperation="source-over",g=x.canvas,y=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(y,S,i,r),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(y,S,i,r),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?n.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,d,i,r),n.clip(w),n.globalCompositeOperation="destination-in",n.drawImage(g,y,S,i,r,c,d,i,r),n.restore()}save(e){this.inSMaskMode&&Xu(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Xu(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,i,r,s,a,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(n,i,r,s,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,i,r){let[s]=i;if(!r){s||=i[0]=new Path2D,this[n](e,s);return}if(this.dependencyTracker!==null){const a=n===gc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=i[0]=MD(s)),me.axialAlignedBoundingBox(r,Nt(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,i=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Er(r),Cn.STROKE,e),a){const l=new Path2D;l.addPath(n,r.getTransform().invertSelf().multiplySelf(a)),n=l}this.rescaleAndStroke(n,!1),r.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(e,Bi.stroke),i&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(Cn.STROKE,Nt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,i=!0){const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const d=s.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=s.getPattern(r,this,Er(r),Cn.FILL,e),d){const f=new Path2D;f.addPath(n,r.getTransform().invertSelf().multiplySelf(d)),n=f}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(n,"evenodd"),this.pendingEOFill=!1):r.fill(n)),this.dependencyTracker?.recordDependencies(e,Bi.fill),l&&(r.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,n,c)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(e,Bi.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=c$}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=R1}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;n!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(n!==void 0){const r=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:d,path:f}of n)f&&r.addPath(f,new DOMMatrix(a).preMultiplySelf(s).translate(l,c).scale(d,-d));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,n){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const r=this.commonObjs.get(n),s=this.current;if(!r)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=r.fontMatrix||eb,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ke("Invalid font matrix for font "+n),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const a=r.loadedName||"sans-serif",l=r.systemFontInfo?.css||`"${a}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const d=r.italic?"italic":"normal";let f=i;i<_1?f=_1:i>x1&&(f=x1),this.current.fontSizeScale=i/f,this.ctx.font=`${d} ${c} ${f}px ${l}`}setTextRenderingMode(e,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,n,i){this.setLeading(e,-i),this.moveText(e,n,i)}setTextMatrix(e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=n,i.textMatrixScale=Math.hypot(n[0],n[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,n,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(n)),r}paintChar(e,n,i,r,s,a){const l=this.ctx,c=this.current,d=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&tn.FILL_STROKE_MASK,y=!!(f&tn.ADD_TO_PATH_FLAG),S=c.patternFill&&!d.missingFile,w=c.patternStroke&&!d.missingFile;let x;if((d.disableFontFace||y||S||w)&&!d.missingFile&&(x=d.getPathGenerator(this.commonObjs,n)),x&&(d.disableFontFace||S||w)){l.save(),l.translate(i,r),l.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,l,d);let E;if(g===tn.FILL||g===tn.FILL_STROKE)if(s){E=l.getTransform(),l.setTransform(...s);const C=this.#i(x,E,s);l.fill(C)}else l.fill(x);if(g===tn.STROKE||g===tn.FILL_STROKE)if(a){E||=l.getTransform(),l.setTransform(...a);const{a:C,b:T,c:N,d:R}=E,I=me.inverseTransform(a),k=me.transform([C,T,N,R,0,0],I);me.singularValueDecompose2dScale(k,Ai),l.lineWidth*=Math.max(Ai[0],Ai[1])/p,l.stroke(this.#i(x,E,a))}else l.lineWidth/=p,l.stroke(x);l.restore()}else(g===tn.FILL||g===tn.FILL_STROKE)&&(l.fillText(n,i,r),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r,()=>l.measureText(n))),(g===tn.STROKE||g===tn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r,()=>l.measureText(n)).recordDependencies(e,Bi.stroke),l.strokeText(n,i,r));y&&((this.pendingTextPaths||=[]).push({transform:Nt(l),x:i,y:r,fontSize:p,path:x}),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,i,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){i=!0;break}return Le(this,"isFontSubpixelAAEnabled",i)}showText(e,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Bi.showText).resetBBox(e),this.current.textRenderingMode&tn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(e,n),this.dependencyTracker?.recordShowTextOperation(e);return}const s=i.fontSize;if(s===0){this.dependencyTracker?.recordOperation(e);return}const a=this.ctx,l=i.fontSizeScale,c=i.charSpacing,d=i.wordSpacing,f=i.fontDirection,p=i.textHScale*f,g=n.length,y=r.vertical,S=y?1:-1,w=r.defaultVMetrics,x=s*i.fontMatrix[0],E=i.textRenderingMode===tn.FILL&&!r.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),f>0?a.scale(p,-1):a.scale(p,1);let C,T;const N=i.textRenderingMode&tn.FILL_STROKE_MASK,R=N===tn.FILL||N===tn.FILL_STROKE,I=N===tn.STROKE||N===tn.FILL_STROKE;if(R&&i.patternFill){a.save();const G=i.fillColor.getPattern(a,this,Er(a),Cn.FILL,e);C=Nt(a),a.restore(),a.fillStyle=G}if(I&&i.patternStroke){a.save();const G=i.strokeColor.getPattern(a,this,Er(a),Cn.STROKE,e);T=Nt(a),a.restore(),a.strokeStyle=G}let k=i.lineWidth;const B=i.textMatrixScale;if(B===0||k===0?I&&(k=this.getSinglePixelWidth()):k/=B,l!==1&&(a.scale(l,l),k/=l),a.lineWidth=k,r.isInvalidPDFjsFont){const G=[];let W=0;for(const ae of n)G.push(ae.unicode),W+=ae.width;const oe=G.join("");if(a.fillText(oe,0,0),this.dependencyTracker!==null){const ae=a.measureText(oe);this.dependencyTracker.recordBBox(e,this.ctx,-ae.actualBoundingBoxLeft,ae.actualBoundingBoxRight,-ae.actualBoundingBoxAscent,ae.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=W*x*p,a.restore(),this.compose();return}let z=0,V;for(V=0;V<g;++V){const G=n[V];if(typeof G=="number"){z+=S*G*s/1e3;continue}let W=!1;const oe=(G.isSpace?d:0)+c,ae=G.fontChar,pe=G.accent;let F,j,re=G.width;if(y){const L=G.vmetric||w,X=-(G.vmetric?L[1]:re*.5)*x,se=L[2]*x;re=L?-L[0]:re,F=X/l,j=(z+se)/l}else F=z/l,j=0;let ue;if(r.remeasure&&re>0){ue=a.measureText(ae);const L=ue.width*1e3/s*l;if(re<L&&this.isFontSubpixelAAEnabled){const X=re/L;W=!0,a.save(),a.scale(X,1),F/=X}else re!==L&&(F+=(re-L)/2e3*s/l)}if(this.contentVisible&&(G.isInFont||r.missingFile)){if(E&&!pe)a.fillText(ae,F,j),this.dependencyTracker?.recordCharacterBBox(e,a,ue?{bbox:null}:r,s/l,F,j,()=>ue??a.measureText(ae));else if(this.paintChar(e,ae,F,j,C,T),pe){const L=F+s*pe.offset.x/l,X=j-s*pe.offset.y/l;this.paintChar(e,pe.fontChar,L,X,C,T)}}const Pe=y?re*x-oe*f:re*x+oe*f;z+=Pe,W&&a.restore()}y?i.y-=z:i.x+=z*p,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,n){const i=this.ctx,r=this.current,s=r.font,a=r.fontSize,l=r.fontDirection,c=s.vertical?1:-1,d=r.charSpacing,f=r.wordSpacing,p=r.textHScale*l,g=r.fontMatrix||eb,y=n.length,S=r.textRenderingMode===tn.INVISIBLE;let w,x,E,C;if(S||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(p,l);const T=this.dependencyTracker;for(this.dependencyTracker=T?new xh(T,e):null,w=0;w<y;++w){if(x=n[w],typeof x=="number"){C=c*x*a/1e3,this.ctx.translate(C,0),r.x+=C*p;continue}const N=(x.isSpace?f:0)+d,R=s.charProcOperatorList[x.operatorListId];R?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...g),this.executeOperatorList(R),this.restore()):ke(`Type3 character "${x.operatorListId}" is not available.`);const I=[x.width,0];me.applyTransform(I,g),E=I[0]*a+N,i.translate(E,0),r.x+=E*p}i.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,n,i){}setCharWidthAndBounds(e,n,i,r,s,a,l){const c=new Path2D;c.rect(r,s,a-r,l-s),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,r,a,s,l).recordClipBox(e,this.ctx,r,a,s,l),this.endPath(e)}getColorN_Pattern(e,n){let i;if(n[0]==="TilingPattern"){const r=this.baseTransform||Nt(this.ctx),s={createCanvasGraphics:(a,l)=>new Tl(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new xh(this.dependencyTracker,l,!0):null)};i=new OA(n,this.ctx,s,r)}else i=this._getPattern(e,n[1],n[2]);return i}setStrokeColorN(e,...n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,i=null){let r;return this.cachedPatterns.has(n)?r=this.cachedPatterns.get(n):(r=i$(this.getObject(e,n)),this.cachedPatterns.set(n,r)),i&&(r.matrix=i),r}shadingFill(e,n){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,n);i.fillStyle=r.getPattern(i,this,Er(i),Cn.SHADING,e);const s=Er(i);if(s){const{width:a,height:l}=i.canvas,c=yl.slice();me.axialAlignedBoundingBox([0,0,a,l],s,c);const[d,f,p,g]=c;this.ctx.fillRect(d,f,p-d,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Bi.transform).recordDependencies(e,Bi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(e,n,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=Nt(this.ctx),i)){me.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,s,a,l]=i,c=new Path2D;c.rect(r,s,a-r,l-s),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,r,a,s,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;n.isolated||Pp("TODO: Support non-isolated groups."),n.knockout&&ke("Knockout groups not supported.");const r=Nt(i);if(n.matrix&&i.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=yl.slice();me.axialAlignedBoundingBox(n.bbox,Nt(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=me.intersect(s,a)||[0,0,0,0];const l=Math.floor(s[0]),c=Math.floor(s[1]),d=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;n.smask&&(p+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(p,d,f),y=g.context;y.translate(-l,-c),y.transform(...r);let S=new Path2D;const[w,x,E,C]=n.bbox;if(S.rect(w,x,E-w,C-x),n.matrix){const T=new Path2D;T.addPath(S,new DOMMatrix(n.matrix)),S=T}y.clip(S),n.smask&&this.smaskStack.push({canvas:g.canvas,context:y,offsetX:l,offsetY:c,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),Xu(i,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,n){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=Nt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const a=yl.slice();me.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,n,i,r,s,a){if(this.#e(),zf(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,me.singularValueDecompose2dScale(Nt(this.ctx),Ai);const{viewportScale:d}=this,f=Math.ceil(l*this.outputScaleX*d),p=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(n,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ai[0],0,0,-Ai[1],0,c*Ai[1]),zf(this.ctx)}else{zf(this.ctx),this.endPath(e);const d=new Path2D;d.rect(i[0],i[1],l,c),this.ctx.clip(d)}}this.current=new T1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){if(!this.contentVisible)return;const i=n.count;n=this.getObject(e,n.data,n),n.count=i;const r=this.ctx,s=this._createMaskCanvas(e,n),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,i,r=0,s=0,a,l){if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const c=this.ctx;c.save();const d=Nt(c);c.transform(i,r,s,a,0,0);const f=this._createMaskCanvas(e,n);c.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,g=l.length;p<g;p+=2){const y=me.transform(d,[i,r,s,a,l[p],l[p+1]]);c.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,n){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Bi.transformAndFill);for(const a of n){const{data:l,width:c,height:d,transform:f}=a,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),g=p.context;g.save();const y=this.getObject(e,l,a);M1(g,y),g.globalCompositeOperation="source-in",g.fillStyle=s?r.getPattern(g,this,Er(i),Cn.FILL,e):r,g.fillRect(0,0,c,d),g.restore(),i.save(),i.transform(...f),i.scale(1,-1),Ff(i,p.canvas,0,0,c,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,c,0,d),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const i=this.getObject(e,n);if(!i){ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,n,i,r,s){if(!this.contentVisible)return;const a=this.getObject(e,n);if(!a){ke("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let f=0,p=s.length;f<p;f+=2)d.push({transform:[i,0,0,r,s[f],s[f+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,n){if(!this.contentVisible)return;const i=n.width,r=n.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/i,-1/r);let l;if(n.bitmap)l=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)l=n;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,r).context;C1(f,n),l=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(l,Er(s));s.imageSmoothingEnabled=P1(Nt(s),n.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,Bi.imageXObject).recordOperation(e),Ff(s,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,i){if(!this.contentVisible)return;const r=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const a=n.width,l=n.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;C1(d,n),s=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const a of i)r.save(),r.transform(...a.transform),r.scale(1,-1),Ff(r,s,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Bi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,i){}beginMarkedContent(e,n){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,i){this.dependencyTracker?.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===R1?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Nt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:i,c:r,d:s}=this.ctx.getTransform();let a,l;if(i===0&&r===0){const c=Math.abs(n),d=Math.abs(s);if(c===d)if(e===0)a=l=1/c;else{const f=c*e;a=l=f<1?1/f:1}else if(e===0)a=1/c,l=1/d;else{const f=c*e,p=d*e;a=f<1?1/f:1,l=p<1?1/p:1}}else{const c=Math.abs(n*s-i*r),d=Math.hypot(n,i),f=Math.hypot(r,s);if(e===0)a=f/c,l=d/c;else{const p=e*c;a=f>p?f/p:1,l=d>p?d/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:i,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(r||1)*s,i.stroke(e);return}const l=i.getLineDash();n&&i.save(),i.scale(s,a),ty.a=1/s,ty.d=1/a;const c=new Path2D;if(c.addPath(e,ty),l.length>0){const d=Math.max(s,a);i.setLineDash(l.map(f=>f/d)),i.lineDashOffset/=d}i.lineWidth=r||1,i.stroke(c),n&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in gc)Tl.prototype[t]!==void 0&&(Tl.prototype[gc[t]]=Tl.prototype[t]);class Cl{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class d${#e;#t;constructor({parsedData:e,rawData:n}){this.#e=e,this.#t=n}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const fl=Symbol("INTERNAL");class f${#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:n,intent:i,usage:r,rbGroups:s}){this.#e=!!(e&yi.DISPLAY),this.#t=!!(e&yi.PRINT),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:n}=this.usage;return this.#e?n?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,n,i=!1){e!==fl&&mt("Internal method `_setVisible` called."),this.#i=i,this.#n=n}}class h${#e=null;#t=new Map;#i=null;#n=null;constructor(e,n=yi.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new f$(n,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(fl,!1);for(const i of e.on)this.#t.get(i)._setVisible(fl,!0);for(const i of e.off)this.#t.get(i)._setVisible(fl,!1);this.#i=this.getHash()}}#a(e){const n=e.length;if(n<2)return!0;const i=e[0];for(let r=1;r<n;r++){const s=e[r];let a;if(Array.isArray(s))a=this.#a(s);else if(this.#t.has(s))a=this.#t.get(s).visible;else return ke(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Pp("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!this.#t.has(n))return ke(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return ke(`Unknown optional content policy ${e.policy}.`),!0}return ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,i=!0){const r=this.#t.get(e);if(!r){ke(`Optional content group not found: ${e}`);return}if(i&&n&&r.rbGroups.length)for(const s of r.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(fl,!1,!0);r._setVisible(fl,!!n,!0),this.#e=null}setOCGState({state:e,preserveRB:n}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!s.visible,n);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new RD;for(const[n,i]of this.#t)e.update(`${n}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class p${constructor(e,{disableRange:n=!1,disableStream:i=!1}){Ke(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,s?.length>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});Ke(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new m$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new g$(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class m${constructor(e,n,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=MA(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g${constructor(e,n,i){this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function v$(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let f=l(n);return f=unescape(f),f=c(f),f=d(f),s(f)}if(n=a(t),n){const f=d(n);return s(f)}if(n=i("filename","i").exec(t),n){n=n[1];let f=l(n);return f=d(f),s(f)}function i(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const g=new TextDecoder(f,{fatal:!0}),y=Fc(p);p=g.decode(y),e=!1}catch{}}return p}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function a(f){const p=[];let g;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(f))!==null;){let[,w,x,E]=g;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[x,E]}const S=[];for(let w=0;w<p.length&&w in p;++w){let[x,E]=p[w];E=l(E),x&&(E=unescape(E),w===0&&(E=c(E))),S.push(E)}return S.join("")}function l(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let g=0;g<p.length;++g){const y=p[g].indexOf('"');y!==-1&&(p[g]=p[g].slice(0,y),p.length=g+1),p[g]=p[g].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function c(f){const p=f.indexOf("'");if(p===-1)return f;const g=f.slice(0,p),S=f.slice(p+1).replace(/^[^']*'/,"");return r(g,S)}function d(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,g,y,S){if(y==="q"||y==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),r(g,S);try{S=atob(S)}catch{}return r(g,S)})}return""}function UD(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const i in e){const r=e[i];r!==void 0&&n.append(i,r)}return n}function Ip(t){return URL.parse(t)?.origin??null}function BD({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*n)||i||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function FD(t){const e=t.get("Content-Disposition");if(e){let n=v$(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(MA(n))return n}return null}function Vc(t,e){return new _h(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function zD(t){return t===200||t===206}function HD(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function GD(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ke(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class y${_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=UD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b$(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new A$(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class b${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const i=new Headers(e.headers),r=n.url;fetch(r,HD(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=Ip(s.url),!zD(s.status))throw Vc(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:l,suggestedLength:c}=BD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=FD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ua("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:GD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class A${constructor(e,n,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${i-1}`);const a=r.url;fetch(a,HD(s,this._withCredentials,this._abortController)).then(l=>{const c=Ip(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!zD(l.status))throw Vc(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:GD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const ny=200,iy=206;function S$(t){const e=t.response;return typeof e!="string"?e:Fc(e).buffer}class w${_responseOrigin=null;constructor({url:e,httpHeaders:n,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=UD(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,a]of this.headers)n.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=iy):r.expectedStatus=ny,n.responseType="arraybuffer",Ke(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,i),n.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,n.send(null),i}onProgress(e,n){const i=this.pendingRequests[e];i&&i.onProgress?.(n)}onStateChange(e,n){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||ny;if(!(s===ny&&i.expectedStatus===iy)&&s!==i.expectedStatus){i.onError(r.status);return}const l=S$(r);if(s===iy){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?i.onDone({begin:parseInt(d[1],10),chunk:l}):(ke('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class _${constructor(e){this._source=e,this._manager=new w$(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new x$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const i=new E$(this._manager,e,n);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class x${constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=Ip(n.responseURL);const i=n.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=BD({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=FD(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Vc(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E${constructor(e,n,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Ip(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Vc(e,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const T$=/^[a-z][a-z0-9\-+.]+:/i;function C$(t){if(T$.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class M${constructor(e){this.source=e,this.url=C$(e.url),Ke(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new P$(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new R$(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class P${constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Vc(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ua("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class R${constructor(e,n,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ku=Symbol("INITIAL_DATA");class qD{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ku}}get(e,n=null){if(n){const r=this.#t(e);return r.promise.then(()=>n(r.data)),null}const i=this.#e[e];if(!i||i.data===Ku)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const n=this.#e[e];return!!n&&n.data!==Ku}delete(e){const n=this.#e[e];return!n||n.data===Ku?!1:(delete this.#e[e],!0)}resolve(e,n=null){const i=this.#t(e);i.data=n,i.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:n}=this.#e[e];n!==Ku&&(yield[e,n])}}}const N$=1e5,N1=30;class bi{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#r=0;#o=0;#u=null;#l=null;#f=0;#d=0;#h=Object.create(null);#g=[];#m=null;#c=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#_=null;static#S=new Set;constructor({textContentSource:e,container:n,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=n,this.#d=i.scale*Or.pixelRatio,this.#f=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:a,pageY:l}=i.rawDims;this.#v=[1,0,0,-1,-a,l+s],this.#o=r,this.#r=s,bi.#P(),n.style.setProperty("--min-font-size",bi.#_),no(n,i),this.#e.promise.finally(()=>{bi.#S.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=rn.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:n,done:i})=>{if(i){this.#e.resolve();return}this.#a??=n.lang,Object.assign(this.#h,n.styles),this.#C(n.items),e()},this.#e.reject)};return this.#u=this.#m.getReader(),bi.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:n=null}){const i=e.scale*Or.pixelRatio,r=e.rotation;if(r!==this.#f&&(n?.(),this.#f=r,no(this.#l,{rotation:r})),i!==this.#d){n?.(),this.#d=i;const s={div:null,properties:null,ctx:bi.#R(this.#a)};for(const a of this.#c)s.properties=this.#p.get(a),s.div=a,this.#x(s)}}cancel(){const e=new ua("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#C(e){if(this.#i)return;this.#s.ctx??=bi.#R(this.#a);const n=this.#c,i=this.#g;for(const r of e){if(n.length>N$){ke("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),s.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(r.str),this.#A(r)}}#A(e){const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(n);const r=me.transform(this.#v,e.transform);let s=Math.atan2(r[1],r[0]);const a=this.#h[e.fontName];a.vertical&&(s+=Math.PI/2);let l=this.#n&&a.fontSubstitution||a.fontFamily;l=bi.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*bi.#U(l,a,this.#a);let f,p;s===0?(f=r[4],p=r[5]-d):(f=r[4]+d*Math.sin(s),p=r[5]-d*Math.cos(s));const g=n.style;g.left=`${(100*f/this.#o).toFixed(2)}%`,g.top=`${(100*p/this.#r).toFixed(2)}%`,g.setProperty("--font-height",`${c.toFixed(2)}px`),g.fontFamily=l,i.fontSize=c,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#n&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);S!==w&&Math.max(S,w)/Math.min(S,w)>1.5&&(y=!0)}if(y&&(i.canvasWidth=a.vertical?e.height:e.width),this.#p.set(n,i),this.#s.div=n,this.#s.properties=i,this.#x(this.#s),i.hasText&&this.#t.append(n),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#x(e){const{div:n,properties:i,ctx:r}=e,{style:s}=n;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=i;bi.#M(r,c*this.#d,a);const{width:d}=r.measureText(n.textContent);d>0&&s.setProperty("--scale-x",l*this.#d/d)}i.angle!==0&&s.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#R(e=null){let n=this.#y.get(e||="");if(!n){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),n=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,n),this.#E.set(n,{size:0,family:""})}return n}static#M(e,n,i){const r=this.#E.get(e);n===r.size&&i===r.family||(e.font=`${n}px ${i}`,r.size=n,r.family=i)}static#P(){if(this.#_!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#_=e.getBoundingClientRect().height,e.remove()}static#U(e,n,i){const r=this.#b.get(e);if(r)return r;const s=this.#R(i);s.canvas.width=s.canvas.height=N1,this.#M(s,N1,e);const a=s.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let d=.8;return l?d=l/(l+c):(rn.platform.isFirefox&&ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),this.#b.set(e,d),d}}const I$=100;function VD(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new kA,{docId:n}=e,i=t.url?Fj(t.url):null,r=t.data?zj(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,l=t.password??null,c=t.range instanceof jD?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let f=t.worker instanceof yc?t.worker:null;const p=t.verbosity,g=typeof t.docBaseUrl=="string"&&!Rp(t.docBaseUrl)?t.docBaseUrl:null,y=kf(t.cMapUrl),S=t.cMapPacked!==!1,w=t.CMapReaderFactory||(qn?Xj:v1),x=kf(t.iccUrl),E=kf(t.standardFontDataUrl),C=t.StandardFontDataFactory||(qn?Kj:y1),T=kf(t.wasmUrl),N=t.WasmFactory||(qn?Wj:b1),R=t.stopAtErrors!==!0,I=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,k=t.isEvalSupported!==!1,B=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!qn,z=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!qn&&(rn.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,G=typeof t.disableFontFace=="boolean"?t.disableFontFace:qn,W=t.fontExtraProperties===!0,oe=t.enableXfa===!0,ae=t.ownerDocument||globalThis.document,pe=t.disableRange===!0,F=t.disableStream===!0,j=t.disableAutoFetch===!0,re=t.pdfBug===!0,ue=t.CanvasFactory||(qn?Yj:Vj),Pe=t.FilterFactory||(qn?$j:jj),L=t.enableHWA===!0,X=t.useWasm!==!1,se=c?c.length:t.length??NaN,ce=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!qn&&!G,Se=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(w===v1&&C===y1&&N===b1&&y&&E&&T&&lc(y,document.baseURI)&&lc(E,document.baseURI)&&lc(T,document.baseURI)),Te=null;fj(p);const ge={canvasFactory:new ue({ownerDocument:ae,enableHWA:L}),filterFactory:new Pe({docId:n,ownerDocument:ae}),cMapReaderFactory:Se?null:new w({baseUrl:y,isCompressed:S}),standardFontDataFactory:Se?null:new C({baseUrl:E}),wasmFactory:Se?null:new N({baseUrl:T})};f||(f=yc.create({verbosity:p,port:Cl.workerPort}),e._worker=f);const lt={docId:n,apiVersion:"5.4.530",data:r,password:l,disableAutoFetch:j,rangeChunkSize:d,length:se,docBaseUrl:g,enableXfa:oe,evaluatorOptions:{maxImageSize:I,disableFontFace:G,ignoreErrors:R,isEvalSupported:k,isOffscreenCanvasSupported:B,isImageDecoderSupported:z,canvasMaxAreaInBytes:V,fontExtraProperties:W,useSystemFonts:ce,useWasm:X,useWorkerFetch:Se,cMapUrl:y,iccUrl:x,standardFontDataUrl:E,wasmUrl:T}},Z={ownerDocument:ae,pdfBug:re,styleElement:Te,loadingParams:{disableAutoFetch:j,enableXfa:oe}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ne=f.messageHandler.sendWithPromise("GetDocRequest",lt,r?[r.buffer]:null);let Ie;if(c)Ie=new p$(c,{disableRange:pe,disableStream:F});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const le=lc(i)?y$:qn?M$:_$;Ie=new le({url:i,length:se,httpHeaders:s,withCredentials:a,rangeChunkSize:d,disableRange:pe,disableStream:F})}return Ne.then(le=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const ut=new uc(n,le,f.port),ze=new k$(ut,e,Ie,Z,ge,L);e._transport=ze,ut.send("Ready",null)})}).catch(e._capability.reject),e}class kA{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${kA.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class jD{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,n,i=!1,r=null){this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,n){for(const i of this.#a)i(e,n)}onDataProgress(e,n){this.#e.promise.then(()=>{for(const i of this.#n)i(e,n)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const n of this.#i)n(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,n){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class D${constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class O${#e=!1;constructor(e,n,i,r=!1){this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=r?new c1:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new qD,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Hc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:n=e.canvas,viewport:i,intent:r="display",annotationMode:s=ra.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:g=!1,recordOperations:y=!1,operationsFilter:S=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(r,s,p,g),{renderingIntent:x,cacheKey:E}=w;this.#e=!1,c||=this._transport.getOptionalContentConfig(x);let C=this._intentStates.get(E);C||(C=Object.create(null),this._intentStates.set(E,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(x&yi.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(y||N),I=z=>{if(C.renderTasks.delete(k),R){const V=k.gfx?.dependencyTracker.take();V&&(k.stepper&&k.stepper.setOperatorBBoxes(V,k.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=V))}T&&(this.#e=!0),this.#t(),z?(k.capability.reject(z),this._abortOperatorList({intentState:C,reason:z instanceof Error?z:new Error(z)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new bl({callback:I,params:{canvas:n,canvasContext:e,dependencyTracker:R?new Qj(n,C.operatorList.length,N):null,viewport:i,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:S});(C.renderTasks||=new Set).add(k);const B=k.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([z,V])=>{if(this.destroyed){I();return}if(this._stats?.time("Rendering"),!(V.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:z,optionalContentConfig:V}),k.operatorListChanged()}).catch(I),B}getOperatorList({intent:e="display",annotationMode:n=ra.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,n,i,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>vc.textContent(i));const n=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:c,done:d}){if(d){i(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),s()},r)}const a=n.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const n=this.#t();return e&&n&&(this._stats&&=new c1),n}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let i=0,r=e.length;i<r;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),d=this._intentStates.get(n);d.streamReader=c;const f=()=>{c.read().then(({value:p,done:g})=>{if(g){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),f())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const g of d.renderTasks)g.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:n,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof CA){let r=I$;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},r);return}}if(e.streamReader.cancel(new ua(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var aa,ir,ds,Wa,bp,Ja,Qa,$n,uh,$D,YD,cc,Rl,ch;const Tt=class Tt{constructor({name:e=null,port:n=null,verbosity:i=hj()}={}){_r(this,$n);_r(this,aa,Promise.withResolvers());_r(this,ir,null);_r(this,ds,null);_r(this,Wa,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,n){if(Et(Tt,Qa).has(n))throw new Error("Cannot use more than one PDFWorker per port.");Et(Tt,Qa).set(n,this),xr(this,$n,$D).call(this,n)}else xr(this,$n,YD).call(this)}get promise(){return Et(this,aa).promise}get port(){return Et(this,ds)}get messageHandler(){return Et(this,ir)}destroy(){this.destroyed=!0,Et(this,Wa)?.terminate(),ri(this,Wa,null),Et(Tt,Qa).delete(Et(this,ds)),ri(this,ds,null),Et(this,ir)?.destroy(),ri(this,ir,null)}static create(e){const n=Et(this,Qa).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Tt(e)}static get workerSrc(){if(Cl.workerSrc)return Cl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>Et(this,Rl,ch)?Et(this,Rl,ch):(await import(this.workerSrc)).WorkerMessageHandler)())}};aa=new WeakMap,ir=new WeakMap,ds=new WeakMap,Wa=new WeakMap,bp=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,$n=new WeakSet,uh=function(){Et(this,aa).resolve(),Et(this,ir).send("configure",{verbosity:this.verbosity})},$D=function(e){ri(this,ds,e),ri(this,ir,new uc("main","worker",e)),Et(this,ir).on("ready",()=>{}),xr(this,$n,uh).call(this)},YD=function(){if(Et(Tt,Ja)||Et(Tt,Rl,ch)){xr(this,$n,cc).call(this);return}let{workerSrc:e}=Tt;try{Tt._isSameOrigin(window.location,e)||(e=Tt._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),i=new uc("main","worker",n),r=()=>{s.abort(),i.destroy(),n.terminate(),this.destroyed?Et(this,aa).reject(new Error("Worker was destroyed")):xr(this,$n,cc).call(this)},s=new AbortController;n.addEventListener("error",()=>{Et(this,Wa)||r()},{signal:s.signal}),i.on("test",l=>{if(s.abort(),this.destroyed||!l){r();return}ri(this,ir,i),ri(this,ds,n),ri(this,Wa,n),xr(this,$n,uh).call(this)}),i.on("ready",l=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{xr(this,$n,cc).call(this)}});const a=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};a();return}catch{Pp("The worker has been disabled.")}xr(this,$n,cc).call(this)},cc=function(){Et(Tt,Ja)||(ke("Setting up fake worker."),ri(Tt,Ja,!0)),Tt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Et(this,aa).reject(new Error("Worker was destroyed"));return}const n=new qj;ri(this,ds,n);const i=`fake${cT(Tt,bp)._++}`,r=new uc(i+"_worker",i,n);e.setup(r,n),ri(this,ir,new uc(i,i+"_worker",n)),xr(this,$n,uh).call(this)}).catch(e=>{Et(this,aa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Rl=new WeakSet,ch=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},_r(Tt,Rl),_r(Tt,bp,0),_r(Tt,Ja,!1),_r(Tt,Qa,new WeakMap),qn&&(ri(Tt,Ja,!0),Cl.workerSrc||="./pdf.worker.mjs"),Tt._isSameOrigin=(e,n)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const r=new URL(n,i);return i.origin===r.origin},Tt._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Tt.fromPort=e=>{if(Ej("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Tt.create(e)};let yc=Tt;class k${#e=new Map;#t=new Map;#i=new Map;#n=new Map;#a=null;constructor(e,n,i,r,s,a){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new qD,this.fontLoader=new Lj({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#s(e,n=null){const i=this.#e.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,r),r}get annotationStorage(){return Le(this,"annotationStorage",new NA)}getRenderingIntent(e,n=ra.ENABLE,i=null,r=!1,s=!1){let a=yi.DISPLAY,l=ab;switch(e){case"any":a=yi.ANY;break;case"display":break;case"print":a=yi.PRINT;break;default:ke(`getRenderingIntent - invalid intent: ${e}`)}const c=a&yi.PRINT&&i instanceof ND?i:this.annotationStorage;switch(n){case ra.DISABLE:a+=yi.ANNOTATIONS_DISABLE;break;case ra.ENABLE:break;case ra.ENABLE_FORMS:a+=yi.ANNOTATIONS_FORMS;break;case ra.ENABLE_STORAGE:a+=yi.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ke(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(a+=yi.IS_EDITING),s&&(a+=yi.OPLIST);const{ids:d,hash:f}=c.modifiedIds,p=[a,l.hash,f];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),bi.cleanup(),this._networkStream?.cancelAllRequests(new ua("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(i,r)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}Ke(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{n.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:l}){if(l){r.close();return}Ke(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new D$(i,this))}),e.on("DocException",i=>{n._capability.reject(si(i))}),e.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!n.onPassword)throw si(i);const r=s=>{s instanceof Error?this.#a.reject(s):this.#a.resolve({password:s})};n.onPassword(r,i.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),e.on("DataLoaded",i=>{n.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const p=s.error;ke(`Error during font loading: ${p}`),this.commonObjs.resolve(i,p);break}const a=new ht(s),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,c=new Uj(a,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:d}=s;Ke(d,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,g]of p.objs)if(g?.ref===d)return g.dataLen?(this.commonObjs.resolve(i,structuredClone(g)),g.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new Bj(s));break;case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":const f=new dn(s);this.commonObjs.resolve(i,f.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{if(this.destroyed)return;const l=this.#t.get(r);if(!l.objs.has(i)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{this.destroyed||n.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,i=this.#i.get(n);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#n.set(s.refStr,e);const a=new O$(n,s,this,this._params.pdfBug);return this.#t.set(n,a),a});return this.#i.set(n,r),r}getPageIndex(e){return ob(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(n=>new h$(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new d$(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),bi.cleanup()}}cachedPageNumber(e){if(!ob(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(n)??null}}class L${#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}class bl{#e=null;static#t=new WeakSet;constructor({callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:g=null,enableHWA:y=!1,operationsFilter:S=null}){this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=p,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new L$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=y,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(bl.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");bl.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:s,dependencyTracker:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Tl(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),bl.#t.delete(this._canvas),e||=new CA(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),bl.#t.delete(this._canvas),this.callback())))}}const XD="5.4.530",U$="50cc4adac";class Gi{#e=null;#t=null;#i;#n=null;#a=!1;#s=!1;#r=null;#o;#u=null;#l=null;static#f=null;static get _keyboardManager(){return Le(this,"_keyboardManager",new qc([[["Escape","mac+Escape"],Gi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Gi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Gi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Gi.prototype._moveToPrevious],[["Home","mac+Home"],Gi.prototype._moveToBeginning],[["End","mac+End"],Gi.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#s=!1,this.#r=e):this.#s=!0,this.#l=e?._uiManager||n,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Gi.#f||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const n=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:n}),e.addEventListener("keydown",this.#g.bind(this),{signal:n});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),n=this.#l._signal;e.addEventListener("contextmenu",Yi,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",Gi.#f[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===this.#i,s.addEventListener("click",this.#h.bind(this,r),{signal:n}),e.append(s)}return e.addEventListener("keydown",this.#g.bind(this),{signal:n}),e}#h(e,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Xe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const n=e.target.getAttribute("data-color");n&&this.#h(n,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){Gi._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#c.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#d();this.#e.append(n)}#c(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#p){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const n=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=n.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class bc{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,bc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:n,color:i}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",bc.#n[e]),r.addEventListener("input",()=>{this.#i.updateParams(n,r.value)},{signal:this.#i._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function I1(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Wu(t){return Math.max(0,Math.min(255,255*t))}class D1{static CMYK_G([e,n,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Wu(e),[e,e,e]}static G_HTML([e]){const n=I1(e);return`#${n}${n}${n}`}static RGB_G([e,n,i]){return["G",.3*e+.59*n+.11*i]}static RGB_rgb(e){return e.map(Wu)}static RGB_HTML(e){return`#${e.map(I1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb([e,n,i,r]){return[Wu(1-Math.min(1,e+r)),Wu(1-Math.min(1,i+r)),Wu(1-Math.min(1,n+r))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,i]){const r=1-e,s=1-n,a=1-i,l=Math.min(r,s,a);return["CMYK",r,s,a,l]}}class B${create(e,n,i=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${n}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){mt("Abstract method `_createSVG` called.")}}class Eh extends B${_createSVG(e){return document.createElementNS(os,e)}}const F$=9,io=new WeakSet,z$=new Date().getTimezoneOffset()*60*1e3;class ry{static create(e){switch(e.data.annotationType){case Wt.LINK:return new LA(e);case Wt.TEXT:return new G$(e);case Wt.WIDGET:switch(e.data.fieldType){case"Tx":return new q$(e);case"Btn":return e.data.radioButton?new KD(e):e.data.checkBox?new j$(e):new $$(e);case"Ch":return new Y$(e);case"Sig":return new V$(e)}return new po(e);case Wt.POPUP:return new cb(e);case Wt.FREETEXT:return new WD(e);case Wt.LINE:return new K$(e);case Wt.SQUARE:return new W$(e);case Wt.CIRCLE:return new J$(e);case Wt.POLYLINE:return new JD(e);case Wt.CARET:return new Z$(e);case Wt.INK:return new UA(e);case Wt.POLYGON:return new Q$(e);case Wt.HIGHLIGHT:return new QD(e);case Wt.UNDERLINE:return new e8(e);case Wt.SQUIGGLY:return new t8(e);case Wt.STRIKEOUT:return new n8(e);case Wt.STAMP:return new ZD(e);case Wt.FILEATTACHMENT:return new i8(e);default:return new It(e)}}}class It{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return It._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,n=this.annotationStorage?.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if(n?.length>=8){for(let l=0;l<n.length;l+=8)n[l+1]>a?(a=n[l+1],s=n[l+2]):n[l+1]===a&&(s=Math.max(s,n[l+2]));return[s,a]}if(i?.length>=1){for(const l of i)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>a?(a=l[c+1],s=l[c]):l[c+1]===a&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/i,e[1]=100*(e[1]-a)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${mc}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:n}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:i})||this.annotationStorage.setValue(`${mc}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:n,popup:i}=e;n&&this.#n(n);let r=this.#i?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#i.popup),r&&(r.updateEdited(e),i?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:n},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:l,pageY:c}}}}=this;i?.splice(0,4,...e),n.left=`${100*(e[0]-l)/s}%`,n.top=`${100*(a-e[3]+c)/a}%`,r===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)}_createContainer(e){const{data:n,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof po)&&!(this instanceof LA)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof cb){const{rotation:w}=n;return!n.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:l,height:c}=this;if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const w=n.borderStyle.horizontalCornerRadius,x=n.borderStyle.verticalCornerRadius;if(w>0||x>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;a.borderRadius=C}else if(this instanceof KD){const C=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=C}switch(n.borderStyle.style){case dl.SOLID:a.borderStyle="solid";break;case dl.DASHED:a.borderStyle="dashed";break;case dl.BEVELED:ke("Unimplemented border style: beveled");break;case dl.INSET:ke("Unimplemented border style: inset");break;case dl.UNDERLINE:a.borderBottomStyle="solid";break}const E=n.borderColor||null;E?(this.#t=!0,a.borderColor=me.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):a.borderWidth=0}const d=me.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:p,pageX:g,pageY:y}=r.rawDims;a.left=`${100*(d[0]-g)/f}%`,a.top=`${100*(d[1]-y)/p}%`;const{rotation:S}=n;return n.hasOwnCanvas||S===0?(a.width=`${100*l/f}%`,a.height=`${100*c/p}%`):this.setRotation(S,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),n.style.width=`${100*s/i}%`,n.style.height=`${100*a/r}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,i,r)=>{const s=r.detail[n],a=s[0],l=s.slice(1);r.target.style[i]=D1[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:D1[`${a}_rgb`](l)})};return Le(this,"_commonActions",{display:n=>{const{display:i}=n.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:i}=n.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const i=n.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,n){const i=this._commonActions;for(const r of Object.keys(n.detail))(e[r]||i[r])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const i=this._commonActions;for(const[r,s]of Object.entries(n)){const a=i[r];if(a){const l={detail:{[r]:s},target:e};a(l),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,i,r,s]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,x,E,C]=e.subarray(2,6);if(r===w&&s===x&&n===E&&i===C)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:w,borderWidth:x}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=r-n,d=s-i,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const g=f.createElement("defs");p.append(g);const y=f.createElement("clipPath"),S=`clippath_${this.data.id}`;y.setAttribute("id",S),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let w=2,x=e.length;w<x;w+=8){const E=e[w],C=e[w+1],T=e[w+2],N=e[w+3],R=f.createElement("rect"),I=(T-n)/c,k=(s-C)/d,B=(E-T)/c,z=(C-N)/d;R.setAttribute("x",I),R.setAttribute("y",k),R.setAttribute("width",B),R.setAttribute("height",z),y.append(R),l?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${k}" width="${B}" height="${z}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(p),this.container.style.clipPath=`url(#${S})`}_createPopup(e=null){const{data:n}=this;let i,r;e?(i={str:e.text},r=e.date):(i=n.contentsObj,r=n.modificationDate),this.#i=new cb({data:{color:n.color,titleObj:n.titleObj,modificationDate:r,contentsObj:i,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:l}of r){if(s===-1||a===n)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!io.has(d)){ke(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:c,domElement:d})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==n&&io.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class H$ extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class LA extends It{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),this.#e()}#t(e,n,i="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,r),!1),this.#e()}#i(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:r,refs:s,include:a}=n,l=[];if(r.length!==0||s.length!==0){const f=new Set(s);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;c.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!io.has(g)){ke(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class G$ extends It{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class po extends It{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return rn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if(i==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(i==="focus"){if(n.focused)return;n.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(e,n,i,r){for(const[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(n||={focused:!1}),this._setEventListener(e,n,s,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,n,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":me.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||F$,s=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),f=Math.round(d/(Wv*r))||1,p=d/f;a=Math.min(r,c(p/Wv))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(d/Wv))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=me.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class q$ extends po{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=i),s.setValue(a.id,{[r]:i})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(n,{value:this.data.fieldValue});let s=r.value||"";const a=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let l=r.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=l??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",l??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),io.add(i),this.contentElement=i,i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,g=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",S=>{e.setValue(n,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),c.formattedValue=null}),i.addEventListener("resetform",S=>{const w=this.data.defaultFieldValue??"";i.value=c.userValue=w,c.formattedValue=null});let y=S=>{const{formattedValue:w}=c;w!=null&&(S.target.value=w),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(c.focused)return;const{target:x}=w;if(g&&(x.type=f,p&&(x.step=p)),c.userValue){const E=c.userValue;if(g)if(f==="time"){const C=new Date(E),T=[C.getHours(),C.getMinutes(),C.getSeconds()];x.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-z$).toISOString().split(f==="date"?"T":".",1)[0];else x.value=E}c.lastCommittedValue=x.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const x={value(E){c.userValue=E.detail.value??"",g||e.setValue(n,{value:c.userValue.toString()}),E.target.value=c.userValue},formattedValue(E){const{formattedValue:C}=E.detail;c.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C);const T={formattedValue:C};g&&(T.value=C),e.setValue(n,T)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:C}=E.detail,{target:T}=E;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let N=c.userValue;!N||N.length<=C||(N=N.slice(0,C),T.value=c.userValue=N,e.setValue(n,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,w)}),i.addEventListener("keydown",w=>{c.commitKey=1;let x=-1;if(w.key==="Escape"?x=0:w.key==="Enter"&&!this.data.multiLine?x=2:w.key==="Tab"&&(c.commitKey=3),x===-1)return;const{value:E}=w.target;c.lastCommittedValue!==E&&(c.lastCommittedValue=E,c.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const S=y;y=null,i.addEventListener("blur",w=>{if(!c.focused||!w.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:x}=w;let{value:E}=x;if(g){if(E&&f==="time"){const C=E.split(":").map(T=>parseInt(T,10));E=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}c.userValue=E,c.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,willCommit:!0,commitKey:c.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),S(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{c.lastCommittedValue=null;const{data:x,target:E}=w,{value:C,selectionStart:T,selectionEnd:N}=E;let R=T,I=N;switch(w.inputType){case"deleteWordBackward":{const k=C.substring(0,T).match(/\w*[^\w]*$/);k&&(R-=k[0].length);break}case"deleteWordForward":{const k=C.substring(T).match(/^[^\w]*\w*/);k&&(I+=k[0].length);break}case"deleteContentBackward":T===N&&(R-=1);break;case"deleteContentForward":T===N&&(I+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:R,selEnd:I}})}),this._setEventListeners(i,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class V$ extends po{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class j$ extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return io.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,i)){const f=c&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const l=n.defaultFieldValue||"Off";a.target.checked=l===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class KD extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(n.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(io.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,i))e.setValue(d.id,{value:!1});e.setValue(i,{value:c})}),s.addEventListener("resetform",a=>{const l=n.defaultFieldValue;a.target.checked=l!=null&&l===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const f=a===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const g=f&&p.id===i;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $$ extends LA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Y$ extends po{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");io.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const g of r.options)g.selected=g.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,i.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),s=!1),r.append(p)}let a=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),a=()=>{f.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=f=>{const p=f?"value":"textContent",{options:g,multiple:y}=r;return y?Array.prototype.filter.call(g,S=>S.selected).map(S=>S[p]):g.selectedIndex===-1?null:g[g.selectedIndex][p]};let c=l(!1);const d=f=>{const p=f.target.options;return Array.prototype.map.call(p,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const p={value(g){a?.();const y=g.detail.value,S=new Set(Array.isArray(y)?y:[y]);for(const w of r.options)w.selected=S.has(w.value);e.setValue(n,{value:l(!0)}),c=l(!1)},multipleSelection(g){r.multiple=!0},remove(g){const y=r.options,S=g.detail.remove;y[S].selected=!1,r.remove(S),y.length>0&&Array.prototype.findIndex.call(y,x=>x.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},clear(g){for(;r.length!==0;)r.remove(0);e.setValue(n,{value:null,items:[]}),c=l(!1)},insert(g){const{index:y,displayValue:S,exportValue:w}=g.detail.insert,x=r.children[y],E=document.createElement("option");E.textContent=S,E.value=w,x?x.before(E):r.append(E),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},items(g){const{items:y}=g.detail;for(;r.length!==0;)r.remove(0);for(const S of y){const{displayValue:w,exportValue:x}=S,E=document.createElement("option");E.textContent=w,E.value=x,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:l(!0),items:d(g)}),c=l(!1)},indices(g){const y=new Set(g.detail.indices);for(const S of g.target.options)S.selected=y.has(S.index);e.setValue(n,{value:l(!0)}),c=l(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("input",f=>{const p=l(!0),g=l(!1);e.setValue(n,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:c,change:g,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(n,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class cb extends It{constructor(e){const{data:n,elements:i,parent:r}=e,s=!!r._commentManager;if(super(e,{isRenderable:!s&&It._hasPopupData(n)}),this.elements=i,s&&It._hasPopupData(n)){const a=this.popup=this.#e();for(const l of i)l.popup=a}else this.popup=null}#e(){return new X$({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=this.#e(),i=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${vl}${r}`).join(",")),this.container}}class X${#e=null;#t=this.#V.bind(this);#i=this.#F.bind(this);#n=this.#D.bind(this);#a=this.#w.bind(this);#s=null;#r=null;#o=null;#u=null;#l=null;#f=null;#d=null;#h=!1;#g=null;#m=null;#c=null;#p=null;#v=null;#b=null;#y=null;#E=null;#_=null;#S=null;#C=!1;#A=null;#x=null;constructor({container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:l,parent:c,rect:d,parentRect:f,open:p,commentManager:g=null}){this.#r=e,this.#_=r,this.#o=a,this.#E=l,this.#f=c,this.#s=n,this.#y=d,this.#d=f,this.#l=i,this.#e=g,this.#A=i[0],this.#u=ib.toDateObject(s),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup()),g||(this.#R(),this.#r.hidden=!0,p&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const n of this.trigger)n.addEventListener("click",this.#a,{signal:e}),n.addEventListener("pointerenter",this.#n,{signal:e}),n.addEventListener("pointerleave",this.#i,{signal:e}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#t,{signal:e})}#M(){const e=this.#l.find(n=>n.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#v||this.#M(),!this.#v)return;const{signal:e}=this.#m=new AbortController,n=this.#A.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!n)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!n)},s=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(n){this.#p=this.#A.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=this.#p=document.createElement("button");a.className="annotationCommentButton";const l=this.#A.container;a.style.zIndex=l.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#U(),this.#P(),a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),l.after(a)}}#P(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[e,n]=this.#v,{style:i}=this.#p;i.left=`calc(${e}%)`,i.top=`calc(${n}% - var(--comment-button-dim))`}#U(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:n}=this.#A.commentData;return e?this.#f._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}}get elementBeforePopup(){return this.#p}get comment(){return this.#x||=this.#A.commentText,this.#x}set comment(e){e!==this.comment&&(this.#A.commentText=this.#x=e)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=n)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:n,height:i}=this.#p.getBoundingClientRect(),{x:r,y:s,width:a,height:l}=this.#A.layer.getBoundingClientRect();return[(e-r)/a,(n+i-s)/l]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,i]=this.#b||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:s,y:a,width:l,height:c}=r;this.#e.showDialog(null,this,s+n*l,a+i*c,{...e,parentDimensions:r})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#s){const i=e.style.outlineColor=me.makeHexColor(...this.#s);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#_?.str){const i=document.createElement("span");i.className="title",n.append(i),{dir:i.dir,str:i.textContent}=this.#_}if(e.append(n),this.#u){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#u.valueOf()})),i.dateTime=this.#u.toISOString(),n.append(i)}CD({html:this.#I||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#r.append(e)}get#I(){const e=this.#E,n=this.#o;return e?.str&&(!n?.str||n.str===e.str)&&this.#E.html||null}get#O(){return this.#I?.attributes?.style?.fontSize||0}get#B(){return this.#I?.attributes?.style?.color||null}#k(e){const n=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:r});return i}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#h)&&this.#w()}updateEdited({rect:e,popup:n,deleted:i}){if(this.#e){i?(this.remove(),this.#x=null):n&&(n.deleted?this.remove():(this.#U(),this.#x=n.text)),e&&(this.#v=null,this.#M(),this.#P());return}if(i||n?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#E},e&&(this.#c=null),n&&n.text&&(this.#E=this.#k(n.text),this.#u=ib.toDateObject(n.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#E}=this.#S,this.#S=null,this.#g?.remove(),this.#g=null,this.#c=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#h=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#c!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.#f;let a=!!this.#d,l=a?this.#d:this.#y;for(const S of this.#l)if(!l||me.intersect(S.data.rect,l)!==null){l=S.data.rect,a=!0;break}const c=me.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),f=a?l[2]-l[0]+5:0,p=c[0]+f,g=c[1];this.#c=[100*(p-r)/n,100*(g-s)/i];const{style:y}=this.#r;y.left=`${this.#c[0]}%`,y.top=`${this.#c[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#h=!this.#h,this.#h?(this.#D(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#t)):(this.#F(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#t))}#D(){this.#g||this.render(),this.isVisible?this.#h&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#F(){this.#r.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#C&&(this.#g||this.#D(),this.#C=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class WD extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ue.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const i=document.createElement("span");i.textContent=n,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class K$ extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class W$ extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J$ extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class JD extends It{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r},width:s,height:a}=this;if(!n)return this.container;const l=this.svgFactory.create(s,a,!0);let c=[];for(let f=0,p=n.length;f<p;f+=2){const g=n[f]-e[0],y=e[3]-n[f+1];c.push(`${g},${y}`)}c=c.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q$ extends JD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z$ extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class UA extends It{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ue.HIGHLIGHT:Ue.INK}#i(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:s}}=this,{transform:a,width:l,height:c}=this.#i(n,e),d=this.svgFactory.create(l,c,!0),f=this.#e=this.svgFactory.createElement("svg:g");d.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,g=i.length;p<g;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",i[p].join(",")),f.append(y)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,s=this.#e;if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,l=this.#t.length;a<l;a++)this.#t[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:l,height:c}=this.#i(this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class QD extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ue.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class e8 extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class t8 extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class n8 extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class ZD extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ue.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class i8 extends It{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=rn.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class BA{#e=null;#t=null;#i=null;#n=new Map;#a=null;#s=null;#r=[];#o=!1;constructor({div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:l,commentManager:c,linkService:d,annotationStorage:f}){this.div=e,this.#e=n,this.#t=i,this.#a=l||null,this.#s=d||null,this.#i=f||new NA,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:n}=e,i=this.div;no(i,this.viewport);const r=new Map,s=[],a={data:null,layer:i,linkService:this.#s,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Eh,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===Wt.POPUP;if(c){const p=r.get(l.id);if(!p)continue;if(!this._commentManager){s.push(l);continue}a.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=ry.create(a);if(!d.isRenderable)continue;if(!c&&(this.#r.push(d),l.popupRef)){const p=r.get(l.popupRef);p?p.push(d):r.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}await this.#u();for(const l of s){const c=a.elements=r.get(l.id);a.data=l;const d=ry.create(a);if(!d.isRenderable)continue;const f=d.render();d.contentElement.id=`${vl}${l.id}`,l.hidden&&(f.style.visibility="hidden"),c.at(-1).container.after(f)}this.#l()}async#u(){if(this.#r.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:r}}of this.#r){const s=i.id=`${vl}${r}`;e.push(this.#a?.getAriaAttributes(s).then(a=>{if(a)for(const[l,c]of a)i.setAttribute(l,c)}))}}this.#r.sort(({data:{rect:[i,r,s,a]}},{data:{rect:[l,c,d,f]}})=>{if(i===s&&r===a)return 1;if(l===d&&c===f)return-1;const p=a,g=r,y=(r+a)/2,S=f,w=c,x=(c+f)/2;if(y>=S&&x<=g)return-1;if(x>=p&&y<=w)return 1;const E=(i+s)/2,C=(l+d)/2;return E-C});const n=document.createDocumentFragment();for(const i of this.#r)n.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&n.append(i.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),this.#e)for(const i of this.#r)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:this.#s,svgFactory:new Eh,parent:this};for(const i of e){i.borderStyle||=BA._defaultBorderStyle,n.data=i;const r=ry.create(n);r.isRenderable&&(r.render(),r.contentElement.id=`${vl}${i.id}`,this.#r.push(r))}await this.#u()}update({viewport:e}){const n=this.div;this.viewport=e,no(n,{rotation:e.rotation}),this.#l(),n.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[n,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=this.#n.get(n);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:n}=this,{id:i,rotation:r}=e,s=new H$({data:{id:i,rect:e.getPDFRect(),rotation:r},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i});return s.render(),s.contentElement.id=`${vl}${i}`,s.createOrUpdatePopup(),this.#r.push(s),s}removeAnnotation(e){const n=this.#r.findIndex(r=>r.data.id===e);if(n<0)return;const[i]=this.#r.splice(n,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);this.#u()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:dl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Hf=/\r\n?|\n/g;class fn extends Me{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=fn.prototype,n=s=>s.isEmpty(),i=ca.TRANSLATE_SMALL,r=ca.TRANSLATE_BIG;return Le(this,"_keyboardManager",new qc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=Ue.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||fn._defaultColor||Me._defaultLineColor,this.#n=e.fontSize||fn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,n){Me.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Xe.FREETEXT_SIZE:fn._defaultFontSize=n;break;case Xe.FREETEXT_COLOR:fn._defaultColor=n;break}}updateParams(e,n){switch(e){case Xe.FREETEXT_SIZE:this.#a(n);break;case Xe.FREETEXT_COLOR:this.#s(n);break}}static get defaultPropertiesToUpdate(){return[[Xe.FREETEXT_SIZE,fn._defaultFontSize],[Xe.FREETEXT_COLOR,fn._defaultColor||Me._defaultLineColor]]}get propertiesToUpdate(){return[[Xe.FREETEXT_SIZE,this.#n],[Xe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Xe.FREETEXT_COLOR}#a(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},i=this.#n;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(e){const n=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-fn._internalPadding*e,-(fn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(fn.#u(i)),n=i);return e.join(`
`)}#o(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,a=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,n=this.#e=this.#r().trimEnd();if(e===n)return;const i=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){fn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,f]=this.pageDimensions,[p,g]=this.pageTranslation;let y,S;switch(this.rotation){case 0:y=e+(a[0]-p)/d,S=n+this.height-(a[1]-g)/f;break;case 90:y=e+(a[0]-p)/d,S=n-(a[1]-g)/f,[l,c]=[c,-l];break;case 180:y=e-this.width+(a[0]-p)/d,S=n-(a[1]-g)/f,[l,c]=[-l,-c];break;case 270:y=e+(a[0]-p-this.height*f)/d,S=n+(a[1]-g-this.width*d)/f,[l,c]=[-c,l];break}this.setAt(y*r,S*s,l,c)}else this._moveAfterPaste(e,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Hf,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=fn.#d(n.getData("text")||"").replaceAll(Hf,`
`);if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(Hf,"")),y!==this.editorDiv){let S=d;for(const w of this.editorDiv.childNodes){if(w===y){S=f;continue}S.push(fn.#u(w))}}d.push(l.nodeValue.slice(0,c).replaceAll(Hf,""))}else if(l===this.editorDiv){let y=d,S=0;for(const w of this.editorDiv.childNodes)S++===c&&(y=f),y.push(fn.#u(w))}this.#e=`${d.join(`
`)}${r}${f.join(`
`)}`,this.#l();const p=new Range;let g=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const S=y.nodeValue.length;if(g<=S){p.setStart(y,g),p.setEnd(y,g);break}g-=S}s.removeAllRanges(),s.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#f(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=fn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){let r=null;if(e instanceof WD){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:c,rotation:d,id:f,popupRef:p,richText:g,contentsObj:y,creationDate:S,modificationDate:w},textContent:x,textPosition:E,parent:{page:{pageNumber:C}}}=e;if(!x||x.length===0)return null;r=e={annotationType:Ue.FREETEXT,color:Array.from(l),fontSize:a,value:x.join(`
`),position:E,pageIndex:C-1,rect:c.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:y?.str||null,richText:g,creationDate:S,modificationDate:w}}const s=await super.deserialize(e,n,i);return s.#n=e.fontSize,s.color=me.makeHexColor(...e.color),s.#e=fn.#d(e.value),s._initialData=r,e.comment&&s.setCommentData(e),s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:this.#n,value:this.#f()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#h(i)?null:(i.id=this.annotationElementId,i)}#h(e){const{value:n,fontSize:i,color:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==s}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const r of this.#e.split(`
`)){const s=document.createElement("div");s.append(r?document.createTextNode(r):document.createElement("br")),n.append(s)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ve{static PRECISION=1e-4;toSVGPath(){mt("Abstract method `toSVGPath` must be implemented.")}get box(){mt("Abstract getter `box` must be implemented.")}serialize(e,n){mt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l]*r,a[l+1]=i+e[l+1]*s;return a}static _rescaleAndSwap(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=n+e[l+1]*r,a[l+1]=i+e[l]*s;return a}static _translate(e,n,i,r){r||=new Float32Array(e.length);for(let s=0,a=e.length;s<a;s+=2)r[s]=n+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,i,r,s){switch(s){case 90:return[1-n/i,e/r];case 180:return[1-e/i,1-n/r];case 270:return[n/i,1-e/r];default:return[e/i,n/r]}}static _normalizePagePoint(e,n,i){switch(i){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,i,r,s,a){return[(e+5*i)/6,(n+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}class ja{#e;#t=[];#i;#n;#a=[];#s=new Float32Array(18);#r;#o;#u;#l;#f;#d;#h=[];static#g=8;static#m=2;static#c=ja.#g+ja.#m;constructor({x:e,y:n},i,r,s,a,l=0){this.#e=i,this.#d=s*r,this.#n=a,this.#s.set([NaN,NaN,NaN,NaN,e,n],6),this.#i=l,this.#l=ja.#g*r,this.#u=ja.#c*r,this.#f=r,this.#h.push(e,n)}isEmpty(){return isNaN(this.#s[8])}#p(){const e=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[i,r,s,a]=this.#e;return[(this.#r+(e[0]-n[0])/2-i)/s,(this.#o+(e[1]-n[1])/2-r)/a,(this.#r+(n[0]-e[0])/2-i)/s,(this.#o+(n[1]-e[1])/2-r)/a]}add({x:e,y:n}){this.#r=e,this.#o=n;const[i,r,s,a]=this.#e;let[l,c,d,f]=this.#s.subarray(8,12);const p=e-d,g=n-f,y=Math.hypot(p,g);if(y<this.#u)return!1;const S=y-this.#l,w=S/y,x=w*p,E=w*g;let C=l,T=c;l=d,c=f,d+=x,f+=E,this.#h?.push(e,n);const N=-E/S,R=x/S,I=N*this.#d,k=R*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+I,f+k],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-I,f-k],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([l+I,c+k],2),this.#a.push(NaN,NaN,NaN,NaN,(l+I-i)/s,(c+k-r)/a),this.#s.set([l-I,c-k],14),this.#t.push(NaN,NaN,NaN,NaN,(l-I-i)/s,(c-k-r)/a)),this.#s.set([C,T,l,c,d,f],6),!this.isEmpty()):(this.#s.set([C,T,l,c,d,f],6),Math.abs(Math.atan2(T-c,C-l)-Math.atan2(E,x))<Math.PI/2?([l,c,d,f]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((l+d)/2-i)/s,((c+f)/2-r)/a),[l,c,C,T]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+l)/2-i)/s,((T+c)/2-r)/a),!0):([C,T,l,c,d,f]=this.#s.subarray(0,6),this.#a.push(((C+5*l)/6-i)/s,((T+5*c)/6-r)/a,((5*l+d)/6-i)/s,((5*c+f)/6-r)/a,((l+d)/2-i)/s,((c+f)/2-r)/a),[d,f,l,c,C,T]=this.#s.subarray(12,18),this.#t.push(((C+5*l)/6-i)/s,((T+5*c)/6-r)/a,((5*l+d)/6-i)/s,((5*c+f)/6-r)/a,((l+d)/2-i)/s,((c+f)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,n=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#y(i);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?i.push(`L${n[r+4]} ${n[r+5]}`):i.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#b(i),i.join(" ")}#v(){const[e,n,i,r]=this.#e,[s,a,l,c]=this.#p();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-n)/r} L${(this.#s[4]-e)/i} ${(this.#s[5]-n)/r} L${s} ${a} L${l} ${c} L${(this.#s[16]-e)/i} ${(this.#s[17]-n)/r} L${(this.#s[14]-e)/i} ${(this.#s[15]-n)/r} Z`}#b(e){const n=this.#t;e.push(`L${n[4]} ${n[5]} Z`)}#y(e){const[n,i,r,s]=this.#e,a=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[c,d,f,p]=this.#p();e.push(`L${(a[0]-n)/r} ${(a[1]-i)/s} L${c} ${d} L${f} ${p} L${(l[0]-n)/r} ${(l[1]-i)/s}`)}newFreeDrawOutline(e,n,i,r,s,a){return new eO(e,n,i,r,s,a)}getOutlines(){const e=this.#a,n=this.#t,i=this.#s,[r,s,a,l]=this.#e,c=new Float32Array((this.#h?.length??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(this.#h[p]-r)/a,c[p+1]=(this.#h[p+1]-s)/l;if(c[c.length-2]=(this.#r-r)/a,c[c.length-1]=(this.#o-s)/l,isNaN(i[6])&&!this.isEmpty())return this.#E(c);const d=new Float32Array(this.#a.length+24+this.#t.length);let f=e.length;for(let p=0;p<f;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}f=this.#S(d,f);for(let p=n.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(n[p+g])){d[f]=d[f+1]=NaN,f+=2;continue}d[f]=n[p+g],d[f+1]=n[p+g+1],f+=2}return this.#_(d,f),this.newFreeDrawOutline(d,c,this.#e,this.#f,this.#i,this.#n)}#E(e){const n=this.#s,[i,r,s,a]=this.#e,[l,c,d,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(n[2]-i)/s,(n[3]-r)/a,NaN,NaN,NaN,NaN,(n[4]-i)/s,(n[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(n[16]-i)/s,(n[17]-r)/a,NaN,NaN,NaN,NaN,(n[14]-i)/s,(n[15]-r)/a],0),this.newFreeDrawOutline(p,e,this.#e,this.#f,this.#i,this.#n)}#_(e,n){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],n),n+=6}#S(e,n){const i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,a,l,c]=this.#e,[d,f,p,g]=this.#p();return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-a)/c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(r[0]-s)/l,(r[1]-a)/c],n),n+=24}}class eO extends ve{#e;#t=new Float32Array(4);#i;#n;#a;#s;#r;constructor(e,n,i,r,s,a){super(),this.#r=e,this.#a=n,this.#e=i,this.#s=r,this.#i=s,this.#n=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[l,c,d,f]=this.#t;for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-l)/d,e[p+1]=(e[p+1]-c)/f;for(let p=0,g=n.length;p<g;p+=2)n[p]=(n[p]-l)/d,n[p+1]=(n[p+1]-c)/f}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let n=6,i=this.#r.length;n<i;n+=6){if(isNaN(this.#r[n])){e.push(`L${this.#r[n+4]} ${this.#r[n+5]}`);continue}e.push(`C${this.#r[n]} ${this.#r[n+1]} ${this.#r[n+2]} ${this.#r[n+3]} ${this.#r[n+4]} ${this.#r[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],s){const a=i-e,l=r-n;let c,d;switch(s){case 0:c=ve._rescale(this.#r,e,r,a,-l),d=ve._rescale(this.#a,e,r,a,-l);break;case 90:c=ve._rescaleAndSwap(this.#r,e,n,a,l),d=ve._rescaleAndSwap(this.#a,e,n,a,l);break;case 180:c=ve._rescale(this.#r,i,n,-a,l),d=ve._rescale(this.#a,i,n,-a,l);break;case 270:c=ve._rescaleAndSwap(this.#r,i,r,-a,-l),d=ve._rescaleAndSwap(this.#a,i,r,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}#o(e){const n=this.#r;let i=n[4],r=n[5];const s=[i,r,i,r];let a=i,l=r,c=i,d=r;const f=e?Math.max:Math.min,p=new Float32Array(4);for(let y=6,S=n.length;y<S;y+=6){const w=n[y+4],x=n[y+5];isNaN(n[y])?(me.pointBoundingBox(w,x,s),l>x?(a=w,l=x):l===x&&(a=f(a,w)),d<x?(c=w,d=x):d===x&&(c=f(c,w))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,me.bezierBoundingBox(i,r,...n.slice(y,y+6),p),me.rectBoundingBox(p[0],p[1],p[2],p[3],s),l>p[1]?(a=p[0],l=p[1]):l===p[1]&&(a=f(a,p[0])),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=f(c,p[2]))),i=w,r=x}const g=this.#t;g[0]=s[0]-this.#i,g[1]=s[1]-this.#i,g[2]=s[2]-s[0]+2*this.#i,g[3]=s[3]-s[1]+2*this.#i,this.firstPoint=[a,l],this.lastPoint=[c,d]}get box(){return this.#t}newOutliner(e,n,i,r,s,a=0){return new ja(e,n,i,r,s,a)}getNewOutline(e,n){const[i,r,s,a]=this.#t,[l,c,d,f]=this.#e,p=s*d,g=a*f,y=i*d+l,S=r*f+c,w=this.newOutliner({x:this.#a[0]*p+y,y:this.#a[1]*g+S},this.#e,this.#s,e,this.#n,n??this.#i);for(let x=2;x<this.#a.length;x+=2)w.add({x:this.#a[x]*p+y,y:this.#a[x+1]*g+S});return w.getOutlines()}}class db{#e;#t;#i;#n=[];#a=[];constructor(e,n=0,i=0,r=!0){const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:x,width:E,height:C}of e){const T=Math.floor((w-n)/a)*a,N=Math.ceil((w+E+n)/a)*a,R=Math.floor((x-n)/a)*a,I=Math.ceil((x+C+n)/a)*a,k=[T,R,I,!0],B=[N,R,I,!1];this.#n.push(k,B),me.rectBoundingBox(T,R,N,I,s)}const l=s[2]-s[0]+2*i,c=s[3]-s[1]+2*i,d=s[0]-i,f=s[1]-i;let p=r?-1/0:1/0,g=1/0;const y=this.#n.at(r?-1:-2),S=[y[0],y[2]];for(const w of this.#n){const[x,E,C,T]=w;!T&&r?E<g?(g=E,p=x):E===g&&(p=Math.max(p,x)):T&&!r&&(E<g?(g=E,p=x):E===g&&(p=Math.min(p,x))),w[0]=(x-d)/l,w[1]=(E-f)/c,w[2]=(C-f)/c}this.#e=new Float32Array([d,f,l,c]),this.#t=[p,g],this.#i=S}getOutlines(){this.#n.sort((n,i)=>n[0]-i[0]||n[1]-i[1]||n[2]-i[2]);const e=[];for(const n of this.#n)n[3]?(e.push(...this.#l(n)),this.#o(n)):(this.#u(n),e.push(...this.#l(n)));return this.#s(e)}#s(e){const n=[],i=new Set;for(const a of e){const[l,c,d]=a;n.push([l,c,a],[l,d,a])}n.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=n.length;a<l;a+=2){const c=n[a][2],d=n[a+1][2];c.push(d),d.push(c),i.add(c),i.add(d)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[l,c,d,f,p]=a;i.delete(a);let g=l,y=c;for(s=[l,d],r.push(s);;){let S;if(i.has(f))S=f;else if(i.has(p))S=p;else break;i.delete(S),[l,c,d,f,p]=S,g!==l&&(s.push(g,y,l,y===c?c:d),g=l),y=y===c?d:c}s.push(g,y)}return new r8(r,this.#e,this.#t,this.#i)}#r(e){const n=this.#a;let i=0,r=n.length-1;for(;i<=r;){const s=i+r>>1,a=n[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1}#o([,e,n]){const i=this.#r(e);this.#a.splice(i,0,[e,n])}#u([,e,n]){const i=this.#r(e);for(let r=i;r<this.#a.length;r++){const[s,a]=this.#a[r];if(s!==e)break;if(s===e&&a===n){this.#a.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=this.#a[r];if(s!==e)break;if(s===e&&a===n){this.#a.splice(r,1);return}}}#l(e){const[n,i,r]=e,s=[[n,i,r]],a=this.#r(r);for(let l=0;l<a;l++){const[c,d]=this.#a[l];for(let f=0,p=s.length;f<p;f++){const[,g,y]=s[f];if(!(d<=g||y<=c)){if(g>=c){if(y>d)s[f][1]=d;else{if(p===1)return[];s.splice(f,1),f--,p--}continue}s[f][2]=c,y>d&&s.push([n,d,y])}}}return s}}class r8 extends ve{#e;#t;constructor(e,n,i,r){super(),this.#t=e,this.#e=n,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const e=[];for(const n of this.#t){let[i,r]=n;e.push(`M${i} ${r}`);for(let s=2;s<n.length;s+=2){const a=n[s],l=n[s+1];a===i?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],s){const a=[],l=i-e,c=r-n;for(const d of this.#t){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=e+d[p]*l,f[p+1]=r-d[p+1]*c;a.push(f)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class fb extends ja{newFreeDrawOutline(e,n,i,r,s,a){return new s8(e,n,i,r,s,a)}}class s8 extends eO{newOutliner(e,n,i,r,s,a=0){return new fb(e,n,i,r,s,a)}}class qt extends Me{#e=null;#t=0;#i;#n=null;#a=null;#s=null;#r=null;#o=0;#u=null;#l=null;#f=null;#d=!1;#h=null;#g=null;#m=null;#c="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ue.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=qt.prototype;return Le(this,"_keyboardManager",new qc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||qt._defaultColor,this.#p=e.thickness||qt._defaultThickness,this.opacity=e.opacity||qt._defaultOpacity,this.#i=e.boxes||null,this.#v=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#A()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new db(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new db(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=n.getOutlines();const{firstPoint:i}=this.#l;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:n,clipPathId:i}){this.#l=e;const r=1.5;if(this.#s=e.getNewOutline(this.#p/2+r,.0025),n>=0)this.#f=n,this.#n=i,this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#f,{bbox:qt.#x(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:qt.#x(this.#s.box,p),path:{d:this.#s.toSVGPath()}})}const[s,a,l,c]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=l,this.height=c;break;case 90:{const[p,g]=this.parentDimensions;this.x=a,this.y=1-s,this.width=l*g/p,this.height=c*p/g;break}case 180:this.x=1-s,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-a,this.y=s,this.width=l*g/p,this.height=c*p/g;break}}const{firstPoint:d}=e;this.#h=[(d[0]-s)/l,(d[1]-a)/c];const{lastPoint:f}=this.#s;this.#g=[(f[0]-s)/l,(f[1]-a)/c]}static initialize(e,n){Me.initialize(e,n),qt._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case Xe.HIGHLIGHT_COLOR:qt._defaultColor=n;break;case Xe.HIGHLIGHT_THICKNESS:qt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#h}updateParams(e,n){switch(e){case Xe.HIGHLIGHT_COLOR:this.#E(n);break;case Xe.HIGHLIGHT_THICKNESS:this.#_(n);break}}static get defaultPropertiesToUpdate(){return[[Xe.HIGHLIGHT_COLOR,qt._defaultColor],[Xe.HIGHLIGHT_THICKNESS,qt._defaultThickness]]}get propertiesToUpdate(){return[[Xe.HIGHLIGHT_COLOR,this.color||qt._defaultColor],[Xe.HIGHLIGHT_THICKNESS,this.#p||qt._defaultThickness],[Xe.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#f,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(e){const n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,qt._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#_(e){const n=this.#p,i=r=>{this.#p=r,this.#S(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Gi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#P())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#C():e&&(this.#A(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#S(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#f===null||!this.parent||(this.parent.drawLayer.remove(this.#f),this.#f=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#A(e=this.parent){this.#f===null&&({id:this.#f,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#x([e,n,i,r],s){switch(s){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]}rotate(e){const{drawLayer:n}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=qt.#x(this.#l.box,e)):i=qt.#x([this.x,this.y,this.width,this.height],e),n.updateProperties(this.#f,{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(this.#m,{bbox:qt.#x(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const n=this.#u=document.createElement("div");return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(),PD(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(e){qt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(e){if(!this.#e)return;const n=window.getSelection();e?n.setPosition(this.#e,this.#t):n.setPosition(this.#r,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#M(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#P(){return this.#d?this.rotation:0}#U(){if(this.#d)return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#i,a=new Float32Array(s.length*8);let l=0;for(const{x:c,y:d,width:f,height:p}of s){const g=c*e+i,y=(1-d)*n+r;a[l]=a[l+4]=g,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=g+f*e,a[l+5]=a[l+7]=y-p*n,l+=8}return a}#I(e){return this.#l.serialize(e,this.#P())}static startHighlighting(e,n,{target:i,x:r,y:s}){const{x:a,y:l,width:c,height:d}=i.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=y=>{f.abort(),this.#B(e,y)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Ut,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Yi,{signal:p}),i.addEventListener("pointermove",this.#O.bind(this,e),{signal:p}),this._freeHighlight=new fb({x:r,y:s},[a,l,c,d],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,n,i){let r=null;if(e instanceof QD){const{data:{quadPoints:S,rect:w,rotation:x,id:E,color:C,opacity:T,popupRef:N,richText:R,contentsObj:I,creationDate:k,modificationDate:B},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ue.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:S,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:R,comment:I?.str||null,creationDate:k,modificationDate:B}}else if(e instanceof UA){const{data:{inkLists:S,rect:w,rotation:x,id:E,color:C,borderStyle:{rawWidth:T},popupRef:N,richText:R,contentsObj:I,creationDate:k,modificationDate:B},parent:{page:{pageNumber:z}}}=e;r=e={annotationType:Ue.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:S,boxes:null,pageIndex:z-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:R,comment:I?.str||null,creationDate:k,modificationDate:B}}const{color:s,quadPoints:a,inkLists:l,opacity:c}=e,d=await super.deserialize(e,n,i);d.color=me.makeHexColor(...s),d.opacity=c||1,l&&(d.#p=e.thickness),d._initialData=r,e.comment&&d.setCommentData(e);const[f,p]=d.pageDimensions,[g,y]=d.pageTranslation;if(a){const S=d.#i=[];for(let w=0;w<a.length;w+=8)S.push({x:(a[w]-g)/f,y:1-(a[w+1]-y)/p,width:(a[w+2]-a[w])/f,height:(a[w+1]-a[w+5])/p});d.#b(),d.#A(),d.rotate(d.rotation)}else if(l){d.#d=!0;const S=l[0],w={x:S[0]-g,y:p-(S[1]-y)},x=new fb(w,[0,0,f,p],1,d.#p/2,!0,.001);for(let T=0,N=S.length;T<N;T+=2)w.x=S[T]-g,w.y=p-(S[T+1]-y),x.add(w);const{id:E,clipPathId:C}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);d.#y({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:C}),d.#A(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Me._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:this.#p,quadPoints:this.#U(),outlines:this.#I(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#k(i)?null:(i.id=this.annotationElementId,i)}#k(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,r)=>i!==n[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class tO{#e=Object.create(null);updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,i]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,i)}updateSVGProperty(e,n){this.#e[e]=n}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){mt("Not implemented")}}class tt extends Me{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#s(e),this.#u())}#s({drawOutlines:e,drawId:n,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#r(e,this.parent),this.#d(e.box)}#r(e,n){const{id:i}=n.drawLayer.draw(tt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,s]of Object.entries(n))i.has(r)?Object.assign(e[r],s):e[r]=s;return e}static getDefaultDrawingOptions(e){mt("Not implemented")}static get typesMap(){mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(tt.#i.updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,s=r[n],a=l=>{r.updateProperty(n,l);const c=this.#e.updateProperty(n,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#f()),{bbox:this.#h()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#f()),{bbox:this.#h()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#h()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#h()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#u(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#u(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#u(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#r(this.#e,e)}}#l([e,n,i,r]){const{parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}#f(){const{x:e,y:n,width:i,height:r,parentDimensions:[s,a],rotation:l}=this;switch(l){case 90:return[1-n,e,i*(s/a),r*(a/s)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(s/a),r*(a/s)];default:return[e,n,i,r]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#h(){const{x:e,y:n,width:i,height:r,rotation:s,parentRotation:a,parentDimensions:[l,c]}=this;switch((s*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(l/c),r*(c/l),i*(l/c)];case 5:return[1-n,e,i*(l/c),r*(c/l)];case 6:return[1-e-r*(c/l),1-n,r*(c/l),i*(l/c)];case 7:return[n-i*(l/c),1-e-r*(c/l),i*(l/c),r*(c/l)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(c/l),n,r*(c/l),i*(l/c)];case 13:return[1-n-i*(l/c),e-r*(c/l),i*(l/c),r*(c/l)];case 14:return[1-e,1-n-i*(l/c),r*(c/l),i*(l/c)];case 15:return[n,1-e,i*(l/c),r*(c/l)];default:return[e,n,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,tt._mergeSVGProperties({bbox:this.#h()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,r,s){mt("Not implemented")}static startDrawing(e,n,i,r){const{target:s,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=r;if(it.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:f}}=e,{width:p,height:g}=s.getBoundingClientRect(),y=tt.#n=new AbortController,S=e.combinedSignal(y);if(it.setPointer(d,c),window.addEventListener("pointerup",w=>{it.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:S}),window.addEventListener("pointercancel",w=>{it.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",w=>{it.isSamePointerType(w.pointerType)&&(it.initializeAndAddPointerId(w.pointerId),tt.#i.isCancellable()&&(tt.#i.removeLastElement(),tt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Yi,{signal:S}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),s.addEventListener("touchmove",w=>{it.isSameTimeStamp(w.timeStamp)&&Ut(w)},{signal:S}),e.toggleDrawing(),n._editorUndoBar?.hide(),tt.#i){e.drawLayer.updateProperties(this._currentDrawId,tt.#i.startNew(a,l,p,g,f));return}n.updateUIForDefaultProperties(this),tt.#i=this.createDrawerInstance(a,l,p,g,f),tt.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(tt.#a.toSVGProperties(),tt.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(it.isSameTimeStamp(e.timeStamp),!tt.#i)return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(it.isSamePointerId(r)){if(it.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,tt.#i.add(n,i)),it.setTimeStamp(e.timeStamp),Ut(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,tt.#i=null,tt.#a=null,it.clearTimeStamp()),tt.#n&&(tt.#n.abort(),tt.#n=null,it.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,tt.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=tt.#i,r=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Xe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Xe.DRAW_STEP),!tt.#i.isEmpty()){const{pageDimensions:[i,r],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:tt.#i.getOutlines(i*s,r*s,s,this._INNER_MARGIN),drawingOptions:tt.#a,mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,s,a){mt("Not implemented")}static async deserialize(e,n,i){const{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:l}}=n.viewport,c=this.deserializeDraw(a,l,r,s,this._INNER_MARGIN,e),d=await super.deserialize(e,n,i);return d.createDrawingOptions(e),d.#s({drawOutlines:c}),d.#u(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[n,i]=this.pageTranslation,[r,s]=this.pageDimensions;return this.#e.serialize([n,i,r,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class a8{#e=new Float64Array(6);#t;#i;#n;#a;#s;#r="";#o=0;#u=new jc;#l;#f;constructor(e,n,i,r,s,a){this.#l=i,this.#f=r,this.#n=s,this.#a=a,[e,n]=this.#d(e,n);const l=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#s=[e,n],this.#i=[{line:l,points:this.#s}],this.#e.set(l,0)}updateProperty(e,n){e==="stroke-width"&&(this.#a=n)}#d(e,n){return ve._normalizePoint(e,n,this.#l,this.#f,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(e,n){[e,n]=this.#d(e,n);const[i,r,s,a]=this.#e.subarray(2,6),l=e-s,c=n-a;return Math.hypot(this.#l*l,this.#f*c)<=2?null:(this.#s.push(e,n),isNaN(i)?(this.#e.set([s,a,e,n],2),this.#t.push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,r,s,a,e,n],0),this.#t.push(...ve.createBezierPoints(i,r,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const i=this.add(e,n);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,i,r,s){this.#l=i,this.#f=r,this.#n=s,[e,n]=this.#d(e,n);const a=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#s=[e,n];const l=this.#i.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#i.push({line:a,points:this.#s}),this.#e.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#s=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#r="";for(let e=0,n=this.#i.length;e<n;e++){const{line:i,points:r}=this.#i[e];this.#t=i,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=ve.svgRound(this.#t[4]),n=ve.svgRound(this.#t[5]);if(this.#s.length===2)return this.#r=`${this.#r} M ${e} ${n} Z`,this.#r;if(this.#s.length<=6){const r=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,r)} M ${e} ${n}`,this.#o=6}if(this.#s.length===4){const r=ve.svgRound(this.#t[10]),s=ve.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${r} ${s}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${e} ${n}`),this.#o=6);for(let r=this.#o,s=this.#t.length;r<s;r+=6){const[a,l,c,d,f,p]=this.#t.slice(r,r+6).map(ve.svgRound);i.push(`C${a} ${l} ${c} ${d} ${f} ${p}`)}return this.#r+=i.join(" "),this.#o=this.#t.length,this.#r}getOutlines(e,n,i,r){const s=this.#i.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#u.build(this.#i,e,n,i,this.#n,this.#a,r),this.#e=null,this.#t=null,this.#i=null,this.#r=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class jc extends ve{#e;#t=0;#i;#n;#a;#s;#r;#o;#u;build(e,n,i,r,s,a,l){this.#a=n,this.#s=i,this.#r=r,this.#o=s,this.#u=a,this.#i=l??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of this.#n){if(e.push(`M${ve.svgRound(n[4])} ${ve.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ve.svgRound(n[10])} ${ve.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[s,a,l,c,d,f]=n.subarray(i,i+6).map(ve.svgRound);e.push(`C${s} ${a} ${l} ${c} ${d} ${f}`)}}return e.join("")}serialize([e,n,i,r],s){const a=[],l=[],[c,d,f,p]=this.#f();let g,y,S,w,x,E,C,T,N;switch(this.#o){case 0:N=ve._rescale,g=e,y=n+r,S=i,w=-r,x=e+c*i,E=n+(1-d-p)*r,C=e+(c+f)*i,T=n+(1-d)*r;break;case 90:N=ve._rescaleAndSwap,g=e,y=n,S=i,w=r,x=e+d*i,E=n+c*r,C=e+(d+p)*i,T=n+(c+f)*r;break;case 180:N=ve._rescale,g=e+i,y=n,S=-i,w=r,x=e+(1-c-f)*i,E=n+d*r,C=e+(1-c)*i,T=n+(d+p)*r;break;case 270:N=ve._rescaleAndSwap,g=e+i,y=n+r,S=-i,w=-r,x=e+(1-d-p)*i,E=n+(1-c-f)*r,C=e+(1-d)*i,T=n+(1-c)*r;break}for(const{line:R,points:I}of this.#n)a.push(N(R,g,y,S,w,s?new Array(R.length):null)),l.push(N(I,g,y,S,w,s?new Array(I.length):null));return{lines:a,points:l,rect:[x,E,C,T]}}static deserialize(e,n,i,r,s,{paths:{lines:a,points:l},rotation:c,thickness:d}){const f=[];let p,g,y,S,w;switch(c){case 0:w=ve._rescale,p=-e/i,g=n/r+1,y=1/i,S=-1/r;break;case 90:w=ve._rescaleAndSwap,p=-n/r,g=-e/i,y=1/r,S=1/i;break;case 180:w=ve._rescale,p=e/i+1,g=-n/r,y=-1/i,S=1/r;break;case 270:w=ve._rescaleAndSwap,p=n/r+1,g=e/i+1,y=-1/r,S=-1/i;break}if(!a){a=[];for(const E of l){const C=E.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const T=new Float32Array(3*(C-2));a.push(T);let[N,R,I,k]=E.subarray(0,4);T.set([NaN,NaN,NaN,NaN,N,R],0);for(let B=4;B<C;B+=2){const z=E[B],V=E[B+1];T.set(ve.createBezierPoints(N,R,I,k,z,V),(B-2)*3),[N,R,I,k]=[I,k,z,V]}}}for(let E=0,C=a.length;E<C;E++)f.push({line:w(a[E].map(T=>T??NaN),p,g,y,S),points:w(l[E].map(T=>T??NaN),p,g,y,S)});const x=new this.prototype.constructor;return x.build(f,i,r,1,c,d,s),x}#l(e=this.#u){const n=this.#i+e/2*this.#r;return this.#o%180===0?[n/this.#a,n/this.#s]:[n/this.#s,n/this.#a]}#f(){const[e,n,i,r]=this.#e,[s,a]=this.#l(0);return[e+s,n+a,i-2*s,r-2*a]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let l=4,c=r.length;l<c;l+=6)me.pointBoundingBox(r[l],r[l+1],e);continue}let s=r[4],a=r[5];for(let l=6,c=r.length;l<c;l+=6){const[d,f,p,g,y,S]=r.subarray(l,l+6);me.bezierBoundingBox(s,a,d,f,p,g,y,S,e),s=y,a=S}}const[n,i]=this.#l();e[0]=Vn(e[0]-n,0,1),e[1]=Vn(e[1]-i,0,1),e[2]=Vn(e[2]+n,0,1),e[3]=Vn(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,n){return e==="stroke-width"?this.#h(n):null}#h(e){const[n,i]=this.#l();this.#u=e;const[r,s]=this.#l(),[a,l]=[r-n,s-i],c=this.#e;return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c}updateParentDimensions([e,n],i){const[r,s]=this.#l();this.#a=e,this.#s=n,this.#r=i;const[a,l]=this.#l(),c=a-r,d=l-s,f=this.#e;return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ve.svgRound).join(" ")}get defaultProperties(){const[e,n]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(e)} ${ve.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=this.#e;let i=0,r=0,s=0,a=0,l=0,c=0;switch(this.#t){case 90:r=n/e,s=-e/n,l=e;break;case 180:i=-1,a=-1,l=e,c=n;break;case 270:r=-n/e,s=e/n,c=n;break;default:return""}return`matrix(${i} ${r} ${s} ${a} ${ve.svgRound(l)} ${ve.svgRound(c)})`}getPathResizingSVGProperties([e,n,i,r]){const[s,a]=this.#l(),[l,c,d,f]=this.#e;if(Math.abs(d-s)<=ve.PRECISION||Math.abs(f-a)<=ve.PRECISION){const w=e+i/2-(l+d/2),x=n+r/2-(c+f/2);return{path:{"transform-origin":`${ve.svgRound(e)} ${ve.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${x})`}}}const p=(i-2*s)/(d-2*s),g=(r-2*a)/(f-2*a),y=d/i,S=f/r;return{path:{"transform-origin":`${ve.svgRound(l)} ${ve.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${S}) translate(${ve.svgRound(s)} ${ve.svgRound(a)}) scale(${p} ${g}) translate(${ve.svgRound(-s)} ${ve.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[s,a]=this.#l(),l=this.#e,[c,d,f,p]=l;if(l[0]=e,l[1]=n,l[2]=i,l[3]=r,Math.abs(f-s)<=ve.PRECISION||Math.abs(p-a)<=ve.PRECISION){const x=e+i/2-(c+f/2),E=n+r/2-(d+p/2);for(const{line:C,points:T}of this.#n)ve._translate(C,x,E,C),ve._translate(T,x,E,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(e)} ${ve.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*s)/(f-2*s),y=(r-2*a)/(p-2*a),S=-g*(c+s)+e+s,w=-y*(d+a)+n+a;if(g!==1||y!==1||S!==0||w!==0)for(const{line:x,points:E}of this.#n)ve._rescale(x,S,w,g,y,x),ve._rescale(E,S,w,g,y,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ve.svgRound(e)} ${ve.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,s]=i,a=this.#e,l=e-a[0],c=n-a[1];if(this.#a===r&&this.#s===s)for(const{line:d,points:f}of this.#n)ve._translate(d,l,c,d),ve._translate(f,l,c,f);else{const d=this.#a/r,f=this.#s/s;this.#a=r,this.#s=s;for(const{line:p,points:g}of this.#n)ve._rescale(p,l,c,d,f,p),ve._rescale(g,l,c,d,f,g);a[2]*=d,a[3]*=f}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ve.svgRound(e)} ${ve.svgRound(n)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ve.svgRound(e[0])} ${ve.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Dp extends tO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new Dp(this._viewParameters);return e.updateAll(this),e}}class FA extends tt{static _type="ink";static _editorType=Ue.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Me.initialize(e,n),this._defaultDrawingOptions=new Dp(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[Xe.INK_THICKNESS,"stroke-width"],[Xe.INK_COLOR,"stroke"],[Xe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,s){return new a8(e,n,i,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,s,a){return jc.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){let r=null;if(e instanceof UA){const{data:{inkLists:a,rect:l,rotation:c,id:d,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:y,richText:S,contentsObj:w,creationDate:x,modificationDate:E},parent:{page:{pageNumber:C}}}=e;r=e={annotationType:Ue.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:C-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:S,comment:w?.str||null,creationDate:x,modificationDate:E}}const s=await super.deserialize(e,n,i);return s._initialData=r,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||=new bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Xe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=FA.getDefaultDrawingOptions({stroke:me.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,l=Object.assign(super.serialize(e),{color:Me._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:n,thickness:i,opacity:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==n[l])||e.thickness!==i||e.opacity!==r||e.pageIndex!==s}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class hb extends jc{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Gf=8,Ju=3;class hl{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,n,i,r){return i-=e,r-=n,i===0?r>0?0:4:i===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,n,i,r,s,a,l){const c=this.#t(i,r,s,a);for(let d=0;d<8;d++){const f=(-d+c-l+16)%8,p=this.#i[2*f],g=this.#i[2*f+1];if(e[(i+p)*n+(r+g)]!==0)return f}return-1}static#a(e,n,i,r,s,a,l){const c=this.#t(i,r,s,a);for(let d=0;d<8;d++){const f=(d+c+l+16)%8,p=this.#i[2*f],g=this.#i[2*f+1];if(e[(i+p)*n+(r+g)]!==0)return f}return-1}static#s(e,n,i,r){const s=e.length,a=new Int32Array(s);for(let f=0;f<s;f++)a[f]=e[f]<=r?1:0;for(let f=1;f<i-1;f++)a[f*n]=a[f*n+n-1]=0;for(let f=0;f<n;f++)a[f]=a[n*i-1-f]=0;let l=1,c;const d=[];for(let f=1;f<i-1;f++){c=1;for(let p=1;p<n-1;p++){const g=f*n+p,y=a[g];if(y===0)continue;let S=f,w=p;if(y===1&&a[g-1]===0)l+=1,w-=1;else if(y>=1&&a[g+1]===0)l+=1,w+=1,y>1&&(c=y);else{y!==1&&(c=Math.abs(y));continue}const x=[p,f],E=w===p+1,C={isHole:E,points:x,id:l,parent:0};d.push(C);let T;for(const G of d)if(G.id===c){T=G;break}T?T.isHole?C.parent=E?T.parent:c:C.parent=E?c:T.parent:C.parent=E?c:0;const N=this.#n(a,n,f,p,S,w,0);if(N===-1){a[g]=-l,a[g]!==1&&(c=Math.abs(a[g]));continue}let R=this.#i[2*N],I=this.#i[2*N+1];const k=f+R,B=p+I;S=k,w=B;let z=f,V=p;for(;;){const G=this.#a(a,n,z,V,S,w,1);R=this.#i[2*G],I=this.#i[2*G+1];const W=z+R,oe=V+I;x.push(oe,W);const ae=z*n+V;if(a[ae+1]===0?a[ae]=-l:a[ae]===1&&(a[ae]=l),W===f&&oe===p&&z===k&&V===B){a[g]!==1&&(c=Math.abs(a[g]));break}else S=z,w=V,z=W,V=oe}}}return d}static#r(e,n,i,r){if(i-n<=4){for(let k=n;k<i-2;k+=2)r.push(e[k],e[k+1]);return}const s=e[n],a=e[n+1],l=e[i-4]-s,c=e[i-3]-a,d=Math.hypot(l,c),f=l/d,p=c/d,g=f*a-p*s,y=c/l,S=1/d,w=Math.atan(y),x=Math.cos(w),E=Math.sin(w),C=S*(Math.abs(x)+Math.abs(E)),T=S*(1-C+C**2),N=Math.max(Math.atan(Math.abs(E+x)*T),Math.atan(Math.abs(E-x)*T));let R=0,I=n;for(let k=n+2;k<i-2;k+=2){const B=Math.abs(g-f*e[k+1]+p*e[k]);B>R&&(I=k,R=B)}R>(d*N)**2?(this.#r(e,n,I+2,r),this.#r(e,I,i,r)):r.push(s,a)}static#o(e){const n=[],i=e.length;return this.#r(e,0,i,n),n.push(e[i-2],e[i-1]),n.length<=4?null:n}static#u(e,n,i,r,s,a){const l=new Float32Array(a**2),c=-2*r**2,d=a>>1;for(let w=0;w<a;w++){const x=(w-d)**2;for(let E=0;E<a;E++)l[w*a+E]=Math.exp((x+(E-d)**2)/c)}const f=new Float32Array(256),p=-2*s**2;for(let w=0;w<256;w++)f[w]=Math.exp(w**2/p);const g=e.length,y=new Uint8Array(g),S=new Uint32Array(256);for(let w=0;w<i;w++)for(let x=0;x<n;x++){const E=w*n+x,C=e[E];let T=0,N=0;for(let I=0;I<a;I++){const k=w+I-d;if(!(k<0||k>=i))for(let B=0;B<a;B++){const z=x+B-d;if(z<0||z>=n)continue;const V=e[k*n+z],G=l[I*a+B]*f[Math.abs(V-C)];T+=V*G,N+=G}}const R=y[E]=Math.round(T/N);S[R]++}return[y,S]}static#l(e){const n=new Uint32Array(256);for(const i of e)n[i]++;return n}static#f(e){const n=e.length,i=new Uint8ClampedArray(n>>2);let r=-1/0,s=1/0;for(let l=0,c=i.length;l<c;l++){const d=i[l]=e[l<<2];r=Math.max(r,d),s=Math.min(s,d)}const a=255/(r-s);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-s)*a;return i}static#d(e){let n,i=-1/0,r=-1/0;const s=e.findIndex(c=>c!==0);let a=s,l=s;for(n=s;n<256;n++){const c=e[n];c>i&&(n-a>r&&(r=n-a,l=n-1),i=c,a=n)}for(n=l-1;n>=0&&!(e[n]>e[n+1]);n--);return n}static#h(e){const n=e,{width:i,height:r}=e,{maxDim:s}=this.#e;let a=i,l=r;if(i>s||r>s){let g=i,y=r,S=Math.log2(Math.max(i,r)/s);const w=Math.floor(S);S=S===w?w-1:w;for(let E=0;E<S;E++){a=Math.ceil(g/2),l=Math.ceil(y/2);const C=new OffscreenCanvas(a,l);C.getContext("2d").drawImage(e,0,0,g,y,0,0,a,l),g=a,y=l,e!==n&&e.close(),e=C.transferToImageBitmap()}const x=Math.min(s/a,s/l);a=Math.round(a*x),l=Math.round(l*x)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const f=d.getImageData(0,0,a,l).data;return[this.#f(f),a,l]}static extractContoursFromText(e,{fontFamily:n,fontStyle:i,fontWeight:r},s,a,l,c){let d=new OffscreenCanvas(1,1),f=d.getContext("2d",{alpha:!1});const p=200,g=f.font=`${i} ${r} ${p}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:C,width:T}=f.measureText(e),N=1.5,R=Math.ceil(Math.max(Math.abs(y)+Math.abs(S)||0,T)*N),I=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||p,Math.abs(E)+Math.abs(C)||p)*N);d=new OffscreenCanvas(R,I),f=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,R,I),f.fillStyle="black",f.fillText(e,R*(N-1)/2,I*(3-N)/2);const k=this.#f(f.getImageData(0,0,R,I).data),B=this.#l(k),z=this.#d(B),V=this.#s(k,R,I,z);return this.processDrawnLines({lines:{curves:V,width:R,height:I},pageWidth:s,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,n,i,r,s){const[a,l,c]=this.#h(e),[d,f]=this.#u(a,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(f),g=this.#s(d,l,c,p);return this.processDrawnLines({lines:{curves:g,width:l,height:c},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:a,areContours:l}){r%180!==0&&([n,i]=[i,n]);const{curves:c,width:d,height:f}=e,p=e.thickness??0,g=[],y=Math.min(n/d,i/f),S=y/n,w=y/i,x=[];for(const{points:C}of c){const T=a?this.#o(C):C;if(!T)continue;x.push(T);const N=T.length,R=new Float32Array(N),I=new Float32Array(3*(N===2?2:N-2));if(g.push({line:I,points:R}),N===2){R[0]=T[0]*S,R[1]=T[1]*w,I.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[k,B,z,V]=T;k*=S,B*=w,z*=S,V*=w,R.set([k,B,z,V],0),I.set([NaN,NaN,NaN,NaN,k,B],0);for(let G=4;G<N;G+=2){const W=R[G]=T[G]*S,oe=R[G+1]=T[G+1]*w;I.set(ve.createBezierPoints(k,B,z,V,W,oe),(G-2)*3),[k,B,z,V]=[z,V,W,oe]}}if(g.length===0)return null;const E=l?new hb:new jc;return E.build(g,n,i,1,r,l?0:p,s),{outline:E,newCurves:x,areContours:l,thickness:p,width:d,height:f}}static async compressSignature({outlines:e,areContours:n,thickness:i,width:r,height:s}){let a=1/0,l=-1/0,c=0;for(const T of e){c+=T.length;for(let N=2,R=T.length;N<R;N++){const I=T[N]-T[N-2];a=Math.min(a,I),l=Math.max(l,I)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const f=e.length,p=Gf+Ju*f,g=new Uint32Array(p);let y=0;g[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*f)*d.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=r,g[y++]=s,g[y++]=n?0:1,g[y++]=Math.max(0,Math.floor(i??0)),g[y++]=f,g[y++]=d.BYTES_PER_ELEMENT;for(const T of e)g[y++]=T.length-2,g[y++]=T[0],g[y++]=T[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(g);const x=d.prototype.constructor;for(const T of e){const N=new x(T.length-2);for(let R=2,I=T.length;R<I;R++)N[R-2]=T[R]-T[R-2];w.write(N)}w.close();const E=await new Response(S.readable).arrayBuffer(),C=new Uint8Array(E);return ED(C)}static async decompressSignature(e){try{const n=wj(e),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,l=0;for await(const T of i)a||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),a.set(T,l),l+=T.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const f=c[2],p=c[3],g=c[4]===0,y=c[5],S=c[6],w=c[7],x=[],E=(Gf+Ju*S)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(a.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(a.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(a.buffer,E);break}l=0;for(let T=0;T<S;T++){const N=c[Ju*T+Gf],R=new Float32Array(N+2);x.push(R);for(let I=0;I<Ju-1;I++)R[I]=c[Ju*T+Gf+I+1];for(let I=0;I<N;I++)R[I+2]=R[I]+C[l++]}return{areContours:g,thickness:y,outlines:x,width:f,height:p}}catch(n){return ke(`decompressSignature: ${n}`),null}}}class zA extends tO{constructor(){super(),super.updateProperties({fill:Me._defaultLineColor,"stroke-width":0})}clone(){const e=new zA;return e.updateAll(this),e}}class HA extends Dp{constructor(e){super(e),super.updateProperties({stroke:Me._defaultLineColor,"stroke-width":1})}clone(){const e=new HA(this._viewParameters);return e.updateAll(this),e}}class Mr extends tt{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=Ue.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Me.initialize(e,n),this._defaultDrawingOptions=new zA,this._defaultDrawnSignatureOptions=new HA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:s,areContours:a,description:l,uuid:c,heightInPage:d}=this.#i,{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,y=hl.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:Mr._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(y,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:r,height:s}=this.#i,a=Math.max(r,s),l=hl.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:i,width:r,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,r){const{x:s,y:a}=this,{outline:l}=this.#i=e;this.#e=l instanceof hb,this.description=i;let c;this.#e?c=Mr.getDefaultDrawingOptions():(c=Mr._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let f=n/d;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return hl.process(e,n,i,r,Mr._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return hl.extractContoursFromText(e,n,i,r,s,Mr._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return hl.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:Mr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Mr.getDefaultDrawingOptions():(this._drawingOptions=Mr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(s),e?(s.paths={lines:n,points:i},s.uuid=this.#n,s.isCopy=!0):s.lines=n,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,n,i,r,s,a){return a.areContours?hb.deserialize(e,n,i,r,s,a):jc.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){const r=await super.deserialize(e,n,i);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class o8 extends Me{#e=null;#t=null;#i=null;#n=null;#a=null;#s="";#r=null;#o=!1;#u=null;#l=!1;#f=!1;static _type="stamp";static _editorType=Ue.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Me.initialize(e,n)}static isHandlingMimeForPasting(e){return rb.includes(e)}static paste(e,n){n.pasteEditor({mode:Ue.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#d(e,n=!1){if(!e){this.remove();return}this.#e=e.bitmap,n||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#s=e.file.name),this.#m()}#h(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#h());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#d(r)).finally(()=>this.#h());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#d(r)).finally(()=>this.#h());return}const e=document.createElement("input");e.type="file",e.accept=rb.join(",");const n=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,r&&(this.#e=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},e)}#m(){const{div:e}=this;let{width:n,height:i}=this.#e;const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const c=Math.min(a*r/n,a*s/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=this.#r=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=n/r,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#f||(this.parent.addUndoableEditor(this),this.#f=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,n,i=!1){e||(e=224);const{width:r,height:s}=this.#e,a=new Or;let l=this.#e,c=r,d=s,f=null;if(n){if(r>n||s>n){const I=Math.min(n/r,n/s);c=Math.floor(r*I),d=Math.floor(s*I)}f=document.createElement("canvas");const g=f.width=Math.ceil(c*a.sx),y=f.height=Math.ceil(d*a.sy);this.#l||(l=this.#c(g,y));const S=f.getContext("2d");S.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":Mj.isDarkMode&&(w="#8f8f9d",x="#42414d");const E=15,C=E*a.sx,T=E*a.sy,N=new OffscreenCanvas(C*2,T*2),R=N.getContext("2d");R.fillStyle=w,R.fillRect(0,0,C*2,T*2),R.fillStyle=x,R.fillRect(0,0,C,T),R.fillRect(C,T,C,T),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,g,y),S.drawImage(l,0,0,l.width,l.height,0,0,g,y)}let p=null;if(i){let g,y;if(a.symmetric&&l.width<e&&l.height<e)g=l.width,y=l.height;else if(l=this.#e,r>e||s>e){const x=Math.min(e/r,e/s);g=Math.floor(r*x),y=Math.floor(s*x),this.#l||(l=this.#c(g,y))}const w=new OffscreenCanvas(g,y).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,g,y),p={width:g,height:y,data:w.getImageData(0,0,g,y).data}}return{canvas:f,width:c,height:d,imageData:p}}#c(e,n){const{width:i,height:r}=this.#e;let s=i,a=r,l=this.#e;for(;s>2*e||a>2*n;){const c=s,d=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(s,a);f.getContext("2d").drawImage(l,0,0,c,d,0,0,s,a),l=f.transferToImageBitmap()}return l}#p(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,s=new Or,a=Math.ceil(i*e*s.sx),l=Math.ceil(r*n*s.sy),c=this.#r;if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=this.#l?this.#e:this.#c(a,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,a,l)}#v(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#e,n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#l){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*Nl.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Nl.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,n,i){let r=null,s=!1;if(e instanceof ZD){const{data:{rect:w,rotation:x,id:E,structParent:C,popupRef:T,richText:N,contentsObj:R,creationDate:I,modificationDate:k},container:B,parent:{page:{pageNumber:z}},canvas:V}=e;let G,W;V?(delete e.canvas,{id:G,bitmap:W}=i.imageManager.getFromCanvas(B.id,V),V.remove()):(s=!0,e._hasNoCanvas=!0);const oe=(await n._structTree.getAriaAttributes(`${vl}${E}`))?.get("aria-label")||"";r=e={annotationType:Ue.STAMP,bitmapId:G,bitmap:W,pageIndex:z-1,rect:w.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:oe},isSvg:!1,structParent:C,popupRef:T,richText:N,comment:R?.str||null,creationDate:I,modificationDate:k}}const a=await super.deserialize(e,n,i),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:g}=e;s?(i.addMissingCanvas(e.id,a),a.#o=!0):f&&i.imageManager.isValidId(f)?(a.#t=f,c&&(a.#e=c)):a.#n=d,a.#l=p;const[y,S]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/S,g&&(a.altTextData=g),a._initialData=r,e.comment&&a.setCommentData(e),a.#f=!!r,a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=this.#b(i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(this.#t))n.stamps.set(this.#t,{area:a,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){const l=n.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#v(!1))}return i}#b(e){const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class us{#e;#t=!1;#i=null;#n=null;#a=null;#s=new Map;#r=!1;#o=!1;#u=!1;#l=null;#f=null;#d=null;#h=null;#g=null;#m=-1;#c;static _initialized=!1;static#p=new Map([fn,FA,o8,qt,Mr].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:f}){const p=[...us.#p.values()];if(!us._initialized){us._initialized=!0;for(const g of p)g.initialize(f,e)}e.registerEditorTypes(p),this.#c=e,this.pageIndex=n,this.div=i,this.#e=s,this.#i=a,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=r,this.#c.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===Ue.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#S(),e){case Ue.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ue.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ue.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===Ue.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const i of us.#p.values())n.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#v(){return this.#s.size!==0?this.#s.values():this.#c.getEditors(this.pageIndex)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const i of this.#v)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#c.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=this.#i;if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),this.#c.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1,this.#c._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const r=this.#c.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:c,timeStamp:d}=s,f=this.#m;if(d-f>500){this.#m=d;return}this.#m=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const g=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const S=new RegExp(`^${mc}[0-9]+$`);for(const x of g)if(S.test(x.id)){y=x.id;break}if(!y)return;const w=this.#s.get(y);w?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick(s))},{signal:r,capture:!0})}const e=this.#i,n=[];if(e){const r=new Map,s=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){r.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=s.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=r.get(c),d&&(this.#c.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of us.#p.values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(n),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#h){this.#h=new AbortController;const e=this.#c.combinedSignal(this.#h);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#h&&(this.#h.abort(),this.#h=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#c.unselectAll();const{target:n}=e;if(n===this.#d.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#d.div.contains(n)){const{isMac:i}=rn.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),qt.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:n}=e;n&&this.#c.isDeletedAnnotationElement(n)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e),Me.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),n.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getEditorByUID(e){for(const n of this.#s.values())if(n.uid===e)return n;return null}getNextId(){return this.#c.getId()}get#y(){return us.#p.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#E(e){const n=this.#y;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:i,offsetY:r}=this.#_(),s=this.getNextId(),a=this.#E({parent:this,id:s,x:i,y:r,uiManager:this.#c,isCentered:!0,...n});a&&this.add(a)}async deserialize(e){return await us.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,n,i={}){const r=this.getNextId(),s=this.#E({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:n,...i});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:e,y:n,width:i,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,n),l=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,n+r),d=(s+l)/2-e,f=(a+c)/2-n,[p,g]=this.viewport.rotation%180===0?[d,f]:[f,d];return{offsetX:p,offsetY:g}}addNewEditor(e={}){this.createAndAddNewEditor(this.#_(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:n}=rn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#r||(this.#r=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#c.getMode();if(i===Ue.STAMP||i===Ue.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===Ue.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:n}=rn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#r=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const i=this.#c.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#f=null,this.commitOrRemove())},{signal:n}),this.#y.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&(this.#f=n);return}this.#f&&setTimeout(()=>{this.#f?.focus(),this.#f=null},0)}endDrawingSession(e=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#f=null,this.#y.endDrawing(e)):null}findNewParent(e,n,i){const r=this.#c.findParent(n,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#c.removeLayer(this)}#S(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,no(this.div,e);for(const n of this.#c.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#S();const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,no(this.div,{rotation:i}),n!==i)for(const r of this.#s.values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#c.viewParameters.realScale}}class xn{#e=null;#t=new Map;#i=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const n of this.#t.values())n.remove(),e.append(n);this.#e=e}}static get _svgFactory(){return Le(this,"_svgFactory",new Eh)}static#a(e,[n,i,r,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*n}%`,a.width=`${100*r}%`,a.height=`${100*s}%`}#s(){const e=xn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,n){const i=xn._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${n}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=xn._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),r}#o(e,n){for(const[i,r]of Object.entries(n))r===null?e.removeAttribute(i):e.setAttribute(i,r)}draw(e,n=!1,i=!1){const r=xn.#n++,s=this.#s(),a=xn._svgFactory.createElement("defs");s.append(a);const l=xn._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(r,l);const d=i?this.#r(a,c):null,f=xn._svgFactory.createElement("use");return s.append(f),f.setAttribute("href",`#${c}`),this.updateProperties(s,e),this.#t.set(r,s),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,n){const i=xn.#n++,r=this.#s(),s=xn._svgFactory.createElement("defs");r.append(s);const a=xn._svgFactory.createElement("path");s.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(n){const p=xn._svgFactory.createElement("mask");s.append(p),c=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",c),p.setAttribute("maskUnits","objectBoundingBox");const g=xn._svgFactory.createElement("rect");p.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=xn._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${l}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=xn._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const f=d.cloneNode();return r.append(f),d.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(i,r),i}finalizeDraw(e,n){this.#i.delete(e),this.updateProperties(e,n)}updateProperties(e,n){if(!n)return;const{root:i,bbox:r,rootClass:s,path:a}=n,l=typeof e=="number"?this.#t.get(e):e;if(l){if(i&&this.#o(l,i),r&&xn.#a(l,r),s){const{classList:c}=l;for(const[d,f]of Object.entries(s))c.toggle(d,f)}if(a){const d=l.firstElementChild.firstElementChild;this.#o(d,a)}}}updateParent(e,n){if(n===this)return;const i=this.#t.get(e);i&&(n.#e.append(i),this.#t.delete(e),n.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:db};globalThis.pdfjsLib={AbortException:ua,AnnotationEditorLayer:us,AnnotationEditorParamsType:Xe,AnnotationEditorType:Ue,AnnotationEditorUIManager:ca,AnnotationLayer:BA,AnnotationMode:ra,AnnotationType:Wt,applyOpacity:Rj,build:U$,ColorPicker:Gi,createValidAbsoluteUrl:SD,CSSConstants:Pj,DOMSVGFactory:Eh,DrawLayer:xn,FeatureTest:rn,fetchData:zc,findContrastColor:Nj,getDocument:VD,getFilenameFromUrl:_j,getPdfFilenameFromUrl:xj,getRGB:Gc,getUuid:xD,getXfaPageViewport:Tj,GlobalWorkerOptions:Cl,ImageKind:lh,InvalidPDFException:nb,isDataScheme:Rp,isPdfFile:MA,isValidExplicitDest:Gj,MathClamp:Vn,noContextMenu:Yi,normalizeUnicode:Aj,OPS:gc,OutputScale:Or,PasswordResponses:dj,PDFDataRangeTransport:jD,PDFDateString:ib,PDFWorker:yc,PermissionFlag:cj,PixelsPerInch:Nl,RenderingCancelledException:CA,renderRichText:CD,ResponseException:_h,setLayerDimensions:no,shadow:Le,SignatureExtractor:hl,stopEvent:Ut,SupportedImageMimeTypes:rb,TextLayer:bi,TouchManager:Np,updateUrlHash:wD,Util:me,VerbosityLevel:Cp,version:XD,XfaLayer:TD};Cl.workerSrc=`https://unpkg.com/pdfjs-dist@${XD}/build/pdf.worker.min.mjs`;const nO=async t=>{try{const e=window.atob(t),n=e.length,i=new Uint8Array(n);for(let c=0;c<n;c++)i[c]=e.charCodeAt(c);const s=await VD({data:i,isEvalSupported:!1}).promise,a=[],l=s.numPages;for(let c=1;c<=l;c++){const d=await s.getPage(c),p=d.getViewport({scale:2}),g=document.createElement("canvas"),y=g.getContext("2d");if(!y)continue;g.height=p.height,g.width=p.width;const S={canvasContext:y,viewport:p};await d.render(S).promise;const x=g.toDataURL("image/jpeg",.85).split(",")[1];a.push(x)}return a}catch(e){throw console.error("PDF Conversion Failed",e),new Error("Failed to convert PDF to image for analysis.")}},l8=t=>{if(t.length===0)return{patientName:"",reportDate:"",labName:"",results:[]};const e=t.find(a=>a.patientName)?.patientName||"",n=t.find(a=>a.reportDate)?.reportDate||"",i=t.find(a=>a.labName)?.labName||"",s=t.flatMap(a=>a.results||[]).filter((a,l,c)=>c.findIndex(d=>d.standardizedName===a.standardizedName)===l);return{patientName:e,reportDate:n,labName:i,results:s.sort((a,l)=>a.standardizedName.localeCompare(l.standardizedName))}},O1=async(t,e,n,i)=>{if(!n.modelId)throw new Error("No AI Model selected. Please go to Settings and configure your AI provider.");const r=i?.processingMode||"page-by-page",s=i?.onProgress,a=Array.isArray(t)?t:[t];if(n.provider==="openai"){let l=[],c=e;if(e==="application/pdf")try{const d=await nO(a[0]);if(d.length===0)throw new Error("Failed to extract images from PDF");l=d,c="image/jpeg"}catch(d){throw console.error("PDF Conversion Error:",d),new Error("Failed to convert PDF for OpenAI analysis. Please try uploading an image directly.")}else l=a;if(r==="page-by-page"&&l.length>1){const d=[];for(let f=0;f<l.length;f++){s&&s(f+1,l.length);const p=await o1([l[f]],c,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId);d.push(p)}return l8(d)}return o1(l,c,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId)}else return sj(a[0],e,n.apiKey,n.modelId)},u8=async(t,e,n)=>n.provider==="openai"?uj(t,e,n.apiKey,n.baseUrl||"https://api.openai.com/v1",n.modelId):aj(t,e,n.apiKey,n.modelId),Rle=async t=>oj(t.apiKey),iO="MediTimelineDB",li="reports",da="mappings",kr="profiles",GA=3,c8=()=>new Promise((t,e)=>{const n=indexedDB.open(iO,GA);n.onerror=()=>e(n.error),n.onsuccess=()=>t(),n.onupgradeneeded=i=>{const r=i.target.result;r.objectStoreNames.contains(li)||r.createObjectStore(li,{keyPath:"id"}),r.objectStoreNames.contains(da)||r.createObjectStore(da,{keyPath:"id"}),r.objectStoreNames.contains(kr)||r.createObjectStore(kr,{keyPath:"id"})}}),Cs=()=>new Promise((t,e)=>{const n=indexedDB.open(iO,GA);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result)}),d8=async t=>{const e=await Cs();return new Promise((n,i)=>{const r=e.transaction(kr,"readwrite");r.objectStore(kr).put(t),r.oncomplete=()=>n(),r.onerror=()=>i(r.error)})},pb=async()=>{const t=await Cs();return new Promise((e,n)=>{const r=t.transaction(kr,"readonly").objectStore(kr).getAll();r.onsuccess=()=>e(r.result),r.onerror=()=>n(r.error)})},f8=async t=>{const e=await Cs(),n=await new Promise((i,r)=>{const a=e.transaction(li,"readonly").objectStore(li).getAll();a.onsuccess=()=>i(a.result),a.onerror=()=>r(a.error)});return new Promise((i,r)=>{const s=e.transaction([kr,li],"readwrite");s.objectStore(kr).delete(t);const a=s.objectStore(li);n.filter(l=>l.profileId===t).forEach(l=>a.delete(l.id)),s.oncomplete=()=>i(),s.onerror=()=>r(s.error)})},as=async t=>{const e=await Cs();return new Promise((n,i)=>{const a=e.transaction(li,"readwrite").objectStore(li).put(t);a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},mb=async()=>{const t=await Cs();return new Promise((e,n)=>{const s=t.transaction(li,"readonly").objectStore(li).getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})},h8=async t=>{const e=await Cs();return new Promise((n,i)=>{const a=e.transaction(li,"readwrite").objectStore(li).delete(t);a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},p8=async t=>{const e=await Cs();return new Promise((n,i)=>{const a=e.transaction(da,"readwrite").objectStore(da).put({id:"grouped_mapping",data:t});a.onsuccess=()=>n(),a.onerror=()=>i(a.error)})},gb=async()=>{const t=await Cs();return new Promise((e,n)=>{const s=t.transaction(da,"readonly").objectStore(da).get("grouped_mapping");s.onsuccess=()=>e(s.result?.data||{}),s.onerror=()=>n(s.error)})},Nle=async()=>{const t=await mb(),e=await gb(),n=await pb(),i={version:GA,timestamp:Date.now(),profiles:n,reports:t,mapping:e};return JSON.stringify(i)},Ile=async t=>{const e=JSON.parse(t);if(!e.reports||!Array.isArray(e.reports))throw new Error("Invalid backup file format");const i=(await Cs()).transaction([li,da,kr],"readwrite");if(e.profiles&&Array.isArray(e.profiles)){const a=i.objectStore(kr);e.profiles.forEach(l=>a.put(l))}const r=i.objectStore(li);let s=0;for(const a of e.reports)r.put(a),s++;return e.mapping&&i.objectStore(da).put({id:"grouped_mapping",data:e.mapping}),new Promise((a,l)=>{i.oncomplete=()=>a(s),i.onerror=()=>l(i.error)})};function m8(t){const e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.onload=()=>{window.gapi.load("client:picker",async()=>{await window.gapi.client.init({discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})})},document.body.appendChild(e);const n=document.createElement("script");n.src="https://accounts.google.com/gsi/client",n.onload=()=>{console.warn("Google Client ID not found. Drive sync will be unavailable.")},document.body.appendChild(n)}const k1=()=>{const t=[],e=new Date,n=(a,l)=>{const c=new Date(a);return c.setMonth(c.getMonth()-l),c.toISOString().split("T")[0]},i=(a,l,c)=>l!==void 0&&a<l?"LOW":c!==void 0&&a>c?"HIGH":"NORMAL",r=(a=1)=>Math.random()*a*2-a,s=[36,33,30,27,24,21,18,15,12,9,6,3,0];for(let a=0;a<s.length;a++){const l=s[a],c=1-a/(s.length-1),d=260-60*c,f=180-70*c,p=35+15*c,g=200-60*c,y=d+r(10),S=f+r(8),w=p+r(3),x=g+r(15),E=14.5+r(.8),C=7+r(1.5),T=5+r(.3),N=250+r(40),R=6.2-.6*c+r(.1),I=110-20*c+r(10),k=12+23*c+r(2),B=300+r(50);let z=25,V=22;a>4&&a<8&&(z=65,V=50);const G=z+r(5),W=V+r(4),oe=2+r(.8),ae=.9+r(.1),pe=14+r(3),F=140+r(2),j=4.2+r(.3),re=[{testName:"Hemoglobin",standardizedName:"Hemoglobin",value:Number(E.toFixed(1)),unit:"g/dL",status:i(E,13.5,17.5),category:"Hematology",referenceRange:{min:13.5,max:17.5},description:"Oxygen-carrying protein in red blood cells."},{testName:"WBC Count",standardizedName:"WBC Count",value:Number(C.toFixed(1)),unit:"K/uL",status:i(C,4.5,11),category:"Hematology",referenceRange:{min:4.5,max:11},description:"Cells that fight infection."},{testName:"RBC Count",standardizedName:"RBC Count",value:Number(T.toFixed(2)),unit:"M/uL",status:i(T,4.5,5.9),category:"Hematology",referenceRange:{min:4.5,max:5.9},description:"Red blood cell count."},{testName:"Platelet Count",standardizedName:"Platelet Count",value:Math.round(N),unit:"K/uL",status:i(N,150,450),category:"Hematology",referenceRange:{min:150,max:450},description:"Cells involved in clotting."},{testName:"Total Cholesterol",standardizedName:"Total Cholesterol",value:Math.round(y),unit:"mg/dL",status:i(y,void 0,200),category:"Lipid Profile",referenceRange:{max:200},description:"Sum of all cholesterol levels."},{testName:"LDL Cholesterol",standardizedName:"LDL Cholesterol",value:Math.round(S),unit:"mg/dL",status:i(S,void 0,100),category:"Lipid Profile",referenceRange:{max:100},description:"BAD cholesterol. High levels increase heart risk."},{testName:"HDL Cholesterol",standardizedName:"HDL Cholesterol",value:Math.round(w),unit:"mg/dL",status:i(w,40,void 0),category:"Lipid Profile",referenceRange:{min:40},description:"GOOD cholesterol. Protects against heart disease."},{testName:"Triglycerides",standardizedName:"Triglycerides",value:Math.round(x),unit:"mg/dL",status:i(x,void 0,150),category:"Lipid Profile",referenceRange:{max:150},description:"Fat in the blood, linked to heart disease."},{testName:"HbA1c",standardizedName:"HbA1c",value:Number(R.toFixed(1)),unit:"%",status:i(R,void 0,5.7),category:"Diabetes",referenceRange:{max:5.7},description:"Average blood sugar over past 3 months."},{testName:"Fasting Glucose",standardizedName:"Glucose (Fasting)",value:Math.round(I),unit:"mg/dL",status:i(I,70,99),category:"Diabetes",referenceRange:{min:70,max:99},description:"Blood sugar level after at least 8 hours of fasting."},{testName:"Vitamin D, 25-OH",standardizedName:"Vitamin D",value:Math.round(k),unit:"ng/mL",status:i(k,30,100),category:"Vitamins",referenceRange:{min:30,max:100},description:"Crucial for bone health and immunity."},{testName:"Vitamin B12",standardizedName:"Vitamin B12",value:Math.round(B),unit:"pg/mL",status:i(B,200,900),category:"Vitamins",referenceRange:{min:200,max:900},description:"Important for nerve function and blood."},{testName:"TSH",standardizedName:"TSH",value:Number(oe.toFixed(2)),unit:"mIU/L",status:i(oe,.4,4.5),category:"Thyroid Profile",referenceRange:{min:.4,max:4.5},description:"Thyroid Stimulating Hormone."},{testName:"ALT (SGPT)",standardizedName:"ALT",value:Math.round(G),unit:"U/L",status:i(G,7,55),category:"Liver Function",referenceRange:{min:7,max:55},description:"Enzyme found mostly in the liver."},{testName:"AST (SGOT)",standardizedName:"AST",value:Math.round(W),unit:"U/L",status:i(W,8,48),category:"Liver Function",referenceRange:{min:8,max:48},description:"Liver enzyme, also found in muscles."},{testName:"Creatinine",standardizedName:"Creatinine",value:Number(ae.toFixed(2)),unit:"mg/dL",status:i(ae,.7,1.3),category:"Kidney Function",referenceRange:{min:.7,max:1.3},description:"Waste product filtered by kidneys."},{testName:"Blood Urea Nitrogen",standardizedName:"BUN",value:Math.round(pe),unit:"mg/dL",status:i(pe,7,20),category:"Kidney Function",referenceRange:{min:7,max:20},description:"Waste nitrogen in blood."},{testName:"Sodium",standardizedName:"Sodium",value:Math.round(F),unit:"mmol/L",status:i(F,136,145),category:"Electrolytes",referenceRange:{min:136,max:145},description:"Key electrolyte for fluid balance."},{testName:"Potassium",standardizedName:"Potassium",value:Number(j.toFixed(1)),unit:"mmol/L",status:i(j,3.5,5.2),category:"Electrolytes",referenceRange:{min:3.5,max:5.2},description:"Key electrolyte for nerve/muscle function."}];t.push({id:`demo-report-${a}`,profileId:"demo",fileName:`Lab_Report_${n(e,l)}.pdf`,fileType:"application/pdf",uploadDate:Date.now()-l*30*24*60*60*1e3,status:Jt.COMPLETED,isDemo:!0,rawBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",data:{patientName:"Demo User",reportDate:n(e,l),labName:a%2===0?"City General Lab":"Metropolis Diagnostics",results:re}})}return t},g8=({onFileSelect:t})=>{const e=M.useRef(null),[n,i]=M.useState(!1),r=c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?i(!0):c.type==="dragleave"&&i(!1)},s=c=>{if(c.preventDefault(),c.stopPropagation(),i(!1),c.dataTransfer.files&&c.dataTransfer.files.length>0){const d=Array.from(c.dataTransfer.files);t(d)}},a=c=>{if(c.preventDefault(),c.target.files&&c.target.files.length>0){const d=Array.from(c.target.files);t(d)}},l=()=>{e.current?.click()};return D.jsxs("div",{className:`relative w-full border-2 border-dashed rounded-xl p-8 transition-all duration-200 ease-in-out text-center cursor-pointer
        ${n?"border-blue-500 bg-blue-50":"border-slate-300 hover:border-slate-400 bg-white"}
      `,onDragEnter:r,onDragLeave:r,onDragOver:r,onDrop:s,onClick:l,children:[D.jsx("input",{ref:e,type:"file",className:"hidden",accept:"image/png,image/jpeg,image/jpg,application/pdf",multiple:!0,onChange:a}),D.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[D.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:D.jsx(Vz,{className:"w-8 h-8 text-blue-600"})}),D.jsxs("div",{children:[D.jsx("p",{className:"text-lg font-semibold text-slate-700",children:"Click to upload or drag & drop"}),D.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Upload multiple images or PDFs (Max 10MB each)"})]}),D.jsxs("div",{className:"flex gap-4 mt-2",children:[D.jsxs("div",{className:"flex items-center text-xs text-slate-400",children:[D.jsx(dz,{className:"w-3 h-3 mr-1"})," Images"]}),D.jsxs("div",{className:"flex items-center text-xs text-slate-400",children:[D.jsx(F0,{className:"w-3 h-3 mr-1"})," PDFs"]})]})]})]})},v8=({reports:t,onDelete:e,onSelect:n,selectedId:i,analysisProgress:r})=>t.length===0?D.jsxs("div",{className:"text-center py-10 px-4 text-slate-400",children:[D.jsx(F0,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),D.jsx("p",{className:"text-sm",children:"No reports uploaded yet."})]}):D.jsx("div",{className:"space-y-3",children:t.map(s=>D.jsxs("div",{className:`
            group relative p-4 rounded-xl border transition-all duration-200 cursor-pointer
            ${i===s.id?"bg-blue-50 border-blue-300 shadow-sm":"bg-white border-slate-200 hover:border-blue-200 hover:shadow-sm"}
          `,onClick:()=>n(s.id),children:[s.isDemo&&D.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-blue-100 text-blue-600 text-[9px] font-bold px-1.5 py-0.5 rounded uppercase",children:[D.jsx(ac,{className:"w-2.5 h-2.5"})," Demo"]}),D.jsxs("div",{className:"flex justify-between items-start mb-2",children:[D.jsxs("div",{className:"flex items-center space-x-2",children:[D.jsx("div",{className:`
                p-2 rounded-lg 
                ${s.status===Jt.COMPLETED?"bg-green-100 text-green-600":s.status===Jt.ERROR?"bg-red-100 text-red-600":s.status===Jt.PROCESSING?"bg-amber-100 text-amber-600":"bg-slate-100 text-slate-500"}
              `,children:D.jsx(F0,{className:"w-5 h-5"})}),D.jsxs("div",{className:"overflow-hidden",children:[D.jsx("h4",{className:"font-medium text-slate-900 truncate pr-4 text-sm",title:s.fileName,children:s.data?.labName||s.fileName}),D.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:[D.jsx(G3,{className:"w-3 h-3 mr-1"}),s.data?.reportDate||"Unknown Date"]})]})]}),!s.isDemo&&D.jsx("button",{onClick:a=>{a.stopPropagation(),e(s.id)},className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",children:D.jsx(MI,{className:"w-4 h-4"})})]}),s.tags&&s.tags.length>0&&D.jsxs("div",{className:"flex flex-wrap gap-1 mt-2 mb-1",children:[s.tags.slice(0,3).map(a=>D.jsxs("span",{className:"text-[9px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded border border-blue-100 flex items-center gap-0.5",children:[D.jsx(CI,{className:"w-2 h-2"})," ",a]},a)),s.tags.length>3&&D.jsxs("span",{className:"text-[9px] bg-slate-50 text-slate-500 px-1.5 py-0.5 rounded border border-slate-100",children:["+",s.tags.length-3]})]}),D.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-100",children:[D.jsxs("div",{className:"flex items-center space-x-1",children:[s.status===Jt.QUEUED&&D.jsxs(D.Fragment,{children:[D.jsx(uz,{className:"w-3 h-3 text-slate-400 animate-pulse"}),D.jsx("span",{className:"text-[10px] font-medium text-slate-500 uppercase tracking-wide",children:"In Queue"})]}),s.status===Jt.PROCESSING&&D.jsxs(D.Fragment,{children:[D.jsx(ez,{className:"w-3 h-3 text-amber-500 animate-spin"}),D.jsx("span",{className:"text-[10px] font-medium text-amber-600 uppercase tracking-wide",children:r?`Processing ${r.current}/${r.total}...`:"Processing..."})]}),s.status===Jt.COMPLETED&&D.jsxs(D.Fragment,{children:[D.jsx(J3,{className:"w-3 h-3 text-green-500"}),D.jsx("span",{className:"text-[10px] font-medium text-green-600 uppercase tracking-wide",children:"Completed"})]}),s.status===Jt.ERROR&&D.jsxs(D.Fragment,{children:[D.jsx(K3,{className:"w-3 h-3 text-red-500"}),D.jsx("span",{className:"text-[10px] font-medium text-red-600 uppercase tracking-wide",title:s.errorMessage,children:s.errorMessage||"Error"})]})]}),s.data?.results&&D.jsxs("span",{className:"text-[10px] font-medium bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full",children:[s.data.results.length," markers"]})]})]},s.id))});function rO(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=rO(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function rt(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=rO(t))&&(i&&(i+=" "),i+=e);return i}var y8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qA(t){if(typeof t!="string")return!1;var e=y8;return e.includes(t)}var b8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],A8=new Set(b8);function sO(t){return typeof t!="string"?!1:A8.has(t)}function aO(t){return typeof t=="string"&&t.startsWith("data-")}function cr(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(sO(n)||aO(n))&&(e[n]=t[n]);return e}function Op(t){if(t==null)return null;if(M.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return cr(e)}return typeof t=="object"&&!Array.isArray(t)?cr(t):null}function Rn(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(sO(n)||aO(n)||qA(n))&&(e[n]=t[n]);return e}function S8(t){return t==null?null:M.isValidElement(t)?Rn(t.props):typeof t=="object"&&!Array.isArray(t)?Rn(t):null}var w8=["children","width","height","viewBox","className","style","title","desc"];function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vb.apply(null,arguments)}function _8(t,e){if(t==null)return{};var n,i,r=x8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var oO=M.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:a,style:l,title:c,desc:d}=t,f=_8(t,w8),p=s||{width:i,height:r,x:0,y:0},g=rt("recharts-surface",a);return M.createElement("svg",vb({},Rn(f),{className:g,width:i,height:r,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),M.createElement("title",null,c),M.createElement("desc",null,d),n)}),E8=["children","className"];function yb(){return yb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yb.apply(null,arguments)}function T8(t,e){if(t==null)return{};var n,i,r=C8(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C8(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Ei=M.forwardRef((t,e)=>{var{children:n,className:i}=t,r=T8(t,E8),s=rt("recharts-layer",i);return M.createElement("g",yb({className:s},Rn(r),{ref:e}),n)}),lO=_I(),M8=M.createContext(null);function vt(t){return function(){return t}}const uO=Math.cos,Th=Math.sin,hr=Math.sqrt,Ch=Math.PI,kp=2*Ch,bb=Math.PI,Ab=2*bb,Ha=1e-6,P8=Ab-Ha;function cO(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function R8(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cO;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class N8{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cO:R8(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=i-e,d=r-n,f=a-e,p=l-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Ha)if(!(Math.abs(p*c-d*f)>Ha)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let y=i-a,S=r-l,w=c*c+d*d,x=y*y+S*S,E=Math.sqrt(w),C=Math.sqrt(g),T=s*Math.tan((bb-Math.acos((w+g-x)/(2*E*C)))/2),N=T/C,R=T/E;Math.abs(N-1)>Ha&&this._append`L${e+N*f},${n+N*p}`,this._append`A${s},${s},0,0,${+(p*y>f*S)},${this._x1=e+R*c},${this._y1=n+R*d}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),c=i*Math.sin(r),d=e+l,f=n+c,p=1^a,g=a?r-s:s-r;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Ha||Math.abs(this._y1-f)>Ha)&&this._append`L${d},${f}`,i&&(g<0&&(g=g%Ab+Ab),g>P8?this._append`A${i},${i},0,1,${p},${e-l},${n-c}A${i},${i},0,1,${p},${this._x1=d},${this._y1=f}`:g>Ha&&this._append`A${i},${i},0,${+(g>=bb)},${p},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function VA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new N8(e)}function jA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dO(t){this._context=t}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Lp(t){return new dO(t)}function fO(t){return t[0]}function hO(t){return t[1]}function pO(t,e){var n=vt(!0),i=null,r=Lp,s=null,a=VA(l);t=typeof t=="function"?t:t===void 0?fO:vt(t),e=typeof e=="function"?e:e===void 0?hO:vt(e);function l(c){var d,f=(c=jA(c)).length,p,g=!1,y;for(i==null&&(s=r(y=a())),d=0;d<=f;++d)!(d<f&&n(p=c[d],d,c))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,d,c),+e(p,d,c));if(y)return s=null,y+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,i!=null&&(s=r(i)),l):r},l.context=function(c){return arguments.length?(c==null?i=s=null:s=r(i=c),l):i},l}function qf(t,e,n){var i=null,r=vt(!0),s=null,a=Lp,l=null,c=VA(d);t=typeof t=="function"?t:t===void 0?fO:vt(+t),e=typeof e=="function"?e:vt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?hO:vt(+n);function d(p){var g,y,S,w=(p=jA(p)).length,x,E=!1,C,T=new Array(w),N=new Array(w);for(s==null&&(l=a(C=c())),g=0;g<=w;++g){if(!(g<w&&r(x=p[g],g,p))===E)if(E=!E)y=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),S=g-1;S>=y;--S)l.point(T[S],N[S]);l.lineEnd(),l.areaEnd()}E&&(T[g]=+t(x,g,p),N[g]=+e(x,g,p),l.point(i?+i(x,g,p):T[g],n?+n(x,g,p):N[g]))}if(C)return l=null,C+""||null}function f(){return pO().defined(r).curve(a).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:vt(+p),i=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:vt(+p),d):t},d.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:vt(+p),d):i},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:vt(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:vt(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:vt(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(i).y(e)},d.defined=function(p){return arguments.length?(r=typeof p=="function"?p:vt(!!p),d):r},d.curve=function(p){return arguments.length?(a=p,s!=null&&(l=a(s)),d):a},d.context=function(p){return arguments.length?(p==null?s=l=null:l=a(s=p),d):s},d}class mO{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function I8(t){return new mO(t,!0)}function D8(t){return new mO(t,!1)}const $A={draw(t,e){const n=hr(e/Ch);t.moveTo(n,0),t.arc(0,0,n,0,kp)}},O8={draw(t,e){const n=hr(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},gO=hr(1/3),k8=gO*2,L8={draw(t,e){const n=hr(e/k8),i=n*gO;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},U8={draw(t,e){const n=hr(e),i=-n/2;t.rect(i,i,n,n)}},B8=.8908130915292852,vO=Th(Ch/10)/Th(7*Ch/10),F8=Th(kp/10)*vO,z8=-uO(kp/10)*vO,H8={draw(t,e){const n=hr(e*B8),i=F8*n,r=z8*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=kp*s/5,l=uO(a),c=Th(a);t.lineTo(c*n,-l*n),t.lineTo(l*i-c*r,c*i+l*r)}t.closePath()}},sy=hr(3),G8={draw(t,e){const n=-hr(e/(sy*3));t.moveTo(0,n*2),t.lineTo(-sy*n,-n),t.lineTo(sy*n,-n),t.closePath()}},Fi=-.5,zi=hr(3)/2,Sb=1/hr(12),q8=(Sb/2+1)*3,V8={draw(t,e){const n=hr(e/q8),i=n/2,r=n*Sb,s=i,a=n*Sb+n,l=-s,c=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(Fi*i-zi*r,zi*i+Fi*r),t.lineTo(Fi*s-zi*a,zi*s+Fi*a),t.lineTo(Fi*l-zi*c,zi*l+Fi*c),t.lineTo(Fi*i+zi*r,Fi*r-zi*i),t.lineTo(Fi*s+zi*a,Fi*a-zi*s),t.lineTo(Fi*l+zi*c,Fi*c-zi*l),t.closePath()}};function j8(t,e){let n=null,i=VA(r);t=typeof t=="function"?t:vt(t||$A),e=typeof e=="function"?e:vt(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:vt(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:vt(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function Mh(){}function Ph(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yO(t){this._context=t}yO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ph(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ph(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $8(t){return new yO(t)}function bO(t){this._context=t}bO.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ph(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y8(t){return new bO(t)}function AO(t){this._context=t}AO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ph(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X8(t){return new AO(t)}function SO(t){this._context=t}SO.prototype={areaStart:Mh,areaEnd:Mh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function K8(t){return new SO(t)}function L1(t){return t<0?-1:1}function U1(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(s*r+a*i)/(i+r);return(L1(s)+L1(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function B1(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ay(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,l=(s-i)/3;t._context.bezierCurveTo(i+l,r+l*e,s-l,a-l*n,s,a)}function Rh(t){this._context=t}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ay(this,this._t0,B1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ay(this,B1(this,n=U1(this,t,e)),n);break;default:ay(this,this._t0,n=U1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function wO(t){this._context=new _O(t)}(wO.prototype=Object.create(Rh.prototype)).point=function(t,e){Rh.prototype.point.call(this,e,t)};function _O(t){this._context=t}_O.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function W8(t){return new Rh(t)}function J8(t){return new wO(t)}function xO(t){this._context=t}xO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=F1(t),r=F1(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function F1(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function Q8(t){return new xO(t)}function Up(t,e){this._context=t,this._t=e}Up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Z8(t){return new Up(t,.5)}function eY(t){return new Up(t,0)}function tY(t){return new Up(t,1)}function ro(t,e){if((a=t.length)>1)for(var n=1,i,r,s=t[e[0]],a,l=s.length;n<a;++n)for(r=s,s=t[e[n]],i=0;i<l;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function wb(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function nY(t,e){return t[e]}function iY(t){const e=[];return e.key=t,e}function rY(){var t=vt([]),e=wb,n=ro,i=nY;function r(s){var a=Array.from(t.apply(this,arguments),iY),l,c=a.length,d=-1,f;for(const p of s)for(l=0,++d;l<c;++l)(a[l][d]=[0,+i(p,a[l].key,d,s)]).data=p;for(l=0,f=jA(e(a));l<c;++l)a[f[l]].index=l;return n(a,f),a}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:vt(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:vt(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?wb:typeof s=="function"?s:vt(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??ro,r):n},r}function sY(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,a;r<s;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}ro(t,e)}}function aY(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var a=0,l=0;a<r;++a)l+=t[a][n][1]||0;i[n][1]+=i[n][0]=-l/2}ro(t,e)}}function oY(t,e){if(!(!((a=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,a;i<s;++i){for(var l=0,c=0,d=0;l<a;++l){for(var f=t[e[l]],p=f[i][1]||0,g=f[i-1][1]||0,y=(p-g)/2,S=0;S<l;++S){var w=t[e[S]],x=w[i][1]||0,E=w[i-1][1]||0;y+=x-E}c+=p,d+=y*p}r[i-1][1]+=r[i-1][0]=n,c&&(n-=d/c)}r[i-1][1]+=r[i-1][0]=n,ro(t,e)}}var oy={},ly={},z1;function lY(){return z1||(z1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(ly)),ly}var uy={},H1;function EO(){return H1||(H1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(uy)),uy}var cy={},G1;function YA(){return G1||(G1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(cy)),cy}var dy={},fy={},q1;function uY(){return q1||(q1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(fy)),fy}var V1;function XA(){return V1||(V1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uY(),n=YA();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const s=[],a=r.length;if(a===0)return s;let l=0,c="",d="",f=!1;for(r.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const p=r[l];d?p==="\\"&&l+1<a?(l++,c+=r[l]):p===d?d="":c+=p:f?p==='"'||p==="'"?d=p:p==="]"?(f=!1,s.push(c),c=""):c+=p:p==="["?(f=!0,c&&(s.push(c),c="")):p==="."?c&&(s.push(c),c=""):c+=p,l++}return c&&s.push(c),s}t.toPath=i})(dy)),dy}var j1;function KA(){return j1||(j1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lY(),n=EO(),i=YA(),r=XA();function s(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return d;const f=l[c];return f===void 0?n.isDeepKey(c)?s(l,r.toPath(c),d):d:f}case"number":case"symbol":{typeof c=="number"&&(c=i.toKey(c));const f=l[c];return f===void 0?d:f}default:{if(Array.isArray(c))return a(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return d;const f=l[c];return f===void 0?d:f}}}function a(l,c,d){if(c.length===0)return d;let f=l;for(let p=0;p<c.length;p++){if(f==null||e.isUnsafeProperty(c[p]))return d;f=f[c[p]]}return f===void 0?d:f}t.get=s})(oy)),oy}var hy,$1;function cY(){return $1||($1=1,hy=KA().get),hy}var dY=cY();const Bp=Br(dY);var fY=4;function oa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fY,n=10**e,i=Math.round(t*n)/n;return Object.is(i,-0)?0:i}function Lt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.reduce((r,s,a)=>{var l=n[a-1];return typeof l=="string"?r+l+s:l!==void 0?r+oa(l)+s:r+s},"")}var qi=t=>t===0?0:t>0?1:-1,Xi=t=>typeof t=="number"&&t!=+t,bs=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,xe=t=>(typeof t=="number"||t instanceof Number)&&!Xi(t),Un=t=>xe(t)||typeof t=="string",hY=0,Ac=t=>{var e=++hY;return"".concat(t||"").concat(e)},fa=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(e)&&typeof e!="string")return i;var s;if(bs(e)){if(n==null)return i;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Xi(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},TO=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[String(t[i])])n[String(t[i])]=!0;else return!0;return!1};function oi(t,e,n){return xe(t)&&xe(e)?oa(t+n*(e-t)):e}function CO(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):Bp(i,e))===n)}var gn=t=>t===null||typeof t>"u",$c=t=>gn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function MO(t){return t!=null}function Yc(){}var pY=["type","size","sizeType"];function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_b.apply(null,arguments)}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function X1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(i){mY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mY(t,e,n){return(e=gY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gY(t){var e=vY(t,"string");return typeof e=="symbol"?e:e+""}function vY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yY(t,e){if(t==null)return{};var n,i,r=bY(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bY(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var PO={symbolCircle:$A,symbolCross:O8,symbolDiamond:L8,symbolSquare:U8,symbolStar:H8,symbolTriangle:G8,symbolWye:V8},AY=Math.PI/180,SY=t=>{var e="symbol".concat($c(t));return PO[e]||$A},wY=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*AY;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},_Y=(t,e)=>{PO["symbol".concat($c(t))]=e},RO=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,r=yY(t,pY),s=X1(X1({},r),{},{type:e,size:n,sizeType:i}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var g=SY(a),y=j8().type(g).size(wY(n,i,a)),S=y();if(S!==null)return S},{className:c,cx:d,cy:f}=s,p=Rn(s);return xe(d)&&xe(f)&&xe(n)?M.createElement("path",_b({},p,{className:rt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};RO.registerSymbol=_Y;var NO=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,WA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(M.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{qA(r)&&(i[r]=(s=>n[r](n,s)))}),i},xY=(t,e,n)=>i=>(t(e,n,i),null),EY=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];qA(r)&&typeof s=="function"&&(i||(i={}),i[r]=xY(s,e,n))}),i};function K1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function TY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K1(Object(n),!0).forEach(function(i){CY(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function CY(t,e,n){return(e=MY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MY(t){var e=PY(t,"string");return typeof e=="symbol"?e:e+""}function PY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nn(t,e){var n=TY({},t),i=e,r=Object.keys(e),s=r.reduce((a,l)=>(a[l]===void 0&&i[l]!==void 0&&(a[l]=i[l]),a),n);return s}var py={},my={},W1;function RY(){return W1||(W1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const a=n[s],l=i(a);r.has(l)||r.set(l,a)}return Array.from(r.values())}t.uniqBy=e})(my)),my}var gy={},J1;function IO(){return J1||(J1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(gy)),gy}var vy={},yy={},by={},Q1;function NY(){return Q1||(Q1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(by)),by}var Z1;function JA(){return Z1||(Z1=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NY();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(yy)),yy}var Ay={},eM;function IY(){return eM||(eM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Ay)),Ay}var tM;function DY(){return tM||(tM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JA(),n=IY();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(vy)),vy}var Sy={},wy={},nM;function OY(){return nM||(nM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KA();function n(i){return function(r){return e.get(r,i)}}t.property=n})(wy)),wy}var _y={},xy={},Ey={},Ty={},iM;function DO(){return iM||(iM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Ty)),Ty}var Cy={},rM;function OO(){return rM||(rM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Cy)),Cy}var My={},sM;function kO(){return sM||(sM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(My)),My}var aM;function kY(){return aM||(aM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DO(),n=OO(),i=kO();function r(f,p,g){return typeof g!="function"?r(f,p,()=>{}):s(f,p,function y(S,w,x,E,C,T){const N=g(S,w,x,E,C,T);return N!==void 0?!!N:s(S,w,y,T)},new Map)}function s(f,p,g,y){if(p===f)return!0;switch(typeof p){case"object":return a(f,p,g,y);case"function":return Object.keys(p).length>0?s(f,{...p},g,y):i.eq(f,p);default:return e.isObject(f)?typeof p=="string"?p==="":!0:i.eq(f,p)}}function a(f,p,g,y){if(p==null)return!0;if(Array.isArray(p))return c(f,p,g,y);if(p instanceof Map)return l(f,p,g,y);if(p instanceof Set)return d(f,p,g,y);const S=Object.keys(p);if(f==null||n.isPrimitive(f))return S.length===0;if(S.length===0)return!0;if(y?.has(p))return y.get(p)===f;y?.set(p,f);try{for(let w=0;w<S.length;w++){const x=S[w];if(!n.isPrimitive(f)&&!(x in f)||p[x]===void 0&&f[x]!==void 0||p[x]===null&&f[x]!==null||!g(f[x],p[x],x,f,p,y))return!1}return!0}finally{y?.delete(p)}}function l(f,p,g,y){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[S,w]of p.entries()){const x=f.get(S);if(g(x,w,S,f,p,y)===!1)return!1}return!0}function c(f,p,g,y){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const S=new Set;for(let w=0;w<p.length;w++){const x=p[w];let E=!1;for(let C=0;C<f.length;C++){if(S.has(C))continue;const T=f[C];let N=!1;if(g(T,x,w,f,p,y)&&(N=!0),N){S.add(C),E=!0;break}}if(!E)return!1}return!0}function d(f,p,g,y){return p.size===0?!0:f instanceof Set?c([...f],[...p],g,y):!1}t.isMatchWith=r,t.isSetMatch=d})(Ey)),Ey}var oM;function LO(){return oM||(oM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kY();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(xy)),xy}var Py={},Ry={},Ny={},lM;function LY(){return lM||(lM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(Ny)),Ny}var Iy={},uM;function UO(){return uM||(uM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Iy)),Iy}var Dy={},cM;function BO(){return cM||(cM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",f="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",S="[object Error]",w="[object DataView]",x="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]",N="[object BigUint64Array]",R="[object Int8Array]",I="[object Int16Array]",k="[object Int32Array]",B="[object BigInt64Array]",z="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=B,t.bigUint64ArrayTag=N,t.booleanTag=r,t.dataViewTag=w,t.dateTag=l,t.errorTag=S,t.float32ArrayTag=z,t.float64ArrayTag=V,t.functionTag=p,t.int16ArrayTag=I,t.int32ArrayTag=k,t.int8ArrayTag=R,t.mapTag=c,t.numberTag=i,t.objectTag=y,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=C,t.uint32ArrayTag=T,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=E})(Dy)),Dy}var Oy={},dM;function UY(){return dM||(dM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Oy)),Oy}var fM;function FO(){return fM||(fM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LY(),n=UO(),i=BO(),r=OO(),s=UY();function a(f,p){return l(f,void 0,f,new Map,p)}function l(f,p,g,y=new Map,S=void 0){const w=S?.(f,p,g,y);if(w!==void 0)return w;if(r.isPrimitive(f))return f;if(y.has(f))return y.get(f);if(Array.isArray(f)){const x=new Array(f.length);y.set(f,x);for(let E=0;E<f.length;E++)x[E]=l(f[E],E,g,y,S);return Object.hasOwn(f,"index")&&(x.index=f.index),Object.hasOwn(f,"input")&&(x.input=f.input),x}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const x=new RegExp(f.source,f.flags);return x.lastIndex=f.lastIndex,x}if(f instanceof Map){const x=new Map;y.set(f,x);for(const[E,C]of f)x.set(E,l(C,E,g,y,S));return x}if(f instanceof Set){const x=new Set;y.set(f,x);for(const E of f)x.add(l(E,void 0,g,y,S));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const x=new(Object.getPrototypeOf(f)).constructor(f.length);y.set(f,x);for(let E=0;E<f.length;E++)x[E]=l(f[E],E,g,y,S);return x}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const x=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return y.set(f,x),c(x,f,g,y,S),x}if(typeof File<"u"&&f instanceof File){const x=new File([f],f.name,{type:f.type});return y.set(f,x),c(x,f,g,y,S),x}if(typeof Blob<"u"&&f instanceof Blob){const x=new Blob([f],{type:f.type});return y.set(f,x),c(x,f,g,y,S),x}if(f instanceof Error){const x=new f.constructor;return y.set(f,x),x.message=f.message,x.name=f.name,x.stack=f.stack,x.cause=f.cause,c(x,f,g,y,S),x}if(f instanceof Boolean){const x=new Boolean(f.valueOf());return y.set(f,x),c(x,f,g,y,S),x}if(f instanceof Number){const x=new Number(f.valueOf());return y.set(f,x),c(x,f,g,y,S),x}if(f instanceof String){const x=new String(f.valueOf());return y.set(f,x),c(x,f,g,y,S),x}if(typeof f=="object"&&d(f)){const x=Object.create(Object.getPrototypeOf(f));return y.set(f,x),c(x,f,g,y,S),x}return f}function c(f,p,g=f,y,S){const w=[...Object.keys(p),...e.getSymbols(p)];for(let x=0;x<w.length;x++){const E=w[x],C=Object.getOwnPropertyDescriptor(f,E);(C==null||C.writable)&&(f[E]=l(p[E],E,g,y,S))}}function d(f){switch(n.getTag(f)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=l,t.copyProperties=c})(Ry)),Ry}var hM;function BY(){return hM||(hM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FO();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(Py)),Py}var pM;function FY(){return pM||(pM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LO(),n=BY();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i})(_y)),_y}var ky={},Ly={},Uy={},mM;function zY(){return mM||(mM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FO(),n=BO();function i(r,s){return e.cloneDeepWith(r,(a,l,c,d)=>{const f=s?.(a,l,c,d);if(f!==void 0)return f;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new r.constructor(r?.valueOf());return e.copyProperties(p,r),p}case n.argumentsTag:{const p={};return e.copyProperties(p,r),p.length=r.length,p[Symbol.iterator]=r[Symbol.iterator],p}default:return}})}t.cloneDeepWith=i})(Uy)),Uy}var gM;function HY(){return gM||(gM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zY();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(Ly)),Ly}var By={},Fy={},vM;function zO(){return vM||(vM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(Fy)),Fy}var zy={},yM;function GY(){return yM||(yM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UO();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(zy)),zy}var bM;function qY(){return bM||(bM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EO(),n=zO(),i=GY(),r=XA();function s(a,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&a?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=a;for(let f=0;f<c.length;f++){const p=c[f];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||i.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=s})(By)),By}var AM;function VY(){return AM||(AM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LO(),n=YA(),i=HY(),r=KA(),s=qY();function a(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=i.cloneDeep(c),function(d){const f=r.get(d,l);return f===void 0?s.has(d,l):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=a})(ky)),ky}var SM;function jY(){return SM||(SM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IO(),n=OY(),i=FY(),r=VY();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?r.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(Sy)),Sy}var wM;function $Y(){return wM||(wM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RY(),n=IO(),i=DY(),r=jY();function s(a,l=n.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),r.iteratee(l)):[]}t.uniqBy=s})(py)),py}var Hy,_M;function YY(){return _M||(_M=1,Hy=$Y().uniqBy),Hy}var XY=YY();const xM=Br(XY);function KY(t,e,n){return e===!0?xM(t,n):typeof e=="function"?xM(t,e):t}var Gy={exports:{}},qy={},Vy={exports:{}},jy={};var EM;function WY(){if(EM)return jy;EM=1;var t=Bl();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(p,g){var y=g(),S=i({inst:{value:y,getSnapshot:g}}),w=S[0].inst,x=S[1];return s(function(){w.value=y,w.getSnapshot=g,c(w)&&x({inst:w})},[p,y,g]),r(function(){return c(w)&&x({inst:w}),p(function(){c(w)&&x({inst:w})})},[p]),a(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return jy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,jy}var TM;function JY(){return TM||(TM=1,Vy.exports=WY()),Vy.exports}var CM;function QY(){if(CM)return qy;CM=1;var t=Bl(),e=JY();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return qy.useSyncExternalStoreWithSelector=function(d,f,p,g,y){var S=s(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=l(function(){function E(I){if(!C){if(C=!0,T=I,I=g(I),y!==void 0&&w.hasValue){var k=w.value;if(y(k,I))return N=k}return N=I}if(k=N,i(T,I))return k;var B=g(I);return y!==void 0&&y(k,B)?(T=I,k):(T=I,N=B)}var C=!1,T,N,R=p===void 0?null:p;return[function(){return E(f())},R===null?void 0:function(){return E(R())}]},[f,p,g,y]);var x=r(d,S[0],S[1]);return a(function(){w.hasValue=!0,w.value=x},[x]),c(x),x},qy}var MM;function ZY(){return MM||(MM=1,Gy.exports=QY()),Gy.exports}var eX=ZY(),QA=M.createContext(null),tX=t=>t,Bt=()=>{var t=M.useContext(QA);return t?t.store.dispatch:tX},dh=()=>{},nX=()=>dh,iX=(t,e)=>t===e;function Ae(t){var e=M.useContext(QA);return eX.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:nX,e?e.store.getState:dh,e?e.store.getState:dh,e?t:dh,iX)}function rX(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function sX(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function aX(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var PM=t=>Array.isArray(t)?t:[t];function oX(t){const e=Array.isArray(t[0])?t[0]:t;return aX(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function lX(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var uX=class{constructor(t){this.value=t}deref(){return this.value}},cX=typeof WeakRef<"u"?WeakRef:uX,dX=0,RM=1;function Vf(){return{s:dX,v:void 0,o:null,p:null}}function HO(t,e={}){let n=Vf();const{resultEqualityCheck:i}=e;let r,s=0;function a(){let l=n;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const w=S.get(y);w===void 0?(l=Vf(),S.set(y,l)):l=w}else{let S=l.p;S===null&&(l.p=S=new Map);const w=S.get(y);w===void 0?(l=Vf(),S.set(y,l)):l=w}}const d=l;let f;if(l.s===RM)f=l.v;else if(f=t.apply(null,arguments),s++,i){const p=r?.deref?.()??r;p!=null&&i(p,f)&&(f=p,s!==0&&s--),r=typeof f=="object"&&f!==null||typeof f=="function"?new cX(f):f}return d.s=RM,d.v=f,f}return a.clearCache=()=>{n=Vf(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function fX(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,a=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),rX(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=HO,argsMemoizeOptions:S=[]}=f,w=PM(g),x=PM(S),E=oX(r),C=p(function(){return s++,d.apply(null,arguments)},...w),T=y(function(){a++;const R=lX(E,arguments);return l=C.apply(null,R),l},...x);return Object.assign(T,{resultFunc:d,memoizedResultFunc:C,dependencies:E,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:y})};return Object.assign(i,{withTypes:()=>i}),i}var Q=fX(HO),hX=Object.assign((t,e=Q)=>{sX(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((a,l,c)=>(a[n[c]]=l,a),{}))},{withTypes:()=>hX}),$y={},Yy={},Xy={},NM;function pX(){return NM||(NM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const a=e(i),l=e(r);if(a===l&&a===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};t.compareValues=n})(Xy)),Xy}var Ky={},Wy={},IM;function GO(){return IM||(IM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Wy)),Wy}var DM;function mX(){return DM||(DM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GO(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=r})(Ky)),Ky}var OM;function gX(){return OM||(OM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pX(),n=mX(),i=XA();function r(s,a,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,S)=>{let w=y;for(let x=0;x<S.length&&w!=null;++x)w=w[S[x]];return w},f=(y,S)=>S==null||y==null?S:typeof y=="object"&&"key"in y?Object.hasOwn(S,y.key)?S[y.key]:d(S,y.path):typeof y=="function"?y(S):Array.isArray(y)?d(S,y):typeof S=="object"?S[y]:S,p=a.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:i.toPath(y)}));return s.map(y=>({original:y,criteria:p.map(S=>f(S,y))})).slice().sort((y,S)=>{for(let w=0;w<p.length;w++){const x=e.compareValues(y.criteria[w],S.criteria[w],l[w]);if(x!==0)return x}return 0}).map(y=>y.original)}t.orderBy=r})(Yy)),Yy}var Jy={},kM;function vX(){return kM||(kM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),a=(l,c)=>{for(let d=0;d<l.length;d++){const f=l[d];Array.isArray(f)&&c<s?a(f,c+1):r.push(f)}};return a(n,0),r}t.flatten=e})(Jy)),Jy}var Qy={},LM;function qO(){return LM||(LM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zO(),n=JA(),i=DO(),r=kO();function s(a,l,c){return i.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],a):!1}t.isIterateeCall=s})(Qy)),Qy}var UM;function yX(){return UM||(UM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gX(),n=vX(),i=qO();function r(s,...a){const l=a.length;return l>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=r})($y)),$y}var Zy,BM;function bX(){return BM||(BM=1,Zy=yX().sortBy),Zy}var AX=bX();const Fp=Br(AX);var VO=t=>t.legend.settings,SX=t=>t.legend.size,wX=t=>t.legend.payload;Q([wX,VO],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?Fp(i,n):i});var jf=1;function _X(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=M.useState({height:0,left:0,top:0,width:0}),i=M.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>jf||Math.abs(a.left-e.left)>jf||Math.abs(a.top-e.top)>jf||Math.abs(a.width-e.width)>jf)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function En(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var xX=typeof Symbol=="function"&&Symbol.observable||"@@observable",FM=xX,e0=()=>Math.random().toString(36).substring(7).split("").join("."),EX={INIT:`@@redux/INIT${e0()}`,REPLACE:`@@redux/REPLACE${e0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${e0()}`},Nh=EX;function ZA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function jO(t,e,n){if(typeof t!="function")throw new Error(En(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(En(1));return n(jO)(t,e)}let i=t,r=e,s=new Map,a=s,l=0,c=!1;function d(){a===s&&(a=new Map,s.forEach((x,E)=>{a.set(E,x)}))}function f(){if(c)throw new Error(En(3));return r}function p(x){if(typeof x!="function")throw new Error(En(4));if(c)throw new Error(En(5));let E=!0;d();const C=l++;return a.set(C,x),function(){if(E){if(c)throw new Error(En(6));E=!1,d(),a.delete(C),s=null}}}function g(x){if(!ZA(x))throw new Error(En(7));if(typeof x.type>"u")throw new Error(En(8));if(typeof x.type!="string")throw new Error(En(17));if(c)throw new Error(En(9));try{c=!0,r=i(r,x)}finally{c=!1}return(s=a).forEach(C=>{C()}),x}function y(x){if(typeof x!="function")throw new Error(En(10));i=x,g({type:Nh.REPLACE})}function S(){const x=p;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(En(11));function C(){const N=E;N.next&&N.next(f())}return C(),{unsubscribe:x(C)}},[FM](){return this}}}return g({type:Nh.INIT}),{dispatch:g,subscribe:p,getState:f,replaceReducer:y,[FM]:S}}function TX(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Nh.INIT})>"u")throw new Error(En(12));if(typeof n(void 0,{type:Nh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function $O(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const i=Object.keys(n);let r;try{TX(n)}catch(s){r=s}return function(a={},l){if(r)throw r;let c=!1;const d={};for(let f=0;f<i.length;f++){const p=i[f],g=n[p],y=a[p],S=g(y,l);if(typeof S>"u")throw l&&l.type,new Error(En(14));d[p]=S,c=c||S!==y}return c=c||i.length!==Object.keys(a).length,c?d:a}}function Ih(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function CX(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(En(15))};const a={getState:r.getState,dispatch:(c,...d)=>s(c,...d)},l=t.map(c=>c(a));return s=Ih(...l)(r.dispatch),{...r,dispatch:s}}}function YO(t){return ZA(t)&&"type"in t&&typeof t.type=="string"}var XO=Symbol.for("immer-nothing"),zM=Symbol.for("immer-draftable"),Xn=Symbol.for("immer-state");function rr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _i=Object,Il=_i.getPrototypeOf,Dh="constructor",zp="prototype",xb="configurable",Oh="enumerable",fh="writable",Sc="value",As=t=>!!t&&!!t[Xn];function dr(t){return t?KO(t)||Gp(t)||!!t[zM]||!!t[Dh]?.[zM]||qp(t)||Vp(t):!1}var MX=_i[zp][Dh].toString(),HM=new WeakMap;function KO(t){if(!t||!eS(t))return!1;const e=Il(t);if(e===null||e===_i[zp])return!0;const n=_i.hasOwnProperty.call(e,Dh)&&e[Dh];if(n===Object)return!0;if(!pl(n))return!1;let i=HM.get(n);return i===void 0&&(i=Function.toString.call(n),HM.set(n,i)),i===MX}function Hp(t,e,n=!0){Xc(t)===0?(n?Reflect.ownKeys(t):_i.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Xc(t){const e=t[Xn];return e?e.type_:Gp(t)?1:qp(t)?2:Vp(t)?3:0}var GM=(t,e,n=Xc(t))=>n===2?t.has(e):_i[zp].hasOwnProperty.call(t,e),Eb=(t,e,n=Xc(t))=>n===2?t.get(e):t[e],kh=(t,e,n,i=Xc(t))=>{i===2?t.set(e,n):i===3?t.add(n):t[e]=n};function PX(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Gp=Array.isArray,qp=t=>t instanceof Map,Vp=t=>t instanceof Set,eS=t=>typeof t=="object",pl=t=>typeof t=="function",t0=t=>typeof t=="boolean";function RX(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var cs=t=>t.copy_||t.base_,tS=t=>t.modified_?t.copy_:t.base_;function Tb(t,e){if(qp(t))return new Map(t);if(Vp(t))return new Set(t);if(Gp(t))return Array[zp].slice.call(t);const n=KO(t);if(e===!0||e==="class_only"&&!n){const i=_i.getOwnPropertyDescriptors(t);delete i[Xn];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],l=i[a];l[fh]===!1&&(l[fh]=!0,l[xb]=!0),(l.get||l.set)&&(i[a]={[xb]:!0,[fh]:!0,[Oh]:l[Oh],[Sc]:t[a]})}return _i.create(Il(t),i)}else{const i=Il(t);if(i!==null&&n)return{...t};const r=_i.create(i);return _i.assign(r,t)}}function nS(t,e=!1){return jp(t)||As(t)||!dr(t)||(Xc(t)>1&&_i.defineProperties(t,{set:$f,add:$f,clear:$f,delete:$f}),_i.freeze(t),e&&Hp(t,(n,i)=>{nS(i,!0)},!1)),t}function NX(){rr(2)}var $f={[Sc]:NX};function jp(t){return t===null||!eS(t)?!0:_i.isFrozen(t)}var Lh="MapSet",Cb="Patches",qM="ArrayMethods",WO={};function so(t){const e=WO[t];return e||rr(0,t),e}var VM=t=>!!WO[t],wc,JO=()=>wc,IX=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:VM(Lh)?so(Lh):void 0,arrayMethodsPlugin_:VM(qM)?so(qM):void 0});function jM(t,e){e&&(t.patchPlugin_=so(Cb),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Mb(t){Pb(t),t.drafts_.forEach(DX),t.drafts_=null}function Pb(t){t===wc&&(wc=t.parent_)}var $M=t=>wc=IX(wc,t);function DX(t){const e=t[Xn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function YM(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Xn].modified_&&(Mb(e),rr(4)),dr(t)&&(t=XM(e,t));const{patchPlugin_:r}=e;r&&r.generateReplacementPatches_(n[Xn].base_,t,e)}else t=XM(e,n);return OX(e,t,!0),Mb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==XO?t:void 0}function XM(t,e){if(jp(e))return e;const n=e[Xn];if(!n)return Uh(e,t.handledSet_,t);if(!$p(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:i}=n;if(i)for(;i.length>0;)i.pop()(t);e2(n,t)}return n.copy_}function OX(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&nS(e,n)}function QO(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var $p=(t,e)=>t.scope_===e,kX=[];function ZO(t,e,n,i){const r=cs(t),s=t.type_;if(i!==void 0&&Eb(r,i,s)===e){kh(r,i,n,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;Hp(r,(c,d)=>{if(As(d)){const f=l.get(d)||[];f.push(c),l.set(d,f)}})}const a=t.draftLocations_.get(e)??kX;for(const l of a)kh(r,l,n,s)}function LX(t,e,n){t.callbacks_.push(function(r){const s=e;if(!s||!$p(s,r))return;r.mapSetPlugin_?.fixSetContents(s);const a=tS(s);ZO(t,s.draft_??s,a,n),e2(s,r)})}function e2(t,e){if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(t.assigned_?.size??0)>0)){const{patchPlugin_:i}=e;if(i){const r=i.getPath(t);r&&i.generatePatches_(t,r,e)}QO(t)}}function UX(t,e,n){const{scope_:i}=t;if(As(n)){const r=n[Xn];$p(r,i)&&r.callbacks_.push(function(){hh(t);const a=tS(r);ZO(t,n,a,e)})}else dr(n)&&t.callbacks_.push(function(){const s=cs(t);t.type_===3?s.has(n)&&Uh(n,i.handledSet_,i):Eb(s,e,t.type_)===n&&i.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Uh(Eb(t.copy_,e,t.type_),i.handledSet_,i)})}function Uh(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||As(t)||e.has(t)||!dr(t)||jp(t)||(e.add(t),Hp(t,(i,r)=>{if(As(r)){const s=r[Xn];if($p(s,n)){const a=tS(s);kh(t,i,a,t.type_),QO(s)}}else dr(r)&&Uh(r,e,n)})),t}function BX(t,e){const n=Gp(t),i={type_:n?1:0,scope_:e?e.scope_:JO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=i,s=Bh;n&&(r=[i],s=_c);const{revoke:a,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=a,[l,i]}var Bh={get(t,e){if(e===Xn)return t;let n=t.scope_.arrayMethodsPlugin_;const i=t.type_===1&&typeof e=="string";if(i&&n?.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const r=cs(t);if(!GM(r,e,t.type_))return FX(t,r,e);const s=r[e];if(t.finalized_||!dr(s)||i&&t.operationMethod&&n?.isMutatingArrayMethod(t.operationMethod)&&RX(e))return s;if(s===n0(t.base_,e)){hh(t);const a=t.type_===1?+e:e,l=Nb(t.scope_,s,t,a);return t.copy_[a]=l}return s},has(t,e){return e in cs(t)},ownKeys(t){return Reflect.ownKeys(cs(t))},set(t,e,n){const i=t2(cs(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=n0(cs(t),e),s=r?.[Xn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(PX(n,r)&&(n!==void 0||GM(t.base_,e,t.type_)))return!0;hh(t),Rb(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),UX(t,e,n)),!0},deleteProperty(t,e){return hh(t),n0(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Rb(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cs(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{[fh]:!0,[xb]:t.type_!==1||e!=="length",[Oh]:i[Oh],[Sc]:n[e]}},defineProperty(){rr(11)},getPrototypeOf(t){return Il(t.base_)},setPrototypeOf(){rr(12)}},_c={};for(let t in Bh){let e=Bh[t];_c[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}_c.deleteProperty=function(t,e){return _c.set.call(this,t,e,void 0)};_c.set=function(t,e,n){return Bh.set.call(this,t[0],e,n,t[0])};function n0(t,e){const n=t[Xn];return(n?cs(n):t)[e]}function FX(t,e,n){const i=t2(e,n);return i?Sc in i?i[Sc]:i.get?.call(t.draft_):void 0}function t2(t,e){if(!(e in t))return;let n=Il(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Il(n)}}function Rb(t){t.modified_||(t.modified_=!0,t.parent_&&Rb(t.parent_))}function hh(t){t.copy_||(t.assigned_=new Map,t.copy_=Tb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,i,r)=>{if(pl(n)&&!pl(i)){const a=i;i=n;const l=this;return function(d=a,...f){return l.produce(d,p=>i.call(this,p,...f))}}pl(i)||rr(6),r!==void 0&&!pl(r)&&rr(7);let s;if(dr(n)){const a=$M(this),l=Nb(a,n,void 0);let c=!0;try{s=i(l),c=!1}finally{c?Mb(a):Pb(a)}return jM(a,r),YM(s,a)}else if(!n||!eS(n)){if(s=i(n),s===void 0&&(s=n),s===XO&&(s=void 0),this.autoFreeze_&&nS(s,!0),r){const a=[],l=[];so(Cb).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:l}),r(a,l)}return s}else rr(1,n)},this.produceWithPatches=(n,i)=>{if(pl(n))return(l,...c)=>this.produceWithPatches(l,d=>n(d,...c));let r,s;return[this.produce(n,i,(l,c)=>{r=l,s=c}),r,s]},t0(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),t0(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),t0(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){dr(e)||rr(8),As(e)&&(e=ur(e));const n=$M(this),i=Nb(n,e,void 0);return i[Xn].isManual_=!0,Pb(n),i}finishDraft(e,n){const i=e&&e[Xn];(!i||!i.isManual_)&&rr(9);const{scope_:r}=i;return jM(r,n),YM(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const s=n[i];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}i>-1&&(n=n.slice(i+1));const r=so(Cb).applyPatches_;return As(e)?r(e,n):this.produce(e,s=>r(s,n))}};function Nb(t,e,n,i){const[r,s]=qp(e)?so(Lh).proxyMap_(e,n):Vp(e)?so(Lh).proxySet_(e,n):BX(e,n);return(n?.scope_??JO()).drafts_.push(r),s.callbacks_=n?.callbacks_??[],s.key_=i,n&&i!==void 0?LX(n,s,i):s.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:d}=c;s.modified_&&d&&d.generatePatches_(s,[],c)}),r}function ur(t){return As(t)||rr(10,t),n2(t)}function n2(t){if(!dr(t)||jp(t))return t;const e=t[Xn];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Tb(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=Tb(t,!0);return Hp(n,(r,s)=>{kh(n,r,n2(s))},i),e&&(e.finalized_=!1),n}var HX=new zX,i2=HX.produce;function r2(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var GX=r2(),qX=r2,VX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ih:Ih.apply(null,arguments)};function Ki(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(xi(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>YO(i)&&i.type===t,n}var s2=class dc extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,dc.prototype)}static get[Symbol.species](){return dc}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new dc(...e[0].concat(this)):new dc(...e.concat(this))}};function KM(t){return dr(t)?i2(t,()=>{}):t}function Yf(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function jX(t){return typeof t=="boolean"}var $X=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new s2;return n&&(jX(n)?a.push(GX):a.push(qX(n.extraArgument))),a},a2="RTK_autoBatch",Ct=()=>t=>({payload:t,meta:{[a2]:!0}}),WM=t=>e=>{setTimeout(e,t)},o2=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,a=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WM(10):t.type==="callback"?t.queueNotification:WM(t.timeout),d=()=>{a=!1,s&&(s=!1,l.forEach(f=>f()))};return Object.assign({},i,{subscribe(f){const p=()=>r&&f(),g=i.subscribe(p);return l.add(f),()=>{g(),l.delete(f)}},dispatch(f){try{return r=!f?.meta?.[a2],s=!r,s&&(a||(a=!0,c(d))),i.dispatch(f)}finally{r=!0}}})},YX=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new s2(t);return i&&r.push(o2(typeof i=="object"?i:void 0)),r};function XX(t){const e=$X(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(ZA(n))l=$O(n);else throw new Error(xi(1));let c;typeof i=="function"?c=i(e):c=e();let d=Ih;r&&(d=VX({trace:!1,...typeof r=="object"&&r}));const f=CX(...c),p=YX(f);let g=typeof a=="function"?a(p):p();const y=d(...g);return jO(l,s,y)}function l2(t){const e={},n=[];let i;const r={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(xi(28));if(l in e)throw new Error(xi(29));return e[l]=a,r},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),r},addMatcher(s,a){return n.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}function KX(t){return typeof t=="function"}function WX(t,e){let[n,i,r]=l2(e),s;if(KX(t))s=()=>KM(t());else{const l=KM(t);s=()=>l}function a(l=s(),c){let d=[n[c.type],...i.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[r]),d.reduce((f,p)=>{if(p)if(As(f)){const y=p(f,c);return y===void 0?f:y}else{if(dr(f))return i2(f,g=>p(g,c));{const g=p(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},l)}return a.getInitialState=s,a}var JX="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",QX=(t=21)=>{let e="",n=t;for(;n--;)e+=JX[Math.random()*64|0];return e},ZX=Symbol.for("rtk-slice-createasyncthunk");function eK(t,e){return`${t}/${e}`}function tK({creators:t}={}){const e=t?.asyncThunk?.[ZX];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(xi(11));const a=(typeof i.reducers=="function"?i.reducers(iK()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,N){const R=typeof T=="string"?T:T.type;if(!R)throw new Error(xi(12));if(R in c.sliceCaseReducersByType)throw new Error(xi(13));return c.sliceCaseReducersByType[R]=N,d},addMatcher(T,N){return c.sliceMatchers.push({matcher:T,reducer:N}),d},exposeAction(T,N){return c.actionCreators[T]=N,d},exposeCaseReducer(T,N){return c.sliceCaseReducersByName[T]=N,d}};l.forEach(T=>{const N=a[T],R={reducerName:T,type:eK(r,T),createNotation:typeof i.reducers=="function"};sK(N)?oK(R,N,d,e):rK(R,N,d)});function f(){const[T={},N=[],R=void 0]=typeof i.extraReducers=="function"?l2(i.extraReducers):[i.extraReducers],I={...T,...c.sliceCaseReducersByType};return WX(i.initialState,k=>{for(let B in I)k.addCase(B,I[B]);for(let B of c.sliceMatchers)k.addMatcher(B.matcher,B.reducer);for(let B of N)k.addMatcher(B.matcher,B.reducer);R&&k.addDefaultCase(R)})}const p=T=>T,g=new Map,y=new WeakMap;let S;function w(T,N){return S||(S=f()),S(T,N)}function x(){return S||(S=f()),S.getInitialState()}function E(T,N=!1){function R(k){let B=k[T];return typeof B>"u"&&N&&(B=Yf(y,R,x)),B}function I(k=p){const B=Yf(g,N,()=>new WeakMap);return Yf(B,k,()=>{const z={};for(const[V,G]of Object.entries(i.selectors??{}))z[V]=nK(G,k,()=>Yf(y,k,x),N);return z})}return{reducerPath:T,getSelectors:I,get selectors(){return I(R)},selectSlice:R}}const C={name:r,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:x,...E(s),injectInto(T,{reducerPath:N,...R}={}){const I=N??s;return T.inject({reducerPath:I,reducer:w},R),{...C,...E(I,!0)}}};return C}}function nK(t,e,n,i){function r(s,...a){let l=e(s);return typeof l>"u"&&i&&(l=n()),t(l,...a)}return r.unwrapped=t,r}var ci=tK();function iK(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function rK({type:t,reducerName:e,createNotation:n},i,r){let s,a;if("reducer"in i){if(n&&!aK(i))throw new Error(xi(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Ki(t,a):Ki(t))}function sK(t){return t._reducerDefinitionType==="asyncThunk"}function aK(t){return t._reducerDefinitionType==="reducerWithPrepare"}function oK({type:t,reducerName:e},n,i,r){if(!r)throw new Error(xi(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:c,settled:d,options:f}=n,p=r(t,s,f);i.exposeAction(e,p),a&&i.addCase(p.fulfilled,a),l&&i.addCase(p.pending,l),c&&i.addCase(p.rejected,c),d&&i.addMatcher(p.settled,d),i.exposeCaseReducer(e,{fulfilled:a||Xf,pending:l||Xf,rejected:c||Xf,settled:d||Xf})}function Xf(){}var lK="task",u2="listener",c2="completed",iS="cancelled",uK=`task-${iS}`,cK=`task-${c2}`,Ib=`${u2}-${iS}`,dK=`${u2}-${c2}`,Yp=class{constructor(t){this.code=t,this.message=`${lK} ${iS} (reason: ${t})`}name="TaskAbortError";message},rS=(t,e)=>{if(typeof t!="function")throw new TypeError(xi(32))},Fh=()=>{},d2=(t,e=Fh)=>(t.catch(e),t),f2=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Za=t=>{if(t.aborted)throw new Yp(t.reason)};function h2(t,e){let n=Fh;return new Promise((i,r)=>{const s=()=>r(new Yp(t.reason));if(t.aborted){s();return}n=f2(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=Fh})}var fK=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Yp?"cancelled":"rejected",error:n}}finally{e?.()}},zh=t=>e=>d2(h2(t,e).then(n=>(Za(t),n))),p2=t=>{const e=zh(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Ml}=Object,JM={},Xp="listenerMiddleware",hK=(t,e)=>{const n=i=>f2(t,()=>i.abort(t.reason));return(i,r)=>{rS(i);const s=new AbortController;n(s);const a=fK(async()=>{Za(t),Za(s.signal);const l=await i({pause:zh(s.signal),delay:p2(s.signal),signal:s.signal});return Za(s.signal),l},()=>s.abort(cK));return r?.autoJoin&&e.push(a.catch(Fh)),{result:zh(t)(a),cancel(){s.abort(uK)}}}},pK=(t,e)=>{const n=async(i,r)=>{Za(e);let s=()=>{};const l=[new Promise((c,d)=>{let f=t({predicate:i,effect:(p,g)=>{g.unsubscribe(),c([p,g.getState(),g.getOriginalState()])}});s=()=>{f(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await h2(e,Promise.race(l));return Za(e),c}finally{s()}};return(i,r)=>d2(n(i,r))},m2=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=Ki(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(xi(21));return rS(s),{predicate:r,type:e,effect:s}},g2=Ml(t=>{const{type:e,predicate:n,effect:i}=m2(t);return{id:QX(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(xi(22))}}},{withTypes:()=>g2}),QM=(t,e)=>{const{type:n,effect:i,predicate:r}=m2(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},Db=t=>{t.pending.forEach(e=>{e.abort(Ib)})},mK=(t,e)=>()=>{for(const n of e.keys())Db(n);t.clear()},ZM=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},v2=Ml(Ki(`${Xp}/add`),{withTypes:()=>v2}),gK=Ki(`${Xp}/removeAll`),y2=Ml(Ki(`${Xp}/remove`),{withTypes:()=>y2}),vK=(...t)=>{console.error(`${Xp}/error`,...t)},Kc=(t={})=>{const e=new Map,n=new Map,i=y=>{const S=n.get(y)??0;n.set(y,S+1)},r=y=>{const S=n.get(y)??1;S===1?n.delete(y):n.set(y,S-1)},{extra:s,onError:a=vK}=t;rS(a);const l=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),S=>{y.unsubscribe(),S?.cancelActive&&Db(y)}),c=y=>{const S=QM(e,y)??g2(y);return l(S)};Ml(c,{withTypes:()=>c});const d=y=>{const S=QM(e,y);return S&&(S.unsubscribe(),y.cancelActive&&Db(S)),!!S};Ml(d,{withTypes:()=>d});const f=async(y,S,w,x)=>{const E=new AbortController,C=pK(c,E.signal),T=[];try{y.pending.add(E),i(y),await Promise.resolve(y.effect(S,Ml({},w,{getOriginalState:x,condition:(N,R)=>C(N,R).then(Boolean),take:C,delay:p2(E.signal),pause:zh(E.signal),extra:s,signal:E.signal,fork:hK(E.signal,T),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((N,R,I)=>{N!==E&&(N.abort(Ib),I.delete(N))})},cancel:()=>{E.abort(Ib),y.pending.delete(E)},throwIfCancelled:()=>{Za(E.signal)}})))}catch(N){N instanceof Yp||ZM(a,N,{raisedBy:"effect"})}finally{await Promise.all(T),E.abort(dK),r(y),y.pending.delete(E)}},p=mK(e,n);return{middleware:y=>S=>w=>{if(!YO(w))return S(w);if(v2.match(w))return c(w.payload);if(gK.match(w)){p();return}if(y2.match(w))return d(w.payload);let x=y.getState();const E=()=>{if(x===JM)throw new Error(xi(23));return x};let C;try{if(C=S(w),e.size>0){const T=y.getState(),N=Array.from(e.values());for(const R of N){let I=!1;try{I=R.predicate(w,T,x)}catch(k){I=!1,ZM(a,k,{raisedBy:"predicate"})}I&&f(R,w,y,E)}}}finally{x=JM}return C},startListening:c,stopListening:d,clearListeners:p}};function xi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},b2=ci({name:"chartLayout",initialState:yK,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:bK,setLayout:AK,setChartSize:SK,setScale:wK}=b2.actions,_K=b2.reducer;function A2(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Mt(t){return Number.isFinite(t)}function Lr(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function eP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Al(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eP(Object(n),!0).forEach(function(i){xK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function xK(t,e,n){return(e=EK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EK(t){var e=TK(t,"string");return typeof e=="symbol"?e:e+""}function TK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vn(t,e,n){return gn(t)||gn(e)?n:Un(e)?Bp(t,e,n):typeof e=="function"?e(t):n}var CK=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&xe(t[s]))return Al(Al({},t),{},{[s]:t[s]+(i||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&xe(t[a]))return Al(Al({},t),{},{[a]:t[a]+(r||0)})}return t},ga=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",S2=(t,e,n,i)=>{if(i)return t.map(l=>l.coordinate);var r,s,a=t.map(l=>(l.coordinate===e&&(r=!0),l.coordinate===n&&(s=!0),l.coordinate));return r||a.push(e),s||a.push(n),a},w2=(t,e,n)=>{if(!t)return null;var{duplicateDomain:i,type:r,range:s,scale:a,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:f,ticks:p,niceTicks:g,axisType:y}=t;if(!a)return null;var S=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,w=r==="category"&&a.bandwidth?a.bandwidth()/S:0;if(w=y==="angleAxis"&&s&&s.length>=2?qi(s[0]-s[1])*2*w:w,p||g){var x=(p||g||[]).map((E,C)=>{var T=i?i.indexOf(E):E;return{coordinate:a(T)+w,value:E,offset:w,index:C}});return x.filter(E=>!Xi(E.coordinate))}return c&&d?d.map((E,C)=>({coordinate:a(E)+w,value:E,index:C,offset:w})):a.ticks&&f!=null?a.ticks(f).map((E,C)=>({coordinate:a(E)+w,value:E,offset:w,index:C})):a.domain().map((E,C)=>({coordinate:a(E)+w,value:i?i[E]:E,index:C,offset:w}))},tP=1e-4,MK=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-tP,s=Math.max(i[0],i[1])+tP,a=t(e[0]),l=t(e[n-1]);(a<r||a>s||l<r||l>s)&&t.domain([e[0],e[n-1]])}},PK=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0,l=0;l<n;++l){var c=t[l],d=c?.[r];if(d!=null){var f=d[1],p=d[0],g=Xi(f)?p:f;g>=0?(d[0]=s,d[1]=s+g,s=f):(d[0]=a,d[1]=a+g,a=f)}}}},RK=t=>{var e,n=t.length;if(!(n<=0)){var i=(e=t[0])===null||e===void 0?void 0:e.length;if(!(i==null||i<=0))for(var r=0;r<i;++r)for(var s=0,a=0;a<n;++a){var l=t[a],c=l?.[r];if(c!=null){var d=Xi(c[1])?c[0]:c[1];d>=0?(c[0]=s,c[1]=s+d,s=c[1]):(c[0]=0,c[1]=0)}}}},NK={sign:PK,expand:sY,none:ro,silhouette:aY,wiggle:oY,positive:RK},IK=(t,e,n)=>{var i,r=(i=NK[n])!==null&&i!==void 0?i:ro,s=rY().keys(e).value((l,c)=>Number(vn(l,c,0))).order(wb).offset(r),a=s(t);return a.forEach((l,c)=>{l.forEach((d,f)=>{var p=vn(t[f],e[c],0);Array.isArray(p)&&p.length===2&&xe(p[0])&&xe(p[1])&&(d[0]=p[0],d[1]=p[1])})}),a};function nP(t){var{axis:e,ticks:n,bandSize:i,entry:r,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!gn(r[e.dataKey])){var l=CO(n,"value",r[e.dataKey]);if(l)return l.coordinate+i/2}return n[s]?n[s].coordinate+i/2:null}var c=vn(r,gn(a)?e.dataKey:a);return gn(c)?null:e.scale(c)}var DK=t=>{var e=t.flat(2).filter(xe);return[Math.min(...e),Math.max(...e)]},OK=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],kK=(t,e,n)=>{if(t!=null)return OK(Object.keys(t).reduce((i,r)=>{var s=t[r];if(!s)return i;var{stackedData:a}=s,l=a.reduce((c,d)=>{var f=A2(d,e,n),p=DK(f);return!Mt(p[0])||!Mt(p[1])?c:[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]))},iP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&e&&e.length>=2){for(var r=Fp(e,f=>f.coordinate),s=1/0,a=1,l=r.length;a<l;a++){var c=r[a],d=r[a-1];s=Math.min((c?.coordinate||0)-(d?.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function sP(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return Al(Al({},e),{},{dataKey:n,payload:i,value:r,name:s})}function _2(t,e){if(t)return String(t);if(typeof e=="string")return e}var LK=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},UK=(t,e)=>e==="centric"?t.angle:t.radius,Ms=t=>t.layout.width,Ps=t=>t.layout.height,BK=t=>t.layout.scale,x2=t=>t.layout.margin,Kp=Q(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Wp=Q(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),FK="data-recharts-item-index",zK="data-recharts-item-id",Wc=60;function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(i){HK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function HK(t,e,n){return(e=GK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GK(t){var e=qK(t,"string");return typeof e=="symbol"?e:e+""}function qK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VK=t=>t.brush.height;function jK(t){var e=Wp(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Wc;return n+r}return n},0)}function $K(t){var e=Wp(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Wc;return n+r}return n},0)}function YK(t){var e=Kp(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function XK(t){var e=Kp(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var In=Q([Ms,Ps,x2,VK,jK,$K,YK,XK,VO,SX],(t,e,n,i,r,s,a,l,c,d)=>{var f={left:(n.left||0)+r,right:(n.right||0)+s},p={top:(n.top||0)+a,bottom:(n.bottom||0)+l},g=Kf(Kf({},p),f),y=g.bottom;g.bottom+=i,g=CK(g,c,d);var S=t-g.left-g.right,w=e-g.top-g.bottom;return Kf(Kf({brushBottom:y},g),{},{width:Math.max(S,0),height:Math.max(w,0)})}),KK=Q(In,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),E2=Q(Ms,Ps,(t,e)=>({x:0,y:0,width:t,height:e})),T2=M.createContext(null),Bn=()=>M.useContext(T2)!=null,WK=t=>{var{children:e}=t;return M.createElement(T2.Provider,{value:!0},e)},Jp=t=>t.brush,Jc=Q([Jp,In,x2],(t,e,n)=>({height:t.height,x:xe(t.x)?t.x:e.left,y:xe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:xe(t.width)?t.width:e.width})),i0={},r0={},s0={},oP;function JK(){return oP||(oP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:s}={}){let a,l=null;const c=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),f=()=>{l!==null&&(n.apply(a,l),a=void 0,l=null)},p=()=>{d&&f(),w()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},i)},S=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{S(),a=void 0,l=null},x=()=>{f()},E=function(...C){if(r?.aborted)return;a=this,l=C;const T=g==null;y(),c&&T&&f()};return E.schedule=y,E.cancel=w,E.flush=x,r?.addEventListener("abort",w,{once:!0}),E}t.debounce=e})(s0)),s0}var lP;function QK(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JK();function n(i,r=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:l=!0,maxWait:c}=s,d=Array(2);a&&(d[0]="leading"),l&&(d[1]="trailing");let f,p=null;const g=e.debounce(function(...w){f=i.apply(this,w),p=null},r,{edges:d}),y=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(f=i.apply(this,w),p=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,w),f)},S=()=>(g.flush(),f);return y.cancel=g.cancel,y.flush=S,y}t.debounce=n})(r0)),r0}var uP;function ZK(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QK();function n(i,r=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(i,r,{leading:a,maxWait:r,trailing:l})}t.throttle=n})(i0)),i0}var a0,cP;function eW(){return cP||(cP=1,a0=ZK().throttle),a0}var tW=eW();const nW=Br(tW);var Gh=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>r[a++]))}},C2=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:s,maxHeight:a}=n,l=bs(i)?t:Number(i),c=bs(r)?e:Number(r);return s&&s>0&&(l?c=l/s:c&&(l=c*s),a&&c!=null&&c>a&&(c=a)),{calculatedWidth:l,calculatedHeight:c}},iW={width:0,height:0,overflow:"visible"},rW={width:0,overflowX:"visible"},sW={height:0,overflowY:"visible"},aW={},oW=t=>{var{width:e,height:n}=t,i=bs(e),r=bs(n);return i&&r?iW:i?rW:r?sW:aW};function lW(t){var{width:e,height:n,aspect:i}=t,r=e,s=n;return r===void 0&&s===void 0?(r="100%",s="100%"):r===void 0?r=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:r,height:s}}function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ob.apply(null,arguments)}function dP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(n),!0).forEach(function(i){uW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uW(t,e,n){return(e=cW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cW(t){var e=dW(t,"string");return typeof e=="symbol"?e:e+""}function dW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M2=M.createContext({width:-1,height:-1});function fW(t){return Lr(t.width)&&Lr(t.height)}function P2(t){var{children:e,width:n,height:i}=t,r=M.useMemo(()=>({width:n,height:i}),[n,i]);return fW(r)?M.createElement(M2.Provider,{value:r},e):null}var sS=()=>M.useContext(M2),hW=M.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:s,minWidth:a=0,minHeight:l,maxHeight:c,children:d,debounce:f=0,id:p,className:g,onResize:y,style:S={}}=t,w=M.useRef(null),x=M.useRef();x.current=y,M.useImperativeHandle(e,()=>w.current);var[E,C]=M.useState({containerWidth:i.width,containerHeight:i.height}),T=M.useCallback((B,z)=>{C(V=>{var G=Math.round(B),W=Math.round(z);return V.containerWidth===G&&V.containerHeight===W?V:{containerWidth:G,containerHeight:W}})},[]);M.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Yc;var B=W=>{var oe,{width:ae,height:pe}=W[0].contentRect;T(ae,pe),(oe=x.current)===null||oe===void 0||oe.call(x,ae,pe)};f>0&&(B=nW(B,f,{trailing:!0,leading:!1}));var z=new ResizeObserver(B),{width:V,height:G}=w.current.getBoundingClientRect();return T(V,G),z.observe(w.current),()=>{z.disconnect()}},[T,f]);var{containerWidth:N,containerHeight:R}=E;Gh(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:I,calculatedHeight:k}=C2(N,R,{width:r,height:s,aspect:n,maxHeight:c});return Gh(I!=null&&I>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,k,r,s,a,l,n),M.createElement("div",{id:p?"".concat(p):void 0,className:rt("recharts-responsive-container",g),style:fP(fP({},S),{},{width:r,height:s,minWidth:a,minHeight:l,maxHeight:c}),ref:w},M.createElement("div",{style:oW({width:r,height:s})},M.createElement(P2,{width:I,height:k},d)))}),pW=M.forwardRef((t,e)=>{var n=sS();if(Lr(n.width)&&Lr(n.height))return t.children;var{width:i,height:r}=lW({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=C2(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return xe(s)&&xe(a)?M.createElement(P2,{width:s,height:a},t.children):M.createElement(hW,Ob({},t,{width:i,height:r,ref:e}))});function R2(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Qc=()=>{var t,e=Bn(),n=Ae(KK),i=Ae(Jc),r=(t=Ae(Jp))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},mW={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},N2=()=>{var t;return(t=Ae(In))!==null&&t!==void 0?t:mW},I2=()=>Ae(Ms),D2=()=>Ae(Ps),St=t=>t.layout.layoutType,Zc=()=>Ae(St),gW=()=>{var t=Zc();return t!==void 0},Qp=t=>{var e=Bt(),n=Bn(),{width:i,height:r}=t,s=sS(),a=i,l=r;return s&&(a=s.width>0?s.width:i,l=s.height>0?s.height:r),M.useEffect(()=>{!n&&Lr(a)&&Lr(l)&&e(SK({width:a,height:l}))},[e,n,a,l]),null},O2=Symbol.for("immer-nothing"),hP=Symbol.for("immer-draftable"),Ti=Symbol.for("immer-state");function sr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var xc=Object.getPrototypeOf;function Dl(t){return!!t&&!!t[Ti]}function ao(t){return t?k2(t)||Array.isArray(t)||!!t[hP]||!!t.constructor?.[hP]||ed(t)||em(t):!1}var vW=Object.prototype.constructor.toString(),pP=new WeakMap;function k2(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=pP.get(n);return i===void 0&&(i=Function.toString.call(n),pP.set(n,i)),i===vW}function qh(t,e,n=!0){Zp(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function Zp(t){const e=t[Ti];return e?e.type_:Array.isArray(t)?1:ed(t)?2:em(t)?3:0}function kb(t,e){return Zp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function L2(t,e,n){const i=Zp(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function yW(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ed(t){return t instanceof Map}function em(t){return t instanceof Set}function Ga(t){return t.copy_||t.base_}function Lb(t,e){if(ed(t))return new Map(t);if(em(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=k2(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Ti];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],l=i[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(xc(t),i)}else{const i=xc(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function aS(t,e=!1){return tm(t)||Dl(t)||!ao(t)||(Zp(t)>1&&Object.defineProperties(t,{set:Wf,add:Wf,clear:Wf,delete:Wf}),Object.freeze(t),e&&Object.values(t).forEach(n=>aS(n,!0))),t}function bW(){sr(2)}var Wf={value:bW};function tm(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var AW={};function oo(t){const e=AW[t];return e||sr(0,t),e}var Ec;function U2(){return Ec}function SW(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mP(t,e){e&&(oo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ub(t){Bb(t),t.drafts_.forEach(wW),t.drafts_=null}function Bb(t){t===Ec&&(Ec=t.parent_)}function gP(t){return Ec=SW(Ec,t)}function wW(t){const e=t[Ti];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ti].modified_&&(Ub(e),sr(4)),ao(t)&&(t=Vh(e,t),e.parent_||jh(e,t)),e.patches_&&oo("Patches").generateReplacementPatches_(n[Ti].base_,t,e.patches_,e.inversePatches_)):t=Vh(e,n,[]),Ub(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==O2?t:void 0}function Vh(t,e,n){if(tm(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[Ti];if(!r)return qh(e,(s,a)=>yP(t,r,e,s,a,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return jh(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,l=!1;r.type_===3&&(a=new Set(s),s.clear(),l=!0),qh(a,(c,d)=>yP(t,r,s,c,d,n,l),i),jh(t,s,!1),n&&t.patches_&&oo("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function yP(t,e,n,i,r,s,a){if(r==null||typeof r!="object"&&!a)return;const l=tm(r);if(!(l&&!a)){if(Dl(r)){const c=s&&e&&e.type_!==3&&!kb(e.assigned_,i)?s.concat(i):void 0,d=Vh(t,r,c);if(L2(n,i,d),Dl(d))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(ao(r)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&l)return;Vh(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(ed(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&jh(t,r)}}}function jh(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&aS(e,n)}function _W(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:U2(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=oS;n&&(r=[i],s=Tc);const{revoke:a,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=a,l}var oS={get(t,e){if(e===Ti)return t;const n=Ga(t);if(!kb(n,e))return xW(t,n,e);const i=n[e];return t.finalized_||!ao(i)?i:i===o0(t.base_,e)?(l0(t),t.copy_[e]=zb(i,t)):i},has(t,e){return e in Ga(t)},ownKeys(t){return Reflect.ownKeys(Ga(t))},set(t,e,n){const i=B2(Ga(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=o0(Ga(t),e),s=r?.[Ti];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(yW(n,r)&&(n!==void 0||kb(t.base_,e)))return!0;l0(t),Fb(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return o0(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,l0(t),Fb(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ga(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){sr(11)},getPrototypeOf(t){return xc(t.base_)},setPrototypeOf(){sr(12)}},Tc={};qh(oS,(t,e)=>{Tc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Tc.deleteProperty=function(t,e){return Tc.set.call(this,t,e,void 0)};Tc.set=function(t,e,n){return oS.set.call(this,t[0],e,n,t[0])};function o0(t,e){const n=t[Ti];return(n?Ga(n):t)[e]}function xW(t,e,n){const i=B2(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function B2(t,e){if(!(e in t))return;let n=xc(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=xc(n)}}function Fb(t){t.modified_||(t.modified_=!0,t.parent_&&Fb(t.parent_))}function l0(t){t.copy_||(t.copy_=Lb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var EW=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(c=s,...d){return a.produce(c,f=>n.call(this,f,...d))}}typeof n!="function"&&sr(6),i!==void 0&&typeof i!="function"&&sr(7);let r;if(ao(e)){const s=gP(this),a=zb(e,void 0);let l=!0;try{r=n(a),l=!1}finally{l?Ub(s):Bb(s)}return mP(s,i),vP(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===O2&&(r=void 0),this.autoFreeze_&&aS(r,!0),i){const s=[],a=[];oo("Patches").generateReplacementPatches_(e,r,s,a),i(s,a)}return r}else sr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,c=>e(c,...l));let i,r;return[this.produce(e,n,(a,l)=>{i=a,r=l}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ao(t)||sr(8),Dl(t)&&(t=TW(t));const e=gP(this),n=zb(t,void 0);return n[Ti].isManual_=!0,Bb(e),n}finishDraft(t,e){const n=t&&t[Ti];(!n||!n.isManual_)&&sr(9);const{scope_:i}=n;return mP(i,e),vP(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=oo("Patches").applyPatches_;return Dl(t)?i(t,e):this.produce(t,r=>i(r,e))}};function zb(t,e){const n=ed(t)?oo("MapSet").proxyMap_(t,e):em(t)?oo("MapSet").proxySet_(t,e):_W(t,e);return(e?e.scope_:U2()).drafts_.push(n),n}function TW(t){return Dl(t)||sr(10,t),F2(t)}function F2(t){if(!ao(t)||tm(t))return t;const e=t[Ti];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Lb(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=Lb(t,!0);return qh(n,(r,s)=>{L2(n,r,F2(s))},i),e&&(e.finalized_=!1),n}var CW=new EW;CW.produce;var MW={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},z2=ci({name:"legend",initialState:MW,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Ct()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:i}=e.payload,r=ur(t).payload.indexOf(n);r>-1&&(t.payload[r]=i)},prepare:Ct()},removeLegendPayload:{reducer(t,e){var n=ur(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Ct()}}}),{setLegendSize:Ole,setLegendSettings:kle,addLegendPayload:PW,replaceLegendPayload:RW,removeLegendPayload:NW}=z2.actions,IW=z2.reducer;function Hb(){return Hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hb.apply(null,arguments)}function bP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function u0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bP(Object(n),!0).forEach(function(i){DW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function DW(t,e,n){return(e=OW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OW(t){var e=kW(t,"string");return typeof e=="symbol"?e:e+""}function kW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LW(t){return Array.isArray(t)&&Un(t[0])&&Un(t[1])?t.join(" ~ "):t}var UW=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:s,formatter:a,itemSorter:l,wrapperClassName:c,labelClassName:d,label:f,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(s&&s.length){var R={padding:0,margin:0},I=(l?Fp(s,l):s).map((k,B)=>{if(k.type==="none")return null;var z=k.formatter||a||LW,{value:V,name:G}=k,W=V,oe=G;if(z){var ae=z(V,G,k,B,s);if(Array.isArray(ae))[W,oe]=ae;else if(ae!=null)W=ae;else return null}var pe=u0({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},i);return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:pe},Un(oe)?M.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Un(oe)?M.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,M.createElement("span",{className:"recharts-tooltip-item-value"},W),M.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},S=u0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=u0({margin:0},r),x=!gn(f),E=x?f:"",C=rt("recharts-default-tooltip",c),T=rt("recharts-tooltip-label",d);x&&p&&s!==void 0&&s!==null&&(E=p(f,s));var N=g?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",Hb({className:C,style:S},N),M.createElement("p",{className:T,style:w},M.isValidElement(E)?E:"".concat(E)),y())},Qu="recharts-tooltip-wrapper",BW={visibility:"hidden"};function FW(t){var{coordinate:e,translateX:n,translateY:i}=t;return rt(Qu,{["".concat(Qu,"-right")]:xe(n)&&e&&xe(e.x)&&n>=e.x,["".concat(Qu,"-left")]:xe(n)&&e&&xe(e.x)&&n<e.x,["".concat(Qu,"-bottom")]:xe(i)&&e&&xe(e.y)&&i>=e.y,["".concat(Qu,"-top")]:xe(i)&&e&&xe(e.y)&&i<e.y})}function AP(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=t;if(s&&xe(s[i]))return s[i];var f=n[i]-l-(r>0?r:0),p=n[i]+r;if(e[i])return a[i]?f:p;var g=c[i];if(g==null)return 0;if(a[i]){var y=f,S=g;return y<S?Math.max(p,g):Math.max(f,g)}if(d==null)return 0;var w=p+l,x=g+d;return w>x?Math.max(f,g):Math.max(p,g)}function zW(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function HW(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:c}=t,d,f,p;return a.height>0&&a.width>0&&n?(f=AP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),p=AP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),d=zW({translateX:f,translateY:p,useTranslate3d:l})):d=BW,{cssProperties:d,cssClasses:FW({translateX:f,translateY:p,coordinate:n})}}function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(i){Gb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Gb(t,e,n){return(e=GW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GW(t){var e=qW(t,"string");return typeof e=="symbol"?e:e+""}function qW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class VW extends M.PureComponent{constructor(){super(...arguments),Gb(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Gb(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:a,hasPayload:l,isAnimationActive:c,offset:d,position:f,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:S,lastBoundingBox:w,innerRef:x,hasPortalFromProps:E}=this.props,{cssClasses:C,cssProperties:T}=HW({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:y}),N=E?{}:Jf(Jf({transition:c&&e?"transform ".concat(i,"ms ").concat(r):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),R=Jf(Jf({},N),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},S);return M.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:R,ref:x},s)}}var H2=()=>{var t;return(t=Ae(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qb.apply(null,arguments)}function wP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function _P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wP(Object(n),!0).forEach(function(i){jW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jW(t,e,n){return(e=$W(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $W(t){var e=YW(t,"string");return typeof e=="symbol"?e:e+""}function YW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xP={curveBasisClosed:Y8,curveBasisOpen:X8,curveBasis:$8,curveBumpX:I8,curveBumpY:D8,curveLinearClosed:K8,curveLinear:Lp,curveMonotoneX:W8,curveMonotoneY:J8,curveNatural:Q8,curveStep:Z8,curveStepAfter:tY,curveStepBefore:eY},$h=t=>Mt(t.x)&&Mt(t.y),EP=t=>t.base!=null&&$h(t.base)&&$h(t),Zu=t=>t.x,ec=t=>t.y,XW=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat($c(t));return(n==="curveMonotone"||n==="curveBump")&&e?xP["".concat(n).concat(e==="vertical"?"Y":"X")]:xP[n]||Lp},KW=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:s=!1}=t,a=XW(e,r),l=s?n.filter($h):n,c;if(Array.isArray(i)){var d=n.map((y,S)=>_P(_P({},y),{},{base:i[S]}));r==="vertical"?c=qf().y(ec).x1(Zu).x0(y=>y.base.x):c=qf().x(Zu).y1(ec).y0(y=>y.base.y);var f=c.defined(EP).curve(a),p=s?d.filter(EP):d;return f(p)}r==="vertical"&&xe(i)?c=qf().y(ec).x1(Zu).x0(i):xe(i)?c=qf().x(Zu).y1(ec).y0(i):c=pO().x(Zu).y(ec);var g=c.defined($h).curve(a);return g(l)},G2=t=>{var{className:e,points:n,path:i,pathRef:r}=t,s=Zc();if((!n||!n.length)&&!i)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=n&&n.length?KW(a):i;return M.createElement("path",qb({},cr(t),WA(t),{className:rt("recharts-curve",e),d:l===null?void 0:l,ref:r}))},WW=["x","y","top","left","width","height","className"];function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vb.apply(null,arguments)}function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function JW(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(i){QW(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QW(t,e,n){return(e=ZW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZW(t){var e=e7(t,"string");return typeof e=="symbol"?e:e+""}function e7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t7(t,e){if(t==null)return{};var n,i,r=n7(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function n7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var i7=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),r7=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:a=0,className:l}=t,c=t7(t,WW),d=JW({x:e,y:n,top:i,left:r,width:s,height:a},c);return!xe(e)||!xe(n)||!xe(s)||!xe(a)||!xe(i)||!xe(r)?null:M.createElement("path",Vb({},Rn(d),{className:rt("recharts-cross",l),d:i7(e,n,s,a,i,r)}))};function s7(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function MP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(i){a7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function a7(t,e,n){return(e=o7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o7(t){var e=l7(t,"string");return typeof e=="symbol"?e:e+""}function l7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u7=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),q2=(t,e,n)=>t.map(i=>"".concat(u7(i)," ").concat(e,"ms ").concat(n)).join(","),c7=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),Cc=(t,e)=>Object.keys(e).reduce((n,i)=>MP(MP({},n),{},{[i]:t(i,e[i])}),{});function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(i){d7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function d7(t,e,n){return(e=f7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=h7(t,"string");return typeof e=="symbol"?e:e+""}function h7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yh=(t,e,n)=>t+(e-t)*n,jb=t=>{var{from:e,to:n}=t;return e!==n},V2=(t,e,n)=>{var i=Cc((r,s)=>{if(jb(s)){var[a,l]=t(s.from,s.to,s.velocity);return nn(nn({},s),{},{from:a,velocity:l})}return s},e);return n<1?Cc((r,s)=>jb(s)&&i[r]!=null?nn(nn({},s),{},{velocity:Yh(s.velocity,i[r].velocity,n),from:Yh(s.from,i[r].from,n)}):s,e):V2(t,i,n-1)};function p7(t,e,n,i,r,s){var a,l=i.reduce((g,y)=>nn(nn({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>Cc((g,y)=>y.from,l),d=()=>!Object.values(l).filter(jb).length,f=null,p=g=>{a||(a=g);var y=g-a,S=y/n.dt;l=V2(n,l,S),r(nn(nn(nn({},t),e),c())),a=g,d()||(f=s.setTimeout(p))};return()=>(f=s.setTimeout(p),()=>{var g;(g=f)===null||g===void 0||g()})}function m7(t,e,n,i,r,s,a){var l=null,c=r.reduce((p,g)=>{var y=t[g],S=e[g];return y==null||S==null?p:nn(nn({},p),{},{[g]:[y,S]})},{}),d,f=p=>{d||(d=p);var g=(p-d)/i,y=Cc((w,x)=>Yh(...x,n(g)),c);if(s(nn(nn(nn({},t),e),y)),g<1)l=a.setTimeout(f);else{var S=Cc((w,x)=>Yh(...x,n(1)),c);s(nn(nn(nn({},t),e),S))}};return()=>(l=a.setTimeout(f),()=>{var p;(p=l)===null||p===void 0||p()})}const g7=(t,e,n,i,r,s)=>{var a=c7(t,e);return n==null?()=>(r(nn(nn({},t),e)),()=>{}):n.isStepper===!0?p7(t,e,n,a,r,s):m7(t,e,n,i,a,r,s)};var Xh=1e-4,j2=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],$2=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),RP=(t,e)=>n=>{var i=j2(t,e);return $2(i,n)},v7=(t,e)=>n=>{var i=j2(t,e),r=[...i.map((s,a)=>s*a).slice(1),0];return $2(r,n)},y7=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var i=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(i==null||i.length!==4)return null;var r=i.map(s=>parseFloat(s));return[r[0],r[1],r[2],r[3]]},b7=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=y7(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},A7=(t,e,n,i)=>{var r=RP(t,n),s=RP(e,i),a=v7(t,n),l=d=>d>1?1:d<0?0:d,c=d=>{for(var f=d>1?1:d,p=f,g=0;g<8;++g){var y=r(p)-f,S=a(p);if(Math.abs(y-f)<Xh||S<Xh)return s(p);p=l(p-y/S)}return s(p)};return c.isStepper=!1,c},NP=function(){return A7(...b7(...arguments))},S7=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(a,l,c)=>{var d=-(a-l)*n,f=c*i,p=c+(d-f)*r/1e3,g=c*r/1e3+a;return Math.abs(g-l)<Xh&&Math.abs(p)<Xh?[l,0]:[g,p]};return s.isStepper=!0,s.dt=r,s},w7=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NP(t);case"spring":return S7();default:if(t.split("(")[0]==="cubic-bezier")return NP(t)}return typeof t=="function"?t:null};function _7(t){var e,n=()=>null,i=!1,r=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var l=a,[c,...d]=l;if(typeof c=="number"){r=t.setTimeout(s.bind(null,d),c);return}s(c),r=t.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,r&&(r(),r=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class x7{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=a=>{a-i>=n?e(a):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{r!=null&&cancelAnimationFrame(r)}}}function E7(){return _7(new x7)}var T7=M.createContext(E7);function C7(t,e){var n=M.useContext(T7);return M.useMemo(()=>e??n(t),[t,e,n])}var M7=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),nm={isSsr:M7()},P7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IP={t:0},c0={t:1};function lS(t){var e=Nn(t,P7),{isActive:n,canBegin:i,duration:r,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:c,children:d}=e,f=n==="auto"?!nm.isSsr:n,p=C7(e.animationId,e.animationManager),[g,y]=M.useState(f?IP:c0),S=M.useRef(null);return M.useEffect(()=>{f||y(c0)},[f]),M.useEffect(()=>{if(!f||!i)return Yc;var w=g7(IP,c0,w7(s),r,y,p.getTimeoutController()),x=()=>{S.current=w()};return p.start([c,a,x,r,l]),()=>{p.stop(),S.current&&S.current(),l()}},[f,i,r,s,a,c,l,p]),d(g.t)}function uS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=M.useRef(Ac(e)),i=M.useRef(t);return i.current!==t&&(n.current=Ac(e),i.current=t),n.current}var R7=["radius"],N7=["radius"],DP,OP,kP,LP,UP,BP,FP,zP,HP,GP;function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function VP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(i){I7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function I7(t,e,n){return(e=D7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D7(t){var e=O7(t,"string");return typeof e=="symbol"?e:e+""}function O7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kh.apply(null,arguments)}function jP(t,e){if(t==null)return{};var n,i,r=k7(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k7(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Cr(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $P=(t,e,n,i,r)=>{var s=oa(n),a=oa(i),l=Math.min(Math.abs(s)/2,Math.abs(a)/2),c=a>=0?1:-1,d=s>=0?1:-1,f=a>=0&&s>=0||a<0&&s<0?1:0,p;if(l>0&&r instanceof Array){for(var g=[0,0,0,0],y=0,S=4;y<S;y++)g[y]=r[y]>l?l:r[y];p=Lt(DP||(DP=Cr(["M",",",""])),t,e+c*g[0]),g[0]>0&&(p+=Lt(OP||(OP=Cr(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+d*g[0],e)),p+=Lt(kP||(kP=Cr(["L ",",",""])),t+n-d*g[1],e),g[1]>0&&(p+=Lt(LP||(LP=Cr(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),p+=Lt(UP||(UP=Cr(["L ",",",""])),t+n,e+i-c*g[2]),g[2]>0&&(p+=Lt(BP||(BP=Cr(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-d*g[2],e+i)),p+=Lt(FP||(FP=Cr(["L ",",",""])),t+d*g[3],e+i),g[3]>0&&(p+=Lt(zP||(zP=Cr(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+i-c*g[3])),p+="Z"}else if(l>0&&r===+r&&r>0){var w=Math.min(l,r);p=Lt(HP||(HP=Cr(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*w,w,w,f,t+d*w,e,t+n-d*w,e,w,w,f,t+n,e+c*w,t+n,e+i-c*w,w,w,f,t+n-d*w,e+i,t+d*w,e+i,w,w,f,t,e+i-c*w)}else p=Lt(GP||(GP=Cr(["M ",","," h "," v "," h "," Z"])),t,e,n,i,-n);return p},YP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cS=t=>{var e=Nn(t,YP),n=M.useRef(null),[i,r]=M.useState(-1);M.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&r(j)}catch{}},[]);var{x:s,y:a,width:l,height:c,radius:d,className:f}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:S,isUpdateAnimationActive:w}=e,x=M.useRef(l),E=M.useRef(c),C=M.useRef(s),T=M.useRef(a),N=M.useMemo(()=>({x:s,y:a,width:l,height:c,radius:d}),[s,a,l,c,d]),R=uS(N,"rectangle-");if(s!==+s||a!==+a||l!==+l||c!==+c||l===0||c===0)return null;var I=rt("recharts-rectangle",f);if(!w){var k=Rn(e),{radius:B}=k,z=jP(k,R7);return M.createElement("path",Kh({},z,{x:oa(s),y:oa(a),width:oa(l),height:oa(c),radius:typeof d=="number"?d:void 0,className:I,d:$P(s,a,l,c,d)}))}var V=x.current,G=E.current,W=C.current,oe=T.current,ae="0px ".concat(i===-1?1:i,"px"),pe="".concat(i,"px 0px"),F=q2(["strokeDasharray"],g,typeof p=="string"?p:YP.animationEasing);return M.createElement(lS,{animationId:R,key:R,canBegin:i>0,duration:g,easing:p,isActive:w,begin:y},j=>{var re=oi(V,l,j),ue=oi(G,c,j),Pe=oi(W,s,j),L=oi(oe,a,j);n.current&&(x.current=re,E.current=ue,C.current=Pe,T.current=L);var X;S?j>0?X={transition:F,strokeDasharray:pe}:X={strokeDasharray:ae}:X={strokeDasharray:pe};var se=Rn(e),{radius:ce}=se,Se=jP(se,N7);return M.createElement("path",Kh({},Se,{radius:typeof d=="number"?d:void 0,className:I,d:$P(Pe,L,re,ue,d),ref:n,style:VP(VP({},X),e.style)}))})};function XP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function KP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(n),!0).forEach(function(i){L7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function L7(t,e,n){return(e=U7(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U7(t){var e=B7(t,"string");return typeof e=="symbol"?e:e+""}function B7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wh=Math.PI/180,F7=t=>t*180/Math.PI,Mn=(t,e,n,i)=>({x:t+Math.cos(-Wh*i)*n,y:e+Math.sin(-Wh*i)*n}),z7=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},H7=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},G7=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,a=H7({x:n,y:i},{x:r,y:s});if(a<=0)return{radius:a,angle:0};var l=(n-r)/a,c=Math.acos(l);return i>s&&(c=2*Math.PI-c),{radius:a,angle:F7(c),angleInRadian:c}},q7=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},V7=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(r,s);return t+a*360},j7=(t,e)=>{var{chartX:n,chartY:i}=t,{radius:r,angle:s}=G7({x:n,y:i},e),{innerRadius:a,outerRadius:l}=e;if(r<a||r>l||r===0)return null;var{startAngle:c,endAngle:d}=q7(e),f=s,p;if(c<=d){for(;f>d;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=d}else{for(;f>c;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=c}return p?KP(KP({},e),{},{radius:r,angle:V7(f,e)}):null};function Y2(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,a=Mn(e,n,i,r),l=Mn(e,n,i,s);return{points:[a,l],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}var WP,JP,QP,ZP,eR,tR,nR;function $b(){return $b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$b.apply(null,arguments)}function $a(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var $7=(t,e)=>{var n=qi(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},Qf=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:c}=t,d=l*(a?1:-1)+i,f=Math.asin(l/d)/Wh,p=c?r:r+s*f,g=Mn(e,n,d,p),y=Mn(e,n,i,p),S=c?r-s*f:r,w=Mn(e,n,d*Math.cos(f*Wh),S);return{center:g,circleTangency:y,lineTangency:w,theta:f}},X2=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a}=t,l=$7(s,a),c=s+l,d=Mn(e,n,r,s),f=Mn(e,n,r,c),p=Lt(WP||(WP=$a(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(s>c),f.x,f.y);if(i>0){var g=Mn(e,n,i,s),y=Mn(e,n,i,c);p+=Lt(JP||(JP=$a(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,i,i,+(Math.abs(l)>180),+(s<=c),g.x,g.y)}else p+=Lt(QP||(QP=$a(["L ",","," Z"])),e,n);return p},Y7=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:c,endAngle:d}=t,f=qi(d-c),{circleTangency:p,lineTangency:g,theta:y}=Qf({cx:e,cy:n,radius:r,angle:c,sign:f,cornerRadius:s,cornerIsExternal:l}),{circleTangency:S,lineTangency:w,theta:x}=Qf({cx:e,cy:n,radius:r,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:l}),E=l?Math.abs(c-d):Math.abs(c-d)-y-x;if(E<0)return a?Lt(ZP||(ZP=$a(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,s,s,s*2,s,s,-s*2):X2({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:c,endAngle:d});var C=Lt(eR||(eR=$a(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,s,s,+(f<0),p.x,p.y,r,r,+(E>180),+(f<0),S.x,S.y,s,s,+(f<0),w.x,w.y);if(i>0){var{circleTangency:T,lineTangency:N,theta:R}=Qf({cx:e,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:I,lineTangency:k,theta:B}=Qf({cx:e,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),z=l?Math.abs(c-d):Math.abs(c-d)-R-B;if(z<0&&s===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+=Lt(tR||(tR=$a(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,s,s,+(f<0),I.x,I.y,i,i,+(z>180),+(f>0),T.x,T.y,s,s,+(f<0),N.x,N.y)}else C+=Lt(nR||(nR=$a(["L",",","Z"])),e,n);return C},X7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},K2=t=>{var e=Nn(t,X7),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f,className:p}=e;if(s<r||d===f)return null;var g=rt("recharts-sector",p),y=s-r,S=fa(a,y,0,!0),w;return S>0&&Math.abs(d-f)<360?w=Y7({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(S,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:f}):w=X2({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:d,endAngle:f}),M.createElement("path",$b({},Rn(e),{className:g,d:w}))};function K7(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(NO(e)){if(t==="centric"){var{cx:i,cy:r,innerRadius:s,outerRadius:a,angle:l}=e,c=Mn(i,r,s,l),d=Mn(i,r,a,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return Y2(e)}}var d0={},f0={},h0={},iR;function W7(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GO();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(h0)),h0}var rR;function J7(){return rR||(rR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W7();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(f0)),f0}var sR;function Q7(){return sR||(sR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qO(),n=J7();function i(r,s,a){a&&typeof a!="number"&&e.isIterateeCall(r,s,a)&&(s=a=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),a=a===void 0?r<s?1:-1:n.toFinite(a);const l=Math.max(Math.ceil((s-r)/(a||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=a;return c}t.range=i})(d0)),d0}var p0,aR;function Z7(){return aR||(aR=1,p0=Q7().range),p0}var e9=Z7();const dS=Br(e9);function la(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function t9(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fS(t){let e,n,i;t.length!==2?(e=la,n=(l,c)=>la(t(l),c),i=(l,c)=>t(l)-c):(e=t===la||t===t9?t:n9,n=t,i=t);function r(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(l,c,d=0,f=l.length){if(d<f){if(e(c,c)!==0)return f;do{const p=d+f>>>1;n(l[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function a(l,c,d=0,f=l.length){const p=r(l,c,d,f-1);return p>d&&i(l[p-1],c)>-i(l[p],c)?p-1:p}return{left:r,center:a,right:s}}function n9(){return 0}function W2(t){return t===null?NaN:+t}function*i9(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const r9=fS(la),td=r9.right;fS(W2).center;class oR extends Map{constructor(e,n=o9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(lR(this,e))}has(e){return super.has(lR(this,e))}set(e,n){return super.set(s9(this,e),n)}delete(e){return super.delete(a9(this,e))}}function lR({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function s9({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function a9({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function o9(t){return t!==null&&typeof t=="object"?t.valueOf():t}function l9(t=la){if(t===la)return J2;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function J2(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const u9=Math.sqrt(50),c9=Math.sqrt(10),d9=Math.sqrt(2);function Jh(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=u9?10:s>=c9?5:s>=d9?2:1;let l,c,d;return r<0?(d=Math.pow(10,-r)/a,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,r)*a,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?Jh(t,e,n*2):[l,c,d]}function Yb(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?Jh(e,t,n):Jh(t,e,n);if(!(s>=r))return[];const l=s-r+1,c=new Array(l);if(i)if(a<0)for(let d=0;d<l;++d)c[d]=(s-d)/-a;else for(let d=0;d<l;++d)c[d]=(s-d)*a;else if(a<0)for(let d=0;d<l;++d)c[d]=(r+d)/-a;else for(let d=0;d<l;++d)c[d]=(r+d)*a;return c}function Xb(t,e,n){return e=+e,t=+t,n=+n,Jh(t,e,n)[2]}function Kb(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Xb(e,t,n):Xb(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function uR(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function cR(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function Q2(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?J2:l9(r);i>n;){if(i-n>600){const c=i-n+1,d=e-n+1,f=Math.log(c),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),y=Math.max(n,Math.floor(e-d*p/c+g)),S=Math.min(i,Math.floor(e+(c-d)*p/c+g));Q2(t,e,y,S,r)}const s=t[e];let a=n,l=i;for(tc(t,n,e),r(t[i],s)>0&&tc(t,n,i);a<l;){for(tc(t,a,l),++a,--l;r(t[a],s)<0;)++a;for(;r(t[l],s)>0;)--l}r(t[n],s)===0?tc(t,n,l):(++l,tc(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function tc(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function f9(t,e,n){if(t=Float64Array.from(i9(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return cR(t);if(e>=1)return uR(t);var i,r=(i-1)*e,s=Math.floor(r),a=uR(Q2(t,s).subarray(0,s+1)),l=cR(t.subarray(s+1));return a+(l-a)*(r-s)}}function h9(t,e,n=W2){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(r-s)}}function p9(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Ji(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Rs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Wb=Symbol("implicit");function hS(){var t=new oR,e=[],n=[],i=Wb;function r(s){let a=t.get(s);if(a===void 0){if(i!==Wb)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new oR;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return hS(e,n).unknown(i)},Ji.apply(r,arguments),r}function pS(){var t=hS().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,l=!1,c=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,y=r<i,S=y?r:i,w=y?i:r;s=(w-S)/Math.max(1,g-c+d*2),l&&(s=Math.floor(s)),S+=(w-S-s*(g-c))*f,a=s*(1-c),l&&(S=Math.round(S),a=Math.round(a));var x=p9(g).map(function(E){return S+s*E});return n(y?x.reverse():x)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,p()):[i,r]},t.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,l=!0,p()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,d=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return pS(e(),[i,r]).round(l).paddingInner(c).paddingOuter(d).align(f)},Ji.apply(p(),arguments)}function Z2(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Z2(e())},t}function ek(){return Z2(pS.apply(null,arguments).paddingInner(1))}function mS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function tk(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function nd(){}var Mc=.7,Qh=1/Mc,Pl="\\s*([+-]?\\d+)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",m9=/^#([0-9a-f]{3,8})$/,g9=new RegExp(`^rgb\\(${Pl},${Pl},${Pl}\\)$`),v9=new RegExp(`^rgb\\(${Dr},${Dr},${Dr}\\)$`),y9=new RegExp(`^rgba\\(${Pl},${Pl},${Pl},${Pc}\\)$`),b9=new RegExp(`^rgba\\(${Dr},${Dr},${Dr},${Pc}\\)$`),A9=new RegExp(`^hsl\\(${Pc},${Dr},${Dr}\\)$`),S9=new RegExp(`^hsla\\(${Pc},${Dr},${Dr},${Pc}\\)$`),dR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mS(nd,Rc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fR,formatHex:fR,formatHex8:w9,formatHsl:_9,formatRgb:hR,toString:hR});function fR(){return this.rgb().formatHex()}function w9(){return this.rgb().formatHex8()}function _9(){return nk(this).formatHsl()}function hR(){return this.rgb().formatRgb()}function Rc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=m9.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?pR(e):n===3?new ui(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Zf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Zf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=g9.exec(t))?new ui(e[1],e[2],e[3],1):(e=v9.exec(t))?new ui(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=y9.exec(t))?Zf(e[1],e[2],e[3],e[4]):(e=b9.exec(t))?Zf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=A9.exec(t))?vR(e[1],e[2]/100,e[3]/100,1):(e=S9.exec(t))?vR(e[1],e[2]/100,e[3]/100,e[4]):dR.hasOwnProperty(t)?pR(dR[t]):t==="transparent"?new ui(NaN,NaN,NaN,0):null}function pR(t){return new ui(t>>16&255,t>>8&255,t&255,1)}function Zf(t,e,n,i){return i<=0&&(t=e=n=NaN),new ui(t,e,n,i)}function x9(t){return t instanceof nd||(t=Rc(t)),t?(t=t.rgb(),new ui(t.r,t.g,t.b,t.opacity)):new ui}function Jb(t,e,n,i){return arguments.length===1?x9(t):new ui(t,e,n,i??1)}function ui(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}mS(ui,Jb,tk(nd,{brighter(t){return t=t==null?Qh:Math.pow(Qh,t),new ui(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mc:Math.pow(Mc,t),new ui(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ui(eo(this.r),eo(this.g),eo(this.b),Zh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mR,formatHex:mR,formatHex8:E9,formatRgb:gR,toString:gR}));function mR(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}`}function E9(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}${Ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function gR(){const t=Zh(this.opacity);return`${t===1?"rgb(":"rgba("}${eo(this.r)}, ${eo(this.g)}, ${eo(this.b)}${t===1?")":`, ${t})`}`}function Zh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ya(t){return t=eo(t),(t<16?"0":"")+t.toString(16)}function vR(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ar(t,e,n,i)}function nk(t){if(t instanceof ar)return new ar(t.h,t.s,t.l,t.opacity);if(t instanceof nd||(t=Rc(t)),!t)return new ar;if(t instanceof ar)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,l=s-r,c=(s+r)/2;return l?(e===s?a=(n-i)/l+(n<i)*6:n===s?a=(i-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+r:2-s-r,a*=60):l=c>0&&c<1?0:a,new ar(a,l,c,t.opacity)}function T9(t,e,n,i){return arguments.length===1?nk(t):new ar(t,e,n,i??1)}function ar(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}mS(ar,T9,tk(nd,{brighter(t){return t=t==null?Qh:Math.pow(Qh,t),new ar(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mc:Math.pow(Mc,t),new ar(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ui(m0(t>=240?t-240:t+120,r,i),m0(t,r,i),m0(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ar(yR(this.h),eh(this.s),eh(this.l),Zh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zh(this.opacity);return`${t===1?"hsl(":"hsla("}${yR(this.h)}, ${eh(this.s)*100}%, ${eh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function yR(t){return t=(t||0)%360,t<0?t+360:t}function eh(t){return Math.max(0,Math.min(1,t||0))}function m0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gS=t=>()=>t;function C9(t,e){return function(n){return t+n*e}}function M9(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function P9(t){return(t=+t)==1?ik:function(e,n){return n-e?M9(e,n,t):gS(isNaN(e)?n:e)}}function ik(t,e){var n=e-t;return n?C9(t,n):gS(isNaN(t)?e:t)}const bR=(function t(e){var n=P9(e);function i(r,s){var a=n((r=Jb(r)).r,(s=Jb(s)).r),l=n(r.g,s.g),c=n(r.b,s.b),d=ik(r.opacity,s.opacity);return function(f){return r.r=a(f),r.g=l(f),r.b=c(f),r.opacity=d(f),r+""}}return i.gamma=t,i})(1);function R9(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function N9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I9(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=Gl(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<i;++a)s[a]=r[a](l);return s}}function D9(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ep(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function O9(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Gl(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Qb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g0=new RegExp(Qb.source,"g");function k9(t){return function(){return t}}function L9(t){return function(e){return t(e)+""}}function U9(t,e){var n=Qb.lastIndex=g0.lastIndex=0,i,r,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(i=Qb.exec(t))&&(r=g0.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,c.push({i:a,x:ep(i,r)})),n=g0.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?L9(c[0].x):k9(e):(e=c.length,function(d){for(var f=0,p;f<e;++f)l[(p=c[f]).i]=p.x(d);return l.join("")})}function Gl(t,e){var n=typeof e,i;return e==null||n==="boolean"?gS(e):(n==="number"?ep:n==="string"?(i=Rc(e))?(e=i,bR):U9:e instanceof Rc?bR:e instanceof Date?D9:N9(e)?R9:Array.isArray(e)?I9:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?O9:ep)(t,e)}function vS(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function B9(t,e){e===void 0&&(e=t,t=Gl);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[l](a-l)}}function F9(t){return function(){return t}}function tp(t){return+t}var AR=[0,1];function jn(t){return t}function Zb(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:F9(isNaN(e)?NaN:.5)}function z9(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function H9(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=Zb(r,i),s=n(a,s)):(i=Zb(i,r),s=n(s,a)),function(l){return s(i(l))}}function G9(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Zb(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=td(t,l,1,i)-1;return s[c](r[c](l))}}function id(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function im(){var t=AR,e=AR,n=Gl,i,r,s,a=jn,l,c,d;function f(){var g=Math.min(t.length,e.length);return a!==jn&&(a=z9(t[0],t[g-1])),l=g>2?G9:H9,c=d=null,p}function p(g){return g==null||isNaN(g=+g)?s:(c||(c=l(t.map(i),e,n)))(i(a(g)))}return p.invert=function(g){return a(r((d||(d=l(e,t.map(i),ep)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,tp),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=vS,f()},p.clamp=function(g){return arguments.length?(a=g?!0:jn,f()):a!==jn},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,y){return i=g,r=y,f()}}function yS(){return im()(jn,jn)}function q9(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function np(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Ol(t){return t=np(Math.abs(t)),t?t[1]:NaN}function V9(t,e){return function(n,i){for(var r=n.length,s=[],a=0,l=t[0],c=0;r>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(n.substring(r-=l,r+l)),!((c+=l+1)>i));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function j9(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nc(t){if(!(e=$9.exec(t)))throw new Error("invalid format: "+t);var e;return new bS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Nc.prototype=bS.prototype;function bS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Y9(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var rk;function X9(t,e){var n=np(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(rk=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+np(t,Math.max(0,e+s-1))[0]}function SR(t,e){var n=np(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const wR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:q9,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SR(t*100,e),r:SR,s:X9,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _R(t){return t}var xR=Array.prototype.map,ER=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function K9(t){var e=t.grouping===void 0||t.thousands===void 0?_R:V9(xR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?_R:j9(xR.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=Nc(p);var g=p.fill,y=p.align,S=p.sign,w=p.symbol,x=p.zero,E=p.width,C=p.comma,T=p.precision,N=p.trim,R=p.type;R==="n"?(C=!0,R="g"):wR[R]||(T===void 0&&(T=12),N=!0,R="g"),(x||g==="0"&&y==="=")&&(x=!0,g="0",y="=");var I=w==="$"?n:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",k=w==="$"?i:/[%p]/.test(R)?a:"",B=wR[R],z=/[defgprs%]/.test(R);T=T===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function V(G){var W=I,oe=k,ae,pe,F;if(R==="c")oe=B(G)+oe,G="";else{G=+G;var j=G<0||1/G<0;if(G=isNaN(G)?c:B(Math.abs(G),T),N&&(G=Y9(G)),j&&+G==0&&S!=="+"&&(j=!1),W=(j?S==="("?S:l:S==="-"||S==="("?"":S)+W,oe=(R==="s"?ER[8+rk/3]:"")+oe+(j&&S==="("?")":""),z){for(ae=-1,pe=G.length;++ae<pe;)if(F=G.charCodeAt(ae),48>F||F>57){oe=(F===46?r+G.slice(ae+1):G.slice(ae))+oe,G=G.slice(0,ae);break}}}C&&!x&&(G=e(G,1/0));var re=W.length+G.length+oe.length,ue=re<E?new Array(E-re+1).join(g):"";switch(C&&x&&(G=e(ue+G,ue.length?E-oe.length:1/0),ue=""),y){case"<":G=W+G+oe+ue;break;case"=":G=W+ue+G+oe;break;case"^":G=ue.slice(0,re=ue.length>>1)+W+G+oe+ue.slice(re);break;default:G=ue+W+G+oe;break}return s(G)}return V.toString=function(){return p+""},V}function f(p,g){var y=d((p=Nc(p),p.type="f",p)),S=Math.max(-8,Math.min(8,Math.floor(Ol(g)/3)))*3,w=Math.pow(10,-S),x=ER[8+S/3];return function(E){return y(w*E)+x}}return{format:d,formatPrefix:f}}var th,AS,sk;W9({thousands:",",grouping:[3],currency:["$",""]});function W9(t){return th=K9(t),AS=th.format,sk=th.formatPrefix,th}function J9(t){return Math.max(0,-Ol(Math.abs(t)))}function Q9(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ol(e)/3)))*3-Ol(Math.abs(t)))}function Z9(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ol(e)-Ol(t))+1}function ak(t,e,n,i){var r=Kb(t,e,n),s;switch(i=Nc(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=Q9(r,a))&&(i.precision=s),sk(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=Z9(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=J9(r))&&(i.precision=s-(i.type==="%")*2);break}}return AS(i)}function va(t){var e=t.domain;return t.ticks=function(n){var i=e();return Yb(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return ak(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],l=i[s],c,d,f=10;for(l<a&&(d=a,a=l,l=d,d=r,r=s,s=d);f-- >0;){if(d=Xb(a,l,n),d===c)return i[r]=a,i[s]=l,e(i);if(d>0)a=Math.floor(a/d)*d,l=Math.ceil(l/d)*d;else if(d<0)a=Math.ceil(a*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function ok(){var t=yS();return t.copy=function(){return id(t,ok())},Ji.apply(t,arguments),va(t)}function lk(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,tp),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return lk(t).unknown(e)},t=arguments.length?Array.from(t,tp):[0,1],va(n)}function uk(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function TR(t){return Math.log(t)}function CR(t){return Math.exp(t)}function eJ(t){return-Math.log(-t)}function tJ(t){return-Math.exp(-t)}function nJ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function iJ(t){return t===10?nJ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function rJ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function MR(t){return(e,n)=>-t(-e,n)}function SS(t){const e=t(TR,CR),n=e.domain;let i=10,r,s;function a(){return r=rJ(i),s=iJ(i),n()[0]<0?(r=MR(r),s=MR(s),t(eJ,tJ)):t(TR,CR),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=r(d),y=r(f),S,w;const x=l==null?10:+l;let E=[];if(!(i%1)&&y-g<x){if(g=Math.floor(g),y=Math.ceil(y),d>0){for(;g<=y;++g)for(S=1;S<i;++S)if(w=g<0?S/s(-g):S*s(g),!(w<d)){if(w>f)break;E.push(w)}}else for(;g<=y;++g)for(S=i-1;S>=1;--S)if(w=g>0?S/s(-g):S*s(g),!(w<d)){if(w>f)break;E.push(w)}E.length*2<x&&(E=Yb(d,f,x))}else E=Yb(g,y,Math.min(y-g,x)).map(s);return p?E.reverse():E},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=Nc(c)).precision==null&&(c.trim=!0),c=AS(c)),l===1/0)return c;const d=Math.max(1,i*l/e.ticks().length);return f=>{let p=f/s(Math.round(r(f)));return p*i<i-.5&&(p*=i),p<=d?c(f):""}},e.nice=()=>n(uk(n(),{floor:l=>s(Math.floor(r(l))),ceil:l=>s(Math.ceil(r(l)))})),e}function ck(){const t=SS(im()).domain([1,10]);return t.copy=()=>id(t,ck()).base(t.base()),Ji.apply(t,arguments),t}function PR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function RR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function wS(t){var e=1,n=t(PR(e),RR(e));return n.constant=function(i){return arguments.length?t(PR(e=+i),RR(e)):e},va(n)}function dk(){var t=wS(im());return t.copy=function(){return id(t,dk()).constant(t.constant())},Ji.apply(t,arguments)}function NR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function sJ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function aJ(t){return t<0?-t*t:t*t}function _S(t){var e=t(jn,jn),n=1;function i(){return n===1?t(jn,jn):n===.5?t(sJ,aJ):t(NR(n),NR(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},va(e)}function xS(){var t=_S(im());return t.copy=function(){return id(t,xS()).exponent(t.exponent())},Ji.apply(t,arguments),t}function oJ(){return xS.apply(null,arguments).exponent(.5)}function IR(t){return Math.sign(t)*t*t}function lJ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function fk(){var t=yS(),e=[0,1],n=!1,i;function r(s){var a=lJ(t(s));return isNaN(a)?i:n?Math.round(a):a}return r.invert=function(s){return t.invert(IR(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,tp)).map(IR)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return fk(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Ji.apply(r,arguments),va(r)}function hk(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=h9(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?i:e[td(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(la),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return hk().domain(t).range(e).unknown(i)},Ji.apply(s,arguments)}function pk(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function a(c){return c!=null&&c<=c?r[td(i,c,0,n)]:s}function l(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},a.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,i[0]]:d>=n?[i[n-1],e]:[i[d-1],i[d]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return i.slice()},a.copy=function(){return pk().domain([t,e]).range(r).unknown(s)},Ji.apply(va(a),arguments)}function mk(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[td(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return mk().domain(t).range(e).unknown(n)},Ji.apply(r,arguments)}const v0=new Date,y0=new Date;function sn(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),l=r.ceil(s);return s-a<l-s?a:l},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,l)=>{const c=[];if(s=r.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<a);return c},r.filter=s=>sn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(v0.setTime(+s),y0.setTime(+a),t(v0),t(y0),Math.floor(n(v0,y0))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const ip=sn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ip.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?sn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ip);ip.range;const ps=1e3,Vi=ps*60,ms=Vi*60,Ss=ms*24,ES=Ss*7,DR=Ss*30,b0=Ss*365,Xa=sn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ps)},(t,e)=>(e-t)/ps,t=>t.getUTCSeconds());Xa.range;const TS=sn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ps)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getMinutes());TS.range;const CS=sn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getUTCMinutes());CS.range;const MS=sn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ps-t.getMinutes()*Vi)},(t,e)=>{t.setTime(+t+e*ms)},(t,e)=>(e-t)/ms,t=>t.getHours());MS.range;const PS=sn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ms)},(t,e)=>(e-t)/ms,t=>t.getUTCHours());PS.range;const rd=sn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Ss,t=>t.getDate()-1);rd.range;const rm=sn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ss,t=>t.getUTCDate()-1);rm.range;const gk=sn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ss,t=>Math.floor(t/Ss));gk.range;function mo(t){return sn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vi)/ES)}const sm=mo(0),rp=mo(1),uJ=mo(2),cJ=mo(3),kl=mo(4),dJ=mo(5),fJ=mo(6);sm.range;rp.range;uJ.range;cJ.range;kl.range;dJ.range;fJ.range;function go(t){return sn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ES)}const am=go(0),sp=go(1),hJ=go(2),pJ=go(3),Ll=go(4),mJ=go(5),gJ=go(6);am.range;sp.range;hJ.range;pJ.range;Ll.range;mJ.range;gJ.range;const RS=sn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RS.range;const NS=sn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NS.range;const ws=sn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:sn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ws.range;const _s=sn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_s.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:sn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});_s.range;function vk(t,e,n,i,r,s){const a=[[Xa,1,ps],[Xa,5,5*ps],[Xa,15,15*ps],[Xa,30,30*ps],[s,1,Vi],[s,5,5*Vi],[s,15,15*Vi],[s,30,30*Vi],[r,1,ms],[r,3,3*ms],[r,6,6*ms],[r,12,12*ms],[i,1,Ss],[i,2,2*Ss],[n,1,ES],[e,1,DR],[e,3,3*DR],[t,1,b0]];function l(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const y=p&&typeof p.range=="function"?p:c(d,f,p),S=y?y.range(d,+f+1):[];return g?S.reverse():S}function c(d,f,p){const g=Math.abs(f-d)/p,y=fS(([,,x])=>x).right(a,g);if(y===a.length)return t.every(Kb(d/b0,f/b0,p));if(y===0)return ip.every(Math.max(Kb(d,f,p),1));const[S,w]=a[g/a[y-1][2]<a[y][2]/g?y-1:y];return S.every(w)}return[l,c]}const[vJ,yJ]=vk(_s,NS,am,gk,PS,CS),[bJ,AJ]=vk(ws,RS,sm,rd,MS,TS);function A0(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function S0(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nc(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function SJ(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,d=ic(r),f=rc(r),p=ic(s),g=rc(s),y=ic(a),S=rc(a),w=ic(l),x=rc(l),E=ic(c),C=rc(c),T={a:j,A:re,b:ue,B:Pe,c:null,d:FR,e:FR,f:VJ,g:eQ,G:nQ,H:HJ,I:GJ,j:qJ,L:yk,m:jJ,M:$J,p:L,q:X,Q:GR,s:qR,S:YJ,u:XJ,U:KJ,V:WJ,w:JJ,W:QJ,x:null,X:null,y:ZJ,Y:tQ,Z:iQ,"%":HR},N={a:se,A:ce,b:Se,B:Te,c:null,d:zR,e:zR,f:oQ,g:vQ,G:bQ,H:rQ,I:sQ,j:aQ,L:Ak,m:lQ,M:uQ,p:ge,q:lt,Q:GR,s:qR,S:cQ,u:dQ,U:fQ,V:hQ,w:pQ,W:mQ,x:null,X:null,y:gQ,Y:yQ,Z:AQ,"%":HR},R={a:V,A:G,b:W,B:oe,c:ae,d:UR,e:UR,f:UJ,g:LR,G:kR,H:BR,I:BR,j:DJ,L:LJ,m:IJ,M:OJ,p:z,q:NJ,Q:FJ,s:zJ,S:kJ,u:TJ,U:CJ,V:MJ,w:EJ,W:PJ,x:pe,X:F,y:LR,Y:kR,Z:RJ,"%":BJ};T.x=I(n,T),T.X=I(i,T),T.c=I(e,T),N.x=I(n,N),N.X=I(i,N),N.c=I(e,N);function I(Z,Ne){return function(Ie){var le=[],ut=-1,ze=0,Ft=Z.length,zt,Qi,mr;for(Ie instanceof Date||(Ie=new Date(+Ie));++ut<Ft;)Z.charCodeAt(ut)===37&&(le.push(Z.slice(ze,ut)),(Qi=OR[zt=Z.charAt(++ut)])!=null?zt=Z.charAt(++ut):Qi=zt==="e"?" ":"0",(mr=Ne[zt])&&(zt=mr(Ie,Qi)),le.push(zt),ze=ut+1);return le.push(Z.slice(ze,ut)),le.join("")}}function k(Z,Ne){return function(Ie){var le=nc(1900,void 0,1),ut=B(le,Z,Ie+="",0),ze,Ft;if(ut!=Ie.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(Ne&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(ze=S0(nc(le.y,0,1)),Ft=ze.getUTCDay(),ze=Ft>4||Ft===0?sp.ceil(ze):sp(ze),ze=rm.offset(ze,(le.V-1)*7),le.y=ze.getUTCFullYear(),le.m=ze.getUTCMonth(),le.d=ze.getUTCDate()+(le.w+6)%7):(ze=A0(nc(le.y,0,1)),Ft=ze.getDay(),ze=Ft>4||Ft===0?rp.ceil(ze):rp(ze),ze=rd.offset(ze,(le.V-1)*7),le.y=ze.getFullYear(),le.m=ze.getMonth(),le.d=ze.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Ft="Z"in le?S0(nc(le.y,0,1)).getUTCDay():A0(nc(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Ft+5)%7:le.w+le.U*7-(Ft+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,S0(le)):A0(le)}}function B(Z,Ne,Ie,le){for(var ut=0,ze=Ne.length,Ft=Ie.length,zt,Qi;ut<ze;){if(le>=Ft)return-1;if(zt=Ne.charCodeAt(ut++),zt===37){if(zt=Ne.charAt(ut++),Qi=R[zt in OR?Ne.charAt(ut++):zt],!Qi||(le=Qi(Z,Ie,le))<0)return-1}else if(zt!=Ie.charCodeAt(le++))return-1}return le}function z(Z,Ne,Ie){var le=d.exec(Ne.slice(Ie));return le?(Z.p=f.get(le[0].toLowerCase()),Ie+le[0].length):-1}function V(Z,Ne,Ie){var le=y.exec(Ne.slice(Ie));return le?(Z.w=S.get(le[0].toLowerCase()),Ie+le[0].length):-1}function G(Z,Ne,Ie){var le=p.exec(Ne.slice(Ie));return le?(Z.w=g.get(le[0].toLowerCase()),Ie+le[0].length):-1}function W(Z,Ne,Ie){var le=E.exec(Ne.slice(Ie));return le?(Z.m=C.get(le[0].toLowerCase()),Ie+le[0].length):-1}function oe(Z,Ne,Ie){var le=w.exec(Ne.slice(Ie));return le?(Z.m=x.get(le[0].toLowerCase()),Ie+le[0].length):-1}function ae(Z,Ne,Ie){return B(Z,e,Ne,Ie)}function pe(Z,Ne,Ie){return B(Z,n,Ne,Ie)}function F(Z,Ne,Ie){return B(Z,i,Ne,Ie)}function j(Z){return a[Z.getDay()]}function re(Z){return s[Z.getDay()]}function ue(Z){return c[Z.getMonth()]}function Pe(Z){return l[Z.getMonth()]}function L(Z){return r[+(Z.getHours()>=12)]}function X(Z){return 1+~~(Z.getMonth()/3)}function se(Z){return a[Z.getUTCDay()]}function ce(Z){return s[Z.getUTCDay()]}function Se(Z){return c[Z.getUTCMonth()]}function Te(Z){return l[Z.getUTCMonth()]}function ge(Z){return r[+(Z.getUTCHours()>=12)]}function lt(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var Ne=I(Z+="",T);return Ne.toString=function(){return Z},Ne},parse:function(Z){var Ne=k(Z+="",!1);return Ne.toString=function(){return Z},Ne},utcFormat:function(Z){var Ne=I(Z+="",N);return Ne.toString=function(){return Z},Ne},utcParse:function(Z){var Ne=k(Z+="",!0);return Ne.toString=function(){return Z},Ne}}}var OR={"-":"",_:" ",0:"0"},bn=/^\s*\d+/,wJ=/^%/,_J=/[\\^$*+?|[\]().{}]/g;function Ze(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function xJ(t){return t.replace(_J,"\\$&")}function ic(t){return new RegExp("^(?:"+t.map(xJ).join("|")+")","i")}function rc(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function EJ(t,e,n){var i=bn.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function TJ(t,e,n){var i=bn.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function CJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function MJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function PJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function kR(t,e,n){var i=bn.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function LR(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function RJ(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function NJ(t,e,n){var i=bn.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function IJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function UR(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function DJ(t,e,n){var i=bn.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function BR(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function OJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function kJ(t,e,n){var i=bn.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function LJ(t,e,n){var i=bn.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function UJ(t,e,n){var i=bn.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function BJ(t,e,n){var i=wJ.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function FJ(t,e,n){var i=bn.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function zJ(t,e,n){var i=bn.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function FR(t,e){return Ze(t.getDate(),e,2)}function HJ(t,e){return Ze(t.getHours(),e,2)}function GJ(t,e){return Ze(t.getHours()%12||12,e,2)}function qJ(t,e){return Ze(1+rd.count(ws(t),t),e,3)}function yk(t,e){return Ze(t.getMilliseconds(),e,3)}function VJ(t,e){return yk(t,e)+"000"}function jJ(t,e){return Ze(t.getMonth()+1,e,2)}function $J(t,e){return Ze(t.getMinutes(),e,2)}function YJ(t,e){return Ze(t.getSeconds(),e,2)}function XJ(t){var e=t.getDay();return e===0?7:e}function KJ(t,e){return Ze(sm.count(ws(t)-1,t),e,2)}function bk(t){var e=t.getDay();return e>=4||e===0?kl(t):kl.ceil(t)}function WJ(t,e){return t=bk(t),Ze(kl.count(ws(t),t)+(ws(t).getDay()===4),e,2)}function JJ(t){return t.getDay()}function QJ(t,e){return Ze(rp.count(ws(t)-1,t),e,2)}function ZJ(t,e){return Ze(t.getFullYear()%100,e,2)}function eQ(t,e){return t=bk(t),Ze(t.getFullYear()%100,e,2)}function tQ(t,e){return Ze(t.getFullYear()%1e4,e,4)}function nQ(t,e){var n=t.getDay();return t=n>=4||n===0?kl(t):kl.ceil(t),Ze(t.getFullYear()%1e4,e,4)}function iQ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ze(e/60|0,"0",2)+Ze(e%60,"0",2)}function zR(t,e){return Ze(t.getUTCDate(),e,2)}function rQ(t,e){return Ze(t.getUTCHours(),e,2)}function sQ(t,e){return Ze(t.getUTCHours()%12||12,e,2)}function aQ(t,e){return Ze(1+rm.count(_s(t),t),e,3)}function Ak(t,e){return Ze(t.getUTCMilliseconds(),e,3)}function oQ(t,e){return Ak(t,e)+"000"}function lQ(t,e){return Ze(t.getUTCMonth()+1,e,2)}function uQ(t,e){return Ze(t.getUTCMinutes(),e,2)}function cQ(t,e){return Ze(t.getUTCSeconds(),e,2)}function dQ(t){var e=t.getUTCDay();return e===0?7:e}function fQ(t,e){return Ze(am.count(_s(t)-1,t),e,2)}function Sk(t){var e=t.getUTCDay();return e>=4||e===0?Ll(t):Ll.ceil(t)}function hQ(t,e){return t=Sk(t),Ze(Ll.count(_s(t),t)+(_s(t).getUTCDay()===4),e,2)}function pQ(t){return t.getUTCDay()}function mQ(t,e){return Ze(sp.count(_s(t)-1,t),e,2)}function gQ(t,e){return Ze(t.getUTCFullYear()%100,e,2)}function vQ(t,e){return t=Sk(t),Ze(t.getUTCFullYear()%100,e,2)}function yQ(t,e){return Ze(t.getUTCFullYear()%1e4,e,4)}function bQ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ll(t):Ll.ceil(t),Ze(t.getUTCFullYear()%1e4,e,4)}function AQ(){return"+0000"}function HR(){return"%"}function GR(t){return+t}function qR(t){return Math.floor(+t/1e3)}var ol,wk,_k;SQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function SQ(t){return ol=SJ(t),wk=ol.format,ol.parse,_k=ol.utcFormat,ol.utcParse,ol}function wQ(t){return new Date(t)}function _Q(t){return t instanceof Date?+t:+new Date(+t)}function IS(t,e,n,i,r,s,a,l,c,d){var f=yS(),p=f.invert,g=f.domain,y=d(".%L"),S=d(":%S"),w=d("%I:%M"),x=d("%I %p"),E=d("%a %d"),C=d("%b %d"),T=d("%B"),N=d("%Y");function R(I){return(c(I)<I?y:l(I)<I?S:a(I)<I?w:s(I)<I?x:i(I)<I?r(I)<I?E:C:n(I)<I?T:N)(I)}return f.invert=function(I){return new Date(p(I))},f.domain=function(I){return arguments.length?g(Array.from(I,_Q)):g().map(wQ)},f.ticks=function(I){var k=g();return t(k[0],k[k.length-1],I??10)},f.tickFormat=function(I,k){return k==null?R:d(k)},f.nice=function(I){var k=g();return(!I||typeof I.range!="function")&&(I=e(k[0],k[k.length-1],I??10)),I?g(uk(k,I)):f},f.copy=function(){return id(f,IS(t,e,n,i,r,s,a,l,c,d))},f}function xQ(){return Ji.apply(IS(bJ,AJ,ws,RS,sm,rd,MS,TS,Xa,wk).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EQ(){return Ji.apply(IS(vJ,yJ,_s,NS,am,rm,PS,CS,Xa,_k).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function om(){var t=0,e=1,n,i,r,s,a=jn,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:a(r===0?.5:(p=(s(p)-n)*r,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(a=p,d):a};function f(p){return function(g){var y,S;return arguments.length?([y,S]=g,a=p(y,S),d):[a(0),a(1)]}}return d.range=f(Gl),d.rangeRound=f(vS),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),d}}function ya(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function xk(){var t=va(om()(jn));return t.copy=function(){return ya(t,xk())},Rs.apply(t,arguments)}function Ek(){var t=SS(om()).domain([1,10]);return t.copy=function(){return ya(t,Ek()).base(t.base())},Rs.apply(t,arguments)}function Tk(){var t=wS(om());return t.copy=function(){return ya(t,Tk()).constant(t.constant())},Rs.apply(t,arguments)}function DS(){var t=_S(om());return t.copy=function(){return ya(t,DS()).exponent(t.exponent())},Rs.apply(t,arguments)}function TQ(){return DS.apply(null,arguments).exponent(.5)}function Ck(){var t=[],e=jn;function n(i){if(i!=null&&!isNaN(i=+i))return e((td(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(la),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>f9(t,s/i))},n.copy=function(){return Ck(e).domain(t)},Rs.apply(n,arguments)}function lm(){var t=0,e=.5,n=1,i=1,r,s,a,l,c,d=jn,f,p=!1,g;function y(w){return isNaN(w=+w)?g:(w=.5+((w=+f(w))-s)*(i*w<i*s?l:c),d(p?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([t,e,n]=w,r=f(t=+t),s=f(e=+e),a=f(n=+n),l=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,y):[t,e,n]},y.clamp=function(w){return arguments.length?(p=!!w,y):p},y.interpolator=function(w){return arguments.length?(d=w,y):d};function S(w){return function(x){var E,C,T;return arguments.length?([E,C,T]=x,d=B9(w,[E,C,T]),y):[d(0),d(.5),d(1)]}}return y.range=S(Gl),y.rangeRound=S(vS),y.unknown=function(w){return arguments.length?(g=w,y):g},function(w){return f=w,r=w(t),s=w(e),a=w(n),l=r===s?0:.5/(s-r),c=s===a?0:.5/(a-s),i=s<r?-1:1,y}}function Mk(){var t=va(lm()(jn));return t.copy=function(){return ya(t,Mk())},Rs.apply(t,arguments)}function Pk(){var t=SS(lm()).domain([.1,1,10]);return t.copy=function(){return ya(t,Pk()).base(t.base())},Rs.apply(t,arguments)}function Rk(){var t=wS(lm());return t.copy=function(){return ya(t,Rk()).constant(t.constant())},Rs.apply(t,arguments)}function OS(){var t=_S(lm());return t.copy=function(){return ya(t,OS()).exponent(t.exponent())},Rs.apply(t,arguments)}function CQ(){return OS.apply(null,arguments).exponent(.5)}const fc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pS,scaleDiverging:Mk,scaleDivergingLog:Pk,scaleDivergingPow:OS,scaleDivergingSqrt:CQ,scaleDivergingSymlog:Rk,scaleIdentity:lk,scaleImplicit:Wb,scaleLinear:ok,scaleLog:ck,scaleOrdinal:hS,scalePoint:ek,scalePow:xS,scaleQuantile:hk,scaleQuantize:pk,scaleRadial:fk,scaleSequential:xk,scaleSequentialLog:Ek,scaleSequentialPow:DS,scaleSequentialQuantile:Ck,scaleSequentialSqrt:TQ,scaleSequentialSymlog:Tk,scaleSqrt:oJ,scaleSymlog:dk,scaleThreshold:mk,scaleTime:xQ,scaleUtc:EQ,tickFormat:ak},Symbol.toStringTag,{value:"Module"}));var ba=t=>t.chartData,MQ=Q([ba],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),kS=(t,e,n,i)=>i?MQ(t):ba(t);function ha(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Mt(e)&&Mt(n))return!0}return!1}function VR(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Nk(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(Mt(n))r=n;else if(typeof n=="function")return;if(Mt(i))s=i;else if(typeof i=="function")return;var a=[r,s];if(ha(a))return a}}function PQ(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(ha(i))return VR(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,a,l;if(r==="auto")e!=null&&(a=Math.min(...e));else if(xe(r))a=r;else if(typeof r=="function")try{e!=null&&(a=r(e?.[0]))}catch{}else if(typeof r=="string"&&iP.test(r)){var c=iP.exec(r);if(c==null||c[1]==null||e==null)a=void 0;else{var d=+c[1];a=e[0]-d}}else a=e?.[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(xe(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e?.[1]))}catch{}else if(typeof s=="string"&&rP.test(s)){var f=rP.exec(s);if(f==null||f[1]==null||e==null)l=void 0;else{var p=+f[1];l=e[1]+p}}else l=e?.[1];var g=[a,l];if(ha(g))return e==null?g:VR(g,e,n)}}}var ql=1e9,RQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},US,Pt=!0,Wi="[DecimalError] ",to=Wi+"Invalid argument: ",LS=Wi+"Exponent out of range: ",Vl=Math.floor,qa=Math.pow,NQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wi,mn=1e7,At=7,Ik=9007199254740991,ap=Vl(Ik/At),ye={};ye.absoluteValue=ye.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ye.comparedTo=ye.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*At;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ye.dividedBy=ye.div=function(t){return gs(this,new this.constructor(t))};ye.dividedToIntegerBy=ye.idiv=function(t){var e=this,n=e.constructor;return gt(gs(e,new n(t),0,1),n.precision)};ye.equals=ye.eq=function(t){return!this.cmp(t)};ye.exponent=function(){return Zt(this)};ye.greaterThan=ye.gt=function(t){return this.cmp(t)>0};ye.greaterThanOrEqualTo=ye.gte=function(t){return this.cmp(t)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(t){return this.cmp(t)<0};ye.lessThanOrEqualTo=ye.lte=function(t){return this.cmp(t)<1};ye.logarithm=ye.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(wi))throw Error(Wi+"NaN");if(n.s<1)throw Error(Wi+(n.s?"NaN":"-Infinity"));return n.eq(wi)?new i(0):(Pt=!1,e=gs(Ic(n,s),Ic(t,s),s),Pt=!0,gt(e,r))};ye.minus=ye.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?kk(e,t):Dk(e,(t.s=-t.s,t))};ye.modulo=ye.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Wi+"NaN");return n.s?(Pt=!1,e=gs(n,t,0,1).times(t),Pt=!0,n.minus(e)):gt(new i(n),r)};ye.naturalExponential=ye.exp=function(){return Ok(this)};ye.naturalLogarithm=ye.ln=function(){return Ic(this)};ye.negated=ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ye.plus=ye.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Dk(e,t):kk(e,(t.s=-t.s,t))};ye.precision=ye.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(to+t);if(e=Zt(r)+1,i=r.d.length-1,n=i*At+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};ye.squareRoot=ye.sqrt=function(){var t,e,n,i,r,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wi+"NaN")}for(t=Zt(l),Pt=!1,r=Math.sqrt(+l),r==0||r==1/0?(e=Nr(l.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=Vl((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new c(e)):i=new c(r.toString()),n=c.precision,r=a=n+3;;)if(s=i,i=s.plus(gs(l,s,a+2)).times(.5),Nr(s.d).slice(0,a)===(e=Nr(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),r==a&&e=="4999"){if(gt(s,n+1,0),s.times(s).eq(l)){i=s;break}}else if(e!="9999")break;a+=4}return Pt=!0,gt(i,n)};ye.times=ye.mul=function(t){var e,n,i,r,s,a,l,c,d,f=this,p=f.constructor,g=f.d,y=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,d=y.length,c<d&&(s=g,g=y,y=s,a=c,c=d,d=a),s=[],a=c+d,i=a;i--;)s.push(0);for(i=d;--i>=0;){for(e=0,r=c+i;r>i;)l=s[r]+y[i]*g[r-i-1]+e,s[r--]=l%mn|0,e=l/mn|0;s[r]=(s[r]+e)%mn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Pt?gt(t,p.precision):t};ye.toDecimalPlaces=ye.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Ur(t,0,ql),e===void 0?e=i.rounding:Ur(e,0,8),gt(n,t+Zt(n)+1,e))};ye.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=lo(i,!0):(Ur(t,0,ql),e===void 0?e=r.rounding:Ur(e,0,8),i=gt(new r(i),t+1,e),n=lo(i,!0,t+1)),n};ye.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?lo(r):(Ur(t,0,ql),e===void 0?e=s.rounding:Ur(e,0,8),i=gt(new s(r),t+Zt(r)+1,e),n=lo(i.abs(),!1,t+Zt(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};ye.toInteger=ye.toint=function(){var t=this,e=t.constructor;return gt(new e(t),Zt(t)+1,e.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(t){var e,n,i,r,s,a,l=this,c=l.constructor,d=12,f=+(t=new c(t));if(!t.s)return new c(wi);if(l=new c(l),!l.s){if(t.s<1)throw Error(Wi+"Infinity");return l}if(l.eq(wi))return l;if(i=c.precision,t.eq(wi))return gt(l,i);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=f<0?-f:f)<=Ik){for(r=new c(wi),e=Math.ceil(i/At+4),Pt=!1;n%2&&(r=r.times(l),$R(r.d,e)),n=Vl(n/2),n!==0;)l=l.times(l),$R(l.d,e);return Pt=!0,t.s<0?new c(wi).div(r):gt(r,i)}}else if(s<0)throw Error(Wi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Pt=!1,r=t.times(Ic(l,i+d)),Pt=!0,r=Ok(r),r.s=s,r};ye.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=Zt(r),i=lo(r,n<=s.toExpNeg||n>=s.toExpPos)):(Ur(t,1,ql),e===void 0?e=s.rounding:Ur(e,0,8),r=gt(new s(r),t,e),n=Zt(r),i=lo(r,t<=n||n<=s.toExpNeg,t)),i};ye.toSignificantDigits=ye.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Ur(t,1,ql),e===void 0?e=i.rounding:Ur(e,0,8)),gt(new i(n),t,e)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Zt(t),n=t.constructor;return lo(t,e<=n.toExpNeg||e>=n.toExpPos)};function Dk(t,e){var n,i,r,s,a,l,c,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Pt?gt(e,p):e;if(c=t.d,d=e.d,a=t.e,r=e.e,c=c.slice(),s=a-r,s){for(s<0?(i=c,s=-s,l=d.length):(i=d,r=a,l=c.length),a=Math.ceil(p/At),l=a>l?a+1:l+1,s>l&&(s=l,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,i=d,d=c,c=i),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/mn|0,c[s]%=mn;for(n&&(c.unshift(n),++r),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=r,Pt?gt(e,p):e}function Ur(t,e,n){if(t!==~~t||t<e||t>n)throw Error(to+t)}function Nr(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=At-i.length,n&&(s+=na(n)),s+=i;a=t[e],i=a+"",n=At-i.length,n&&(s+=na(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var gs=(function(){function t(i,r){var s,a=0,l=i.length;for(i=i.slice();l--;)s=i[l]*r+a,i[l]=s%mn|0,a=s/mn|0;return a&&i.unshift(a),i}function e(i,r,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(i[l]!=r[l]){c=i[l]>r[l]?1:-1;break}return c}function n(i,r,s){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*mn+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a){var l,c,d,f,p,g,y,S,w,x,E,C,T,N,R,I,k,B,z=i.constructor,V=i.s==r.s?1:-1,G=i.d,W=r.d;if(!i.s)return new z(i);if(!r.s)throw Error(Wi+"Division by zero");for(c=i.e-r.e,k=W.length,R=G.length,y=new z(V),S=y.d=[],d=0;W[d]==(G[d]||0);)++d;if(W[d]>(G[d]||0)&&--c,s==null?C=s=z.precision:a?C=s+(Zt(i)-Zt(r))+1:C=s,C<0)return new z(0);if(C=C/At+2|0,d=0,k==1)for(f=0,W=W[0],C++;(d<R||f)&&C--;d++)T=f*mn+(G[d]||0),S[d]=T/W|0,f=T%W|0;else{for(f=mn/(W[0]+1)|0,f>1&&(W=t(W,f),G=t(G,f),k=W.length,R=G.length),N=k,w=G.slice(0,k),x=w.length;x<k;)w[x++]=0;B=W.slice(),B.unshift(0),I=W[0],W[1]>=mn/2&&++I;do f=0,l=e(W,w,k,x),l<0?(E=w[0],k!=x&&(E=E*mn+(w[1]||0)),f=E/I|0,f>1?(f>=mn&&(f=mn-1),p=t(W,f),g=p.length,x=w.length,l=e(p,w,g,x),l==1&&(f--,n(p,k<g?B:W,g))):(f==0&&(l=f=1),p=W.slice()),g=p.length,g<x&&p.unshift(0),n(w,p,x),l==-1&&(x=w.length,l=e(W,w,k,x),l<1&&(f++,n(w,k<x?B:W,x))),x=w.length):l===0&&(f++,w=[0]),S[d++]=f,l&&w[0]?w[x++]=G[N]||0:(w=[G[N]],x=1);while((N++<R||w[0]!==void 0)&&C--)}return S[0]||S.shift(),y.e=c,gt(y,a?s+Zt(y)+1:s)}})();function Ok(t,e){var n,i,r,s,a,l,c=0,d=0,f=t.constructor,p=f.precision;if(Zt(t)>16)throw Error(LS+Zt(t));if(!t.s)return new f(wi);for(Pt=!1,l=p,a=new f(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(i=Math.log(qa(2,d))/Math.LN10*2+5|0,l+=i,n=r=s=new f(wi),f.precision=l;;){if(r=gt(r.times(t),l),n=n.times(++c),a=s.plus(gs(r,n,l)),Nr(a.d).slice(0,l)===Nr(s.d).slice(0,l)){for(;d--;)s=gt(s.times(s),l);return f.precision=p,e==null?(Pt=!0,gt(s,p)):s}s=a}}function Zt(t){for(var e=t.e*At,n=t.d[0];n>=10;n/=10)e++;return e}function w0(t,e,n){if(e>t.LN10.sd())throw Pt=!0,n&&(t.precision=n),Error(Wi+"LN10 precision limit exceeded");return gt(new t(t.LN10),e)}function na(t){for(var e="";t--;)e+="0";return e}function Ic(t,e){var n,i,r,s,a,l,c,d,f,p=1,g=10,y=t,S=y.d,w=y.constructor,x=w.precision;if(y.s<1)throw Error(Wi+(y.s?"NaN":"-Infinity"));if(y.eq(wi))return new w(0);if(e==null?(Pt=!1,d=x):d=e,y.eq(10))return e==null&&(Pt=!0),w0(w,d);if(d+=g,w.precision=d,n=Nr(S),i=n.charAt(0),s=Zt(y),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(t),n=Nr(y.d),i=n.charAt(0),p++;s=Zt(y),i>1?(y=new w("0."+n),s++):y=new w(i+"."+n.slice(1))}else return c=w0(w,d+2,x).times(s+""),y=Ic(new w(i+"."+n.slice(1)),d-g).plus(c),w.precision=x,e==null?(Pt=!0,gt(y,x)):y;for(l=a=y=gs(y.minus(wi),y.plus(wi),d),f=gt(y.times(y),d),r=3;;){if(a=gt(a.times(f),d),c=l.plus(gs(a,new w(r),d)),Nr(c.d).slice(0,d)===Nr(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(w0(w,d+2,x).times(s+""))),l=gs(l,new w(p),d),w.precision=x,e==null?(Pt=!0,gt(l,x)):l;l=c,r+=2}}function jR(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=Vl(n/At),t.d=[],i=(n+1)%At,n<0&&(i+=At),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=At;i<r;)t.d.push(+e.slice(i,i+=At));e=e.slice(i),i=At-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Pt&&(t.e>ap||t.e<-ap))throw Error(LS+n)}else t.s=0,t.e=0,t.d=[0];return t}function gt(t,e,n){var i,r,s,a,l,c,d,f,p=t.d;for(a=1,s=p[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=At,r=e,d=p[f=0];else{if(f=Math.ceil((i+1)/At),s=p.length,f>=s)return t;for(d=s=p[f],a=1;s>=10;s/=10)a++;i%=At,r=i-At+a}if(n!==void 0&&(s=qa(10,a-r-1),l=d/s%10|0,c=e<0||p[f+1]!==void 0||d%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(i>0?r>0?d/qa(10,a-r):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(s=Zt(t),p.length=1,e=e-s-1,p[0]=qa(10,(At-e%At)%At),t.e=Vl(-e/At)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=f,s=1,f--):(p.length=f+1,s=qa(10,At-i),p[f]=r>0?(d/qa(10,a-r)%qa(10,r)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==mn&&(p[0]=1,++t.e);break}else{if(p[f]+=s,p[f]!=mn)break;p[f--]=0,s=1}for(i=p.length;p[--i]===0;)p.pop();if(Pt&&(t.e>ap||t.e<-ap))throw Error(LS+Zt(t));return t}function kk(t,e){var n,i,r,s,a,l,c,d,f,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Pt?gt(e,y):e;if(c=t.d,p=e.d,i=e.e,d=t.e,c=c.slice(),a=d-i,a){for(f=a<0,f?(n=c,a=-a,l=p.length):(n=p,i=d,l=c.length),r=Math.max(Math.ceil(y/At),l)+2,a>r&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for(r=c.length,l=p.length,f=r<l,f&&(l=r),r=0;r<l;r++)if(c[r]!=p[r]){f=c[r]<p[r];break}a=0}for(f&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,r=p.length-l;r>0;--r)c[l++]=0;for(r=p.length;r>a;){if(c[--r]<p[r]){for(s=r;s&&c[--s]===0;)c[s]=mn-1;--c[s],c[r]+=mn}c[r]-=p[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--i;return c[0]?(e.d=c,e.e=i,Pt?gt(e,y):e):new g(0)}function lo(t,e,n){var i,r=Zt(t),s=Nr(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+na(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+na(-r-1)+s,n&&(i=n-a)>0&&(s+=na(i))):r>=a?(s+=na(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+na(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=na(i))),t.s<0?"-"+s:s}function $R(t,e){if(t.length>e)return t.length=e,!0}function Lk(t){var e,n,i;function r(s){var a=this;if(!(a instanceof r))return new r(s);if(a.constructor=r,s instanceof r){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(to+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return jR(a,s.toString())}else if(typeof s!="string")throw Error(to+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,NQ.test(s))jR(a,s);else throw Error(to+s)}if(r.prototype=ye,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=Lk,r.config=r.set=IQ,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function IQ(t){if(!t||typeof t!="object")throw Error(Wi+"Object expected");var e,n,i,r=["precision",1,ql,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(Vl(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(to+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(to+n+": "+i);return this}var US=Lk(RQ);wi=new US(1);const ot=US;var DQ=t=>t,Uk={},Bk=t=>t===Uk,YR=t=>function e(){return arguments.length===0||arguments.length===1&&Bk(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Fk=(t,e)=>t===1?e:YR(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=i.filter(a=>a!==Uk).length;return s>=t?e(...i):Fk(t-s,YR(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var d=i.map(f=>Bk(f)?l.shift():f);return e(...d,...l)}))}),OQ=t=>Fk(t.length,t),eA=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},kQ=OQ((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),LQ=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return DQ;var r=n.reverse(),s=r[0],a=r.slice(1);return function(){return a.reduce((l,c)=>c(l),s(...arguments))}};function zk(t){var e;return t===0?e=1:e=Math.floor(new ot(t).abs().log(10).toNumber())+1,e}function Hk(t,e,n){for(var i=new ot(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}var Gk=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},qk=(t,e,n)=>{if(t.lte(0))return new ot(0);var i=zk(t.toNumber()),r=new ot(10).pow(i),s=t.div(r),a=i!==1?.05:.1,l=new ot(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=l.mul(r);return e?new ot(c.toNumber()):new ot(Math.ceil(c.toNumber()))},UQ=(t,e,n)=>{var i=new ot(1),r=new ot(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new ot(10).pow(zk(t)-1),r=new ot(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new ot(Math.floor(t)))}else t===0?r=new ot(Math.floor((e-1)/2)):n||(r=new ot(Math.floor(t)));var a=Math.floor((e-1)/2),l=LQ(kQ(c=>r.add(new ot(c-a).mul(i)).toNumber()),eA);return l(0,e)},Vk=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new ot(0),tickMin:new ot(0),tickMax:new ot(0)};var a=qk(new ot(n).sub(e).div(i-1),r,s),l;e<=0&&n>=0?l=new ot(0):(l=new ot(e).add(n).div(2),l=l.sub(new ot(l).mod(a)));var c=Math.ceil(l.sub(e).div(a).toNumber()),d=Math.ceil(new ot(n).sub(l).div(a).toNumber()),f=c+d+1;return f>i?Vk(e,n,i,r,s+1):(f<i&&(d=n>0?d+(i-f):d,c=n>0?c:c+(i-f)),{step:a,tickMin:l.sub(new ot(c).mul(a)),tickMax:l.add(new ot(d).mul(a))})},BQ=function(e){var[n,i]=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[l,c]=Gk([n,i]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...eA(0,r-1).map(()=>1/0)]:[...eA(0,r-1).map(()=>-1/0),c];return n>i?d.reverse():d}if(l===c)return UQ(l,r,s);var{step:f,tickMin:p,tickMax:g}=Vk(l,c,a,s,0),y=Hk(p,g.add(new ot(.1).mul(f)),f);return n>i?y.reverse():y},FQ=function(e,n){var[i,r]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=Gk([i,r]);if(a===-1/0||l===1/0)return[i,r];if(a===l)return[a];var c=Math.max(n,2),d=qk(new ot(l).sub(a).div(c-1),s,0),f=[...Hk(new ot(a),new ot(l),d),l];return s===!1&&(f=f.map(p=>Math.round(p))),i>r?f.reverse():f},zQ=t=>t.rootProps.barCategoryGap,um=t=>t.rootProps.stackOffset,jk=t=>t.rootProps.reverseStackOrder,BS=t=>t.options.chartName,cm=t=>t.rootProps.syncId,$k=t=>t.rootProps.syncMethod,dm=t=>t.options.eventEmitter,Pn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},fs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Si={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},fm=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},HQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fs.angleAxisId,includeHidden:!1,name:void 0,reversed:fs.reversed,scale:fs.scale,tick:fs.tick,tickCount:void 0,ticks:void 0,type:fs.type,unit:void 0},GQ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:Si.type,unit:void 0},qQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fs.scale,tick:fs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},VQ={allowDataOverflow:Si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Si.scale,tick:Si.tick,tickCount:Si.tickCount,ticks:void 0,type:"category",unit:void 0},FS=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?qQ:HQ,zS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?VQ:GQ,hm=t=>t.polarOptions,HS=Q([Ms,Ps,In],z7),Yk=Q([hm,HS],(t,e)=>{if(t!=null)return fa(t.innerRadius,e,0)}),Xk=Q([hm,HS],(t,e)=>{if(t!=null)return fa(t.outerRadius,e,e*.8)}),jQ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Kk=Q([hm],jQ);Q([FS,Kk],fm);var Wk=Q([HS,Yk,Xk],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Q([zS,Wk],fm);var Jk=Q([St,hm,Yk,Xk,Ms,Ps],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:a,cy:l,startAngle:c,endAngle:d}=e;return{cx:fa(a,r,r/2),cy:fa(l,s,s/2),innerRadius:n,outerRadius:i,startAngle:c,endAngle:d,clockWise:!1}}}),an=(t,e)=>e,pm=(t,e,n)=>n;function Qk(t){return t?.id}function Zk(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:s}=n,a=new Map;return t.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:i;if(!(d==null||d.length===0)){var f=Qk(l);d.forEach((p,g)=>{var y=s==null||r?g:String(vn(p,s,null)),S=vn(p,l.dataKey,0),w;a.has(y)?w=a.get(y):w={},Object.assign(w,{[f]:S}),a.set(y,w)})}}),Array.from(a.values())}function GS(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var mm=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function gm(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function $Q(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var on=t=>{var e=St(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},jl=t=>t.tooltip.settings.axisId;function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(i){YQ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function YQ(t,e,n){return(e=XQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XQ(t){var e=KQ(t,"string");return typeof e=="symbol"?e:e+""}function KQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tA=[0,"auto"],hn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},eL=(t,e)=>t.cartesianAxis.xAxis[e],Fr=(t,e)=>{var n=eL(t,e);return n??hn},pn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tA,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Wc},tL=(t,e)=>t.cartesianAxis.yAxis[e],zr=(t,e)=>{var n=tL(t,e);return n??pn},WQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qS=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??WQ},Kn=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);case"zAxis":return qS(t,n);case"angleAxis":return FS(t,n);case"radiusAxis":return zS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},JQ=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},sd=(t,e,n)=>{switch(e){case"xAxis":return Fr(t,n);case"yAxis":return zr(t,n);case"angleAxis":return FS(t,n);case"radiusAxis":return zS(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},nL=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function iL(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var rL=t=>t.graphicalItems.cartesianItems,QQ=Q([an,pm],iL),sL=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),ad=Q([rL,Kn,QQ],sL,{memoizeOptions:{resultEqualityCheck:gm}}),aL=Q([ad],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(GS)),oL=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),ZQ=Q([ad],oL),lL=t=>t.map(e=>e.data).filter(Boolean).flat(1),eZ=Q([ad],lL,{memoizeOptions:{resultEqualityCheck:gm}}),uL=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},VS=Q([eZ,kS],uL),cL=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:vn(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:vn(r,i)}))):t.map(i=>({value:i})),vm=Q([VS,Kn,ad],cL);function dL(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function ph(t){if(Un(t)||t instanceof Date){var e=Number(t);if(Mt(e))return e}}function KR(t){if(Array.isArray(t)){var e=[ph(t[0]),ph(t[1])];return ha(e)?e:void 0}var n=ph(t);if(n!=null)return[n,n]}function xs(t){return t.map(ph).filter(MO)}function tZ(t,e,n){return!n||typeof e!="number"||Xi(e)?[]:n.length?xs(n.flatMap(i=>{var r=vn(t,i.dataKey),s,a;if(Array.isArray(r)?[s,a]=r:s=a=r,!(!Mt(s)||!Mt(a)))return[e-s,e+a]})):[]}var ln=t=>{var e=on(t),n=jl(t);return sd(t,e,n)},od=Q([ln],t=>t?.dataKey),nZ=Q([aL,kS,ln],Zk),fL=(t,e,n,i)=>{var r={},s=e.reduce((a,l)=>{if(l.stackId==null)return a;var c=a[l.stackId];return c==null&&(c=[]),c.push(l),a[l.stackId]=c,a},r);return Object.fromEntries(Object.entries(s).map(a=>{var[l,c]=a,d=i?[...c].reverse():c,f=d.map(Qk);return[l,{stackedData:IK(t,f,n),graphicalItems:d}]}))},iZ=Q([nZ,aL,um,jk],fL),hL=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(i==null&&n!=="zAxis"){var a=kK(t,r,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},rZ=Q([Kn],t=>t.allowDataOverflow),jS=t=>{var e;if(t==null||!("domain"in t))return tA;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=xs(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:tA},pL=Q([Kn],jS),mL=Q([pL,rZ],Nk),sZ=Q([iZ,ba,an,mL],hL,{memoizeOptions:{resultEqualityCheck:mm}}),$S=t=>t.errorBars,aZ=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>dL(n,i)),lp=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},gL=(t,e,n,i,r)=>{var s,a;if(n.length>0&&t.forEach(l=>{n.forEach(c=>{var d,f,p=(d=i[c.id])===null||d===void 0?void 0:d.filter(E=>dL(r,E)),g=vn(l,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),y=tZ(l,g,p);if(y.length>=2){var S=Math.min(...y),w=Math.max(...y);(s==null||S<s)&&(s=S),(a==null||w>a)&&(a=w)}var x=KR(g);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),a=a==null?x[1]:Math.max(a,x[1]))})}),e?.dataKey!=null&&t.forEach(l=>{var c=KR(vn(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),a=a==null?c[1]:Math.max(a,c[1]))}),Mt(s)&&Mt(a))return[s,a]},oZ=Q([VS,Kn,ZQ,$S,an],gL,{memoizeOptions:{resultEqualityCheck:mm}});function lZ(t){var{value:e}=t;if(Un(e)||e instanceof Date)return e}var uZ=(t,e,n)=>{var i=t.map(lZ).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&TO(i))?dS(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},vL=t=>t.referenceElements.dots,$l=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),cZ=Q([vL,an,pm],$l),yL=t=>t.referenceElements.areas,dZ=Q([yL,an,pm],$l),bL=t=>t.referenceElements.lines,fZ=Q([bL,an,pm],$l),AL=(t,e)=>{if(t!=null){var n=xs(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},hZ=Q(cZ,an,AL),SL=(t,e)=>{if(t!=null){var n=xs(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},pZ=Q([dZ,an],SL);function mZ(t){var e;if(t.x!=null)return xs([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.x);return n==null||n.length===0?[]:xs(n)}function gZ(t){var e;if(t.y!=null)return xs([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(i=>i.y);return n==null||n.length===0?[]:xs(n)}var wL=(t,e)=>{if(t!=null){var n=t.flatMap(i=>e==="xAxis"?mZ(i):gZ(i));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},vZ=Q([fZ,an],wL),yZ=Q(hZ,vZ,pZ,(t,e,n)=>lp(t,n,e)),_L=(t,e,n,i,r,s,a,l)=>{if(n!=null)return n;var c=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",d=c?lp(i,s,r):lp(s,r);return PQ(e,d,t.allowDataOverflow)},bZ=Q([Kn,pL,mL,sZ,oZ,yZ,St,an],_L,{memoizeOptions:{resultEqualityCheck:mm}}),AZ=[0,1],xL=(t,e,n,i,r,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:l,type:c}=t,d=ga(e,s);if(d&&l==null){var f;return dS(0,(f=n?.length)!==null&&f!==void 0?f:0)}return c==="category"?uZ(i,t,d):r==="expand"?AZ:a}},YS=Q([Kn,St,VS,vm,um,an,bZ],xL),EL=(t,e,n,i,r)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat($c(s));return l in fc?l:"point"}}},ld=Q([Kn,St,nL,BS,an],EL);function SZ(t){if(t!=null){if(t in fc)return fc[t]();var e="scale".concat($c(t));if(e in fc)return fc[e]()}}function XS(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=SZ(e);if(r!=null){var s=r.domain(n).range(i);return MK(s),s}}}var TL=(t,e,n)=>{var i=jS(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&ha(t))return BQ(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ha(t))return FQ(t,e.tickCount,e.allowDecimals)}},KS=Q([YS,sd,ld],TL),CL=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&ha(e)&&Array.isArray(n)&&n.length>0){var r=e[0],s=n[0],a=e[1],l=n[n.length-1];return[Math.min(r,s),Math.max(a,l)]}return e},wZ=Q([Kn,YS,KS,an],CL),_Z=Q(vm,Kn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(xs(t.map(p=>p.value))).sort((p,g)=>p-g),r=i[0],s=i[i.length-1];if(r==null||s==null)return 1/0;var a=s-r;if(a===0)return 1/0;for(var l=0;l<i.length-1;l++){var c=i[l],d=i[l+1];if(!(c==null||d==null)){var f=d-c;n=Math.min(n,f)}}return n/a}}),ML=Q(_Z,St,zQ,In,(t,e,n,i,r)=>r,(t,e,n,i,r)=>{if(!Mt(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var a=fa(n,t*s),l=t*s/2;return l-a-(l-a)/s*a}return 0}),xZ=(t,e,n)=>{var i=Fr(t,e);return i==null||typeof i.padding!="string"?0:ML(t,"xAxis",e,n,i.padding)},EZ=(t,e,n)=>{var i=zr(t,e);return i==null||typeof i.padding!="string"?0:ML(t,"yAxis",e,n,i.padding)},TZ=Q(Fr,xZ,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),CZ=Q(zr,EZ,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),MZ=Q([In,TZ,Jc,Jp,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),PZ=Q([In,St,CZ,Jc,Jp,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:a}=r;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),ud=(t,e,n,i)=>{var r;switch(e){case"xAxis":return MZ(t,n,i);case"yAxis":return PZ(t,n,i);case"zAxis":return(r=qS(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return Kk(t);case"radiusAxis":return Wk(t,n);default:return}},PL=Q([Kn,ud],fm),pa=Q([Kn,ld,wZ,PL],XS);Q([ad,$S,an],aZ);function RL(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var ym=(t,e)=>e,bm=(t,e,n)=>n,RZ=Q(Kp,ym,bm,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(RL)),NZ=Q(Wp,ym,bm,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(RL)),NL=(t,e)=>({width:t.width,height:e.height}),IZ=(t,e)=>{var n=typeof e.width=="number"?e.width:Wc;return{width:n,height:t.height}},DZ=Q(In,Fr,NL),OZ=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},kZ=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},LZ=Q(Ps,In,RZ,ym,bm,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var c=NL(e,l);a==null&&(a=OZ(e,i,t));var d=i==="top"&&!r||i==="bottom"&&r;s[l.id]=a-Number(d)*c.height,a+=(d?-1:1)*c.height}),s}),UZ=Q(Ms,In,NZ,ym,bm,(t,e,n,i,r)=>{var s={},a;return n.forEach(l=>{var c=IZ(e,l);a==null&&(a=kZ(e,i,t));var d=i==="left"&&!r||i==="right"&&r;s[l.id]=a-Number(d)*c.width,a+=(d?-1:1)*c.width}),s}),BZ=(t,e)=>{var n=Fr(t,e);if(n!=null)return LZ(t,n.orientation,n.mirror)},FZ=Q([In,Fr,BZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}}),zZ=(t,e)=>{var n=zr(t,e);if(n!=null)return UZ(t,n.orientation,n.mirror)},HZ=Q([In,zr,zZ,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}}),GZ=Q(In,zr,(t,e)=>{var n=typeof e.width=="number"?e.width:Wc;return{width:n,height:t.height}}),IL=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:a}=n,l=ga(t,i),c=e.map(d=>d.value);if(a&&l&&s==="category"&&r&&TO(c))return c}},WS=Q([St,vm,Kn,an],IL),DL=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,a=ga(t,i);if(a&&(r==="number"||s!=="auto"))return e.map(l=>l.value)}},JS=Q([St,vm,sd,an],DL),WR=Q([St,JQ,ld,pa,WS,JS,ud,KS,an],(t,e,n,i,r,s,a,l,c)=>{if(e!=null){var d=ga(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:r,isCategorical:d,niceTicks:l,range:a,realScaleType:n,scale:i}}}),qZ=(t,e,n,i,r,s,a,l,c)=>{if(!(e==null||i==null)){var d=ga(t,c),{type:f,ticks:p,tickCount:g}=e,y=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,S=f==="category"&&i.bandwidth?i.bandwidth()/y:0;S=c==="angleAxis"&&s!=null&&s.length>=2?qi(s[0]-s[1])*2*S:S;var w=p||r;if(w){var x=w.map((E,C)=>{var T=a?a.indexOf(E):E;return{index:C,coordinate:i(T)+S,value:E,offset:S}});return x.filter(E=>Mt(E.coordinate))}return d&&l?l.map((E,C)=>({coordinate:i(E)+S,value:E,index:C,offset:S})).filter(E=>Mt(E.coordinate)):i.ticks?i.ticks(g).map(E=>({coordinate:i(E)+S,value:E,offset:S})):i.domain().map((E,C)=>({coordinate:i(E)+S,value:a?a[E]:E,index:C,offset:S}))}},OL=Q([St,sd,ld,pa,KS,ud,WS,JS,an],qZ),VZ=(t,e,n,i,r,s,a)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var l=ga(t,a),{tickCount:c}=e,d=0;return d=a==="angleAxis"&&i?.length>=2?qi(i[0]-i[1])*2*d:d,l&&s?s.map((f,p)=>({coordinate:n(f)+d,value:f,index:p,offset:d})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+d,value:f,offset:d})):n.domain().map((f,p)=>({coordinate:n(f)+d,value:r?r[f]:f,index:p,offset:d}))}},kL=Q([St,sd,pa,ud,WS,JS,an],VZ),LL=Q(Kn,pa,(t,e)=>{if(!(t==null||e==null))return op(op({},t),{},{scale:e})}),jZ=Q([Kn,ld,YS,PL],XS);Q((t,e,n)=>qS(t,n),jZ,(t,e)=>{if(!(t==null||e==null))return op(op({},t),{},{scale:e})});var $Z=Q([St,Kp,Wp],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),UL=t=>t.options.defaultTooltipEventType,BL=t=>t.options.validateTooltipEventTypes;function FL(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function QS(t,e){var n=UL(t),i=BL(t);return FL(e,n,i)}function YZ(t){return Ae(e=>QS(e,t))}var zL=(t,e)=>{var n,i=Number(e);if(!(Xi(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},XZ=t=>t.tooltip.settings,sa={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},KZ={itemInteraction:{click:sa,hover:sa},axisInteraction:{click:sa,hover:sa},keyboardInteraction:sa,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},HL=ci({name:"tooltip",initialState:KZ,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Ct()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:i}=e.payload,r=ur(t).tooltipItemPayloads.indexOf(n);r>-1&&(t.tooltipItemPayloads[r]=i)},prepare:Ct()},removeTooltipEntrySettings:{reducer(t,e){var n=ur(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Ct()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:WZ,replaceTooltipEntrySettings:JZ,removeTooltipEntrySettings:QZ,setTooltipSettingsState:ZZ,setActiveMouseOverItemIndex:eee,mouseLeaveItem:Lle,mouseLeaveChart:GL,setActiveClickItemIndex:Ule,setMouseOverAxisIndex:qL,setMouseClickAxisIndex:tee,setSyncInteraction:nA,setKeyboardInteraction:iA}=HL.actions,nee=HL.reducer;function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(i){iee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function iee(t,e,n){return(e=ree(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ree(t){var e=see(t,"string");return typeof e=="symbol"?e:e+""}function see(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aee(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function oee(t){return t.index!=null}var VL=(t,e,n,i)=>{if(e==null)return sa;var r=aee(t,e,n);if(r==null)return sa;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(oee(r)){if(s)return nh(nh({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i,graphicalItemId:void 0};return nh(nh({},sa),{},{coordinate:r.coordinate})};function lee(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function uee(t,e){var n=lee(t),i=e[0],r=e[1];if(n===void 0)return!1;var s=Math.min(i,r),a=Math.max(i,r);return n>=s&&n<=a}function cee(t,e,n){if(n==null||e==null)return!0;var i=vn(t,e);return i==null||!ha(n)?!0:uee(i,n)}var ZS=(t,e,n,i)=>{var r=t?.index;if(r==null)return null;var s=Number(r);if(!Mt(s))return r;var a=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(a,Math.min(s,l)),d=e[c];return d==null||cee(d,n,i)?String(c):null},jL=(t,e,n,i,r,s,a,l)=>{if(!(s==null||l==null)){var c=a[0],d=c==null?void 0:l(c.positions,s);if(d!=null)return d;var f=r?.[Number(s)];if(f)return n==="horizontal"?{x:f.coordinate,y:(i.top+e)/2}:{x:(i.left+t)/2,y:f.coordinate}}},$L=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=t.itemInteraction.hover.graphicalItemId:r=t.itemInteraction.click.graphicalItemId,r==null&&i!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},cd=t=>t.options.tooltipPayloadSearcher,Yl=t=>t.tooltip;function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ZR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(i){dee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dee(t,e,n){return(e=fee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fee(t){var e=hee(t,"string");return typeof e=="symbol"?e:e+""}function hee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pee(t,e){return t??e}var YL=(t,e,n,i,r,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:f}=n,p=[];return t.reduce((g,y)=>{var S,{dataDefinedOnItem:w,settings:x}=y,E=pee(w,l),C=Array.isArray(E)?A2(E,d,f):E,T=(S=x?.dataKey)!==null&&S!==void 0?S:i,N=x?.nameKey,R;if(i&&Array.isArray(C)&&!Array.isArray(C[0])&&a==="axis"?R=CO(C,i,r):R=s(C,e,c,N),Array.isArray(R))R.forEach(k=>{var B=ZR(ZR({},x),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(sP({tooltipEntrySettings:B,dataKey:k.dataKey,payload:k.payload,value:vn(k.payload,k.dataKey),name:k.name}))});else{var I;g.push(sP({tooltipEntrySettings:x,dataKey:T,payload:R,value:vn(R,T),name:(I=vn(R,N))!==null&&I!==void 0?I:x?.name}))}return g},p)}},ew=Q([ln,St,nL,BS,on],EL),mee=Q([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),gee=Q([on,jl],iL),Xl=Q([mee,ln,gee],sL,{memoizeOptions:{resultEqualityCheck:gm}}),vee=Q([Xl],t=>t.filter(GS)),yee=Q([Xl],lL,{memoizeOptions:{resultEqualityCheck:gm}}),Kl=Q([yee,ba],uL),bee=Q([vee,ba,ln],Zk),tw=Q([Kl,ln,Xl],cL),XL=Q([ln],jS),Aee=Q([ln],t=>t.allowDataOverflow),KL=Q([XL,Aee],Nk),See=Q([Xl],t=>t.filter(GS)),wee=Q([bee,See,um,jk],fL),_ee=Q([wee,ba,on,KL],hL),xee=Q([Xl],oL),Eee=Q([Kl,ln,xee,$S,on],gL,{memoizeOptions:{resultEqualityCheck:mm}}),Tee=Q([vL,on,jl],$l),Cee=Q([Tee,on],AL),Mee=Q([yL,on,jl],$l),Pee=Q([Mee,on],SL),Ree=Q([bL,on,jl],$l),Nee=Q([Ree,on],wL),Iee=Q([Cee,Nee,Pee],lp),Dee=Q([ln,XL,KL,_ee,Eee,Iee,St,on],_L),dd=Q([ln,St,Kl,tw,um,on,Dee],xL),Oee=Q([dd,ln,ew],TL),kee=Q([ln,dd,Oee,on],CL),WL=t=>{var e=on(t),n=jl(t),i=!1;return ud(t,e,n,i)},JL=Q([ln,WL],fm),QL=Q([ln,ew,kee,JL],XS),Lee=Q([St,tw,ln,on],IL),Uee=Q([St,tw,ln,on],DL),Bee=(t,e,n,i,r,s,a,l)=>{if(e){var{type:c}=e,d=ga(t,l);if(i){var f=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,p=c==="category"&&i.bandwidth?i.bandwidth()/f:0;return p=l==="angleAxis"&&r!=null&&r?.length>=2?qi(r[0]-r[1])*2*p:p,d&&a?a.map((g,y)=>({coordinate:i(g)+p,value:g,index:y,offset:p})):i.domain().map((g,y)=>({coordinate:i(g)+p,value:s?s[g]:g,index:y,offset:p}))}}},Ns=Q([St,ln,ew,QL,WL,Lee,Uee,on],Bee),nw=Q([UL,BL,XZ],(t,e,n)=>FL(n.shared,t,e)),ZL=t=>t.tooltip.settings.trigger,iw=t=>t.tooltip.settings.defaultIndex,fd=Q([Yl,nw,ZL,iw],VL),Dc=Q([fd,Kl,od,dd],ZS),eU=Q([Ns,Dc],zL),Fee=Q([fd],t=>{if(t)return t.dataKey});Q([fd],t=>{if(t)return t.graphicalItemId});var tU=Q([Yl,nw,ZL,iw],$L),zee=Q([Ms,Ps,St,In,Ns,iw,tU,cd],jL),Hee=Q([fd,zee],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Gee=Q([fd],t=>{var e;return(e=t?.active)!==null&&e!==void 0?e:!1}),qee=Q([tU,Dc,ba,od,eU,cd,nw],YL),Vee=Q([qee],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function eN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function tN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eN(Object(n),!0).forEach(function(i){jee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jee(t,e,n){return(e=$ee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ee(t){var e=Yee(t,"string");return typeof e=="symbol"?e:e+""}function Yee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xee=()=>Ae(ln),Kee=()=>{var t=Xee(),e=Ae(Ns),n=Ae(QL);return Hh(!t||!n?void 0:tN(tN({},t),{},{scale:n}),e)};function nN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ll(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nN(Object(n),!0).forEach(function(i){Wee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Wee(t,e,n){return(e=Jee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jee(t){var e=Qee(t,"string");return typeof e=="symbol"?e:e+""}function Qee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zee=(t,e,n,i)=>{var r=e.find(s=>s&&s.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.chartY};if(t==="vertical")return{x:i.chartX,y:r.coordinate}}return{x:0,y:0}},ete=(t,e,n,i)=>{var r=e.find(d=>d&&d.index===n);if(r){if(t==="centric"){var s=r.coordinate,{radius:a}=i;return ll(ll(ll({},i),Mn(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=r.coordinate,{angle:c}=i;return ll(ll(ll({},i),Mn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function tte(t,e){var{chartX:n,chartY:i}=t;return n>=e.left&&n<=e.left+e.width&&i>=e.top&&i<=e.top+e.height}var nU=(t,e,n,i,r)=>{var s,a=(s=e?.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<a;l++){var c,d,f,p,g,y=l>0?(c=n[l-1])===null||c===void 0?void 0:c.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,S=(f=n[l])===null||f===void 0?void 0:f.coordinate,w=l>=a-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(g=n[l+1])===null||g===void 0?void 0:g.coordinate,x=void 0;if(!(y==null||S==null||w==null))if(qi(S-y)!==qi(w-S)){var E=[];if(qi(w-S)===qi(r[1]-r[0])){x=w;var C=S+r[1]-r[0];E[0]=Math.min(C,(C+y)/2),E[1]=Math.max(C,(C+y)/2)}else{x=y;var T=w+r[1]-r[0];E[0]=Math.min(S,(T+S)/2),E[1]=Math.max(S,(T+S)/2)}var N=[Math.min(S,(x+S)/2),Math.max(S,(x+S)/2)];if(t>N[0]&&t<=N[1]||t>=E[0]&&t<=E[1]){var R;return(R=n[l])===null||R===void 0?void 0:R.index}}else{var I=Math.min(y,w),k=Math.max(y,w);if(t>(I+S)/2&&t<=(k+S)/2){var B;return(B=n[l])===null||B===void 0?void 0:B.index}}}else if(e)for(var z=0;z<a;z++){var V=e[z];if(V!=null){var G=e[z+1],W=e[z-1];if(z===0&&G!=null&&t<=(V.coordinate+G.coordinate)/2||z===a-1&&W!=null&&t>(V.coordinate+W.coordinate)/2||z>0&&z<a-1&&W!=null&&G!=null&&t>(V.coordinate+W.coordinate)/2&&t<=(V.coordinate+G.coordinate)/2)return V.index}}return-1},nte=()=>Ae(BS),rw=(t,e)=>e,iU=(t,e,n)=>n,sw=(t,e,n,i)=>i,ite=Q(Ns,t=>Fp(t,e=>e.coordinate)),aw=Q([Yl,rw,iU,sw],VL),ow=Q([aw,Kl,od,dd],ZS),rte=(t,e,n)=>{if(e!=null){var i=Yl(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},rU=Q([Yl,rw,iU,sw],$L),up=Q([Ms,Ps,St,In,Ns,sw,rU,cd],jL),ste=Q([aw,up],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),sU=Q([Ns,ow],zL),ate=Q([rU,ow,ba,od,sU,cd,rw],YL),ote=Q([aw,ow],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),lte=(t,e,n,i,r,s,a)=>{if(!(!t||!n||!i||!r)&&tte(t,a)){var l=LK(t,e),c=nU(l,s,r,n,i),d=Zee(e,r,c,t);return{activeIndex:String(c),activeCoordinate:d}}},ute=(t,e,n,i,r,s,a)=>{if(!(!t||!i||!r||!s||!n)){var l=j7(t,n);if(l){var c=UK(l,e),d=nU(c,a,s,i,r),f=ete(e,s,d,l);return{activeIndex:String(d),activeCoordinate:f}}}},cte=(t,e,n,i,r,s,a,l)=>{if(!(!t||!e||!i||!r||!s))return e==="horizontal"||e==="vertical"?lte(t,e,i,r,s,a,l):ute(t,e,n,i,r,s,a)},dte=Q(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var i=t[e];if(i!=null)return n?i.panoramaElement:i.element}}),fte=Q(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(i=>parseInt(i,10)).concat(Object.values(Pn)),n=Array.from(new Set(e));return n.sort((i,r)=>i-r)},{memoizeOptions:{resultEqualityCheck:$Q}});function iN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(n),!0).forEach(function(i){hte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function hte(t,e,n){return(e=pte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pte(t){var e=mte(t,"string");return typeof e=="symbol"?e:e+""}function mte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gte={},vte={zIndexMap:Object.values(Pn).reduce((t,e)=>rN(rN({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),gte)},yte=new Set(Object.values(Pn));function bte(t){return yte.has(t)}var aU=ci({name:"zIndex",initialState:vte,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Ct()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!bte(n)&&delete t.zIndexMap[n])},prepare:Ct()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:i,isPanorama:r}=e.payload;t.zIndexMap[n]?r?t.zIndexMap[n].panoramaElement=i:t.zIndexMap[n].element=i:t.zIndexMap[n]={consumers:0,element:r?void 0:i,panoramaElement:r?i:void 0}},prepare:Ct()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Ct()}}}),{registerZIndexPortal:Ate,unregisterZIndexPortal:Ste,registerZIndexPortalElement:wte,unregisterZIndexPortalElement:_te}=aU.actions,xte=aU.reducer;function pr(t){var{zIndex:e,children:n}=t,i=gW(),r=i&&e!==void 0&&e!==0,s=Bn(),a=Bt();M.useLayoutEffect(()=>r?(a(Ate({zIndex:e})),()=>{a(Ste({zIndex:e}))}):Yc,[a,e,r]);var l=Ae(c=>dte(c,e,s));return r?l?lO.createPortal(n,l):null:n}function rA(){return rA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rA.apply(null,arguments)}function sN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(n),!0).forEach(function(i){Ete(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ete(t,e,n){return(e=Tte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tte(t){var e=Cte(t,"string");return typeof e=="symbol"?e:e+""}function Cte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mte(t){var{cursor:e,cursorComp:n,cursorProps:i}=t;return M.isValidElement(e)?M.cloneElement(e,i):M.createElement(n,i)}function Pte(t){var e,{coordinate:n,payload:i,index:r,offset:s,tooltipAxisBandSize:a,layout:l,cursor:c,tooltipEventType:d,chartName:f}=t,p=n,g=i,y=r;if(!c||!p||f!=="ScatterChart"&&d!=="axis")return null;var S,w,x;if(f==="ScatterChart")S=p,w=r7,x=Pn.cursorLine;else if(f==="BarChart")S=s7(l,p,s,a),w=cS,x=Pn.cursorRectangle;else if(l==="radial"&&NO(p)){var{cx:E,cy:C,radius:T,startAngle:N,endAngle:R}=Y2(p);S={cx:E,cy:C,startAngle:N,endAngle:R,innerRadius:T,outerRadius:T},w=K2,x=Pn.cursorLine}else S={points:K7(l,p,s)},w=G2,x=Pn.cursorLine;var I=typeof c=="object"&&"className"in c?c.className:void 0,k=ih(ih(ih(ih({stroke:"#ccc",pointerEvents:"none"},s),S),Op(c)),{},{payload:g,payloadIndex:y,className:rt("recharts-tooltip-cursor",I)});return M.createElement(pr,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:x},M.createElement(Mte,{cursor:c,cursorComp:w,cursorProps:k}))}function Rte(t){var e=Kee(),n=N2(),i=Zc(),r=nte();return e==null||n==null||i==null||r==null?null:M.createElement(Pte,rA({},t,{offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var oU=M.createContext(null),Nte=()=>M.useContext(oU),_0={exports:{}},aN;function Ite(){return aN||(aN=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new r(f,p||c,g),S=n?n+d:d;return c._events[S]?c._events[S].fn?c._events[S]=[c._events[S],y]:c._events[S].push(y):(c._events[S]=y,c._eventsCount++),c}function a(c,d){--c._eventsCount===0?c._events=new i:delete c._events[d]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,S=new Array(y);g<y;g++)S[g]=p[g].fn;return S},l.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,f,p,g,y,S){var w=n?n+d:d;if(!this._events[w])return!1;var x=this._events[w],E=arguments.length,C,T;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),E){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,p),!0;case 4:return x.fn.call(x.context,f,p,g),!0;case 5:return x.fn.call(x.context,f,p,g,y),!0;case 6:return x.fn.call(x.context,f,p,g,y,S),!0}for(T=1,C=new Array(E-1);T<E;T++)C[T-1]=arguments[T];x.fn.apply(x.context,C)}else{var N=x.length,R;for(T=0;T<N;T++)switch(x[T].once&&this.removeListener(d,x[T].fn,void 0,!0),E){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,f);break;case 3:x[T].fn.call(x[T].context,f,p);break;case 4:x[T].fn.call(x[T].context,f,p,g);break;default:if(!C)for(R=1,C=new Array(E-1);R<E;R++)C[R-1]=arguments[R];x[T].fn.apply(x[T].context,C)}}return!0},l.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},l.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},l.prototype.removeListener=function(d,f,p,g){var y=n?n+d:d;if(!this._events[y])return this;if(!f)return a(this,y),this;var S=this._events[y];if(S.fn)S.fn===f&&(!g||S.once)&&(!p||S.context===p)&&a(this,y);else{for(var w=0,x=[],E=S.length;w<E;w++)(S[w].fn!==f||g&&!S[w].once||p&&S[w].context!==p)&&x.push(S[w]);x.length?this._events[y]=x.length===1?x[0]:x:a(this,y)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(_0)),_0.exports}var Dte=Ite();const Ote=Br(Dte);var Ul=new Ote,sA="recharts.syncEvent.tooltip",aA="recharts.syncEvent.brush";function kte(t,e){if(e){var n=Number.parseInt(e,10);if(!Xi(n))return t?.[n]}}var Lte={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lU=ci({name:"options",initialState:Lte,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ute=lU.reducer,{createEventEmitter:Bte}=lU.actions;function Fte(t){return t.tooltip.syncInteraction}var zte={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},uU=ci({name:"chartData",initialState:zte,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:oN,setDataStartEndIndexes:oA,setComputedData:Ble}=uU.actions,Hte=uU.reducer,Gte=["x","y"];function lN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ul(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lN(Object(n),!0).forEach(function(i){qte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qte(t,e,n){return(e=Vte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=jte(t,"string");return typeof e=="symbol"?e:e+""}function jte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $te(t,e){if(t==null)return{};var n,i,r=Yte(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yte(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Xte(){var t=Ae(cm),e=Ae(dm),n=Bt(),i=Ae($k),r=Ae(Ns),s=Zc(),a=Qc(),l=Ae(c=>c.rootProps.className);M.useEffect(()=>{if(t==null)return Yc;var c=(d,f,p)=>{if(e!==p&&t===d){if(i==="index"){var g;if(a&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var y=f.payload.coordinate,{x:S,y:w}=y,x=$te(y,Gte),{x:E,y:C,width:T,height:N}=f.payload.sourceViewBox,R=ul(ul({},x),{},{x:a.x+(T?(S-E)/T:0)*a.width,y:a.y+(N?(w-C)/N:0)*a.height});n(ul(ul({},f),{},{payload:ul(ul({},f.payload),{},{coordinate:R})}))}else n(f);return}if(r!=null){var I;if(typeof i=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},B=i(r,k);I=r[B]}else i==="value"&&(I=r.find(F=>String(F.value)===f.payload.label));var{coordinate:z}=f.payload;if(I==null||f.payload.active===!1||z==null||a==null){n(nA({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:G}=z,W=Math.min(V,a.x+a.width),oe=Math.min(G,a.y+a.height),ae={x:s==="horizontal"?I.coordinate:W,y:s==="horizontal"?oe:I.coordinate},pe=nA({active:f.payload.active,coordinate:ae,dataKey:f.payload.dataKey,index:String(I.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(pe)}}};return Ul.on(sA,c),()=>{Ul.off(sA,c)}},[l,n,e,t,i,r,s,a])}function Kte(){var t=Ae(cm),e=Ae(dm),n=Bt();M.useEffect(()=>{if(t==null)return Yc;var i=(r,s,a)=>{e!==a&&t===r&&n(oA(s))};return Ul.on(aA,i),()=>{Ul.off(aA,i)}},[n,e,t])}function Wte(){var t=Bt();M.useEffect(()=>{t(Bte())},[t]),Xte(),Kte()}function Jte(t,e,n,i,r,s){var a=Ae(y=>rte(y,t,e)),l=Ae(dm),c=Ae(cm),d=Ae($k),f=Ae(Fte),p=f?.active,g=Qc();M.useEffect(()=>{if(!p&&c!=null&&l!=null){var y=nA({active:s,coordinate:n,dataKey:a,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:g,graphicalItemId:void 0});Ul.emit(sA,c,y,l)}},[p,n,a,r,i,l,c,d,s,g])}function Qte(){var t=Ae(cm),e=Ae(dm),n=Ae(r=>r.chartData.dataStartIndex),i=Ae(r=>r.chartData.dataEndIndex);M.useEffect(()=>{if(!(t==null||n==null||i==null||e==null)){var r={startIndex:n,endIndex:i};Ul.emit(aA,t,r,e)}},[i,n,e,t])}function uN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uN(Object(n),!0).forEach(function(i){Zte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Zte(t,e,n){return(e=ene(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ene(t){var e=tne(t,"string");return typeof e=="symbol"?e:e+""}function tne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nne(t){return t.dataKey}function ine(t,e){return M.isValidElement(t)?M.cloneElement(t,e):typeof t=="function"?M.createElement(t,e):M.createElement(UW,e)}var dN=[],rne={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function sne(t){var e,n,i=Nn(t,rne),{active:r,allowEscapeViewBox:s,animationDuration:a,animationEasing:l,content:c,filterNull:d,isAnimationActive:f,offset:p,payloadUniqBy:g,position:y,reverseDirection:S,useTranslate3d:w,wrapperStyle:x,cursor:E,shared:C,trigger:T,defaultIndex:N,portal:R,axisId:I}=i,k=Bt(),B=typeof N=="number"?String(N):N;M.useEffect(()=>{k(ZZ({shared:C,trigger:T,axisId:I,active:r,defaultIndex:B}))},[k,C,T,I,r,B]);var z=Qc(),V=H2(),G=YZ(C),{activeIndex:W,isActive:oe}=(e=Ae(ge=>ote(ge,G,T,B)))!==null&&e!==void 0?e:{},ae=Ae(ge=>ate(ge,G,T,B)),pe=Ae(ge=>sU(ge,G,T,B)),F=Ae(ge=>ste(ge,G,T,B)),j=ae,re=Nte(),ue=(n=r??oe)!==null&&n!==void 0?n:!1,[Pe,L]=_X([j,ue]),X=G==="axis"?pe:void 0;Jte(G,T,F,X,W,ue);var se=R??re;if(se==null||z==null||G==null)return null;var ce=j??dN;ue||(ce=dN),d&&ce.length&&(ce=KY(ce.filter(ge=>ge.value!=null&&(ge.hide!==!0||i.includeHidden)),g,nne));var Se=ce.length>0,Te=M.createElement(VW,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:f,active:ue,coordinate:F,hasPayload:Se,offset:p,position:y,reverseDirection:S,useTranslate3d:w,viewBox:z,wrapperStyle:x,lastBoundingBox:Pe,innerRef:L,hasPortalFromProps:!!R},ine(c,cN(cN({},i),{},{payload:ce,label:X,active:ue,activeIndex:W,coordinate:F,accessibilityLayer:V})));return M.createElement(M.Fragment,null,lO.createPortal(Te,se),ue&&M.createElement(Rte,{cursor:E,tooltipEventType:G,coordinate:F,payload:ce,index:W}))}function ane(t,e,n){return(e=one(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function one(t){var e=lne(t,"string");return typeof e=="symbol"?e:e+""}function lne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class une{constructor(e){ane(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;i!=null&&this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function fN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fN(Object(n),!0).forEach(function(i){dne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dne(t,e,n){return(e=fne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fne(t){var e=hne(t,"string");return typeof e=="symbol"?e:e+""}function hne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pne={cacheSize:2e3,enableCache:!0},cU=cne({},pne),hN=new une(cU.cacheSize),mne={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pN="recharts_measurement_span";function gne(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(l)}var mN=(t,e)=>{try{var n=document.getElementById(pN);n||(n=document.createElement("span"),n.setAttribute("id",pN),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,mne,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},pc=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||nm.isSsr)return{width:0,height:0};if(!cU.enableCache)return mN(e,n);var i=gne(e,n),r=hN.get(i);if(r)return r;var s=mN(e,n);return hN.set(i,s),s},dU;function vne(t,e,n){return(e=yne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=bne(t,"string");return typeof e=="symbol"?e:e+""}function bne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ane=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Sne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wne={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_ne=["cm","mm","pt","pc","in","Q","px"];function xne(t){return _ne.includes(t)}var Sl="NaN";function Ene(t,e){return t*wne[e]}class Tn{static parse(e){var n,[,i,r]=(n=Sne.exec(e))!==null&&n!==void 0?n:[];return i==null?Tn.NaN:new Tn(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Xi(e)&&(this.unit=""),n!==""&&!Ane.test(n)&&(this.num=NaN,this.unit=""),xne(n)&&(this.num=Ene(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Tn(NaN,""):new Tn(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Tn(NaN,""):new Tn(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Tn(NaN,""):new Tn(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Tn(NaN,""):new Tn(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xi(this.num)}}dU=Tn;vne(Tn,"NaN",new dU(NaN,""));function fU(t){if(t==null||t.includes(Sl))return Sl;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=gN.exec(e))!==null&&n!==void 0?n:[],a=Tn.parse(i??""),l=Tn.parse(s??""),c=r==="*"?a.multiply(l):a.divide(l);if(c.isNaN())return Sl;e=e.replace(gN,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,f,p,g]=(d=vN.exec(e))!==null&&d!==void 0?d:[],y=Tn.parse(f??""),S=Tn.parse(g??""),w=p==="+"?y.add(S):y.subtract(S);if(w.isNaN())return Sl;e=e.replace(vN,w.toString())}return e}var yN=/\(([^()]*)\)/;function Tne(t){for(var e=t,n;(n=yN.exec(e))!=null;){var[,i]=n;e=e.replace(yN,fU(i))}return e}function Cne(t){var e=t.replace(/\s+/g,"");return e=Tne(e),e=fU(e),e}function Mne(t){try{return Cne(t)}catch{return Sl}}function x0(t){var e=Mne(t.slice(5,-1));return e===Sl?"":e}var Pne=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Rne=["dx","dy","angle","className","breakAll"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lA.apply(null,arguments)}function bN(t,e){if(t==null)return{};var n,i,r=Nne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Nne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var hU=/[ \f\n\r\t\v\u2028\u2029]+/,pU=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];gn(e)||(n?r=e.toString().split(""):r=e.toString().split(hU));var s=r.map(l=>({word:l,width:pc(l,i).width})),a=n?0:pc("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function Ine(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var mU=(t,e,n,i)=>t.reduce((r,s)=>{var{word:a,width:l}=s,c=r[r.length-1];if(c&&l!=null&&(e==null||i||c.width+l+n<Number(e)))c.words.push(a),c.width+=l+n;else{var d={words:[a],width:l};r.push(d)}return r},[]),gU=t=>t.reduce((e,n)=>e.width>n.width?e:n),Dne="",AN=(t,e,n,i,r,s,a,l)=>{var c=t.slice(0,e),d=pU({breakAll:n,style:i,children:c+Dne});if(!d)return[!1,[]];var f=mU(d.wordsWithComputedWidth,s,a,l),p=f.length>r||gU(f).width>Number(s);return[p,f]},One=(t,e,n,i,r)=>{var{maxLines:s,children:a,style:l,breakAll:c}=t,d=xe(s),f=String(a),p=mU(e,i,n,r);if(!d||r)return p;var g=p.length>s||gU(p).width>Number(i);if(!g)return p;for(var y=0,S=f.length-1,w=0,x;y<=S&&w<=f.length-1;){var E=Math.floor((y+S)/2),C=E-1,[T,N]=AN(f,C,c,l,s,i,n,r),[R]=AN(f,E,c,l,s,i,n,r);if(!T&&!R&&(y=E+1),T&&R&&(S=E-1),!T&&R){x=N;break}w++}return x||p},SN=t=>{var e=gn(t)?[]:t.toString().split(hU);return[{words:e,width:void 0}]},kne=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:a}=t;if((e||n)&&!nm.isSsr){var l,c,d=pU({breakAll:s,children:i,style:r});if(d){var{wordsWithComputedWidth:f,spaceWidth:p}=d;l=f,c=p}else return SN(i);return One({breakAll:s,children:i,maxLines:a,style:r},l,c,e,!!n)}return SN(i)},vU="#808080",Lne={angle:0,breakAll:!1,capHeight:"0.71em",fill:vU,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Oc=M.forwardRef((t,e)=>{var n=Nn(t,Lne),{x:i,y:r,lineHeight:s,capHeight:a,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:f}=n,p=bN(n,Pne),g=M.useMemo(()=>kne({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:y,dy:S,angle:w,className:x,breakAll:E}=p,C=bN(p,Rne);if(!Un(i)||!Un(r)||g.length===0)return null;var T=Number(i)+(xe(y)?y:0),N=Number(r)+(xe(S)?S:0);if(!Mt(T)||!Mt(N))return null;var R;switch(f){case"start":R=x0("calc(".concat(a,")"));break;case"middle":R=x0("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:R=x0("calc(".concat(g.length-1," * -").concat(s,")"));break}var I=[];if(c){var k=g[0].width,{width:B}=p;I.push("scale(".concat(xe(B)&&xe(k)?B/k:1,")"))}return w&&I.push("rotate(".concat(w,", ").concat(T,", ").concat(N,")")),I.length&&(C.transform=I.join(" ")),M.createElement("text",lA({},Rn(C),{ref:e,x:T,y:N,className:rt("recharts-text",x),textAnchor:d,fill:l.includes("url")?vU:l}),g.map((z,V)=>{var G=z.words.join(E?"":" ");return M.createElement("tspan",{x:T,dy:V===0?R:s,key:"".concat(G,"-").concat(V)},G)}))});Oc.displayName="Text";var Une=["labelRef"],Bne=["content"];function wN(t,e){if(t==null)return{};var n,i,r=Fne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function _N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(n),!0).forEach(function(i){zne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_N(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zne(t,e,n){return(e=Hne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hne(t){var e=Gne(t,"string");return typeof e=="symbol"?e:e+""}function Gne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hs(){return hs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hs.apply(null,arguments)}var yU=M.createContext(null),lw=t=>{var{x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a,children:l}=t,c=M.useMemo(()=>({x:e,y:n,upperWidth:i,lowerWidth:r,width:s,height:a}),[e,n,i,r,s,a]);return M.createElement(yU.Provider,{value:c},l)},bU=()=>{var t=M.useContext(yU),e=Qc();return t||R2(e)},qne=M.createContext(null),Vne=()=>{var t=M.useContext(qne),e=Ae(Jk);return t||e},jne=t=>{var{value:e,formatter:n}=t,i=gn(t.children)?e:t.children;return typeof n=="function"?n(i):i},uw=t=>t!=null&&typeof t=="function",$ne=(t,e)=>{var n=qi(e-t),i=Math.min(Math.abs(e-t),360);return n*i},Yne=(t,e,n,i,r)=>{var{offset:s,className:a}=t,{cx:l,cy:c,innerRadius:d,outerRadius:f,startAngle:p,endAngle:g,clockWise:y}=r,S=(d+f)/2,w=$ne(p,g),x=w>=0?1:-1,E,C;switch(e){case"insideStart":E=p+x*s,C=y;break;case"insideEnd":E=g-x*s,C=!y;break;case"end":E=g+x*s,C=y;break;default:throw new Error("Unsupported position ".concat(e))}C=w<=0?C:!C;var T=Mn(l,c,S,E),N=Mn(l,c,S,E+(C?1:-1)*359),R="M".concat(T.x,",").concat(T.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(C?0:1,`,
    `).concat(N.x,",").concat(N.y),I=gn(t.id)?Ac("recharts-radial-line-"):t.id;return M.createElement("text",hs({},i,{dominantBaseline:"central",className:rt("recharts-radial-bar-label",a)}),M.createElement("defs",null,M.createElement("path",{id:I,d:R})),M.createElement("textPath",{xlinkHref:"#".concat(I)},n))},Xne=(t,e,n)=>{var{cx:i,cy:r,innerRadius:s,outerRadius:a,startAngle:l,endAngle:c}=t,d=(l+c)/2;if(n==="outside"){var{x:f,y:p}=Mn(i,r,a+e,d);return{x:f,y:p,textAnchor:f>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var g=(s+a)/2,{x:y,y:S}=Mn(i,r,g,d);return{x:y,y:S,textAnchor:"middle",verticalAnchor:"middle"}},uA=t=>"cx"in t&&xe(t.cx),Kne=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,s;n!=null&&!uA(n)&&(s=n);var{x:a,y:l,upperWidth:c,lowerWidth:d,height:f}=e,p=a,g=a+(c-d)/2,y=(p+g)/2,S=(c+d)/2,w=p+c/2,x=f>=0?1:-1,E=x*i,C=x>0?"end":"start",T=x>0?"start":"end",N=c>=0?1:-1,R=N*i,I=N>0?"end":"start",k=N>0?"start":"end";if(r==="top"){var B={x:p+c/2,y:l-E,textAnchor:"middle",verticalAnchor:C};return Vt(Vt({},B),s?{height:Math.max(l-s.y,0),width:c}:{})}if(r==="bottom"){var z={x:g+d/2,y:l+f+E,textAnchor:"middle",verticalAnchor:T};return Vt(Vt({},z),s?{height:Math.max(s.y+s.height-(l+f),0),width:d}:{})}if(r==="left"){var V={x:y-R,y:l+f/2,textAnchor:I,verticalAnchor:"middle"};return Vt(Vt({},V),s?{width:Math.max(V.x-s.x,0),height:f}:{})}if(r==="right"){var G={x:y+S+R,y:l+f/2,textAnchor:k,verticalAnchor:"middle"};return Vt(Vt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:f}:{})}var W=s?{width:S,height:f}:{};return r==="insideLeft"?Vt({x:y+R,y:l+f/2,textAnchor:k,verticalAnchor:"middle"},W):r==="insideRight"?Vt({x:y+S-R,y:l+f/2,textAnchor:I,verticalAnchor:"middle"},W):r==="insideTop"?Vt({x:p+c/2,y:l+E,textAnchor:"middle",verticalAnchor:T},W):r==="insideBottom"?Vt({x:g+d/2,y:l+f-E,textAnchor:"middle",verticalAnchor:C},W):r==="insideTopLeft"?Vt({x:p+R,y:l+E,textAnchor:k,verticalAnchor:T},W):r==="insideTopRight"?Vt({x:p+c-R,y:l+E,textAnchor:I,verticalAnchor:T},W):r==="insideBottomLeft"?Vt({x:g+R,y:l+f-E,textAnchor:k,verticalAnchor:C},W):r==="insideBottomRight"?Vt({x:g+d-R,y:l+f-E,textAnchor:I,verticalAnchor:C},W):r&&typeof r=="object"&&(xe(r.x)||bs(r.x))&&(xe(r.y)||bs(r.y))?Vt({x:a+fa(r.x,S),y:l+fa(r.y,f),textAnchor:"end",verticalAnchor:"end"},W):Vt({x:w,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},W)},Wne={angle:0,offset:5,zIndex:Pn.label,position:"middle",textBreakAll:!1};function ia(t){var e=Nn(t,Wne),{viewBox:n,position:i,value:r,children:s,content:a,className:l="",textBreakAll:c,labelRef:d}=e,f=Vne(),p=bU(),g=i==="center"?p:f??p,y,S,w;if(n==null?y=g:uA(n)?y=n:y=R2(n),!y||gn(r)&&gn(s)&&!M.isValidElement(a)&&typeof a!="function")return null;var x=Vt(Vt({},e),{},{viewBox:y});if(M.isValidElement(a)){var{labelRef:E}=x,C=wN(x,Une);return M.cloneElement(a,C)}if(typeof a=="function"){var{content:T}=x,N=wN(x,Bne);if(S=M.createElement(a,N),M.isValidElement(S))return S}else S=jne(e);var R=Rn(e);if(uA(y)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Yne(e,i,S,R,y);w=Xne(y,e.offset,e.position)}else w=Kne(e,y);return M.createElement(pr,{zIndex:e.zIndex},M.createElement(Oc,hs({ref:d,className:rt("recharts-label",l)},R,w,{textAnchor:Ine(R.textAnchor)?R.textAnchor:w.textAnchor,breakAll:c}),S))}ia.displayName="Label";var Jne=(t,e,n)=>{if(!t)return null;var i={viewBox:e,labelRef:n};return t===!0?M.createElement(ia,hs({key:"label-implicit"},i)):Un(t)?M.createElement(ia,hs({key:"label-implicit",value:t},i)):M.isValidElement(t)?t.type===ia?M.cloneElement(t,Vt({key:"label-implicit"},i)):M.createElement(ia,hs({key:"label-implicit",content:t},i)):uw(t)?M.createElement(ia,hs({key:"label-implicit",content:t},i)):t&&typeof t=="object"?M.createElement(ia,hs({},t,{key:"label-implicit"},i)):null};function cw(t){var{label:e,labelRef:n}=t,i=bU();return Jne(e,i,n)||null}var E0={},T0={},xN;function Qne(){return xN||(xN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(T0)),T0}var C0={},EN;function Zne(){return EN||(EN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(C0)),C0}var TN;function eie(){return TN||(TN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qne(),n=Zne(),i=JA();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r})(E0)),E0}var M0,CN;function tie(){return CN||(CN=1,M0=eie().last),M0}var nie=tie();const iie=Br(nie);var rie=["valueAccessor"],sie=["dataKey","clockWise","id","textBreakAll","zIndex"];function cp(){return cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cp.apply(null,arguments)}function MN(t,e){if(t==null)return{};var n,i,r=aie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var oie=t=>Array.isArray(t.value)?iie(t.value):t.value,AU=M.createContext(void 0),lie=AU.Provider,SU=M.createContext(void 0);SU.Provider;function uie(){return M.useContext(AU)}function cie(){return M.useContext(SU)}function mh(t){var{valueAccessor:e=oie}=t,n=MN(t,rie),{dataKey:i,clockWise:r,id:s,textBreakAll:a,zIndex:l}=n,c=MN(n,sie),d=uie(),f=cie(),p=d||f;return!p||!p.length?null:M.createElement(pr,{zIndex:l??Pn.label},M.createElement(Ei,{className:"recharts-label-list"},p.map((g,y)=>{var S,w=gn(i)?e(g,y):vn(g&&g.payload,i),x=gn(s)?{}:{id:"".concat(s,"-").concat(y)};return M.createElement(ia,cp({key:"label-".concat(y)},Rn(g),c,x,{fill:(S=n.fill)!==null&&S!==void 0?S:g.fill,parentViewBox:g.parentViewBox,value:w,textBreakAll:a,viewBox:g.viewBox,index:y,zIndex:0}))})))}mh.displayName="LabelList";function die(t){var{label:e}=t;return e?e===!0?M.createElement(mh,{key:"labelList-implicit"}):M.isValidElement(e)||uw(e)?M.createElement(mh,{key:"labelList-implicit",content:e}):typeof e=="object"?M.createElement(mh,cp({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cA.apply(null,arguments)}var wU=t=>{var{cx:e,cy:n,r:i,className:r}=t,s=rt("recharts-dot",r);return xe(e)&&xe(n)&&xe(i)?M.createElement("circle",cA({},cr(t),WA(t),{className:s,cx:e,cy:n,r:i})):null},fie={radiusAxis:{},angleAxis:{}},_U=ci({name:"polarAxis",initialState:fie,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Fle,removeRadiusAxis:zle,addAngleAxis:Hle,removeAngleAxis:Gle}=_U.actions,hie=_U.reducer,xU=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,P0={},PN;function pie(){return PN||(PN=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e})(P0)),P0}var R0,RN;function mie(){return RN||(RN=1,R0=pie().isPlainObject),R0}var gie=mie();const vie=Br(gie);var NN,IN,DN,ON,kN;function LN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function UN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LN(Object(n),!0).forEach(function(i){yie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yie(t,e,n){return(e=bie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bie(t){var e=Aie(t,"string");return typeof e=="symbol"?e:e+""}function Aie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dp.apply(null,arguments)}function sc(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var BN=(t,e,n,i,r)=>{var s=n-i,a;return a=Lt(NN||(NN=sc(["M ",",",""])),t,e),a+=Lt(IN||(IN=sc(["L ",",",""])),t+n,e),a+=Lt(DN||(DN=sc(["L ",",",""])),t+n-s/2,e+r),a+=Lt(ON||(ON=sc(["L ",",",""])),t+n-s/2-i,e+r),a+=Lt(kN||(kN=sc(["L ",","," Z"])),t,e),a},Sie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wie=t=>{var e=Nn(t,Sie),{x:n,y:i,upperWidth:r,lowerWidth:s,height:a,className:l}=e,{animationEasing:c,animationDuration:d,animationBegin:f,isUpdateAnimationActive:p}=e,g=M.useRef(null),[y,S]=M.useState(-1),w=M.useRef(r),x=M.useRef(s),E=M.useRef(a),C=M.useRef(n),T=M.useRef(i),N=uS(t,"trapezoid-");if(M.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var ae=g.current.getTotalLength();ae&&S(ae)}catch{}},[]),n!==+n||i!==+i||r!==+r||s!==+s||a!==+a||r===0&&s===0||a===0)return null;var R=rt("recharts-trapezoid",l);if(!p)return M.createElement("g",null,M.createElement("path",dp({},Rn(e),{className:R,d:BN(n,i,r,s,a)})));var I=w.current,k=x.current,B=E.current,z=C.current,V=T.current,G="0px ".concat(y===-1?1:y,"px"),W="".concat(y,"px 0px"),oe=q2(["strokeDasharray"],d,c);return M.createElement(lS,{animationId:N,key:N,canBegin:y>0,duration:d,easing:c,isActive:p,begin:f},ae=>{var pe=oi(I,r,ae),F=oi(k,s,ae),j=oi(B,a,ae),re=oi(z,n,ae),ue=oi(V,i,ae);g.current&&(w.current=pe,x.current=F,E.current=j,C.current=re,T.current=ue);var Pe=ae>0?{transition:oe,strokeDasharray:W}:{strokeDasharray:G};return M.createElement("path",dp({},Rn(e),{className:R,d:BN(re,ue,pe,F,j),ref:g,style:UN(UN({},Pe),e.style)}))})},_ie=["option","shapeType","activeClassName"];function xie(t,e){if(t==null)return{};var n,i,r=Eie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function FN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(n),!0).forEach(function(i){Tie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Tie(t,e,n){return(e=Cie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cie(t){var e=Mie(t,"string");return typeof e=="symbol"?e:e+""}function Mie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pie(t,e){return fp(fp({},e),t)}function Rie(t,e){return t==="symbols"}function zN(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return M.createElement(cS,n);case"trapezoid":return M.createElement(wie,n);case"sector":return M.createElement(K2,n);case"symbols":if(Rie(e))return M.createElement(RO,n);break;case"curve":return M.createElement(G2,n);default:return null}}function Nie(t){return M.isValidElement(t)?t.props:t}function Iie(t){var{option:e,shapeType:n,activeClassName:i="recharts-active-shape"}=t,r=xie(t,_ie),s;if(M.isValidElement(e))s=M.cloneElement(e,fp(fp({},r),Nie(e)));else if(typeof e=="function")s=e(r,r.index);else if(vie(e)&&typeof e!="boolean"){var a=Pie(e,r);s=M.createElement(zN,{shapeType:n,elementProps:a})}else{var l=r;s=M.createElement(zN,{shapeType:n,elementProps:l})}return r.isActive?M.createElement(Ei,{className:i},s):s}function Die(t){var{tooltipEntrySettings:e}=t,n=Bt(),i=Bn(),r=M.useRef(null);return M.useLayoutEffect(()=>{i||(r.current===null?n(WZ(e)):r.current!==e&&n(JZ({prev:r.current,next:e})),r.current=e)},[e,n,i]),M.useLayoutEffect(()=>()=>{r.current&&(n(QZ(r.current)),r.current=null)},[n]),null}function Oie(t){var{legendPayload:e}=t,n=Bt(),i=Bn(),r=M.useRef(null);return M.useLayoutEffect(()=>{i||(r.current===null?n(PW(e)):r.current!==e&&n(RW({prev:r.current,next:e})),r.current=e)},[n,i,e]),M.useLayoutEffect(()=>()=>{r.current&&(n(NW(r.current)),r.current=null)},[n]),null}var N0,kie=()=>{var[t]=M.useState(()=>Ac("uid-"));return t},Lie=(N0=_3.useId)!==null&&N0!==void 0?N0:kie;function Uie(t,e){var n=Lie();return e||(t?"".concat(t,"-").concat(n):n)}var Bie=M.createContext(void 0),Fie=t=>{var{id:e,type:n,children:i}=t,r=Uie("recharts-".concat(n),e);return M.createElement(Bie.Provider,{value:r},i(r))},zie={cartesianItems:[],polarItems:[]},EU=ci({name:"graphicalItems",initialState:zie,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Ct()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=ur(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:Ct()},removeCartesianGraphicalItem:{reducer(t,e){var n=ur(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Ct()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Ct()},removePolarGraphicalItem:{reducer(t,e){var n=ur(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Ct()}}}),{addCartesianGraphicalItem:Hie,replaceCartesianGraphicalItem:Gie,removeCartesianGraphicalItem:qie,addPolarGraphicalItem:qle,removePolarGraphicalItem:Vle}=EU.actions,Vie=EU.reducer,jie=t=>{var e=Bt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e(Hie(t)):n.current!==t&&e(Gie({prev:n.current,next:t})),n.current=t},[e,t]),M.useLayoutEffect(()=>()=>{n.current&&(e(qie(n.current)),n.current=null)},[e]),null},$ie=M.memo(jie),Yie=["points"];function HN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function I0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(n),!0).forEach(function(i){Xie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xie(t,e,n){return(e=Kie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kie(t){var e=Wie(t,"string");return typeof e=="symbol"?e:e+""}function Wie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hp.apply(null,arguments)}function Jie(t,e){if(t==null)return{};var n,i,r=Qie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Zie(t){var{option:e,dotProps:n,className:i}=t;if(M.isValidElement(e))return M.cloneElement(e,n);if(typeof e=="function")return e(n);var r=rt(i,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,l=Jie(s,Yie);return M.createElement(wU,hp({},l,{className:r}))}function ere(t,e){return t==null?!1:e?!0:t.length===1}function tre(t){var{points:e,dot:n,className:i,dotClassName:r,dataKey:s,baseProps:a,needClip:l,clipPathId:c,zIndex:d=Pn.scatter}=t;if(!ere(e,n))return null;var f=xU(n),p=S8(n),g=e.map((S,w)=>{var x,E,C=I0(I0(I0({r:3},a),p),{},{index:w,cx:(x=S.x)!==null&&x!==void 0?x:void 0,cy:(E=S.y)!==null&&E!==void 0?E:void 0,dataKey:s,value:S.value,payload:S.payload,points:e});return M.createElement(Zie,{key:"dot-".concat(w),option:n,dotProps:C,className:r})}),y={};return l&&c!=null&&(y.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),M.createElement(pr,{zIndex:d},M.createElement(Ei,hp({className:i},y),g))}function GN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function qN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GN(Object(n),!0).forEach(function(i){nre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nre(t,e,n){return(e=ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ire(t){var e=rre(t,"string");return typeof e=="symbol"?e:e+""}function rre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sre={xAxis:{},yAxis:{},zAxis:{}},TU=ci({name:"cartesianAxis",initialState:sre,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Ct()},replaceXAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.xAxis[n.id],t.xAxis[i.id]=i)},prepare:Ct()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Ct()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Ct()},replaceYAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.yAxis[n.id],t.yAxis[i.id]=i)},prepare:Ct()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Ct()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Ct()},replaceZAxis:{reducer(t,e){var{prev:n,next:i}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==i.id&&delete t.zAxis[n.id],t.zAxis[i.id]=i)},prepare:Ct()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Ct()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-s[0])<=1)return;var a=[...s,i].slice(-3);t.yAxis[n]=qN(qN({},t.yAxis[n]),{},{width:i,widthHistory:a})}}}}),{addXAxis:are,replaceXAxis:ore,removeXAxis:lre,addYAxis:ure,replaceYAxis:cre,removeYAxis:dre,addZAxis:jle,replaceZAxis:$le,removeZAxis:Yle,updateYAxisWidth:fre}=TU.actions,hre=TU.reducer,pre=Q([In],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),mre=Q([pre,Ms,Ps],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),dw=()=>Ae(mre),gre=()=>Ae(Vee);function VN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function D0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VN(Object(n),!0).forEach(function(i){vre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vre(t,e,n){return(e=yre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yre(t){var e=bre(t,"string");return typeof e=="symbol"?e:e+""}function bre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Are=t=>{var{point:e,childIndex:n,mainColor:i,activeDot:r,dataKey:s,clipPath:a}=t;if(r===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:i??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=D0(D0(D0({},l),Op(r)),WA(r)),d;return M.isValidElement(r)?d=M.cloneElement(r,c):typeof r=="function"?d=r(c):d=M.createElement(wU,c),M.createElement(Ei,{className:"recharts-active-dot",clipPath:a},d)};function Sre(t){var{points:e,mainColor:n,activeDot:i,itemDataKey:r,clipPath:s,zIndex:a=Pn.activeDot}=t,l=Ae(Dc),c=gre();if(e==null||c==null)return null;var d=e.find(f=>c.includes(f.payload));return gn(d)?null:M.createElement(pr,{zIndex:a},M.createElement(Are,{point:d,childIndex:Number(l),mainColor:n,dataKey:r,activeDot:i,clipPath:s}))}function jN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function $N(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jN(Object(n),!0).forEach(function(i){wre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wre(t,e,n){return(e=_re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _re(t){var e=xre(t,"string");return typeof e=="symbol"?e:e+""}function xre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ere=["Webkit","Moz","O","ms"],Tre=(t,e)=>{var n=t.replace(/(\w)/,r=>r.toUpperCase()),i=Ere.reduce((r,s)=>$N($N({},r),{},{[s+n]:e}),{});return i[t]=e,i},Cre=t=>{var{chartData:e}=t,n=Bt(),i=Bn();return M.useEffect(()=>i?()=>{}:(n(oN(e)),()=>{n(oN(void 0))}),[e,n,i]),null},Mre=t=>t.chartData.chartData,Pre=()=>Ae(Mre),Rre=t=>{var{dataStartIndex:e,dataEndIndex:n}=t.chartData;return{startIndex:e,endIndex:n}},Nre=()=>Ae(Rre),Ire=M.createContext(()=>{}),YN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},CU=ci({name:"brush",initialState:YN,reducers:{setBrushSettings(t,e){return e.payload==null?YN:e.payload}}}),{setBrushSettings:XN}=CU.actions,Dre=CU.reducer;function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},kc.apply(null,arguments)}function KN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Va(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KN(Object(n),!0).forEach(function(i){ls(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KN(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ls(t,e,n){return(e=Ore(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ore(t){var e=kre(t,"string");return typeof e=="symbol"?e:e+""}function kre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lre(t){var{x:e,y:n,width:i,height:r,stroke:s}=t,a=Math.floor(n+r/2)-1;return M.createElement(M.Fragment,null,M.createElement("rect",{x:e,y:n,width:i,height:r,fill:s,stroke:"none"}),M.createElement("line",{x1:e+1,y1:a,x2:e+i-1,y2:a,fill:"none",stroke:"#fff"}),M.createElement("line",{x1:e+1,y1:a+2,x2:e+i-1,y2:a+2,fill:"none",stroke:"#fff"}))}function Ure(t){var{travellerProps:e,travellerType:n}=t;return M.isValidElement(n)?M.cloneElement(n,e):typeof n=="function"?n(e):M.createElement(Lre,e)}function WN(t){var e,n,{otherProps:i,travellerX:r,id:s,onMouseEnter:a,onMouseLeave:l,onMouseDown:c,onTouchStart:d,onTravellerMoveKeyboard:f,onFocus:p,onBlur:g}=t,{y,x:S,travellerWidth:w,height:x,traveller:E,ariaLabel:C,data:T,startIndex:N,endIndex:R}=i,I=Math.max(r,S),k=Va(Va({},cr(i)),{},{x:I,y,width:w,height:x}),B=C||"Min value: ".concat((e=T[N])===null||e===void 0?void 0:e.name,", Max value: ").concat((n=T[R])===null||n===void 0?void 0:n.name);return M.createElement(Ei,{tabIndex:0,role:"slider","aria-label":B,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:a,onMouseLeave:l,onMouseDown:c,onTouchStart:d,onKeyDown:z=>{["ArrowLeft","ArrowRight"].includes(z.key)&&(z.preventDefault(),z.stopPropagation(),f(z.key==="ArrowRight"?1:-1,s))},onFocus:p,onBlur:g,style:{cursor:"col-resize"}},M.createElement(Ure,{travellerType:E,travellerProps:k}))}function JN(t){var{index:e,data:n,tickFormatter:i,dataKey:r}=t,s=vn(n[e],r,e);return typeof i=="function"?i(s,e):s}function QN(t,e){for(var n=t.length,i=0,r=n-1;r-i>1;){var s=Math.floor((i+r)/2);t[s]>e?r=s:i=s}return e>=t[r]?r:i}function O0(t){var{startX:e,endX:n,scaleValues:i,gap:r,data:s}=t,a=s.length-1,l=Math.min(e,n),c=Math.max(e,n),d=QN(i,l),f=QN(i,c);return{startIndex:d-d%r,endIndex:f===a?a:f-f%r}}function Bre(t){var{x:e,y:n,width:i,height:r,fill:s,stroke:a}=t;return M.createElement("rect",{stroke:a,fill:s,x:e,y:n,width:i,height:r})}function Fre(t){var{startIndex:e,endIndex:n,y:i,height:r,travellerWidth:s,stroke:a,tickFormatter:l,dataKey:c,data:d,startX:f,endX:p}=t,g=5,y={pointerEvents:"none",fill:a};return M.createElement(Ei,{className:"recharts-brush-texts"},M.createElement(Oc,kc({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-g,y:i+r/2},y),JN({index:e,tickFormatter:l,dataKey:c,data:d})),M.createElement(Oc,kc({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+s+g,y:i+r/2},y),JN({index:n,tickFormatter:l,dataKey:c,data:d})))}function zre(t){var{y:e,height:n,stroke:i,travellerWidth:r,startX:s,endX:a,onMouseEnter:l,onMouseLeave:c,onMouseDown:d,onTouchStart:f}=t,p=Math.min(s,a)+r,g=Math.max(Math.abs(a-s)-r,0);return M.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:l,onMouseLeave:c,onMouseDown:d,onTouchStart:f,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:p,y:e,width:g,height:n})}function Hre(t){var{x:e,y:n,width:i,height:r,data:s,children:a,padding:l}=t,c=M.Children.count(a)===1;if(!c)return null;var d=M.Children.only(a);return d?M.cloneElement(d,{x:e,y:n,width:i,height:r,margin:l,compact:!0,data:s}):null}var Gre=t=>{var{data:e,startIndex:n,endIndex:i,x:r,width:s,travellerWidth:a}=t;if(!e||!e.length)return{};var l=e.length,c=ek().domain(dS(0,l)).range([r,r+s-a]),d=c.domain().map(f=>c(f)).filter(MO);return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:d}},ZN=t=>t.changedTouches&&!!t.changedTouches.length;class qre extends M.PureComponent{constructor(e){super(e),ls(this,"handleDrag",n=>{this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.state.isTravellerMoving?this.handleTravellerMove(n):this.state.isSlideMoving&&this.handleSlideDrag(n)}),ls(this,"handleTouchMove",n=>{n.changedTouches!=null&&n.changedTouches.length>0&&this.handleDrag(n.changedTouches[0])}),ls(this,"handleDragEnd",()=>{this.setState({isTravellerMoving:!1,isSlideMoving:!1},()=>{var{endIndex:n,onDragEnd:i,startIndex:r}=this.props;i?.({endIndex:n,startIndex:r})}),this.detachDragEndListener()}),ls(this,"handleLeaveWrapper",()=>{(this.state.isTravellerMoving||this.state.isSlideMoving)&&(this.leaveTimer=window.setTimeout(this.handleDragEnd,this.props.leaveTimeOut))}),ls(this,"handleEnterSlideOrTraveller",()=>{this.setState({isTextActive:!0})}),ls(this,"handleLeaveSlideOrTraveller",()=>{this.setState({isTextActive:!1})}),ls(this,"handleSlideDragStart",n=>{var i=ZN(n)?n.changedTouches[0]:n;this.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),this.attachDragEndListener()}),ls(this,"handleTravellerMoveKeyboard",(n,i)=>{var{data:r,gap:s,startIndex:a,endIndex:l}=this.props,{scaleValues:c,startX:d,endX:f}=this.state;if(c!=null){var p=-1;if(i==="startX"?p=a:i==="endX"&&(p=l),!(p<0||p>=r.length)){var g=p+n;if(!(g===-1||g>=c.length)){var y=c[g];i==="startX"&&y>=f||i==="endX"&&y<=d||this.setState({[i]:y},()=>{this.props.onChange(O0({startX:this.state.startX,endX:this.state.endX,data:r,gap:s,scaleValues:c}))})}}}}),this.travellerDragStartHandlers={startX:this.handleTravellerDragStart.bind(this,"startX"),endX:this.handleTravellerDragStart.bind(this,"endX")},this.state={brushMoveStartX:0,movingTravellerId:void 0,endX:0,startX:0,slideMoveStartX:0}}static getDerivedStateFromProps(e,n){var{data:i,width:r,x:s,travellerWidth:a,startIndex:l,endIndex:c,startIndexControlledFromProps:d,endIndexControlledFromProps:f}=e;if(i!==n.prevData)return Va({prevData:i,prevTravellerWidth:a,prevX:s,prevWidth:r},i&&i.length?Gre({data:i,width:r,x:s,travellerWidth:a,startIndex:l,endIndex:c}):{scale:void 0,scaleValues:void 0});var p=n.scale;if(p&&(r!==n.prevWidth||s!==n.prevX||a!==n.prevTravellerWidth)){p.range([s,s+r-a]);var g=p.domain().map(y=>p(y)).filter(y=>y!=null);return{prevData:i,prevTravellerWidth:a,prevX:s,prevWidth:r,startX:p(e.startIndex),endX:p(e.endIndex),scaleValues:g}}if(n.scale&&!n.isSlideMoving&&!n.isTravellerMoving&&!n.isTravellerFocused&&!n.isTextActive){if(d!=null&&n.prevStartIndexControlledFromProps!==d)return{startX:n.scale(d),prevStartIndexControlledFromProps:d};if(f!=null&&n.prevEndIndexControlledFromProps!==f)return{endX:n.scale(f),prevEndIndexControlledFromProps:f}}return null}componentWillUnmount(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}attachDragEndListener(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}detachDragEndListener(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}handleSlideDrag(e){var{slideMoveStartX:n,startX:i,endX:r,scaleValues:s}=this.state;if(s!=null){var{x:a,width:l,travellerWidth:c,startIndex:d,endIndex:f,onChange:p,data:g,gap:y}=this.props,S=e.pageX-n;S>0?S=Math.min(S,a+l-c-r,a+l-c-i):S<0&&(S=Math.max(S,a-i,a-r));var w=O0({startX:i+S,endX:r+S,data:g,gap:y,scaleValues:s});(w.startIndex!==d||w.endIndex!==f)&&p&&p(w),this.setState({startX:i+S,endX:r+S,slideMoveStartX:e.pageX})}}handleTravellerDragStart(e,n){var i=ZN(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:i.pageX}),this.attachDragEndListener()}handleTravellerMove(e){var{brushMoveStartX:n,movingTravellerId:i,endX:r,startX:s,scaleValues:a}=this.state;if(!(i==null||a==null)){var l=this.state[i],{x:c,width:d,travellerWidth:f,onChange:p,gap:g,data:y}=this.props,S={startX:this.state.startX,endX:this.state.endX,data:y,gap:g,scaleValues:a},w=e.pageX-n;w>0?w=Math.min(w,c+d-f-l):w<0&&(w=Math.max(w,c-l)),S[i]=l+w;var x=O0(S),{startIndex:E,endIndex:C}=x,T=()=>{var N=y.length-1;return i==="startX"&&(r>s?E%g===0:C%g===0)||r<s&&C===N||i==="endX"&&(r>s?C%g===0:E%g===0)||r>s&&C===N};this.setState({[i]:l+w,brushMoveStartX:e.pageX},()=>{p&&T()&&p(x)})}}render(){var{data:e,className:n,children:i,x:r,y:s,dy:a,width:l,height:c,alwaysShowText:d,fill:f,stroke:p,startIndex:g,endIndex:y,travellerWidth:S,tickFormatter:w,dataKey:x,padding:E}=this.props,{startX:C,endX:T,isTextActive:N,isSlideMoving:R,isTravellerMoving:I,isTravellerFocused:k}=this.state;if(!e||!e.length||!xe(r)||!xe(s)||!xe(l)||!xe(c)||l<=0||c<=0)return null;var B=rt("recharts-brush",n),z=Tre("userSelect","none"),V=s+(a??0);return M.createElement(Ei,{className:B,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:z},M.createElement(Bre,{x:r,y:V,width:l,height:c,fill:f,stroke:p}),M.createElement(WK,null,M.createElement(Hre,{x:r,y:V,width:l,height:c,data:e,padding:E},i)),M.createElement(zre,{y:V,height:c,stroke:p,travellerWidth:S,startX:C,endX:T,onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart}),M.createElement(WN,{travellerX:C,id:"startX",otherProps:Va(Va({},this.props),{},{y:V}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.startX,onTouchStart:this.travellerDragStartHandlers.startX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:!0})},onBlur:()=>{this.setState({isTravellerFocused:!1})}}),M.createElement(WN,{travellerX:T,id:"endX",otherProps:Va(Va({},this.props),{},{y:V}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.endX,onTouchStart:this.travellerDragStartHandlers.endX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:!0})},onBlur:()=>{this.setState({isTravellerFocused:!1})}}),(N||R||I||k||d)&&M.createElement(Fre,{startIndex:g,endIndex:y,y:V,height:c,travellerWidth:S,stroke:p,tickFormatter:w,dataKey:x,data:e,startX:C,endX:T}))}}function Vre(t){var e=Bt(),n=Pre(),i=Nre(),r=M.useContext(Ire),s=t.onChange,{startIndex:a,endIndex:l}=t;M.useEffect(()=>{e(oA({startIndex:a,endIndex:l}))},[e,l,a]),Qte();var c=M.useCallback(x=>{if(i!=null){var{startIndex:E,endIndex:C}=i;(x.startIndex!==E||x.endIndex!==C)&&(r?.(x),s?.(x),e(oA(x)))}},[s,r,e,i]),d=Ae(Jc);if(d==null||i==null||n==null||!n.length)return null;var{startIndex:f,endIndex:p}=i,{x:g,y,width:S}=d,w={data:n,x:g,y,width:S,startIndex:f,endIndex:p,onChange:c};return M.createElement(qre,kc({},t,w,{startIndexControlledFromProps:a??void 0,endIndexControlledFromProps:l??void 0}))}function jre(t){var e=Bt();return M.useEffect(()=>(e(XN(t)),()=>{e(XN(null))}),[e,t]),null}var $re={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};function MU(t){var e=Nn(t,$re);return M.createElement(M.Fragment,null,M.createElement(jre,{height:e.height,x:e.x,y:e.y,width:e.width,padding:e.padding}),M.createElement(Vre,e))}MU.displayName="Brush";function eI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eI(Object(n),!0).forEach(function(i){PU(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function PU(t,e,n){return(e=Yre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yre(t){var e=Xre(t,"string");return typeof e=="symbol"?e:e+""}function Xre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RU=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return{x:Math.min(n,r),y:Math.min(i,s),width:Math.abs(r-n),height:Math.abs(s-i)}},Kre=t=>{var{x1:e,y1:n,x2:i,y2:r}=t;return RU({x:e,y:n},{x:i,y:r})};class Am{static create(e){return new Am(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(i)switch(i){case"start":return this.scale(e);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+r}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),i=n[0],r=n[n.length-1];return i<=r?e>=i&&e<=r:e>=r&&e<=i}}PU(Am,"EPS",1e-4);var NU=t=>{var e=Object.keys(t).reduce((n,i)=>rh(rh({},n),{},{[i]:Am.create(t[i])}),{});return rh(rh({},e),{},{apply(n){var{bandAware:i,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(s=>{var[a,l]=s;return[a,e[a].apply(l,{bandAware:i,position:r})]}))},isInRange(n){return Object.keys(n).every(i=>e[i].isInRange(n[i]))}})};function Wre(t){return(t%180+180)%180}var Jre=function(e){var{width:n,height:i}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Wre(r),a=s*Math.PI/180,l=Math.atan(i/n),c=a>l&&a<Math.PI-l?i/Math.sin(a):n/Math.cos(a);return Math.abs(c)},Qre={dots:[],areas:[],lines:[]},IU=ci({name:"referenceElements",initialState:Qre,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ur(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ur(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ur(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Xle,removeDot:Kle,addArea:Zre,removeArea:ese,addLine:tse,removeLine:nse}=IU.actions,ise=IU.reducer,DU=M.createContext(void 0),rse=t=>{var{children:e}=t,[n]=M.useState("".concat(Ac("recharts"),"-clip")),i=dw();if(i==null)return null;var{x:r,y:s,width:a,height:l}=i;return M.createElement(DU.Provider,{value:n},M.createElement("defs",null,M.createElement("clipPath",{id:n},M.createElement("rect",{x:r,y:s,height:l,width:a}))),e)},OU=()=>M.useContext(DU);function tI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function nI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tI(Object(n),!0).forEach(function(i){sse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sse(t,e,n){return(e=ase(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ase(t){var e=ose(t,"string");return typeof e=="symbol"?e:e+""}function ose(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pp(){return pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pp.apply(null,arguments)}var lse=(t,e)=>{var n;if(M.isValidElement(t))n=M.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!Mt(e.x1)||!Mt(e.y1)||!Mt(e.x2)||!Mt(e.y2))return null;n=M.createElement("line",pp({},e,{className:"recharts-reference-line-line"}))}return n},use=(t,e,n,i,r,s)=>{var{x:a,width:l}=s,c=r.y.apply(t,{position:n});if(Xi(c)||e==="discard"&&!r.y.isInRange(c))return null;var d=[{x:a+l,y:c},{x:a,y:c}];return i==="left"?d.reverse():d},cse=(t,e,n,i,r,s)=>{var{y:a,height:l}=s,c=r.x.apply(t,{position:n});if(Xi(c)||e==="discard"&&!r.x.isInRange(c))return null;var d=[{x:c,y:a+l},{x:c,y:a}];return i==="top"?d.reverse():d},dse=(t,e,n,i)=>{var r=t.map(s=>i.apply(s,{position:n}));return e==="discard"&&r.some(s=>!i.isInRange(s))?null:r},fse=(t,e,n,i,r,s)=>{var{x:a,y:l,segment:c,ifOverflow:d}=s,f=Un(a),p=Un(l);return p?use(l,d,n,r,t,e):f?cse(a,d,n,i,t,e):c!=null&&c.length===2?dse(c,d,n,t):null};function hse(t){var e=Bt();return M.useEffect(()=>(e(tse(t)),()=>{e(nse(t))})),null}function pse(t){var{xAxisId:e,yAxisId:n,shape:i,className:r,ifOverflow:s}=t,a=Bn(),l=OU(),c=Ae(I=>Fr(I,e)),d=Ae(I=>zr(I,n)),f=Ae(I=>pa(I,"xAxis",e,a)),p=Ae(I=>pa(I,"yAxis",n,a)),g=Qc();if(!l||!g||c==null||d==null||f==null||p==null)return null;var y=NU({x:f,y:p}),S=fse(y,g,t.position,c.orientation,d.orientation,t);if(!S)return null;var[{x:w,y:x},{x:E,y:C}]=S,T=s==="hidden"?"url(#".concat(l,")"):void 0,N=nI(nI({clipPath:T},Rn(t)),{},{x1:w,y1:x,x2:E,y2:C}),R=Kre({x1:w,y1:x,x2:E,y2:C});return M.createElement(pr,{zIndex:t.zIndex},M.createElement(Ei,{className:rt("recharts-reference-line",r)},lse(i,N),M.createElement(lw,pp({},R,{lowerWidth:R.width,upperWidth:R.width}),M.createElement(cw,{label:t.label}),t.children)))}var mse={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:Pn.line};function dA(t){var e=Nn(t,mse);return M.createElement(M.Fragment,null,M.createElement(hse,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),M.createElement(pse,e))}dA.displayName="ReferenceLine";function iI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function rI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iI(Object(n),!0).forEach(function(i){gse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gse(t,e,n){return(e=vse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vse(t){var e=yse(t,"string");return typeof e=="symbol"?e:e+""}function yse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mp.apply(null,arguments)}var bse=(t,e,n,i,r,s,a)=>{var{x1:l,x2:c,y1:d,y2:f}=a;if(r==null||s==null)return null;var p=NU({x:r,y:s}),g={x:t?p.x.apply(l,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(d,{position:"start"}):p.y.rangeMin},y={x:e?p.x.apply(c,{position:"end"}):p.x.rangeMax,y:i?p.y.apply(f,{position:"end"}):p.y.rangeMax};return a.ifOverflow==="discard"&&(!p.isInRange(g)||!p.isInRange(y))?null:RU(g,y)},Ase=(t,e)=>{var n;return M.isValidElement(t)?n=M.cloneElement(t,e):typeof t=="function"?n=t(e):n=M.createElement(cS,mp({},e,{className:"recharts-reference-area-rect"})),n};function Sse(t){var e=Bt();return M.useEffect(()=>(e(Zre(t)),()=>{e(ese(t))})),null}function wse(t){var{x1:e,x2:n,y1:i,y2:r,className:s,shape:a,xAxisId:l,yAxisId:c}=t,d=OU(),f=Bn(),p=Ae(N=>pa(N,"xAxis",l,f)),g=Ae(N=>pa(N,"yAxis",c,f));if(p==null||g==null)return null;var y=Un(e),S=Un(n),w=Un(i),x=Un(r);if(!y&&!S&&!w&&!x&&!a)return null;var E=bse(y,S,w,x,p,g,t);if(!E&&!a)return null;var C=t.ifOverflow==="hidden",T=C?"url(#".concat(d,")"):void 0;return M.createElement(pr,{zIndex:t.zIndex},M.createElement(Ei,{className:rt("recharts-reference-area",s)},Ase(a,rI(rI({clipPath:T},Rn(t)),E)),E!=null&&M.createElement(lw,mp({},E,{lowerWidth:E.width,upperWidth:E.width}),M.createElement(cw,{label:t.label}),t.children)))}var _se={ifOverflow:"discard",xAxisId:0,yAxisId:0,radius:0,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1,zIndex:Pn.area};function kU(t){var e=Nn(t,_se);return M.createElement(M.Fragment,null,M.createElement(Sse,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),M.createElement(wse,e))}kU.displayName="ReferenceArea";function LU(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],i=0;i<t.length;i+=e){var r=t[i];r!==void 0&&n.push(r)}return n}function xse(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return Jre(i,n)}function Ese(t,e,n){var i=n==="width",{x:r,y:s,width:a,height:l}=t;return e===1?{start:i?r:s,end:i?r+a:s+l}:{start:i?r+a:s+l,end:i?r:s}}function Lc(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var s=n();return t*(e-t*s/2-i)>=0&&t*(e+t*s/2-r)<=0}function Tse(t,e){return LU(t,e+1)}function Cse(t,e,n,i,r){for(var s=(i||[]).slice(),{start:a,end:l}=e,c=0,d=1,f=a,p=function(){var S=i?.[c];if(S===void 0)return{v:LU(i,d)};var w=c,x,E=()=>(x===void 0&&(x=n(S,w)),x),C=S.coordinate,T=c===0||Lc(t,C,E,f,l);T||(c=0,f=a,d+=1),T&&(f=C+t*(E()/2+r),c+=d)},g;d<=s.length;)if(g=p(),g)return g.v;return[]}function Mse(t,e,n,i,r){var s=(i||[]).slice(),a=s.length;if(a===0)return[];for(var{start:l,end:c}=e,d=1;d<=a;d++){for(var f=(a-1)%d,p=l,g=!0,y=function(){var C=i[S],T=S,N,R=()=>(N===void 0&&(N=n(C,T)),N),I=C.coordinate,k=S===f||Lc(t,I,R,p,c);if(!k)return g=!1,1;k&&(p=I+t*(R()/2+r))},S=f;S<a&&!y();S+=d);if(g){for(var w=[],x=f;x<a;x+=d)w.push(i[x]);return w}}return[]}function sI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sI(Object(n),!0).forEach(function(i){Pse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pse(t,e,n){return(e=Rse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Nse(t,"string");return typeof e=="symbol"?e:e+""}function Nse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ise(t,e,n,i,r){for(var s=(i||[]).slice(),a=s.length,{start:l}=e,{end:c}=e,d=function(g){var y=s[g],S,w=()=>(S===void 0&&(S=n(y,g)),S);if(g===a-1){var x=t*(y.coordinate+t*w()/2-c);s[g]=y=On(On({},y),{},{tickCoord:x>0?y.coordinate-x*t:y.coordinate})}else s[g]=y=On(On({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var E=Lc(t,y.tickCoord,w,l,c);E&&(c=y.tickCoord-t*(w()/2+r),s[g]=On(On({},y),{},{isShow:!0}))}},f=a-1;f>=0;f--)d(f);return s}function Dse(t,e,n,i,r,s){var a=(i||[]).slice(),l=a.length,{start:c,end:d}=e;if(s){var f=i[l-1],p=n(f,l-1),g=t*(f.coordinate+t*p/2-d);if(a[l-1]=f=On(On({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var y=Lc(t,f.tickCoord,()=>p,c,d);y&&(d=f.tickCoord-t*(p/2+r),a[l-1]=On(On({},f),{},{isShow:!0}))}}for(var S=s?l-1:l,w=function(C){var T=a[C],N,R=()=>(N===void 0&&(N=n(T,C)),N);if(C===0){var I=t*(T.coordinate-t*R()/2-c);a[C]=T=On(On({},T),{},{tickCoord:I<0?T.coordinate-I*t:T.coordinate})}else a[C]=T=On(On({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var k=Lc(t,T.tickCoord,R,c,d);k&&(c=T.tickCoord+t*(R()/2+r),a[C]=On(On({},T),{},{isShow:!0}))}},x=0;x<S;x++)w(x);return a}function fw(t,e,n){var{tick:i,ticks:r,viewBox:s,minTickGap:a,orientation:l,interval:c,tickFormatter:d,unit:f,angle:p}=t;if(!r||!r.length||!i)return[];if(xe(c)||nm.isSsr){var g;return(g=Tse(r,xe(c)?c:0))!==null&&g!==void 0?g:[]}var y=[],S=l==="top"||l==="bottom"?"width":"height",w=f&&S==="width"?pc(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=(T,N)=>{var R=typeof d=="function"?d(T.value,N):T.value;return S==="width"?xse(pc(R,{fontSize:e,letterSpacing:n}),w,p):pc(R,{fontSize:e,letterSpacing:n})[S]},E=r.length>=2?qi(r[1].coordinate-r[0].coordinate):1,C=Ese(s,E,S);return c==="equidistantPreserveStart"?Cse(E,C,x,r,a):c==="equidistantPreserveEnd"?Mse(E,C,x,r,a):(c==="preserveStart"||c==="preserveStartEnd"?y=Dse(E,C,x,r,a,c==="preserveStartEnd"):y=Ise(E,C,x,r,a),y.filter(T=>T.isShow))}var Ose=t=>{var{ticks:e,label:n,labelGapWithTick:i=5,tickSize:r=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>a&&(a=p.width)}});var l=n?n.getBoundingClientRect().width:0,c=r+s,d=a+c+l+(n?i:0);return Math.round(d)}return 0},kse=["axisLine","width","height","className","hide","ticks","axisType"];function Lse(t,e){if(t==null)return{};var n,i,r=Use(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Use(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function uo(){return uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},uo.apply(null,arguments)}function aI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(n),!0).forEach(function(i){Bse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bse(t,e,n){return(e=Fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fse(t){var e=zse(t,"string");return typeof e=="symbol"?e:e+""}function zse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vs={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Pn.axis};function Hse(t){var{x:e,y:n,width:i,height:r,orientation:s,mirror:a,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var d=Qt(Qt(Qt({},c),cr(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!a||s==="bottom"&&a);d=Qt(Qt({},d),{},{x1:e,y1:n+f*r,x2:e+i,y2:n+f*r})}else{var p=+(s==="left"&&!a||s==="right"&&a);d=Qt(Qt({},d),{},{x1:e+p*i,y1:n,x2:e+p*i,y2:n+r})}return M.createElement("line",uo({},d,{className:rt("recharts-cartesian-axis-line",Bp(l,"className"))}))}function Gse(t,e,n,i,r,s,a,l,c){var d,f,p,g,y,S,w=l?-1:1,x=t.tickSize||a,E=xe(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=f=t.coordinate,g=n+ +!l*r,p=g-w*x,S=p-w*c,y=E;break;case"left":p=g=t.coordinate,f=e+ +!l*i,d=f-w*x,y=d-w*c,S=E;break;case"right":p=g=t.coordinate,f=e+ +l*i,d=f+w*x,y=d+w*c,S=E;break;default:d=f=t.coordinate,g=n+ +l*r,p=g+w*x,S=p+w*c,y=E;break}return{line:{x1:d,y1:p,x2:f,y2:g},tick:{x:y,y:S}}}function qse(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Vse(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function jse(t){var{option:e,tickProps:n,value:i}=t,r,s=rt(n.className,"recharts-cartesian-axis-tick-value");if(M.isValidElement(e))r=M.cloneElement(e,Qt(Qt({},n),{},{className:s}));else if(typeof e=="function")r=e(Qt(Qt({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=rt(a,e?.className)),r=M.createElement(Oc,uo({},n,{className:a}),i)}return r}var $se=M.forwardRef((t,e)=>{var{ticks:n=[],tick:i,tickLine:r,stroke:s,tickFormatter:a,unit:l,padding:c,tickTextProps:d,orientation:f,mirror:p,x:g,y,width:S,height:w,tickSize:x,tickMargin:E,fontSize:C,letterSpacing:T,getTicksConfig:N,events:R,axisType:I}=t,k=fw(Qt(Qt({},N),{},{ticks:n}),C,T),B=qse(f,p),z=Vse(f,p),V=cr(N),G=Op(i),W={};typeof r=="object"&&(W=r);var oe=Qt(Qt({},V),{},{fill:"none"},W),ae=k.map(j=>Qt({entry:j},Gse(j,g,y,S,w,f,x,p,E))),pe=ae.map(j=>{var{entry:re,line:ue}=j;return M.createElement(Ei,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},r&&M.createElement("line",uo({},oe,ue,{className:rt("recharts-cartesian-axis-tick-line",Bp(r,"className"))})))}),F=ae.map((j,re)=>{var{entry:ue,tick:Pe}=j,L=Qt(Qt(Qt(Qt({textAnchor:B,verticalAnchor:z},V),{},{stroke:"none",fill:s},G),Pe),{},{index:re,payload:ue,visibleTicksCount:k.length,tickFormatter:a,padding:c},d);return M.createElement(Ei,uo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ue.value,"-").concat(ue.coordinate,"-").concat(ue.tickCoord)},EY(R,ue,re)),i&&M.createElement(jse,{option:i,tickProps:L,value:"".concat(typeof a=="function"?a(ue.value,re):ue.value).concat(l||"")}))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(I,"-ticks")},F.length>0&&M.createElement(pr,{zIndex:Pn.label},M.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(I,"-tick-labels"),ref:e},F)),pe.length>0&&M.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(I,"-tick-lines")},pe))}),Yse=M.forwardRef((t,e)=>{var{axisLine:n,width:i,height:r,className:s,hide:a,ticks:l,axisType:c}=t,d=Lse(t,kse),[f,p]=M.useState(""),[g,y]=M.useState(""),S=M.useRef(null);M.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var x;return Ose({ticks:S.current,label:(x=t.labelRef)===null||x===void 0?void 0:x.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=M.useCallback(x=>{if(x){var E=x.getElementsByClassName("recharts-cartesian-axis-tick-value");S.current=E;var C=E[0];if(C){var T=window.getComputedStyle(C),N=T.fontSize,R=T.letterSpacing;(N!==f||R!==g)&&(p(N),y(R))}}},[f,g]);return a||i!=null&&i<=0||r!=null&&r<=0?null:M.createElement(pr,{zIndex:t.zIndex},M.createElement(Ei,{className:rt("recharts-cartesian-axis",s)},M.createElement(Hse,{x:t.x,y:t.y,width:i,height:r,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:cr(t)}),M.createElement($se,{ref:w,axisType:c,events:d,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),M.createElement(lw,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},M.createElement(cw,{label:t.label,labelRef:t.labelRef}),t.children)))}),hw=M.forwardRef((t,e)=>{var n=Nn(t,vs);return M.createElement(Yse,uo({},n,{ref:e}))});hw.displayName="CartesianAxis";var Xse=["x1","y1","x2","y2","key"],Kse=["offset"],Wse=["xAxisId","yAxisId"],Jse=["xAxisId","yAxisId"];function oI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oI(Object(n),!0).forEach(function(i){Qse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Qse(t,e,n){return(e=Zse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zse(t){var e=eae(t,"string");return typeof e=="symbol"?e:e+""}function eae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ka.apply(null,arguments)}function gp(t,e){if(t==null)return{};var n,i,r=tae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var nae=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:i,y:r,width:s,height:a,ry:l}=t;return M.createElement("rect",{x:i,y:r,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function UU(t){var{option:e,lineItemProps:n}=t,i;if(M.isValidElement(e))i=M.cloneElement(e,n);else if(typeof e=="function")i=e(n);else{var r,{x1:s,y1:a,x2:l,y2:c,key:d}=n,f=gp(n,Xse),p=(r=cr(f))!==null&&r!==void 0?r:{},{offset:g}=p,y=gp(p,Kse);i=M.createElement("line",Ka({},y,{x1:s,y1:a,x2:l,y2:c,fill:"none",key:d}))}return i}function iae(t){var{x:e,width:n,horizontal:i=!0,horizontalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=gp(t,Wse),c=r.map((d,f)=>{var p=kn(kn({},l),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(f),index:f});return M.createElement(UU,{key:"line-".concat(f),option:i,lineItemProps:p})});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function rae(t){var{y:e,height:n,vertical:i=!0,verticalPoints:r}=t;if(!i||!r||!r.length)return null;var{xAxisId:s,yAxisId:a}=t,l=gp(t,Jse),c=r.map((d,f)=>{var p=kn(kn({},l),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(f),index:f});return M.createElement(UU,{option:i,lineItemProps:p,key:"line-".concat(f)})});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function sae(t){var{horizontalFill:e,fillOpacity:n,x:i,y:r,width:s,height:a,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var d=l.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==d[0]&&d.unshift(0);var f=d.map((p,g)=>{var y=!d[g+1],S=y?r+a-p:d[g+1]-p;if(S<=0)return null;var w=g%e.length;return M.createElement("rect",{key:"react-".concat(g),y:p,x:i,height:S,width:s,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function aae(t){var{vertical:e=!0,verticalFill:n,fillOpacity:i,x:r,y:s,width:a,height:l,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var d=c.map(p=>Math.round(p+r-r)).sort((p,g)=>p-g);r!==d[0]&&d.unshift(0);var f=d.map((p,g)=>{var y=!d[g+1],S=y?r+a-p:d[g+1]-p;if(S<=0)return null;var w=g%n.length;return M.createElement("rect",{key:"react-".concat(g),x:p,y:s,width:S,height:l,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var oae=(t,e)=>{var{xAxis:n,width:i,height:r,offset:s}=t;return S2(fw(kn(kn(kn({},vs),n),{},{ticks:w2(n),viewBox:{x:0,y:0,width:i,height:r}})),s.left,s.left+s.width,e)},lae=(t,e)=>{var{yAxis:n,width:i,height:r,offset:s}=t;return S2(fw(kn(kn(kn({},vs),n),{},{ticks:w2(n),viewBox:{x:0,y:0,width:i,height:r}})),s.top,s.top+s.height,e)},uae={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Pn.grid};function BU(t){var e=I2(),n=D2(),i=N2(),r=kn(kn({},Nn(t,uae)),{},{x:xe(t.x)?t.x:i.left,y:xe(t.y)?t.y:i.top,width:xe(t.width)?t.width:i.width,height:xe(t.height)?t.height:i.height}),{xAxisId:s,yAxisId:a,x:l,y:c,width:d,height:f,syncWithTicks:p,horizontalValues:g,verticalValues:y}=r,S=Bn(),w=Ae(z=>WR(z,"xAxis",s,S)),x=Ae(z=>WR(z,"yAxis",a,S));if(!Lr(d)||!Lr(f)||!xe(l)||!xe(c))return null;var E=r.verticalCoordinatesGenerator||oae,C=r.horizontalCoordinatesGenerator||lae,{horizontalPoints:T,verticalPoints:N}=r;if((!T||!T.length)&&typeof C=="function"){var R=g&&g.length,I=C({yAxis:x?kn(kn({},x),{},{ticks:R?g:x.ticks}):void 0,width:e??d,height:n??f,offset:i},R?!0:p);Gh(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(T=I)}if((!N||!N.length)&&typeof E=="function"){var k=y&&y.length,B=E({xAxis:w?kn(kn({},w),{},{ticks:k?y:w.ticks}):void 0,width:e??d,height:n??f,offset:i},k?!0:p);Gh(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(N=B)}return M.createElement(pr,{zIndex:r.zIndex},M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(nae,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),M.createElement(sae,Ka({},r,{horizontalPoints:T})),M.createElement(aae,Ka({},r,{verticalPoints:N})),M.createElement(iae,Ka({},r,{offset:i,horizontalPoints:T,xAxis:w,yAxis:x})),M.createElement(rae,Ka({},r,{offset:i,verticalPoints:N,xAxis:w,yAxis:x}))))}BU.displayName="CartesianGrid";var cae={},FU=ci({name:"errorBars",initialState:cae,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?r:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:Wle,replaceErrorBar:Jle,removeErrorBar:Qle}=FU.actions,dae=FU.reducer,fae=["children"];function hae(t,e){if(t==null)return{};var n,i,r=pae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var mae={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},gae=M.createContext(mae);function vae(t){var{children:e}=t,n=hae(t,fae);return M.createElement(gae.Provider,{value:n},e)}function zU(t,e){var n,i,r=Ae(d=>Fr(d,t)),s=Ae(d=>zr(d,e)),a=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:hn.allowDataOverflow,l=(i=s?.allowDataOverflow)!==null&&i!==void 0?i:pn.allowDataOverflow,c=a||l;return{needClip:c,needClipX:a,needClipY:l}}function yae(t){var{xAxisId:e,yAxisId:n,clipPathId:i}=t,r=dw(),{needClipX:s,needClipY:a,needClip:l}=zU(e,n);if(!l||!r)return null;var{x:c,y:d,width:f,height:p}=r;return M.createElement("clipPath",{id:"clipPath-".concat(i)},M.createElement("rect",{x:s?c:c-f/2,y:a?d:d-p/2,width:s?f:f*2,height:a?p:p*2}))}var HU=(t,e,n,i)=>LL(t,"xAxis",e,i),GU=(t,e,n,i)=>kL(t,"xAxis",e,i),qU=(t,e,n,i)=>LL(t,"yAxis",n,i),VU=(t,e,n,i)=>kL(t,"yAxis",n,i),bae=Q([St,HU,qU,GU,VU],(t,e,n,i,r)=>ga(t,"xAxis")?Hh(e,i,!1):Hh(n,r,!1)),Aae=(t,e,n,i,r)=>r;function Sae(t){return t.type==="line"}var wae=Q([rL,Aae],(t,e)=>t.filter(Sae).find(n=>n.id===e)),_ae=Q([St,HU,qU,GU,VU,wae,bae,kS],(t,e,n,i,r,s,a,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:f}=l;if(!(s==null||e==null||n==null||i==null||r==null||i.length===0||r.length===0||a==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:p,data:g}=s,y;if(g!=null&&g.length>0?y=g:y=c?.slice(d,f+1),y!=null)return coe({layout:t,xAxis:e,yAxis:n,xAxisTicks:i,yAxisTicks:r,dataKey:p,bandSize:a,displayedData:y})}});function xae(t){var e=Op(t),n=3,i=2;if(e!=null){var{r,strokeWidth:s}=e,a=Number(r),l=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(l)||l<0)&&(l=i),{r:a,strokeWidth:l}}return{r:n,strokeWidth:i}}var k0={exports:{}},L0={};var lI;function Eae(){if(lI)return L0;lI=1;var t=Bl();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return L0.useSyncExternalStoreWithSelector=function(c,d,f,p,g){var y=r(null);if(y.current===null){var S={hasValue:!1,value:null};y.current=S}else S=y.current;y=a(function(){function x(R){if(!E){if(E=!0,C=R,R=p(R),g!==void 0&&S.hasValue){var I=S.value;if(g(I,R))return T=I}return T=R}if(I=T,n(C,R))return I;var k=p(R);return g!==void 0&&g(I,k)?(C=R,I):(C=R,T=k)}var E=!1,C,T,N=f===void 0?null:f;return[function(){return x(d())},N===null?void 0:function(){return x(N())}]},[d,f,p,g]);var w=i(c,y[0],y[1]);return s(function(){S.hasValue=!0,S.value=w},[w]),l(w),w},L0}var uI;function Tae(){return uI||(uI=1,k0.exports=Eae()),k0.exports}Tae();function Cae(t){t()}function Mae(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Cae(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var cI={notify(){},get:()=>[]};function Pae(t,e){let n,i=cI,r=0,s=!1;function a(w){f();const x=i.subscribe(w);let E=!1;return()=>{E||(E=!0,x(),p())}}function l(){i.notify()}function c(){S.onStateChange&&S.onStateChange()}function d(){return s}function f(){r++,n||(n=t.subscribe(c),i=Mae())}function p(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=cI)}function g(){s||(s=!0,f())}function y(){s&&(s=!1,p())}const S={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>i};return S}var Rae=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nae=Rae(),Iae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Dae=Iae(),Oae=()=>Nae||Dae?M.useLayoutEffect:M.useEffect,kae=Oae();function dI(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Lae(t,e){if(dI(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!dI(t[n[r]],e[n[r]]))return!1;return!0}var Uae=Symbol.for("react-redux-context"),Bae=typeof globalThis<"u"?globalThis:{};function Fae(){if(!M.createContext)return{};const t=Bae[Uae]??=new Map;let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var zae=Fae();function Hae(t){const{children:e,context:n,serverState:i,store:r}=t,s=M.useMemo(()=>{const c=Pae(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),a=M.useMemo(()=>r.getState(),[r]);kae(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,a]);const l=n||zae;return M.createElement(l.Provider,{value:s},e)}var Gae=Hae,qae=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Vae(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function pw(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var i of n)if(qae.has(i)){if(t[i]==null&&e[i]==null)continue;if(!Lae(t[i],e[i]))return!1}else if(!Vae(t[i],e[i]))return!1;return!0}var jae=["id"],$ae=["type","layout","connectNulls","needClip","shape"],Yae=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uc.apply(null,arguments)}function fI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fI(Object(n),!0).forEach(function(i){Xae(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xae(t,e,n){return(e=Kae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kae(t){var e=Wae(t,"string");return typeof e=="symbol"?e:e+""}function Wae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mw(t,e){if(t==null)return{};var n,i,r=Jae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Qae=t=>{var{dataKey:e,name:n,stroke:i,legendType:r,hide:s}=t;return[{inactive:s,dataKey:e,type:r,color:i,value:_2(n,e),payload:t}]},Zae=M.memo(t=>{var{dataKey:e,data:n,stroke:i,strokeWidth:r,fill:s,name:a,hide:l,unit:c,tooltipType:d,id:f}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:_2(a,e),hide:l,type:d,color:i,unit:c,graphicalItemId:f}};return M.createElement(Die,{tooltipEntrySettings:p})}),jU=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function eoe(t,e){for(var n=t.length%2!==0?[...t,0]:t,i=[],r=0;r<e;++r)i=[...i,...n];return i}var toe=(t,e,n)=>{var i=n.reduce((p,g)=>p+g);if(!i)return jU(e,t);for(var r=Math.floor(t/i),s=t%i,a=e-t,l=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>s){l=[...n.slice(0,c),s-d];break}var f=l.length%2===0?[0,a]:[a];return[...eoe(n,r),...l,...f].map(p=>"".concat(p,"px")).join(", ")};function noe(t){var{clipPathId:e,points:n,props:i}=t,{dot:r,dataKey:s,needClip:a}=i,{id:l}=i,c=mw(i,jae),d=cr(c);return M.createElement(tre,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:d,needClip:a,clipPathId:e})}function ioe(t){var{showLabels:e,children:n,points:i}=t,r=M.useMemo(()=>i?.map(s=>{var a,l,c={x:(a=s.x)!==null&&a!==void 0?a:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Rr(Rr({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[i]);return M.createElement(lie,{value:e?r:void 0},n)}function hI(t){var{clipPathId:e,pathRef:n,points:i,strokeDasharray:r,props:s}=t,{type:a,layout:l,connectNulls:c,needClip:d,shape:f}=s,p=mw(s,$ae),g=Rr(Rr({},Rn(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(e,")"):void 0,points:i,type:a,layout:l,connectNulls:c,strokeDasharray:r??s.strokeDasharray});return M.createElement(M.Fragment,null,i?.length>1&&M.createElement(Iie,Uc({shapeType:"curve",option:f},g,{pathRef:n})),M.createElement(noe,{points:i,clipPathId:e,props:s}))}function roe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function soe(t){var{clipPathId:e,props:n,pathRef:i,previousPointsRef:r,longestAnimatedLengthRef:s}=t,{points:a,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,animateNewValues:g,width:y,height:S,onAnimationEnd:w,onAnimationStart:x}=n,E=r.current,C=uS(a,"recharts-line-"),T=M.useRef(C),[N,R]=M.useState(!1),I=!N,k=M.useCallback(()=>{typeof w=="function"&&w(),R(!1)},[w]),B=M.useCallback(()=>{typeof x=="function"&&x(),R(!0)},[x]),z=roe(i.current),V=M.useRef(0);T.current!==C&&(V.current=s.current,T.current=C);var G=V.current;return M.createElement(ioe,{points:a,showLabels:I},n.children,M.createElement(lS,{animationId:C,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:k,onAnimationStart:B,key:C},W=>{var oe=oi(G,z+G,W),ae=Math.min(oe,z),pe;if(c)if(l){var F="".concat(l).split(/[,\s]+/gim).map(ue=>parseFloat(ue));pe=toe(ae,z,F)}else pe=jU(z,ae);else pe=l==null?void 0:String(l);if(W>0&&z>0&&(r.current=a,s.current=Math.max(s.current,ae)),E){var j=E.length/a.length,re=W===1?a:a.map((ue,Pe)=>{var L=Math.floor(Pe*j);if(E[L]){var X=E[L];return Rr(Rr({},ue),{},{x:oi(X.x,ue.x,W),y:oi(X.y,ue.y,W)})}return g?Rr(Rr({},ue),{},{x:oi(y*2,ue.x,W),y:oi(S/2,ue.y,W)}):Rr(Rr({},ue),{},{x:ue.x,y:ue.y})});return r.current=re,M.createElement(hI,{props:n,points:re,clipPathId:e,pathRef:i,strokeDasharray:pe})}return M.createElement(hI,{props:n,points:a,clipPathId:e,pathRef:i,strokeDasharray:pe})}),M.createElement(die,{label:n.label}))}function aoe(t){var{clipPathId:e,props:n}=t,i=M.useRef(null),r=M.useRef(0),s=M.useRef(null);return M.createElement(soe,{props:n,clipPathId:e,previousPointsRef:i,longestAnimatedLengthRef:r,pathRef:s})}var ooe=(t,e)=>{var n,i;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(i=t.y)!==null&&i!==void 0?i:void 0,value:t.value,errorVal:vn(t.payload,e)}};class loe extends M.Component{render(){var{hide:e,dot:n,points:i,className:r,xAxisId:s,yAxisId:a,top:l,left:c,width:d,height:f,id:p,needClip:g,zIndex:y}=this.props;if(e)return null;var S=rt("recharts-line",r),w=p,{r:x,strokeWidth:E}=xae(n),C=xU(n),T=x*2+E,N=g?"url(#clipPath-".concat(C?"":"dots-").concat(w,")"):void 0;return M.createElement(pr,{zIndex:y},M.createElement(Ei,{className:S},g&&M.createElement("defs",null,M.createElement(yae,{clipPathId:w,xAxisId:s,yAxisId:a}),!C&&M.createElement("clipPath",{id:"clipPath-dots-".concat(w)},M.createElement("rect",{x:c-T/2,y:l-T/2,width:d+T,height:f+T}))),M.createElement(vae,{xAxisId:s,yAxisId:a,data:i,dataPointFormatter:ooe,errorBarOffset:0},M.createElement(aoe,{props:this.props,clipPathId:w}))),M.createElement(Sre,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:N}))}}var $U={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Pn.line,type:"linear"};function uoe(t){var e=Nn(t,$U),{activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,connectNulls:l,dot:c,hide:d,isAnimationActive:f,label:p,legendType:g,xAxisId:y,yAxisId:S,id:w}=e,x=mw(e,Yae),{needClip:E}=zU(y,S),C=dw(),T=Zc(),N=Bn(),R=Ae(V=>_ae(V,y,S,N,w));if(T!=="horizontal"&&T!=="vertical"||R==null||C==null)return null;var{height:I,width:k,x:B,y:z}=C;return M.createElement(loe,Uc({},x,{id:w,connectNulls:l,dot:c,activeDot:n,animateNewValues:i,animationBegin:r,animationDuration:s,animationEasing:a,isAnimationActive:f,hide:d,label:p,legendType:g,xAxisId:y,yAxisId:S,points:R,layout:T,height:I,width:k,left:B,top:z,needClip:E}))}function coe(t){var{layout:e,xAxis:n,yAxis:i,xAxisTicks:r,yAxisTicks:s,dataKey:a,bandSize:l,displayedData:c}=t;return c.map((d,f)=>{var p=vn(d,a);if(e==="horizontal"){var g=nP({axis:n,ticks:r,bandSize:l,entry:d,index:f}),y=gn(p)?null:i.scale(p);return{x:g,y,value:p,payload:d}}var S=gn(p)?null:n.scale(p),w=nP({axis:i,ticks:s,bandSize:l,entry:d,index:f});return S==null||w==null?null:{x:S,y:w,value:p,payload:d}}).filter(Boolean)}function doe(t){var e=Nn(t,$U),n=Bn();return M.createElement(Fie,{id:e.id,type:"line"},i=>M.createElement(M.Fragment,null,M.createElement(Oie,{legendPayload:Qae(e)}),M.createElement(Zae,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:i}),M.createElement($ie,{type:"line",id:i,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),M.createElement(uoe,Uc({},e,{id:i}))))}var YU=M.memo(doe,pw);YU.displayName="Line";var foe=["domain","range"],hoe=["domain","range"];function pI(t,e){if(t==null)return{};var n,i,r=poe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function poe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function mI(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function XU(t,e){if(t===e)return!0;var{domain:n,range:i}=t,r=pI(t,foe),{domain:s,range:a}=e,l=pI(e,hoe);return!mI(n,s)||!mI(i,a)?!1:pw(r,l)}var moe=["dangerouslySetInnerHTML","ticks","scale"],goe=["id","scale"];function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fA.apply(null,arguments)}function gI(t,e){if(t==null)return{};var n,i,r=voe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function voe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function yoe(t){var e=Bt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e(are(t)):n.current!==t&&e(ore({prev:n.current,next:t})),n.current=t},[t,e]),M.useLayoutEffect(()=>()=>{n.current&&(e(lre(n.current)),n.current=null)},[e]),null}var boe=t=>{var{xAxisId:e,className:n}=t,i=Ae(E2),r=Bn(),s="xAxis",a=Ae(E=>OL(E,s,e,r)),l=Ae(E=>DZ(E,e)),c=Ae(E=>FZ(E,e)),d=Ae(E=>eL(E,e));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:p,scale:g}=t,y=gI(t,moe),{id:S,scale:w}=d,x=gI(d,goe);return M.createElement(hw,fA({},y,x,{x:c.x,y:c.y,width:l.width,height:l.height,className:rt("recharts-".concat(s," ").concat(s),n),viewBox:i,ticks:a,axisType:s}))},Aoe={allowDataOverflow:hn.allowDataOverflow,allowDecimals:hn.allowDecimals,allowDuplicatedCategory:hn.allowDuplicatedCategory,angle:hn.angle,axisLine:vs.axisLine,height:hn.height,hide:!1,includeHidden:hn.includeHidden,interval:hn.interval,minTickGap:hn.minTickGap,mirror:hn.mirror,orientation:hn.orientation,padding:hn.padding,reversed:hn.reversed,scale:hn.scale,tick:hn.tick,tickCount:hn.tickCount,tickLine:vs.tickLine,tickSize:vs.tickSize,type:hn.type,xAxisId:0},Soe=t=>{var e=Nn(t,Aoe);return M.createElement(M.Fragment,null,M.createElement(yoe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),M.createElement(boe,e))},KU=M.memo(Soe,XU);KU.displayName="XAxis";var woe=["dangerouslySetInnerHTML","ticks","scale"],_oe=["id","scale"];function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hA.apply(null,arguments)}function vI(t,e){if(t==null)return{};var n,i,r=xoe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xoe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Eoe(t){var e=Bt(),n=M.useRef(null);return M.useLayoutEffect(()=>{n.current===null?e(ure(t)):n.current!==t&&e(cre({prev:n.current,next:t})),n.current=t},[t,e]),M.useLayoutEffect(()=>()=>{n.current&&(e(dre(n.current)),n.current=null)},[e]),null}var Toe=t=>{var{yAxisId:e,className:n,width:i,label:r}=t,s=M.useRef(null),a=M.useRef(null),l=Ae(E2),c=Bn(),d=Bt(),f="yAxis",p=Ae(I=>GZ(I,e)),g=Ae(I=>HZ(I,e)),y=Ae(I=>OL(I,f,e,c)),S=Ae(I=>tL(I,e));if(M.useLayoutEffect(()=>{if(!(i!=="auto"||!p||uw(r)||M.isValidElement(r)||S==null)){var I=s.current;if(I){var k=I.getCalculatedWidth();Math.round(p.width)!==Math.round(k)&&d(fre({id:e,width:k}))}}},[y,p,d,r,e,i,S]),p==null||g==null||S==null)return null;var{dangerouslySetInnerHTML:w,ticks:x,scale:E}=t,C=vI(t,woe),{id:T,scale:N}=S,R=vI(S,_oe);return M.createElement(hw,hA({},C,R,{ref:s,labelRef:a,x:g.x,y:g.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:p.width,height:p.height,className:rt("recharts-".concat(f," ").concat(f),n),viewBox:l,ticks:y,axisType:f}))},Coe={allowDataOverflow:pn.allowDataOverflow,allowDecimals:pn.allowDecimals,allowDuplicatedCategory:pn.allowDuplicatedCategory,angle:pn.angle,axisLine:vs.axisLine,hide:!1,includeHidden:pn.includeHidden,interval:pn.interval,minTickGap:pn.minTickGap,mirror:pn.mirror,orientation:pn.orientation,padding:pn.padding,reversed:pn.reversed,scale:pn.scale,tick:pn.tick,tickCount:pn.tickCount,tickLine:vs.tickLine,tickSize:vs.tickSize,type:pn.type,width:pn.width,yAxisId:0},Moe=t=>{var e=Nn(t,Coe);return M.createElement(M.Fragment,null,M.createElement(Eoe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),M.createElement(Toe,e))},WU=M.memo(Moe,XU);WU.displayName="YAxis";var Poe=(t,e)=>e,gw=Q([Poe,St,Jk,on,JL,Ns,ite,In],cte),vw=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},JU=Ki("mouseClick"),QU=Kc();QU.startListening({actionCreator:JU,effect:(t,e)=>{var n=t.payload,i=gw(e.getState(),vw(n));i?.activeIndex!=null&&e.dispatch(tee({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var pA=Ki("mouseMove"),ZU=Kc(),sh=null;ZU.startListening({actionCreator:pA,effect:(t,e)=>{var n=t.payload;sh!==null&&cancelAnimationFrame(sh);var i=vw(n);sh=requestAnimationFrame(()=>{var r=e.getState(),s=QS(r,r.tooltip.settings.shared);if(s==="axis"){var a=gw(r,i);a?.activeIndex!=null?e.dispatch(qL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(GL())}sh=null})}});function Roe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var yI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},eB=ci({name:"rootProps",initialState:yI,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:yI.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Noe=eB.reducer,{updateOptions:Ioe}=eB.actions,tB=ci({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:Zle}=tB.actions,Doe=tB.reducer,nB=Ki("keyDown"),iB=Ki("focus"),yw=Kc();yw.startListening({actionCreator:nB,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=ZS(r,Kl(n),od(n),dd(n)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var c=Ns(n);if(s==="Enter"){var d=up(n,"axis","hover",String(r.index));e.dispatch(iA({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var f=$Z(n),p=f==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,y=l+g*p;if(!(c==null||y>=c.length||y<0)){var S=up(n,"axis","hover",String(y));e.dispatch(iA({active:!0,activeIndex:y.toString(),activeCoordinate:S}))}}}}}});yw.startListening({actionCreator:iB,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",a=up(n,"axis","hover",String(s));e.dispatch(iA({active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Hi=Ki("externalEvent"),rB=Kc(),U0=new Map;rB.startListening({actionCreator:Hi,effect:(t,e)=>{var{handler:n,reactEvent:i}=t.payload;if(n!=null){i.persist();var r=i.type,s=U0.get(r);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Hee(l),activeDataKey:Fee(l),activeIndex:Dc(l),activeLabel:eU(l),activeTooltipIndex:Dc(l),isTooltipActive:Gee(l)};n(c,i)}finally{U0.delete(r)}});U0.set(r,a)}}});var Ooe=Q([Yl],t=>t.tooltipItemPayloads),koe=Q([Ooe,cd,(t,e)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(l=>l.settings.graphicalItemId===i);if(r!=null){var{positions:s}=r;if(s!=null){var a=e(s,n);return a}}}),sB=Ki("touchMove"),aB=Kc();aB.startListening({actionCreator:sB,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var i=e.getState(),r=QS(i,i.tooltip.settings.shared);if(r==="axis"){var s=n.touches[0];if(s==null)return;var a=gw(i,vw({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(qL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(r==="item"){var l,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var f=d.getAttribute(FK),p=(l=d.getAttribute(zK))!==null&&l!==void 0?l:void 0,g=Xl(i).find(w=>w.id===p);if(f==null||g==null||p==null)return;var{dataKey:y}=g,S=koe(i,f,p);e.dispatch(eee({activeDataKey:y,activeIndex:f,activeCoordinate:S,activeGraphicalItemId:p}))}}}});var Loe=$O({brush:Dre,cartesianAxis:hre,chartData:Hte,errorBars:dae,graphicalItems:Vie,layout:_K,legend:IW,options:Ute,polarAxis:hie,polarOptions:Doe,referenceElements:ise,rootProps:Noe,tooltip:nee,zIndex:xte}),Uoe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return XX({reducer:Loe,preloadedState:e,middleware:i=>{var r;return i({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([QU.middleware,ZU.middleware,yw.middleware,rB.middleware,aB.middleware])},enhancers:i=>{var r=i;return typeof i=="function"&&(r=i()),r.concat(o2({type:"raf"}))},devTools:{serialize:{replacer:Roe},name:"recharts-".concat(n)}})};function Boe(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Bn(),s=M.useRef(null);if(r)return n;s.current==null&&(s.current=Uoe(e,i));var a=QA;return M.createElement(Gae,{context:a,store:s.current},n)}function Foe(t){var{layout:e,margin:n}=t,i=Bt(),r=Bn();return M.useEffect(()=>{r||(i(AK(e)),i(bK(n)))},[i,r,e,n]),null}var zoe=M.memo(Foe,pw);function Hoe(t){var e=Bt();return M.useEffect(()=>{e(Ioe(t))},[e,t]),null}function bI(t){var{zIndex:e,isPanorama:n}=t,i=M.useRef(null),r=Bt();return M.useLayoutEffect(()=>(i.current&&r(wte({zIndex:e,element:i.current,isPanorama:n})),()=>{r(_te({zIndex:e,isPanorama:n}))}),[r,e,n]),M.createElement("g",{tabIndex:-1,ref:i})}function AI(t){var{children:e,isPanorama:n}=t,i=Ae(fte);if(!i||i.length===0)return e;var r=i.filter(a=>a<0),s=i.filter(a=>a>0);return M.createElement(M.Fragment,null,r.map(a=>M.createElement(bI,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>M.createElement(bI,{key:a,zIndex:a,isPanorama:n})))}var Goe=["children"];function qoe(t,e){if(t==null)return{};var n,i,r=Voe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Voe(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vp.apply(null,arguments)}var joe={width:"100%",height:"100%",display:"block"},$oe=M.forwardRef((t,e)=>{var n=I2(),i=D2(),r=H2();if(!Lr(n)||!Lr(i))return null;var{children:s,otherAttributes:a,title:l,desc:c}=t,d,f;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=r?0:void 0,typeof a.role=="string"?f=a.role:f=r?"application":void 0),M.createElement(oO,vp({},a,{title:l,desc:c,role:f,tabIndex:d,width:n,height:i,style:joe,ref:e}),s)}),Yoe=t=>{var{children:e}=t,n=Ae(Jc);if(!n)return null;var{width:i,height:r,y:s,x:a}=n;return M.createElement(oO,{width:i,height:r,x:a,y:s},e)},SI=M.forwardRef((t,e)=>{var{children:n}=t,i=qoe(t,Goe),r=Bn();return r?M.createElement(Yoe,null,M.createElement(AI,{isPanorama:!0},n)):M.createElement($oe,vp({ref:e},i),M.createElement(AI,{isPanorama:!1},n))});function Xoe(){var t=Bt(),[e,n]=M.useState(null),i=Ae(BK);return M.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;Mt(s)&&s!==i&&t(wK(s))}},[e,t,i]),n}function wI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Koe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(n),!0).forEach(function(i){Woe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Woe(t,e,n){return(e=Joe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Joe(t){var e=Qoe(t,"string");return typeof e=="symbol"?e:e+""}function Qoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},co.apply(null,arguments)}var Zoe=()=>(Wte(),null);function yp(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var ele=M.forwardRef((t,e)=>{var n,i,r=M.useRef(null),[s,a]=M.useState({containerWidth:yp((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:yp((i=t.style)===null||i===void 0?void 0:i.height)}),l=M.useCallback((d,f)=>{a(p=>{var g=Math.round(d),y=Math.round(f);return p.containerWidth===g&&p.containerHeight===y?p:{containerWidth:g,containerHeight:y}})},[]),c=M.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=d.getBoundingClientRect();l(f,p);var g=S=>{var{width:w,height:x}=S[0].contentRect;l(w,x)},y=new ResizeObserver(g);y.observe(d),r.current=y}},[e,l]);return M.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),M.createElement(M.Fragment,null,M.createElement(Qp,{width:s.containerWidth,height:s.containerHeight}),M.createElement("div",co({ref:c},t)))}),tle=M.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,s]=M.useState({containerWidth:yp(n),containerHeight:yp(i)}),a=M.useCallback((c,d)=>{s(f=>{var p=Math.round(c),g=Math.round(d);return f.containerWidth===p&&f.containerHeight===g?f:{containerWidth:p,containerHeight:g}})},[]),l=M.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:d,height:f}=c.getBoundingClientRect();a(d,f)}},[e,a]);return M.createElement(M.Fragment,null,M.createElement(Qp,{width:r.containerWidth,height:r.containerHeight}),M.createElement("div",co({ref:l},t)))}),nle=M.forwardRef((t,e)=>{var{width:n,height:i}=t;return M.createElement(M.Fragment,null,M.createElement(Qp,{width:n,height:i}),M.createElement("div",co({ref:e},t)))}),ile=M.forwardRef((t,e)=>{var{width:n,height:i}=t;return bs(n)||bs(i)?M.createElement(tle,co({},t,{ref:e})):M.createElement(nle,co({},t,{ref:e}))});function rle(t){return t===!0?ele:ile}var sle=M.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:f,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:S,onTouchStart:w,style:x,width:E,responsive:C,dispatchTouchEvents:T=!0}=t,N=M.useRef(null),R=Bt(),[I,k]=M.useState(null),[B,z]=M.useState(null),V=Xoe(),G=sS(),W=G?.width>0?G.width:E,oe=G?.height>0?G.height:r,ae=M.useCallback(Z=>{V(Z),typeof e=="function"&&e(Z),k(Z),z(Z),Z!=null&&(N.current=Z)},[V,e,k,z]),pe=M.useCallback(Z=>{R(JU(Z)),R(Hi({handler:s,reactEvent:Z}))},[R,s]),F=M.useCallback(Z=>{R(pA(Z)),R(Hi({handler:d,reactEvent:Z}))},[R,d]),j=M.useCallback(Z=>{R(GL()),R(Hi({handler:f,reactEvent:Z}))},[R,f]),re=M.useCallback(Z=>{R(pA(Z)),R(Hi({handler:p,reactEvent:Z}))},[R,p]),ue=M.useCallback(()=>{R(iB())},[R]),Pe=M.useCallback(Z=>{R(nB(Z.key))},[R]),L=M.useCallback(Z=>{R(Hi({handler:a,reactEvent:Z}))},[R,a]),X=M.useCallback(Z=>{R(Hi({handler:l,reactEvent:Z}))},[R,l]),se=M.useCallback(Z=>{R(Hi({handler:c,reactEvent:Z}))},[R,c]),ce=M.useCallback(Z=>{R(Hi({handler:g,reactEvent:Z}))},[R,g]),Se=M.useCallback(Z=>{R(Hi({handler:w,reactEvent:Z}))},[R,w]),Te=M.useCallback(Z=>{T&&R(sB(Z)),R(Hi({handler:S,reactEvent:Z}))},[R,T,S]),ge=M.useCallback(Z=>{R(Hi({handler:y,reactEvent:Z}))},[R,y]),lt=rle(C);return M.createElement(oU.Provider,{value:I},M.createElement(M8.Provider,{value:B},M.createElement(lt,{width:W??x?.width,height:oe??x?.height,className:rt("recharts-wrapper",i),style:Koe({position:"relative",cursor:"default",width:W,height:oe},x),onClick:pe,onContextMenu:L,onDoubleClick:X,onFocus:ue,onKeyDown:Pe,onMouseDown:se,onMouseEnter:F,onMouseLeave:j,onMouseMove:re,onMouseUp:ce,onTouchEnd:ge,onTouchMove:Te,onTouchStart:Se,ref:ae},M.createElement(Zoe,null),n)))}),ale=["width","height","responsive","children","className","style","compact","title","desc"];function ole(t,e){if(t==null)return{};var n,i,r=lle(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lle(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var ule=M.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:s,className:a,style:l,compact:c,title:d,desc:f}=t,p=ole(t,ale),g=cr(p);return c?M.createElement(M.Fragment,null,M.createElement(Qp,{width:n,height:i}),M.createElement(SI,{otherAttributes:g,title:d,desc:f},s)):M.createElement(sle,{className:a,style:l,width:n,height:i,responsive:r??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},M.createElement(SI,{otherAttributes:g,title:d,desc:f,ref:e},M.createElement(rse,null,s)))});function mA(){return mA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mA.apply(null,arguments)}var cle={top:5,right:5,bottom:5,left:5},dle={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:cle,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},fle=M.forwardRef(function(e,n){var i,r=Nn(e.categoricalChartProps,dle),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=e,f={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return M.createElement(Boe,{preloadedState:{options:f},reduxStoreName:(i=d.id)!==null&&i!==void 0?i:s},M.createElement(Cre,{chartData:d.data}),M.createElement(zoe,{layout:r.layout,margin:r.margin}),M.createElement(Hoe,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),M.createElement(ule,mA({},r,{ref:n})))}),hle=["axis"],ple=M.forwardRef((t,e)=>M.createElement(fle,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hle,tooltipPayloadSearcher:kte,categoricalChartProps:t,ref:e}));const mle=t=>{if(t.length<2)return{status:"STABLE",direction:"flat",label:"Insufficient Data",color:"text-slate-500"};const e=[...t].sort((c,d)=>new Date(c.date).getTime()-new Date(d.date).getTime()),n=e[e.length-1],i=e[e.length-2],r=n.value-i.value,s=r>0?"up":r<0?"down":"flat",a=n.min,l=n.max;if(a!==void 0&&l!==void 0){const c=n.value>=a&&n.value<=l,d=i.value>=a&&i.value<=l;if(!d&&c)return{status:"IMPROVING",direction:s,label:"Back in Range",color:"text-green-600"};if(d&&!c)return{status:"WORSENING",direction:s,label:"Out of Range",color:"text-red-600"};if(c&&d)return{status:"STABLE",direction:s,label:"Stable in Range",color:"text-green-600"};if(!c&&!d){if(n.value>l&&r<0)return{status:"IMPROVING",direction:s,label:"Improving",color:"text-green-600"};if(n.value>l&&r>0)return{status:"WORSENING",direction:s,label:"Rising High",color:"text-red-600"};if(n.value<a&&r>0)return{status:"IMPROVING",direction:s,label:"Improving",color:"text-green-600"};if(n.value<a&&r<0)return{status:"WORSENING",direction:s,label:"Dropping Low",color:"text-red-600"}}}return{status:"UNKNOWN",direction:s,label:r>0?"Increasing":"Decreasing",color:"text-slate-500"}},B0=(t,e=!1)=>{if(!t)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[i,r,s]=t.split("-").map(Number),a=new Date(i,r-1,s);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",...e?{year:"numeric"}:{}}).format(a)}const n=new Date(t);return isNaN(n.getTime())?t:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",...e?{year:"numeric"}:{}}).format(n)},gle=({data:t,testName:e,onChipClick:n})=>{const[i,r]=M.useState(!1),s=M.useMemo(()=>mle(t),[t]);if(t.length===0)return null;const a=[...t].sort((I,k)=>new Date(I.date).getTime()-new Date(k.date).getTime()),l=a[a.length-1],c=l?.unit||"",d=l?.min,f=l?.max,p=l?.description,g=Array.from(new Set(t.map(I=>I.rawName))).filter(Boolean),y=a.map(I=>I.value);d!==void 0&&y.push(d),f!==void 0&&y.push(f);const S=Math.min(...y),w=Math.max(...y),x=(w-S)*.1,E=[Math.floor(S-x),Math.ceil(w+x)];let C="text-slate-900",T="bg-slate-50",N="NORMAL";(d!==void 0||f!==void 0)&&(f!==void 0&&l.value>f?(C="text-red-600",T="bg-red-50",N="HIGH"):d!==void 0&&l.value<d?(C="text-amber-600",T="bg-amber-50",N="LOW"):(C="text-green-600",T="bg-green-50"));const R=({active:I,payload:k,label:B})=>{if(I&&k&&k.length){"vibrate"in navigator&&navigator.vibrate(10);const z=k[0].payload;return D.jsxs("div",{className:"bg-white/95 backdrop-blur-sm p-3 border border-slate-200 shadow-xl rounded-xl text-xs z-50 -translate-y-4",children:[D.jsx("p",{className:"font-semibold mb-1.5 text-slate-700",children:B0(B||"",!0)}),D.jsxs("p",{className:"text-blue-600 font-bold text-base",children:[k[0].value," ",D.jsx("span",{className:"font-normal text-slate-500 text-xs",children:c})]}),(d!==void 0||f!==void 0)&&D.jsxs("p",{className:"text-slate-400 mt-1",children:["Ref: ",d!==void 0?d:"0"," - ",f!==void 0?f:""]}),D.jsx("p",{className:"text-slate-500 mt-1 italic truncate max-w-[150px]",children:z.rawName})]})}return null};return D.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-full overflow-hidden transition-shadow hover:shadow-md relative",children:[i&&p&&D.jsxs("div",{className:"absolute top-12 left-4 right-4 bg-slate-800 text-white text-xs p-3 rounded-lg shadow-xl z-20 animate-in fade-in zoom-in-95 duration-200",children:[D.jsxs("div",{className:"font-semibold mb-1 text-slate-200",children:["About ",e]}),p,D.jsx("div",{className:"absolute -top-1 left-2 w-2 h-2 bg-slate-800 transform rotate-45"})]}),D.jsxs("div",{className:"p-4 border-b border-slate-50 flex justify-between items-start",children:[D.jsxs("div",{className:"min-w-0 flex-1 mr-2",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("h3",{className:"text-sm font-semibold text-slate-700 truncate",title:e,children:e}),p&&D.jsx("button",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!i),className:"text-slate-400 hover:text-blue-500 transition-colors",children:D.jsx(hz,{className:"w-3.5 h-3.5"})})]}),D.jsxs("div",{className:"flex items-baseline mt-1 space-x-2",children:[D.jsxs("div",{children:[D.jsx("span",{className:`text-2xl font-bold ${C}`,children:l.value}),D.jsx("span",{className:"text-xs font-medium text-slate-400 ml-1",children:c})]}),s.status!=="STABLE"&&s.status!=="UNKNOWN"&&D.jsxs("div",{className:`flex items-center text-[10px] font-bold px-1.5 py-0.5 rounded-full bg-slate-50 ${s.color}`,children:[s.direction==="up"?D.jsx(Hz,{className:"w-3 h-3 mr-1"}):s.direction==="down"?D.jsx(Fz,{className:"w-3 h-3 mr-1"}):D.jsx(Sz,{className:"w-3 h-3 mr-1"}),s.label]})]})]}),D.jsx("div",{className:`px-2 py-1 rounded text-[10px] font-bold tracking-wide ${T} ${C}`,children:N})]}),D.jsx("div",{className:"flex-1 w-full min-h-[180px] p-2 overflow-x-auto",children:D.jsx("div",{className:"min-w-[350px] md:min-w-0 h-full",style:{minHeight:a.length>5?"220px":"180px"},children:D.jsx(pW,{width:"100%",height:"100%",children:D.jsxs(ple,{data:a,margin:{top:10,right:30,left:0,bottom:a.length>5?30:0},children:[D.jsx(BU,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),D.jsx(KU,{dataKey:"date",tickFormatter:I=>B0(I,!1),tick:{fontSize:10,fill:"#94a3b8"},axisLine:!1,tickLine:!1,dy:10,minTickGap:30}),D.jsx(WU,{hide:!1,domain:E,padding:{top:0,bottom:0},tick:{fontSize:10,fill:"#94a3b8"},width:30,axisLine:!1,tickLine:!1}),D.jsx(sne,{content:D.jsx(R,{}),cursor:{stroke:"#cbd5e1",strokeWidth:1,strokeDasharray:"4 4"},offset:60,position:{y:0}}),(d!==void 0||f!==void 0)&&D.jsx(kU,{y1:d??0,y2:f??void 0,fill:"#dcfce7",fillOpacity:.3,strokeOpacity:0,ifOverflow:"extendDomain"}),d!==void 0&&D.jsx(dA,{y:d,stroke:"#16a34a",strokeDasharray:"4 4",strokeOpacity:.8,strokeWidth:1,ifOverflow:"extendDomain"}),f!==void 0&&D.jsx(dA,{y:f,stroke:"#16a34a",strokeDasharray:"4 4",strokeOpacity:.8,strokeWidth:1,ifOverflow:"extendDomain"}),D.jsx(YU,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2.5,activeDot:{r:5,strokeWidth:2,fill:"#fff",stroke:"#3b82f6"},dot:{r:3,strokeWidth:1.5,fill:"#fff",stroke:"#3b82f6"},animationDuration:500}),a.length>5&&D.jsx(MU,{dataKey:"date",height:20,stroke:"#3b82f6",fill:"#f1f5f9",tickFormatter:I=>B0(I,!1)})]})})})}),g.length>0&&D.jsx("div",{className:"px-4 pb-3 pt-2 flex flex-wrap gap-2 border-t border-slate-50 bg-slate-50/30",children:g.map(I=>D.jsxs("button",{onClick:()=>{const k=a.find(B=>B.rawName===I);k&&n&&n(k.reportId)},className:"inline-flex items-center px-2 py-1 rounded bg-white border border-slate-200 shadow-sm text-[10px] text-slate-500 hover:text-blue-600 hover:border-blue-300 transition-colors",title:`Go to report: ${I}`,children:[D.jsx(CI,{className:"w-3 h-3 mr-1 opacity-50"}),I]},I))})]})},Fa=[{target:"center",title:"Welcome to MediJourney",content:"Your personal AI-powered health assistant. Upload your lab reports to visualize your health trends over time.",position:"center"},{target:'[data-tour="upload-section"]',title:"Upload Reports",content:"Start by dragging and dropping your PDF or Image medical reports here. The AI will extract all data automatically.",position:"right"},{target:'[data-tour="dashboard-view"]',title:"Health Dashboard",content:"Your extracted test results will appear here as interactive charts. You can track values, see reference ranges, and monitor changes.",position:"center"},{target:'[data-tour="settings-nav"]',title:"Settings & Mappings",content:"Configure your API key here. You can also fix any test name mismatches manually if the AI gets confused.",position:"center"}],vle=({onComplete:t})=>{const[e,n]=M.useState(0),[i,r]=M.useState({});M.useEffect(()=>{const l=()=>{const c=Fa[e];if(c.position==="center"){r({top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"});return}const d=document.querySelector(c.target);if(d){const f=d.getBoundingClientRect();let p=0,g=0;const y=12;switch(c.position){case"right":p=f.top+f.height/2,g=f.right+y,r({top:p,left:g,transform:"translate(0, -50%)",position:"fixed"});break;case"left":p=f.top+f.height/2,g=f.left-y,r({top:p,left:g,transform:"translate(-100%, -50%)",position:"fixed"});break;case"bottom":p=f.bottom+y,g=f.left+f.width/2,r({top:p,left:g,transform:"translate(-50%, 0)",position:"fixed"});break;case"top":p=f.top-y,g=f.left+f.width/2,r({top:p,left:g,transform:"translate(-50%, -100%)",position:"fixed"});break}}else r({top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"})};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e]);const s=Fa[e],a=()=>{e<Fa.length-1?n(l=>l+1):t()};return D.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[D.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-[1px] pointer-events-auto transition-opacity duration-500"}),D.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-2xl border border-slate-200 pointer-events-auto w-80 max-w-[90vw] transition-all duration-300 ease-out z-50",style:i,children:[D.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-slate-400 hover:text-slate-600",children:D.jsx(gh,{className:"w-4 h-4"})}),D.jsxs("div",{className:"mb-4",children:[D.jsxs("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-[10px] font-bold uppercase tracking-wider rounded-md mb-2",children:["Tip ",e+1," of ",Fa.length]}),D.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),D.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:s.content})]}),D.jsxs("div",{className:"flex justify-between items-center mt-6",children:[D.jsx("div",{className:"flex gap-1.5",children:Fa.map((l,c)=>D.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${c===e?"w-6 bg-blue-600":"w-1.5 bg-slate-200"}`},c))}),D.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white text-sm font-medium rounded-lg hover:bg-slate-800 transition-colors shadow-lg shadow-slate-200",children:[e===Fa.length-1?"Get Started":"Next",e===Fa.length-1?D.jsx(EI,{className:"w-3 h-3"}):D.jsx(Y3,{className:"w-3 h-3"})]})]})]})]})},yle=({images:t,onConfirm:e,onCancel:n})=>{const[i,r]=M.useState(new Set),s=c=>{r(d=>{const f=new Set(d);return f.has(c)?f.delete(c):f.add(c),f})},a=()=>{const c=t.filter((d,f)=>!i.has(f));e(c)},l=t.length-i.size;return D.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:D.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[D.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[D.jsxs("div",{children:[D.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[D.jsx(iz,{className:"w-5 h-5 text-blue-600"}),"PDF Conversion Preview"]}),D.jsx("p",{className:"text-xs text-slate-500",children:"Click the X on any page to exclude it from analysis."})]}),D.jsx("div",{className:"flex items-center gap-2",children:D.jsxs("p",{className:`text-xs font-mono px-2 py-1 rounded ${i.size>0?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[l," of ",t.length," Page(s) Selected"]})})]}),D.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100/50",children:D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((c,d)=>{const f=i.has(d);return D.jsxs("div",{className:"space-y-2",children:[D.jsxs("div",{className:"flex justify-between items-center",children:[D.jsxs("div",{className:`text-xs font-semibold uppercase tracking-wider pl-1 ${f?"text-slate-400 line-through":"text-slate-500"}`,children:["Page ",d+1]}),D.jsx("button",{onClick:()=>s(d),className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium transition-all ${f?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,children:f?D.jsxs(D.Fragment,{children:[D.jsx(Mz,{className:"w-3 h-3"}),"Restore"]}):D.jsxs(D.Fragment,{children:[D.jsx(_T,{className:"w-3 h-3"}),"Exclude"]})})]}),D.jsxs("div",{className:`relative group rounded-xl overflow-hidden shadow-sm border bg-white transition-all ${f?"border-red-200 opacity-40 grayscale":"border-slate-200"}`,children:[D.jsx("img",{src:`data:image/jpeg;base64,${c}`,alt:`Page ${d+1}`,className:"w-full h-auto"}),f&&D.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:D.jsxs("div",{className:"bg-red-500/80 text-white px-3 py-1.5 rounded-lg text-sm font-bold flex items-center gap-1.5 shadow-lg",children:[D.jsx(_T,{className:"w-4 h-4"}),"EXCLUDED"]})})]})]},d)})})}),D.jsxs("div",{className:"p-4 border-t border-slate-100 bg-white flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3",children:[D.jsx("div",{className:"text-xs text-slate-500",children:i.size>0&&D.jsxs("span",{className:"text-amber-600",children:[i.size," page(s) will not be analyzed"]})}),D.jsxs("div",{className:"flex flex-col-reverse sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto",children:[D.jsxs("button",{onClick:n,className:"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm w-full sm:w-auto",children:[D.jsx(gh,{className:"w-4 h-4"}),"Cancel"]}),D.jsxs("button",{onClick:a,disabled:l===0,className:"px-6 py-2 bg-blue-600 text-white font-medium hover:bg-blue-700 rounded-lg shadow-sm shadow-blue-200 transition-all flex items-center justify-center gap-2 text-sm transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto",children:[D.jsx(EI,{className:"w-4 h-4"}),"Analyze ",l," Page(s)"]})]})]})]})})},ble=Ir.lazy(()=>Bc(()=>import("./Settings-DbEBEfLp.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(t=>({default:t.Settings}))),Ale=Ir.lazy(()=>Bc(()=>import("./ReportDetail-Dcyx8J9f.js"),__vite__mapDeps([3,1]),import.meta.url).then(t=>({default:t.ReportDetail}))),Sle=Ir.lazy(()=>Bc(()=>import("./InsightsView-CictXRGg.js"),[],import.meta.url).then(t=>({default:t.InsightsView}))),wle=Ir.lazy(()=>Bc(()=>import("./HealthChat-MZz1VNRL.js"),[],import.meta.url).then(t=>({default:t.HealthChat}))),_le=Ir.lazy(()=>Bc(()=>import("./PrintReportModal-DyEeGWGg.js").then(t=>t.P),__vite__mapDeps([4,2]),import.meta.url).then(t=>({default:t.PrintReportModal}))),xle=()=>D.jsx("div",{className:"flex items-center justify-center p-12",children:D.jsx(TI,{className:"w-8 h-8 animate-spin text-blue-500"})});function Ele(){const[t,e]=M.useState([]),[n,i]=M.useState([]),[r,s]=M.useState(""),[a,l]=M.useState(null),[c,d]=M.useState(null),[f,p]=M.useState({type:"DASHBOARD"}),[g,y]=M.useState(!1),[S,w]=M.useState(!1),[x,E]=M.useState(null),[C,T]=M.useState(localStorage.getItem("ai_provider")||"gemini"),[N,R]=M.useState(localStorage.getItem("gemini_api_key")||""),[I,k]=M.useState(localStorage.getItem("gemini_model")||""),[B,z]=M.useState(localStorage.getItem("openai_api_key")||""),[V,G]=M.useState(localStorage.getItem("openai_base_url")||"https://api.openai.com/v1"),[W,oe]=M.useState(localStorage.getItem("openai_model")||""),[ae,pe]=M.useState(localStorage.getItem("openai_processing_mode")||"page-by-page"),[F,j]=M.useState(null),[re,ue]=M.useState(!1),[Pe,L]=M.useState(!1),[X,se]=M.useState(""),[ce,Se]=M.useState(""),[Te,ge]=M.useState("Male"),[lt,Z]=M.useState([]),[Ne,Ie]=M.useState({}),[le,ut]=M.useState(!1),[ze,Ft]=M.useState(!0),[zt,Qi]=M.useState(""),[mr,Wl]=M.useState("All"),[Jl,vo]=M.useState(!1);M.useEffect(()=>{m8(),(async()=>{try{await c8();const de=await pb();if(de.length>0){i(de);const Ee=localStorage.getItem("last_profile_id");Ee&&de.find(wt=>wt.id===Ee)?s(Ee):s(de[0].id);const Ve=await mb();e(Ve.sort((wt,_t)=>_t.uploadDate-wt.uploadDate))}else{const Ee={id:"demo",name:"Demo User",age:"30",gender:"Male",createdAt:Date.now()};i([Ee]),s("demo");const Ve=k1();e(Ve)}const we=await gb();Ie(we),localStorage.getItem("has_seen_tour")||ue(!0)}catch(de){console.error("Failed to load local database",de)}})()},[]);const Wn=M.useMemo(()=>t.filter(te=>te.profileId===r),[t,r]);M.useMemo(()=>Wn.some(te=>te.isDemo),[Wn]);const Sm=M.useMemo(()=>t.filter(de=>de.status===Jt.QUEUED).length===0?!1:C==="gemini"?!N:C==="openai"?V&&!V.includes("api.openai.com")?!1:!B:!0,[t,C,N,B,V]),Rt=M.useMemo(()=>{const te={};return Object.entries(Ne).forEach(([de,we])=>{we.forEach(fe=>{te[fe]=de})}),te},[Ne]),gr=M.useMemo(()=>{if(C==="gemini")return!!N&&!!I;{const te=!!W,de=!!B||!!V&&!V.includes("api.openai.com");return te&&de}},[C,N,I,B,V,W]),Ql=async(te,de)=>{E(null);const we=[];for(const fe of te){const Ee=await Tm(fe);we.push({id:crypto.randomUUID(),profileId:de,fileName:fe.name,fileType:fe.type,uploadDate:Date.now(),status:Jt.QUEUED,data:null,rawBase64:`data:${fe.type};base64,${Ee}`})}e(fe=>[...we,...fe]);for(const fe of we)await as(fe)},hd=async()=>{if(!X.trim())return;const te={id:crypto.randomUUID(),name:X,age:ce,gender:Te,createdAt:Date.now()};await d8(te),r==="demo"?(i([te]),e([])):i(fe=>[...fe,te]),s(te.id),localStorage.setItem("last_profile_id",te.id),L(!1),se(""),lt.length>0&&(await Ql(lt,te.id),Z([]));const de=C==="gemini"&&!!N,we=C==="openai"&&(!!B||!!V&&!V.includes("api.openai.com"));!de&&!we&&p({type:"SETTINGS"})},yo=te=>{s(te),localStorage.setItem("last_profile_id",te),p({type:"DASHBOARD"})},wm=async te=>{const de=n.find(fe=>fe.id===te);if(!(!de||!window.confirm(`Are you sure you want to delete the profile "${de.name}"?

This will permanently delete:
 The profile
 All reports associated with this profile

This action cannot be undone.`)))try{if(await f8(te),i(fe=>fe.filter(Ee=>Ee.id!==te)),e(fe=>fe.filter(Ee=>Ee.profileId!==te)),r===te){const fe=n.filter(Ee=>Ee.id!==te);if(fe.length>0)s(fe[0].id),localStorage.setItem("last_profile_id",fe[0].id);else{const Ee={id:"demo",name:"Demo User",age:"30",gender:"Other",createdAt:Date.now()};i([Ee]),s("demo"),localStorage.removeItem("last_profile_id");const Ve=k1();e(Ve)}}p({type:"DASHBOARD"})}catch(fe){console.error("Failed to delete profile:",fe),alert("Failed to delete profile. Please try again.")}},pd=te=>{R(te),localStorage.setItem("gemini_api_key",te)},_m=te=>{k(te),localStorage.setItem("gemini_model",te)},xm=te=>{z(te),localStorage.setItem("openai_api_key",te)},Aa=te=>{G(te),localStorage.setItem("openai_base_url",te)},Fn=te=>{oe(te),localStorage.setItem("openai_model",te)},vr=te=>{pe(te),localStorage.setItem("openai_processing_mode",te)},zn=te=>{T(te),localStorage.setItem("ai_provider",te)},Em=async()=>{const te=await mb();e(te.sort((fe,Ee)=>Ee.uploadDate-fe.uploadDate));const de=await gb();Ie(de);const we=await pb();i(we),we.length>0&&(!(r&&we.find(Ee=>Ee.id===r))||r==="demo")&&(s(we[0].id),localStorage.setItem("last_profile_id",we[0].id))},Tm=te=>new Promise((de,we)=>{const fe=new FileReader;fe.readAsDataURL(te),fe.onload=()=>{const Ve=fe.result.split(",")[1];de(Ve)},fe.onerror=Ee=>we(Ee)}),Cm=async te=>{if(E(null),!gr){E("Please configure an AI model in Settings before uploading reports."),p({type:"SETTINGS"});return}if(r==="demo"){Z(te),L(!0);return}if(!r){E("Please select or create a profile first.");return}await Ql(te,r)};M.useEffect(()=>{(async()=>{if(g||a)return;const de=t.find(fe=>fe.status===Jt.QUEUED);if(!de||!de.rawBase64||C==="gemini"&&!N)return;if(C==="openai"&&de.fileType==="application/pdf"){y(!0);try{const fe=de.rawBase64.split(",")[1],Ee=await nO(fe);l(Ee),d(de.id)}catch(fe){console.error("PDF Preview Failed",fe)}finally{y(!1)}return}y(!0);const we={...de,status:Jt.PROCESSING};e(fe=>fe.map(Ee=>Ee.id===de.id?we:Ee)),await as(we);try{const fe=de.rawBase64.split(",")[1],Ee={provider:C,apiKey:C==="gemini"?N:B,baseUrl:C==="openai"?V:void 0,modelId:C==="gemini"?I:W},Ve=await O1(fe,de.fileType,Ee),wt={...de,status:Jt.COMPLETED,data:Ve};e(_t=>_t.map(Dt=>Dt.id===de.id?wt:Dt)),await as(wt),Is([wt])}catch(fe){console.error(`Error processing report ${de.id}:`,fe);const Ee={...de,status:Jt.ERROR,errorMessage:fe.message||"Failed to analyze report"};e(Ve=>Ve.map(wt=>wt.id===de.id?Ee:wt)),await as(Ee)}finally{y(!1)}})()},[t,g,C,N,I,B,V,W,a]);const bo=async te=>{if(!c||!te||te.length===0)return;const de=t.find(we=>we.id===c);if(de){l(null),d(null),y(!0),j(null);try{const we={...de,status:Jt.PROCESSING};e(wt=>wt.map(_t=>_t.id===c?we:_t)),await as(we);const Ee=await O1(te,"image/jpeg",{provider:"openai",apiKey:B,baseUrl:V,modelId:W},{processingMode:ae,onProgress:(wt,_t)=>j({current:wt,total:_t})});j(null);const Ve={...de,status:Jt.COMPLETED,data:Ee};e(wt=>wt.map(_t=>_t.id===c?Ve:_t)),await as(Ve),Is([Ve])}catch(we){console.error(`Error analyzing converted PDF ${c}:`,we);const fe={...de,status:Jt.ERROR,errorMessage:we.message||"Failed to analyze converted PDF"};e(Ee=>Ee.map(Ve=>Ve.id===c?fe:Ve)),await as(fe)}finally{y(!1),j(null)}}},Ao=async()=>{if(!c)return;const te=t.find(de=>de.id===c);if(te){const de={...te,status:Jt.ERROR,errorMessage:"User cancelled PDF analysis."};e(we=>we.map(fe=>fe.id===c?de:fe)),await as(de)}l(null),d(null)},Is=async(te,de=!1)=>{if(C==="gemini"&&!N||S)return;const we=new Set;te.forEach(Ee=>{Ee.data?.results.forEach(Ve=>{we.add(Ve.testName),Ve.standardizedName&&we.add(Ve.standardizedName)})});const fe=de?Array.from(we):Array.from(we).filter(Ee=>!Rt[Ee]);if(fe.length>0){w(!0);try{const Ve=await u8(fe,Ne,{provider:C,apiKey:C==="gemini"?N:B,baseUrl:C==="openai"?V:void 0,modelId:C==="gemini"?I:W});Ie(Ve),await p8(Ve)}catch(Ee){console.error("Optimization error",Ee)}finally{w(!1)}}},Hr=async te=>{await h8(te),e(de=>de.filter(we=>we.id!==te)),f.type==="REPORT_DETAIL"&&f.reportId===te&&p({type:"DASHBOARD"})},Sa=te=>{p({type:"REPORT_DETAIL",reportId:te})},Zi=M.useMemo(()=>{const te={},de=new Map;Wn.forEach(fe=>{fe.data&&fe.data.results.forEach(Ee=>{const Ve=Ee.category||"Uncategorized",wt=Ee.testName.trim(),_t=Ee.standardizedName.trim(),Dt=Rt[wt]||Rt[_t]||_t||wt;de.set(Dt,Ve)})}),de.forEach((fe,Ee)=>{const Ve=zt.toLowerCase();(Ee.toLowerCase().includes(Ve)||fe.toLowerCase().includes(Ve))&&(mr==="All"||fe===mr)&&(te[fe]||(te[fe]=new Set),te[fe].add(Ee))});const we={};return Object.keys(te).sort().forEach(fe=>{we[fe]=Array.from(te[fe]).sort()}),we},[Wn,zt,mr,Rt]),md=M.useMemo(()=>{const te=new Set;return Wn.forEach(de=>de.data?.results.forEach(we=>{we.category&&te.add(we.category)})),Array.from(te).sort()},[Wn]),So=te=>Wn.filter(de=>de.status===Jt.COMPLETED&&de.data).map(de=>{const we=de.data.results.find(fe=>{const Ee=fe.testName.trim(),Ve=fe.standardizedName.trim();return(Rt[Ee]||Rt[Ve]||Ve||Ee)===te});return we?{date:de.data.reportDate||new Date(de.uploadDate).toISOString().split("T")[0],value:we.value,unit:we.unit,min:we.referenceRange?.min,max:we.referenceRange?.max,reportId:de.id,description:we.description,rawName:we.testName}:null}).filter(de=>de!==null),Zl=M.useMemo(()=>{const te=[];return Object.values(Zi).forEach(de=>te.push(...de)),te},[Zi]),yr=()=>n.find(te=>te.id===r),Mm=()=>{if(f.type==="REPORTS")return D.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[D.jsxs("div",{className:"flex justify-between items-end",children:[D.jsxs("div",{children:[D.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"My Reports"}),D.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[D.jsxs("p",{className:"text-slate-500",children:["Files for ",yr()?.name||"User"]}),D.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium border flex items-center gap-1
                    ${C==="gemini"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200"}`,children:[C==="gemini"?D.jsx(ac,{className:"w-3 h-3"}):D.jsx(xT,{className:"w-3 h-3"}),(C==="gemini"?I:W)||"Not Set"]})]})]}),D.jsxs("div",{className:"text-sm font-medium bg-slate-100 text-slate-600 px-3 py-1 rounded-full",children:[Wn.length," Files"]})]}),D.jsxs("div",{className:`bg-white rounded-2xl p-6 border shadow-sm transition-opacity ${!gr||r==="demo"?"border-slate-200 opacity-60":"border-slate-200"}`,"data-tour":"upload-section",children:[D.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[D.jsx($v,{className:"w-5 h-5 text-blue-500"}),"Upload New Reports"]}),!gr||r==="demo"?D.jsxs("div",{className:"text-center py-6",children:[D.jsx("div",{className:"bg-slate-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:D.jsx(Yv,{className:"w-6 h-6 text-slate-400"})}),D.jsx("p",{className:"text-sm text-slate-600 font-medium mb-1",children:"Setup Required"}),D.jsx("p",{className:"text-xs text-slate-400 mb-4",children:r==="demo"?"Create your profile to upload reports":"Configure AI model to analyze reports"}),D.jsx("button",{onClick:()=>r==="demo"?L(!0):p({type:"SETTINGS"}),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:r==="demo"?"Create Profile":"Configure AI"})]}):D.jsx(g8,{onFileSelect:Cm}),x&&D.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-700 text-xs rounded-lg flex items-start",children:[D.jsx(Yv,{className:"w-4 h-4 mr-1.5 flex-shrink-0 mt-0.5"}),x]})]}),D.jsxs("div",{children:[D.jsx("h3",{className:"font-semibold text-slate-800 mb-4",children:"Uploaded Files"}),Sm&&D.jsxs("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:"bg-amber-100 p-2 rounded-lg text-amber-600",children:D.jsx(Yv,{className:"w-5 h-5"})}),D.jsxs("div",{children:[D.jsx("h4",{className:"text-sm font-bold text-amber-900",children:"Processing Paused"}),D.jsx("p",{className:"text-xs text-amber-700",children:"Reports are queued but no API Key is set."})]})]}),D.jsxs("button",{onClick:()=>p({type:"SETTINGS"}),className:"px-4 py-2 bg-amber-600 text-white text-xs font-bold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-1",children:["Go to Settings ",D.jsx(z3,{className:"w-3 h-3"})]})]}),D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:D.jsx("div",{className:"md:col-span-2 xl:col-span-3",children:D.jsx(v8,{reports:Wn,onDelete:Hr,onSelect:te=>p({type:"REPORT_DETAIL",reportId:te}),selectedId:null,analysisProgress:F})})})]})]});if(f.type==="SETTINGS")return D.jsx(ble,{onDataImported:Em,mapping:Rt,onMappingUpdate:()=>{},triggerGrounding:()=>Is(t,!0),isOptimizing:S,aiProvider:C,onProviderChange:zn,geminiApiKey:N,onGeminiKeyChange:pd,geminiModelId:I,onGeminiModelChange:_m,openaiApiKey:B,onOpenAIKeyChange:xm,openaiBaseUrl:V,onOpenAIBaseUrlChange:Aa,openaiModelId:W,onOpenAIModelChange:Fn,openaiProcessingMode:ae,onOpenAIProcessingModeChange:vr});if(f.type==="REPORT_DETAIL"){const te=t.find(de=>de.id===f.reportId);return te?D.jsx(Ale,{report:te,onBack:()=>p({type:"REPORTS"}),onUpdate:async de=>{await as(de),e(we=>we.map(fe=>fe.id===de.id?de:fe))}}):D.jsxs("div",{className:"text-center py-20",children:[D.jsx("p",{className:"text-slate-500",children:"Report not found."}),D.jsx("button",{onClick:()=>p({type:"DASHBOARD"}),className:"mt-4 text-blue-600 hover:underline",children:"Go to Dashboard"})]})}return f.type==="INSIGHTS"?D.jsx(Sle,{getChartData:So,allTestNames:Zl,onChipClick:Sa}):D.jsx("div",{"data-tour":"dashboard-view",children:Object.keys(Zi).length>0?D.jsxs("div",{className:"space-y-12",children:[(r==="demo"||!gr)&&D.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 px-5 py-5 rounded-xl shadow-lg animate-in fade-in slide-in-from-top-2",children:[D.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[D.jsx(ac,{className:"w-4 h-4 text-blue-400"}),"Get Started with MediJourney"]}),D.jsxs("div",{className:"space-y-2",children:[D.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${r!=="demo"?"bg-green-500/20 border border-green-500/30":"bg-white/10"}`,children:[D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${r!=="demo"?"bg-green-500 text-white":"bg-white/20 text-white"}`,children:r!=="demo"?"":"1"}),D.jsxs("div",{children:[D.jsx("p",{className:"text-sm font-medium text-white",children:"Create Your Profile"}),D.jsx("p",{className:"text-xs text-slate-400",children:"Required to save your health data"})]})]}),r==="demo"&&D.jsx("button",{onClick:()=>L(!0),className:"px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Create Profile"})]}),D.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${gr?"bg-green-500/20 border border-green-500/30":"bg-white/10"}`,children:[D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${gr?"bg-green-500 text-white":"bg-white/20 text-white"}`,children:gr?"":"2"}),D.jsxs("div",{children:[D.jsx("p",{className:"text-sm font-medium text-white",children:"Configure AI Model"}),D.jsx("p",{className:"text-xs text-slate-400",children:"Required to analyze reports"})]})]}),!gr&&D.jsx("button",{onClick:()=>p({type:"SETTINGS"}),className:"px-3 py-1.5 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Configure"})]})]}),r==="demo"&&D.jsx("p",{className:"text-xs text-slate-400 mt-3 text-center",children:"You're viewing demo data. Complete the steps above to start tracking your own health."})]}),S&&D.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 animate-in slide-in-from-bottom-5",children:[D.jsx(ac,{className:"w-5 h-5 animate-spin"}),D.jsxs("div",{className:"text-sm font-medium",children:["Optimizing Health Index...",D.jsx("div",{className:"text-xs opacity-80",children:"Merging duplicate test names"})]})]}),D.jsx("div",{className:"space-y-10",children:Object.entries(Zi).map(([te,de])=>D.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[D.jsxs("h3",{className:"text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2 border-b border-slate-200 pb-2",children:[D.jsx("span",{className:"bg-slate-100 p-1 rounded text-slate-500",children:D.jsx(ET,{className:"w-4 h-4"})}),te]}),D.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:de.map(we=>D.jsx("div",{className:"h-auto",children:D.jsx(gle,{data:So(we),testName:we,onChipClick:Sa})},we))})]},te))})]}):D.jsx("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center text-slate-400 animate-in zoom-in-95 duration-500",children:D.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-200 mb-6",children:[D.jsx("div",{className:"bg-blue-50 p-4 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:D.jsx(jv,{className:"w-10 h-10 text-blue-500"})}),D.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:["Hi, ",yr()?.name||"User"]}),D.jsx("p",{className:"max-w-xs mx-auto text-slate-500 leading-relaxed mb-6",children:"Start your health journey by uploading your first medical report (PDF or Image)."}),D.jsx("div",{className:"flex flex-col gap-3",children:D.jsxs("button",{onClick:()=>p({type:"REPORTS"}),className:"flex items-center justify-center gap-2 px-5 py-2.5 bg-slate-900 text-white font-medium rounded-xl hover:bg-slate-800 transition-colors shadow-lg shadow-slate-200",children:[D.jsx($v,{className:"w-4 h-4"}),"Go to Reports"]})})]})})})};return D.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col md:flex-row text-slate-800 font-sans relative",children:[re&&D.jsx(vle,{onComplete:()=>{ue(!1),localStorage.setItem("has_seen_tour","true")}}),a&&D.jsx(yle,{images:a,onConfirm:bo,onCancel:Ao}),g&&D.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] bg-slate-900/90 text-white pl-4 pr-6 py-3 rounded-full shadow-2xl backdrop-blur-md flex items-center gap-3 animate-in slide-in-from-bottom-10 fade-in duration-300",children:[D.jsxs("div",{className:"relative",children:[D.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-25"}),D.jsx("div",{className:"bg-blue-600 rounded-full p-2 relative z-10",children:D.jsx(TI,{className:"w-5 h-5 animate-spin text-white"})})]}),D.jsxs("div",{children:[D.jsx("div",{className:"font-bold text-sm",children:F?`Analyzing Page ${F.current} of ${F.total}...`:"Analyzing Report..."}),D.jsxs("div",{className:"text-[10px] text-slate-300",children:["Using ",(C==="gemini"?I:W)||"No model selected"]})]})]}),Pe&&D.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:D.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-full max-w-md scale-100",children:[D.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"Create Health Profile"}),D.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"To save your reports securely, please create a personal profile."}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name *"}),D.jsx("input",{type:"text",value:X,onChange:te=>se(te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. John Doe"})]}),D.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Age"}),D.jsx("input",{type:"number",value:ce,onChange:te=>Se(te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Gender"}),D.jsxs("select",{value:Te,onChange:te=>ge(te.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",children:[D.jsx("option",{children:"Male"}),D.jsx("option",{children:"Female"}),D.jsx("option",{children:"Other"})]})]})]})]}),D.jsx("button",{onClick:hd,disabled:!X.trim(),className:"mt-8 w-full bg-blue-600 text-white py-2.5 rounded-xl font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Create Profile & Continue"}),D.jsx("button",{onClick:()=>{L(!1),Z([])},className:"mt-3 w-full text-slate-500 text-sm hover:text-slate-700",children:"Cancel"})]})}),D.jsx(Ir.Suspense,{fallback:null,children:D.jsx(wle,{aiProvider:C,apiKey:C==="gemini"?N:B,baseUrl:C==="openai"?V:void 0,modelId:C==="gemini"?I:W,reports:Wn,mapping:Rt})}),D.jsxs("div",{className:"md:hidden bg-white border-b border-slate-200 p-4 flex justify-between items-center sticky top-0 z-30",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("div",{className:"bg-blue-600 p-1.5 rounded-lg",children:D.jsx(jv,{className:"text-white w-4 h-4"})}),D.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"MediJourney"})]}),D.jsx("button",{onClick:()=>ut(!le),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:le?D.jsx(gh,{className:"w-6 h-6"}):D.jsx(bz,{className:"w-6 h-6"})})]}),le&&D.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-30 md:hidden",onClick:()=>ut(!1)}),D.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-40 bg-white border-r border-slate-200 flex flex-col transition-all duration-300 ease-in-out
        ${le?"translate-x-0 shadow-xl":"-translate-x-full shadow-none"}
        md:translate-x-0 md:static md:h-screen md:sticky md:top-0
        ${ze?"md:w-64":"md:w-0 md:overflow-hidden md:border-r-0"}
      `,children:[D.jsxs("div",{className:"p-6 border-b border-slate-100 hidden md:flex justify-between items-center min-w-[16rem]",children:[D.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>p({type:"DASHBOARD"}),children:[D.jsx("div",{className:"bg-blue-600 p-2 rounded-lg shadow-blue-200 shadow-md",children:D.jsx(jv,{className:"text-white w-5 h-5"})}),D.jsx("h1",{className:"text-xl font-bold tracking-tight text-slate-900",children:"MediJourney"})]}),D.jsx("button",{onClick:()=>Ft(!1),className:"p-1.5 text-slate-400 hover:bg-slate-100 rounded-lg transition-colors",title:"Collapse Sidebar",children:D.jsx(j3,{className:"w-5 h-5"})})]}),D.jsx("div",{className:"p-4 border-b border-slate-100",children:D.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100",children:[D.jsxs("div",{className:"flex items-center justify-between mb-2",children:[D.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:"Current Profile"}),r!=="demo"&&D.jsx("button",{onClick:()=>L(!0),className:"text-blue-600 hover:bg-blue-50 p-1 rounded transition-colors",title:"Add Profile",children:D.jsx(xz,{className:"w-3 h-3"})})]}),r==="demo"?D.jsxs("div",{className:"space-y-2",children:[D.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 bg-amber-50 border border-amber-200 rounded-lg",children:[D.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),D.jsx("span",{className:"text-sm font-medium text-amber-700",children:"Demo Mode"})]}),D.jsxs("button",{onClick:()=>L(!0),className:"w-full py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[D.jsx(CT,{className:"w-4 h-4"}),"Create Your Profile"]})]}):n.length>0?D.jsx("div",{className:"space-y-1",children:n.map(te=>D.jsxs("div",{className:`group w-full flex items-center gap-2 px-2 py-1.5 rounded-lg text-sm transition-colors
                       ${r===te.id?"bg-white shadow-sm ring-1 ring-slate-200":"hover:bg-slate-200/50"}
                     `,children:[D.jsxs("button",{onClick:()=>yo(te.id),className:"flex-1 flex items-center gap-2 text-left",children:[D.jsx("div",{className:`w-2 h-2 rounded-full ${r===te.id?"bg-green-500":"bg-slate-300"}`}),D.jsx("span",{className:`truncate ${r===te.id?"font-medium text-slate-900":"text-slate-500"}`,children:te.name})]}),D.jsx("button",{onClick:de=>{de.stopPropagation(),wm(te.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-all",title:"Delete profile",children:D.jsx(MI,{className:"w-3 h-3"})})]},te.id))}):D.jsx("div",{className:"text-xs text-slate-400 italic",children:"No profiles"})]})}),D.jsx("div",{className:"flex-1 md:hidden"}),D.jsxs("div",{className:"flex flex-col min-w-[16rem] md:min-w-[16rem] md:flex-1 overflow-y-auto py-6 px-4 space-y-2",children:[D.jsxs("button",{onClick:()=>{p({type:"DASHBOARD"}),ut(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="DASHBOARD"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[D.jsx(ET,{className:"w-5 h-5"}),D.jsx("span",{className:"font-medium",children:"Dashboard"})]}),D.jsxs("button",{onClick:()=>{p({type:"REPORTS"}),ut(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="REPORTS"||f.type==="REPORT_DETAIL"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[D.jsx($v,{className:"w-5 h-5"}),D.jsx("span",{className:"font-medium",children:"My Reports"})]}),D.jsxs("button",{onClick:()=>{p({type:"INSIGHTS"}),ut(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="INSIGHTS"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[D.jsx(gz,{className:"w-5 h-5"}),D.jsx("span",{className:"font-medium",children:"Insights"})]}),D.jsx("div",{className:"my-4 border-t border-slate-100 mx-2"}),D.jsxs("button",{onClick:()=>{p({type:"SETTINGS"}),ut(!1)},"data-tour":"settings-nav",className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors
                 ${f.type==="SETTINGS"?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100":"text-slate-600 hover:bg-slate-50"}
               `,children:[D.jsx(Iz,{className:"w-5 h-5"}),D.jsx("span",{className:"font-medium",children:"Settings"})]}),D.jsx("div",{className:"hidden md:block mt-auto pt-10",children:D.jsxs("div",{className:"bg-green-50 p-4 rounded-xl flex flex-col gap-2",children:[D.jsxs("div",{className:"flex items-center gap-2 text-green-800 font-bold text-xs uppercase tracking-wider",children:[D.jsx(Oz,{className:"w-4 h-4"})," Privacy First"]}),D.jsx("p",{className:"text-[10px] text-green-700 leading-tight opacity-90",children:"Your medical data is stored locally on this device. We do not host your files."})]})}),D.jsxs("button",{onClick:()=>ut(!1),className:"md:hidden mt-4 w-full py-3 bg-slate-100 text-slate-600 font-medium rounded-xl flex items-center justify-center gap-2 hover:bg-slate-200 transition-colors",children:[D.jsx(gh,{className:"w-5 h-5"}),"Close Menu"]})]})]}),D.jsxs("main",{className:"flex-1 p-4 md:p-8 overflow-y-auto h-[calc(100vh-65px)] md:h-screen scroll-smooth",children:[f.type==="DASHBOARD"&&D.jsxs("header",{className:"mb-8 flex flex-col lg:flex-row lg:items-end justify-between gap-4",children:[D.jsxs("div",{className:"flex items-start gap-4",children:[!ze&&D.jsx("button",{onClick:()=>Ft(!0),className:"hidden md:flex p-2 bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-300 rounded-lg transition-colors items-center justify-center shadow-sm",title:"Expand Sidebar",children:D.jsx(TT,{className:"w-5 h-5"})}),D.jsxs("div",{children:[D.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Health Dashboard"}),D.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[D.jsx(CT,{className:"w-4 h-4 text-slate-400"}),D.jsx("span",{className:"text-sm text-slate-600 font-medium",children:yr()?.name||"Loading..."}),D.jsx("span",{className:"text-slate-300",children:""}),D.jsxs("span",{className:"text-sm text-slate-500",children:[Wn.length," reports analyzed"]}),D.jsx("span",{className:"text-slate-300",children:""}),D.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium border flex items-center gap-1
                    ${C==="gemini"?"bg-blue-50 text-blue-700 border-blue-200":"bg-green-50 text-green-700 border-green-200"}`,children:[C==="gemini"?D.jsx(ac,{className:"w-3 h-3"}):D.jsx(xT,{className:"w-3 h-3"}),(C==="gemini"?I:W)||"Not Set"]})]})]})]}),md.length>0&&D.jsxs("div",{className:"flex flex-wrap gap-2 w-full lg:w-auto",children:[D.jsxs("div",{className:"relative flex-1 min-w-[120px] max-w-[200px]",children:[D.jsx(Rz,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),D.jsx("input",{type:"text",placeholder:"Search tests...",value:zt,onChange:te=>Qi(te.target.value),className:"w-full pl-9 pr-3 py-2 bg-white border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),D.jsxs("div",{className:"relative flex-1 min-w-[100px] max-w-[160px]",children:[D.jsx(oz,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),D.jsxs("select",{value:mr,onChange:te=>Wl(te.target.value),className:"w-full pl-9 pr-6 py-2 bg-white border border-slate-300 rounded-lg text-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500",children:[D.jsx("option",{value:"All",children:"All Categories"}),md.map(te=>D.jsx("option",{value:te,children:te},te))]})]}),D.jsxs("button",{onClick:()=>vo(!0),className:"px-3 py-2 bg-white border border-slate-300 rounded-lg text-sm text-slate-600 hover:text-blue-600 hover:border-blue-400 transition-colors flex items-center gap-1.5 whitespace-nowrap",title:"Export to PDF",children:[D.jsx(Tz,{className:"w-4 h-4"}),D.jsx("span",{children:"Export"})]})]})]}),f.type!=="DASHBOARD"&&!ze&&D.jsx("button",{onClick:()=>Ft(!0),className:"hidden md:flex p-2 absolute top-8 left-8 z-20 bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-300 rounded-lg transition-colors items-center justify-center shadow-sm",title:"Expand Sidebar",children:D.jsx(TT,{className:"w-5 h-5"})}),D.jsx(Ir.Suspense,{fallback:D.jsx(xle,{}),children:Mm()}),D.jsx(Ir.Suspense,{fallback:null,children:D.jsx(_le,{isOpen:Jl,onClose:()=>vo(!1),reports:Wn,mapping:Rt,groupedMapping:Ne,profileName:yr()?.name||"User",getChartDataForTest:So,testsByCategory:Zi})})]})]})}const oB=document.getElementById("root");if(!oB)throw new Error("Could not find root element to mount to");const Tle=R3.createRoot(oB);Tle.render(D.jsx(Ir.StrictMode,{children:D.jsx(Ele,{})}));export{xT as C,iz as F,TA as G,Sz as M,xz as P,Ir as R,ac as S,CI as T,Vz as U,gh as X,Bc as _,K3 as a,EI as b,He as c,Oz as d,Rle as e,Ple as f,mb as g,Nle as h,Ile as i,D as j,F0 as k,G3 as l,Rz as m,oz as n,mle as o,J3 as p,Fz as q,M as r,gle as s,Hz as t,Br as u,Jt as v,Tz as w,Yv as x,Mle as y};
